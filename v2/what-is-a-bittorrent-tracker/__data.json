{"type":"data","nodes":[null,null,{"type":"data","data":[{"post":1,"allPosts":45},{"title":2,"slug":3,"coverImage":4,"date":5,"updated":6,"excerpt":7,"tags":8,"hidden":12,"draft":12,"keywords":13,"description":14,"html":15,"readingTime":16,"relatedPosts":17},"What is a BitTorrent tracker and types of trackers","what-is-a-bittorrent-tracker","/images/posts/tracker.jpg","2023-10-05T13:42:25.671Z",null,"Basic explanation of what a BitTorrent tracker is and the two types of trackers, public and private.",[9,10,11],"Torrent","Tracker","BitTorrent",false,[11,10,9],"Basic explanation of  what a BitTorrent tracker is and the two types of trackers (public and privates).","\u003Cp data-svelte-h=\"svelte-10idxpu\">Photo by Alex Andrews: \u003Ca href=\"https://www.pexels.com/photo/shallow-focus-photography-of-black-and-silver-compasses-on-top-of-map-1203808/\" rel=\"nofollow\">https://www.pexels.com/photo/shallow-focus-photography-of-black-and-silver-compasses-on-top-of-map-1203808/\u003C/a>.\u003C/p>  \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-1m3njcc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of Contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-1ur0ixx\">\u003Cli>\u003Ca href=\"#introduction\">Introduction\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#what-is-a-bittorrent-tracker\">What is a BitTorrent Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#public-trackers\">Public trackers\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#private-trackers\">Private trackers\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#bittorrent-index-vs-bittorrent-tracker\">BitTorrent Index vs BitTorrent Tracker\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-biflki\">Usually, when we think about Torrents, we think about a program used to download files from a group of people through the internet. But some of those users don’t know what a tracker is.\u003C/p> \u003Cp data-svelte-h=\"svelte-1q1ns8y\">In this article, I will explain a BitTorrent tracker and the two types of trackers (public and private).\u003C/p> \u003Ch2 id=\"what-is-a-bittorrent-tracker\" data-svelte-h=\"svelte-d3fptx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#what-is-a-bittorrent-tracker\">\u003Cspan>#\u003C/span>\u003C/a>What is a BitTorrent Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-10pp3pb\">A BitTorrent tracker is a server (actually an app running on a server) that helps peers who use the BitTorrent protocol share their files.\u003C/p> \u003Cp data-svelte-h=\"svelte-v9c68f\">It is responsible for keeping track of what peer machines (BitTorrent clients and their IPs) have what files and whether they are available or not, so when you add a .torrent file to your torrent client, the tracker lets you know where to start getting parts of that file.\u003C/p> \u003Cp data-svelte-h=\"svelte-1xy4hrv\">It also helps with the communication between peers and data transmission, making the entire process more efficient.\u003C/p> \u003Cp data-svelte-h=\"svelte-sx3ffg\">When downloading files, the client will go back to the tracker every once in a while to send statistics and improve the download speed, as it gets newly updated info about other peers sharing the files.\u003C/p> \u003Ch2 id=\"public-trackers\" data-svelte-h=\"svelte-dmcq3r\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#public-trackers\">\u003Cspan>#\u003C/span>\u003C/a>Public trackers\u003C/h2> \u003Cp data-svelte-h=\"svelte-7157k3\">Public trackers are open to everybody. They don’t require registration, even though some will allow it and provide benefits to those users. They usually contain torrent files about different themes (music, films, games, etc.).\u003C/p> \u003Cp data-svelte-h=\"svelte-o6o11j\">They are the most straightforward way to get torrents, which may be a good starting point for beginners.\u003C/p> \u003Cp data-svelte-h=\"svelte-hoa9e2\">There are also some cons when using public trackers.\u003C/p> \u003Cp data-svelte-h=\"svelte-1bhcqgj\">Malware can be found in torrent files and websites, which many people use. It is the perfect target for people with malicious intentions. You should always check for .exe, .bat or other executable files, and remember to read the comments of the torrent file you want to download.\u003C/p> \u003Cp data-svelte-h=\"svelte-bowkeq\">You can also wait a few days if the torrent is new and let other people test the file and see if they comment about the torrent containing any malware.\u003C/p> \u003Cp data-svelte-h=\"svelte-1risze5\">Another downside regarding security is that if you don’t use methods to avoid tracking, like a VPN, anyone can get access to your IP.\u003C/p> \u003Cp data-svelte-h=\"svelte-15lj26z\">Also, public trackers may attract more attention from authorities. Hence, using public trackers to download illegal stuff has a greater chance of getting you into trouble.\u003C/p> \u003Ch2 id=\"private-trackers\" data-svelte-h=\"svelte-17rz5zd\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#private-trackers\">\u003Cspan>#\u003C/span>\u003C/a>Private trackers\u003C/h2> \u003Cp data-svelte-h=\"svelte-1rscnzn\">Private trackers require registration. Some of them are also hidden, and their access depends on private invitations or a process defined by the tracker. It may include an interview or other means.\u003C/p> \u003Cp data-svelte-h=\"svelte-5w0ux5\">Private trackers usually contain better-quality torrents and hard-to-find ones.\u003C/p> \u003Cp data-svelte-h=\"svelte-djasth\">They might ask you to have a good ratio, so when using them, you need to make sure you share files and download them, which can be cumbersome at times.\u003C/p> \u003Cp data-svelte-h=\"svelte-3lw2c5\">It is still recommended that you use a VPN to increase privacy and security; people can still access your IP if not hidden, and authorities can still lurk around private torrents.\u003C/p> \u003Cp data-svelte-h=\"svelte-pdqcpw\">Also, always be aware of malware on private trackers.\u003C/p> \u003Cp data-svelte-h=\"svelte-13lt0t9\">I also recommend using common sense regarding sharing private information in the interview process, which some private trackers require.\u003C/p> \u003Ch2 id=\"bittorrent-index-vs-bittorrent-tracker\" data-svelte-h=\"svelte-e9n6iu\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#bittorrent-index-vs-bittorrent-tracker\">\u003Cspan>#\u003C/span>\u003C/a>BitTorrent Index vs BitTorrent Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-cg0hge\">It is essential to differentiate between a BitTorrent tracker and an index, as some people use the terms index and tracker indistinctively when, actually, there are two different things.\u003C/p> \u003Cp data-svelte-h=\"svelte-ir9b25\">A BitTorrent index is a website that serves as a directory of classified torrent files where users can search for and download them.\u003C/p> \u003Cp data-svelte-h=\"svelte-1r15vzx\">When you download a torrent file from a BitTorrent index site, it usually contains a list of URLs for trackers where your client can request torrent pieces.\u003C/p> \u003Cp data-svelte-h=\"svelte-gh6p3z\">Often, the index site has an associated tracker that is included in the list of tracker URLs in the torrent file.\u003C/p> \u003Cp data-svelte-h=\"svelte-19dfrv\">A tracker, as previously described above, takes care of efficient data transmission between the peers in the swarm when sharing files using the BitTorrent protocol.\u003C/p> \u003Cp data-svelte-h=\"svelte-b40mrm\">\u003Cstrong>I hope you have found this article useful!\u003C/strong>\u003C/p> \u003Cp data-svelte-h=\"svelte-mcy6nd\">If you have any questions or issues regarding this post, please \u003Ca href=\"https://github.com/torrust/torrust-website/issues/new\" rel=\"nofollow\">open an issue\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19k8tej\">For any other questions or issues related to Torrust repositories, please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r8qk6t\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Backend: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Frontend: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>","4 min read",[18,30,34],{"title":19,"slug":20,"coverImage":21,"date":22,"updated":22,"excerpt":23,"contributor":24,"contributorSlug":25,"tags":26,"hidden":12,"html":28,"readingTime":29},"The Enigmatic Torrent \"Source\" Field","the-enigmatic-torrent-source-field","/images/posts/deprecated-and-outdated-bittorrent-documentation.png","2023-08-08T13:56:28.769Z","Delving into BitTorrent’s Mysteries. What is the \"source\" field in the torrent info used for?","Jose Celano","jose-celano",[11,27],"Protocol","\u003Cp data-svelte-h=\"svelte-1xkmzaz\">The BitTorrent protocol, despite its widespread usage, has often been met with raised eyebrows by the tech community due to its sometimes vague or entirely missing documentation. Today, we’ll dive into one such mystery: the “source” field located within the “info” part of torrent files.\u003C/p>  \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-outevg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-1lmmgud\">\u003Cli>\u003Ca href=\"#unraveling-the-source-field\">Unraveling the “Source” Field\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#source-field-internals\">“Source” field internals\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#bittorrent-documentation-lost-in-the-ether\">BitTorrent Documentation: Lost in the Ether?\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#cross-seeding\">Cross-seeding\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#what-are-the-reliable-sources-for-bittorrent-documentation\">What are the reliable sources for BitTorrent documentation?\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#links\">Links\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#acknowledgments\">Acknowledgments\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-flvomu\">\u003Cstrong>Disclaimer\u003C/strong>: The contents of this blog post, are based on research, community discussions, and available knowledge as of the date of publication. Due to the absence of official documentation for the “source” field, there might be discrepancies or potential inaccuracies in the information presented. Readers are advised to exercise caution and conduct their own research when relying on this information, especially for critical applications or decisions. If you identify any inaccuracies or have further insights, please open an issue or contact us directly so we can review and update as necessary.\u003C/p>\u003C/div> \u003Ch2 id=\"unraveling-the-source-field\" data-svelte-h=\"svelte-5bos9n\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#unraveling-the-source-field\">\u003Cspan>#\u003C/span>\u003C/a>Unraveling the “Source” Field\u003C/h2> \u003Cp data-svelte-h=\"svelte-1gcmezn\">Some days ago we were testing the \u003Ca href=\"https://github.com/torrust/torrust-index-backend\" rel=\"nofollow\">Torrust Index Backend\u003C/a>. We were using different torrent files. We realized that we were calculating a wrong info-hash when the torrent contained a “source” field.\u003C/p> \u003Cp data-svelte-h=\"svelte-11qisc0\">You can see the details of that issue \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues/242\" rel=\"nofollow\">here\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-148fe25\">For the uninitiated, the BitTorrent protocol uses \u003Ccode>.torrent\u003C/code> files to contain metadata about the files we wish to share and distribute. Inside this .torrent file is an “info” dictionary that holds details about these files, such as their names, lengths, and piece hashes.\u003C/p> \u003Cp data-svelte-h=\"svelte-f1o16d\">You can create a torrent file in many different ways. Probably the most common way to create them is by using a BitTorrent client.\u003C/p> \u003Cp data-svelte-h=\"svelte-1rzyt5j\">For example, if you are using \u003Ca href=\"https://www.qbittorrent.org/\" rel=\"nofollow\">qBittorrent\u003C/a>, this is the torrent creation form:\u003C/p> \u003Cimg srcset=\"/images/posts/create-a-torrent-file-with-qbittorrent-and-source-field.png, /images/posts/create-a-torrent-file-with-qbittorrent-and-source-field.png, /images/posts/create-a-torrent-file-with-qbittorrent-and-source-field.png\" src=\"/images/posts/create-a-torrent-file-with-qbittorrent-and-source-field.png\" alt=\"Create\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-w5jo26\">As you can see there is a “source” field in the “Fields” group of inputs.\u003C/p> \u003Cp data-svelte-h=\"svelte-ejb8cw\">As we did not know exactly the purpose of this field, our first reaction was to look for official documentation about that field in \u003Ca href=\"https://www.bittorrent.org/beps/bep_0000.html\" rel=\"nofollow\">BEPs\u003C/a>. In the context of BitTorrent, a BEP stands for “BitTorrent Enhancement Proposal.” It’s analogous to Python’s PEP (Python Enhancement Proposal) or Bitcoin’s BIP (Bitcoin Improvement Proposal).\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1mwjj64\">A BitTorrent Enhancement Proposal (BEP) is a design document providing information to the BitTorrent community, or describing a new feature for BitTorrent or its processes or environment. The BEP should provide a concise technical specification of the feature and a rationale for the feature. It’s a mechanism by which innovations, improvements, and features are proposed, discussed, and integrated into the BitTorrent protocol and its ecosystem.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1wi746\">While many fields are well-documented and are integral to the functioning of the protocol, the “source” field remains a relatively understudied element. Here’s what we know:\u003C/p> \u003Cp data-svelte-h=\"svelte-ofjc87\">\u003Cstrong>Purpose\u003C/strong>: The “source” field isn’t necessarily needed for the basic functioning of BitTorrent. It often appears to be used as a marker or tag to indicate where the torrent was created or originated. This is particularly handy for private torrent sites or groups that wish to ‘mark’ a torrent file to trace its distribution.\u003C/p> \u003Cp data-svelte-h=\"svelte-d2srrf\">\u003Cstrong>Format\u003C/strong>: Typically, this field contains a string, which may be the name of the website or organization that created or released the torrent. Some tracker use a three-char code representing the tracker.\u003C/p> \u003Cp data-svelte-h=\"svelte-1szdqr3\">\u003Cstrong>Implications\u003C/strong>: While it may seem benign, the “source” field can have ramifications. Torrents marked with a particular source might be treated differently, either more trustingly or with suspicion, depending on the reputation of the source. Furthermore, for private trackers, a torrent with an unauthorized or modified “source” field might lead to banning of users, as it could indicate redistribution of exclusive content.\u003C/p> \u003Ch2 id=\"source-field-internals\" data-svelte-h=\"svelte-1h6sndf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#source-field-internals\">\u003Cspan>#\u003C/span>\u003C/a>“Source” field internals\u003C/h2> \u003Cp data-svelte-h=\"svelte-1q8e4vj\">Metainfo files (also known as .torrent files) are bencoded dictionaries. The contents of a BitTorrent file are described in the \u003Ca href=\"https://www.bittorrent.org/beps/bep_0003.html\" rel=\"nofollow\">BEP 03\u003C/a>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1mj93g\">Bencoding (pronounced “Bee-encoding”) is a data serialization method used primarily in the BitTorrent protocol. It’s designed to be simple and efficient to encode and decode. Bencoded data structures include bytes (strings), integers, lists, and dictionaries.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-ity4tg\">The JSON representation of a torrent file, after decoding the bytes is something like this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"announce\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"http://localhost\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"comment\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Comments\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"created by\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"qBittorrent v4.4.1\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"creation date\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1690882922\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"info\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">172204\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"name\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"mandelbrot_2048x2048.png\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"piece length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">16384\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"pieces\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"&lt;hex>7D 91 71 0D 9D 4D BA 88 9B 54 20 54 D5 26 72 8D 5A 86 3F E1 21 DF 77 C7 F7 BB 6C 77 96 21 66 25 38 C5 D9 CD AB 8B 08 EF 8C 24 9B B2 F5 C4 CD 2A DF 0B C0 0C F0 AD DF 72 90 E5 B6 41 4C 23 6C 47 9B 8E 9F 46 AA 0C 0D 8E D1 97 FF EE 68 8B 5F 34 A3 87 D7 71 C5 A6 F9 8E 2E A6 31 7C BD F0 F9 E2 23 F9 CC 80 AF 54 00 04 F9 85 69 1C 77 89 C1 76 4E D6 AA BF 61 A6 C2 80 99 AB B6 5F 60 2F 40 A8 25 BE 32 A3 3D 9D 07 0C 79 68 98 D4 9D 63 49 AF 20 58 66 26 6F 98 6B 6D 32 34 CD 7D 08 15 5E 1A D0 00 09 57 AB 30 3B 20 60 C1 DC 12 87 D6 F3 E7 45 4F 70 67 09 36 31 55 F2 20 F6 6C A5 15 6F 2C 89 95 69 16 53 81 7D 31 F1 B6 BD 37 42 CC 11 0B B2 FC 2B 49 A5 85 B6 FC 76 74 44 93&lt;/hex>\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"private\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"source\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Source\"\u003C/span>\n\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"url-list\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"http://localhost/mandelbrot_2048x2048.png\"\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-dopwc8\">As you can see there is one key or field called \u003Ccode>info\u003C/code>. This part of the file is used to generate the info-hash, which is the torrent unique identifier.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-9w2cju\">According to BEP-03, the info-hash is a 20 byte sha1 hash of the bencoded form of the info value from the metainfo file. BEP 03 does not specifically mention the \u003Ccode>source\u003C/code> field. All current or future fields included in the \u003Ccode>info\u003C/code> dictionary are used to calculate the info-hash.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-p76jem\">\u003Ca href=\"https://www.bittorrent.org/beps/bep_0003.html\" rel=\"nofollow\">BEP-03\u003C/a> does not mention the \u003Ccode>source\u003C/code> and \u003Ccode>private\u003C/code> fields.\u003C/p> \u003Cp data-svelte-h=\"svelte-3yu2dk\">There are two different types of torrent files:\u003C/p> \u003Cul data-svelte-h=\"svelte-17ai75x\">\u003Cli>The single file case: where the torrent contains a single file.\u003C/li> \u003Cli>The multi-file case: where the torrent contains a directory.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1qa7yy4\">Here is another example of a torrent containing multiple files:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"announce\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"http://localhost\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"comment\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Comments\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"created by\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"qBittorrent v4.4.1\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"creation date\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1691069437\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"info\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"files\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">37\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"path\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"file-425ef9ca-014d-403f-8f15-3ece9e3fad38.txt\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">37\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"path\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"file-deeafa50-2e25-4f38-bec0-92865ca6bb1d.txt\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"name\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"dir-839a49f0-cabc-4efb-ad5f-b6fb15f8a467\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"piece length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">16384\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"pieces\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"&lt;hex>8E 47 18 74 52 8E 68 92 DD 86 66 F0 0B DD AD B1 08 DC 69 44&lt;/hex>\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"private\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\n\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"url-list\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"http://localhost/mandelbrot_2048x2048.png\"\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-17y5040\">The \u003Ccode>info\u003C/code> dictionary can contain a key \u003Ccode>length\u003C/code> or a key \u003Ccode>files\u003C/code>, but not both or neither. If length is present then the download represents a single file, otherwise it represents a set of files which go in a directory structure. In the single file case, length maps to the length of the file in bytes.\u003C/p>\u003C/div> \u003Ch2 id=\"bittorrent-documentation-lost-in-the-ether\" data-svelte-h=\"svelte-1im9jzh\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#bittorrent-documentation-lost-in-the-ether\">\u003Cspan>#\u003C/span>\u003C/a>BitTorrent Documentation: Lost in the Ether?\u003C/h2> \u003Cp data-svelte-h=\"svelte-1a3194b\">This isn’t the first time we’ve encountered a hazy area within BitTorrent’s realm. While the protocol itself is revolutionary, providing a decentralized way to share large amounts of data efficiently, its documentation often leaves much to be desired. Here’s why this is a concern:\u003C/p> \u003Cp data-svelte-h=\"svelte-i9dw0t\">\u003Cstrong>Reduced Accessibility\u003C/strong>: For new developers or enthusiasts looking to delve into the BitTorrent ecosystem, inadequate documentation can be a significant barrier to entry.\u003C/p> \u003Cp data-svelte-h=\"svelte-smsuei\">\u003Cstrong>Inconsistent Implementations\u003C/strong>: Vague documentation can lead to varied interpretations and consequently, inconsistent implementations across different BitTorrent clients.\u003C/p> \u003Cp data-svelte-h=\"svelte-149xa8u\">\u003Cstrong>Potential for Misuse\u003C/strong>: Ambiguous or missing documentation can lead to unintended use or misuse of fields, potentially compromising the integrity of the protocol or the data being shared.\u003C/p> \u003Ch2 id=\"cross-seeding\" data-svelte-h=\"svelte-88kq5l\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#cross-seeding\">\u003Cspan>#\u003C/span>\u003C/a>Cross-seeding\u003C/h2> \u003Cp data-svelte-h=\"svelte-1cr26ms\">It’s out of the scope of this post to provide an exhaustive explanation of the cross-seeding concept. If you think it could be an interesting topic for a new blog post let us know. But the “source” field in the “info” part of the torrent files might be related to cross-seeding too.\u003C/p> \u003Cp data-svelte-h=\"svelte-1n5ic83\">\u003Cstrong>Cross-seeding\u003C/strong> in the BitTorrent context refers to the practice of seeding the same content (files) using two or more different torrent files, typically from different trackers. This is particularly useful when the exact same file or set of files is available on multiple trackers but might have different torrent files associated with them due to differences in metadata, source tags, or directory structures.\u003C/p> \u003Cp data-svelte-h=\"svelte-wz3zfh\">BitTorrent clients usually do not allow you to add the same content twice, so cross-seeding is a way to get around this limitation. If you want to add a new tracker to a torrent file that you are already seeding, the client usually adds the new tracker to the tracker list in the previous torrent file. This could be a reason to ban you from some private trackers.\u003C/p> \u003Cp data-svelte-h=\"svelte-1bjb1zy\">Some private trackers change the list of trackers in the torrent files to prevent cross-seeding. They remove other trackers URLs and they also use the source file to generate a different info-hash. This is a way to force you to download the torrent file from their website and track you to know if you are seeding the torrent file from another tracker.\u003C/p> \u003Ch2 id=\"what-are-the-reliable-sources-for-bittorrent-documentation\" data-svelte-h=\"svelte-e76lop\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#what-are-the-reliable-sources-for-bittorrent-documentation\">\u003Cspan>#\u003C/span>\u003C/a>What are the reliable sources for BitTorrent documentation?\u003C/h2> \u003Cp data-svelte-h=\"svelte-yjqey5\">Some of the sources we have found reliable and useful are:\u003C/p> \u003Cul data-svelte-h=\"svelte-1g9m6ah\">\u003Cli>\u003Ca href=\"https://www.bittorrent.org/beps/bep_0000.html\" rel=\"nofollow\">https://www.bittorrent.org/beps/bep_0000.html\u003C/a>: BitTorrent Enhancement Proposals (BEPs) describe proposed changes to the BitTorrent protocol, including new features and extensions to existing features.\u003C/li> \u003Cli>\u003Ca href=\"http://libtorrent.org/\" rel=\"nofollow\">http://libtorrent.org/\u003C/a>: libtorrent is a feature complete C++ bittorrent library.\u003C/li> \u003Cli>\u003Ca href=\"https://wiki.theory.org/BitTorrentSpecification\" rel=\"nofollow\">https://wiki.theory.org/BitTorrentSpecification\u003C/a>: This wiki is a comprehensive reference for the BitTorrent protocol.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-5anh79\">If you think we are missing any other reliable source, please let us know by \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">opening an issue\u003C/a> or opening a pull request to update this post.\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cul data-svelte-h=\"svelte-nemxtw\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues/242\" rel=\"nofollow\">The issue that originated this post\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/qbittorrent/qBittorrent/discussions/19406\" rel=\"nofollow\">Open questions on GitHub qBittorrent project\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://en.wikipedia.org/wiki/Bencode\" rel=\"nofollow\">Wikipedia: Bencode\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://stackoverflow.com/questions/28348678/what-exactly-is-the-info-hash-in-a-torrent-file\" rel=\"nofollow\">Stackoverflow: What exactly is the info_Hash in a torrent file\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-doxuny\">For this port and in other places we are using an online tool to generate JSON objects from torrent files: \u003Ca href=\"https://chocobo1.github.io/bencode_online/\" rel=\"nofollow\">https://chocobo1.github.io/bencode_online/\u003C/a> by \u003Ca href=\"https://github.com/Chocobo1\" rel=\"nofollow\">Mike Tzou\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-eiofbf\">\u003Ca href=\"https://github.com/Kimbatt\" rel=\"nofollow\">Kimbatt\u003C/a> \u003Ca href=\"https://github.com/Kimbatt/torrent-creator/issues/10#issuecomment-1664344502\" rel=\"nofollow\">helped us to find some sources of information\u003C/a>.\u003C/p> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ekwqiv\">While the BitTorrent protocol remains a cornerstone of peer-to-peer data sharing, there’s a palpable need for comprehensive, clear, and easily accessible documentation. The “source” field in the “info” part of the torrent files serves as a poignant reminder of this necessity. As we continue to rely on such protocols for our digital interactions, understanding their nuances becomes not just an intellectual exercise but a practical imperative.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-la46nn\">We are looking forward to finding the first implementation and the creator of the “Source” field in the “info” part of the torrent files. If you know of any, please let us know by opening an issue.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-mcy6nd\">If you have any questions or issues regarding this post, please \u003Ca href=\"https://github.com/torrust/torrust-website/issues/new\" rel=\"nofollow\">open an issue\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19k8tej\">For any other questions or issues related to Torrust repositories, please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r8qk6t\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Backend: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Frontend: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>","10 min read",{"title":19,"slug":20,"coverImage":21,"date":22,"updated":22,"excerpt":23,"contributor":24,"contributorSlug":25,"tags":31,"hidden":12,"html":32,"readingTime":33},[11,27],"\u003Cp data-svelte-h=\"svelte-1xkmzaz\">The BitTorrent protocol, despite its widespread usage, has often been met with raised eyebrows by the tech community due to its sometimes vague or entirely missing documentation. Today, we’ll dive into one such mystery: the “source” field located within the “info” part of torrent files.\u003C/p>  \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-flvomu\">\u003Cstrong>Disclaimer\u003C/strong>: The contents of this blog post, are based on research, community discussions, and available knowledge as of the date of publication. Due to the absence of official documentation for the “source” field, there might be discrepancies or potential inaccuracies in the information presented. Readers are advised to exercise caution and conduct their own research when relying on this information, especially for critical applications or decisions. If you identify any inaccuracies or have further insights, please open an issue or contact us directly so we can review and update as necessary.\u003C/p>\u003C/div> \u003Ch2 id=\"unraveling-the-source-field\" data-svelte-h=\"svelte-5bos9n\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#unraveling-the-source-field\">\u003Cspan>#\u003C/span>\u003C/a>Unraveling the “Source” Field\u003C/h2> \u003Cp data-svelte-h=\"svelte-1gcmezn\">Some days ago we were testing the \u003Ca href=\"https://github.com/torrust/torrust-index-backend\" rel=\"nofollow\">Torrust Index Backend\u003C/a>. We were using different torrent files. We realized that we were calculating a wrong info-hash when the torrent contained a “source” field.\u003C/p> \u003Cp data-svelte-h=\"svelte-11qisc0\">You can see the details of that issue \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues/242\" rel=\"nofollow\">here\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-148fe25\">For the uninitiated, the BitTorrent protocol uses \u003Ccode>.torrent\u003C/code> files to contain metadata about the files we wish to share and distribute. Inside this .torrent file is an “info” dictionary that holds details about these files, such as their names, lengths, and piece hashes.\u003C/p> \u003Cp data-svelte-h=\"svelte-f1o16d\">You can create a torrent file in many different ways. Probably the most common way to create them is by using a BitTorrent client.\u003C/p> \u003Cp data-svelte-h=\"svelte-1rzyt5j\">For example, if you are using \u003Ca href=\"https://www.qbittorrent.org/\" rel=\"nofollow\">qBittorrent\u003C/a>, this is the torrent creation form:\u003C/p> \u003Cimg srcset=\"/images/posts/create-a-torrent-file-with-qbittorrent-and-source-field.png, /images/posts/create-a-torrent-file-with-qbittorrent-and-source-field.png, /images/posts/create-a-torrent-file-with-qbittorrent-and-source-field.png\" src=\"/images/posts/create-a-torrent-file-with-qbittorrent-and-source-field.png\" alt=\"Create\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-w5jo26\">As you can see there is a “source” field in the “Fields” group of inputs.\u003C/p> \u003Cp data-svelte-h=\"svelte-ejb8cw\">As we did not know exactly the purpose of this field, our first reaction was to look for official documentation about that field in \u003Ca href=\"https://www.bittorrent.org/beps/bep_0000.html\" rel=\"nofollow\">BEPs\u003C/a>. In the context of BitTorrent, a BEP stands for “BitTorrent Enhancement Proposal.” It’s analogous to Python’s PEP (Python Enhancement Proposal) or Bitcoin’s BIP (Bitcoin Improvement Proposal).\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1mwjj64\">A BitTorrent Enhancement Proposal (BEP) is a design document providing information to the BitTorrent community, or describing a new feature for BitTorrent or its processes or environment. The BEP should provide a concise technical specification of the feature and a rationale for the feature. It’s a mechanism by which innovations, improvements, and features are proposed, discussed, and integrated into the BitTorrent protocol and its ecosystem.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1wi746\">While many fields are well-documented and are integral to the functioning of the protocol, the “source” field remains a relatively understudied element. Here’s what we know:\u003C/p> \u003Cp data-svelte-h=\"svelte-ofjc87\">\u003Cstrong>Purpose\u003C/strong>: The “source” field isn’t necessarily needed for the basic functioning of BitTorrent. It often appears to be used as a marker or tag to indicate where the torrent was created or originated. This is particularly handy for private torrent sites or groups that wish to ‘mark’ a torrent file to trace its distribution.\u003C/p> \u003Cp data-svelte-h=\"svelte-d2srrf\">\u003Cstrong>Format\u003C/strong>: Typically, this field contains a string, which may be the name of the website or organization that created or released the torrent. Some tracker use a three-char code representing the tracker.\u003C/p> \u003Cp data-svelte-h=\"svelte-1szdqr3\">\u003Cstrong>Implications\u003C/strong>: While it may seem benign, the “source” field can have ramifications. Torrents marked with a particular source might be treated differently, either more trustingly or with suspicion, depending on the reputation of the source. Furthermore, for private trackers, a torrent with an unauthorized or modified “source” field might lead to banning of users, as it could indicate redistribution of exclusive content.\u003C/p> \u003Ch2 id=\"source-field-internals\" data-svelte-h=\"svelte-1h6sndf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#source-field-internals\">\u003Cspan>#\u003C/span>\u003C/a>“Source” field internals\u003C/h2> \u003Cp data-svelte-h=\"svelte-1q8e4vj\">Metainfo files (also known as .torrent files) are bencoded dictionaries. The contents of a BitTorrent file are described in the \u003Ca href=\"https://www.bittorrent.org/beps/bep_0003.html\" rel=\"nofollow\">BEP 03\u003C/a>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1mj93g\">Bencoding (pronounced “Bee-encoding”) is a data serialization method used primarily in the BitTorrent protocol. It’s designed to be simple and efficient to encode and decode. Bencoded data structures include bytes (strings), integers, lists, and dictionaries.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-ity4tg\">The JSON representation of a torrent file, after decoding the bytes is something like this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"announce\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"http://localhost\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"comment\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Comments\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"created by\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"qBittorrent v4.4.1\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"creation date\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1690882922\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"info\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">172204\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"name\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"mandelbrot_2048x2048.png\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"piece length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">16384\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"pieces\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"&lt;hex>7D 91 71 0D 9D 4D BA 88 9B 54 20 54 D5 26 72 8D 5A 86 3F E1 21 DF 77 C7 F7 BB 6C 77 96 21 66 25 38 C5 D9 CD AB 8B 08 EF 8C 24 9B B2 F5 C4 CD 2A DF 0B C0 0C F0 AD DF 72 90 E5 B6 41 4C 23 6C 47 9B 8E 9F 46 AA 0C 0D 8E D1 97 FF EE 68 8B 5F 34 A3 87 D7 71 C5 A6 F9 8E 2E A6 31 7C BD F0 F9 E2 23 F9 CC 80 AF 54 00 04 F9 85 69 1C 77 89 C1 76 4E D6 AA BF 61 A6 C2 80 99 AB B6 5F 60 2F 40 A8 25 BE 32 A3 3D 9D 07 0C 79 68 98 D4 9D 63 49 AF 20 58 66 26 6F 98 6B 6D 32 34 CD 7D 08 15 5E 1A D0 00 09 57 AB 30 3B 20 60 C1 DC 12 87 D6 F3 E7 45 4F 70 67 09 36 31 55 F2 20 F6 6C A5 15 6F 2C 89 95 69 16 53 81 7D 31 F1 B6 BD 37 42 CC 11 0B B2 FC 2B 49 A5 85 B6 FC 76 74 44 93&lt;/hex>\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"private\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"source\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Source\"\u003C/span>\n\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"url-list\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"http://localhost/mandelbrot_2048x2048.png\"\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-dopwc8\">As you can see there is one key or field called \u003Ccode>info\u003C/code>. This part of the file is used to generate the info-hash, which is the torrent unique identifier.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-9w2cju\">According to BEP-03, the info-hash is a 20 byte sha1 hash of the bencoded form of the info value from the metainfo file. BEP 03 does not specifically mention the \u003Ccode>source\u003C/code> field. All current or future fields included in the \u003Ccode>info\u003C/code> dictionary are used to calculate the info-hash.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-p76jem\">\u003Ca href=\"https://www.bittorrent.org/beps/bep_0003.html\" rel=\"nofollow\">BEP-03\u003C/a> does not mention the \u003Ccode>source\u003C/code> and \u003Ccode>private\u003C/code> fields.\u003C/p> \u003Cp data-svelte-h=\"svelte-3yu2dk\">There are two different types of torrent files:\u003C/p> \u003Cul data-svelte-h=\"svelte-17ai75x\">\u003Cli>The single file case: where the torrent contains a single file.\u003C/li> \u003Cli>The multi-file case: where the torrent contains a directory.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1qa7yy4\">Here is another example of a torrent containing multiple files:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"announce\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"http://localhost\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"comment\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Comments\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"created by\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"qBittorrent v4.4.1\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"creation date\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1691069437\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"info\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"files\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">37\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"path\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"file-425ef9ca-014d-403f-8f15-3ece9e3fad38.txt\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">37\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"path\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"file-deeafa50-2e25-4f38-bec0-92865ca6bb1d.txt\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"name\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"dir-839a49f0-cabc-4efb-ad5f-b6fb15f8a467\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"piece length\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">16384\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"pieces\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"&lt;hex>8E 47 18 74 52 8E 68 92 DD 86 66 F0 0B DD AD B1 08 DC 69 44&lt;/hex>\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\u003Cspan class=\"token property\">\"private\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\n\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"url-list\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"http://localhost/mandelbrot_2048x2048.png\"\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-17y5040\">The \u003Ccode>info\u003C/code> dictionary can contain a key \u003Ccode>length\u003C/code> or a key \u003Ccode>files\u003C/code>, but not both or neither. If length is present then the download represents a single file, otherwise it represents a set of files which go in a directory structure. In the single file case, length maps to the length of the file in bytes.\u003C/p>\u003C/div> \u003Ch2 id=\"bittorrent-documentation-lost-in-the-ether\" data-svelte-h=\"svelte-1im9jzh\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#bittorrent-documentation-lost-in-the-ether\">\u003Cspan>#\u003C/span>\u003C/a>BitTorrent Documentation: Lost in the Ether?\u003C/h2> \u003Cp data-svelte-h=\"svelte-1a3194b\">This isn’t the first time we’ve encountered a hazy area within BitTorrent’s realm. While the protocol itself is revolutionary, providing a decentralized way to share large amounts of data efficiently, its documentation often leaves much to be desired. Here’s why this is a concern:\u003C/p> \u003Cp data-svelte-h=\"svelte-i9dw0t\">\u003Cstrong>Reduced Accessibility\u003C/strong>: For new developers or enthusiasts looking to delve into the BitTorrent ecosystem, inadequate documentation can be a significant barrier to entry.\u003C/p> \u003Cp data-svelte-h=\"svelte-smsuei\">\u003Cstrong>Inconsistent Implementations\u003C/strong>: Vague documentation can lead to varied interpretations and consequently, inconsistent implementations across different BitTorrent clients.\u003C/p> \u003Cp data-svelte-h=\"svelte-149xa8u\">\u003Cstrong>Potential for Misuse\u003C/strong>: Ambiguous or missing documentation can lead to unintended use or misuse of fields, potentially compromising the integrity of the protocol or the data being shared.\u003C/p> \u003Ch2 id=\"cross-seeding\" data-svelte-h=\"svelte-88kq5l\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#cross-seeding\">\u003Cspan>#\u003C/span>\u003C/a>Cross-seeding\u003C/h2> \u003Cp data-svelte-h=\"svelte-1cr26ms\">It’s out of the scope of this post to provide an exhaustive explanation of the cross-seeding concept. If you think it could be an interesting topic for a new blog post let us know. But the “source” field in the “info” part of the torrent files might be related to cross-seeding too.\u003C/p> \u003Cp data-svelte-h=\"svelte-1n5ic83\">\u003Cstrong>Cross-seeding\u003C/strong> in the BitTorrent context refers to the practice of seeding the same content (files) using two or more different torrent files, typically from different trackers. This is particularly useful when the exact same file or set of files is available on multiple trackers but might have different torrent files associated with them due to differences in metadata, source tags, or directory structures.\u003C/p> \u003Cp data-svelte-h=\"svelte-wz3zfh\">BitTorrent clients usually do not allow you to add the same content twice, so cross-seeding is a way to get around this limitation. If you want to add a new tracker to a torrent file that you are already seeding, the client usually adds the new tracker to the tracker list in the previous torrent file. This could be a reason to ban you from some private trackers.\u003C/p> \u003Cp data-svelte-h=\"svelte-1bjb1zy\">Some private trackers change the list of trackers in the torrent files to prevent cross-seeding. They remove other trackers URLs and they also use the source file to generate a different info-hash. This is a way to force you to download the torrent file from their website and track you to know if you are seeding the torrent file from another tracker.\u003C/p> \u003Ch2 id=\"what-are-the-reliable-sources-for-bittorrent-documentation\" data-svelte-h=\"svelte-e76lop\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#what-are-the-reliable-sources-for-bittorrent-documentation\">\u003Cspan>#\u003C/span>\u003C/a>What are the reliable sources for BitTorrent documentation?\u003C/h2> \u003Cp data-svelte-h=\"svelte-yjqey5\">Some of the sources we have found reliable and useful are:\u003C/p> \u003Cul data-svelte-h=\"svelte-1g9m6ah\">\u003Cli>\u003Ca href=\"https://www.bittorrent.org/beps/bep_0000.html\" rel=\"nofollow\">https://www.bittorrent.org/beps/bep_0000.html\u003C/a>: BitTorrent Enhancement Proposals (BEPs) describe proposed changes to the BitTorrent protocol, including new features and extensions to existing features.\u003C/li> \u003Cli>\u003Ca href=\"http://libtorrent.org/\" rel=\"nofollow\">http://libtorrent.org/\u003C/a>: libtorrent is a feature complete C++ bittorrent library.\u003C/li> \u003Cli>\u003Ca href=\"https://wiki.theory.org/BitTorrentSpecification\" rel=\"nofollow\">https://wiki.theory.org/BitTorrentSpecification\u003C/a>: This wiki is a comprehensive reference for the BitTorrent protocol.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-5anh79\">If you think we are missing any other reliable source, please let us know by \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">opening an issue\u003C/a> or opening a pull request to update this post.\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cul data-svelte-h=\"svelte-nemxtw\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues/242\" rel=\"nofollow\">The issue that originated this post\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/qbittorrent/qBittorrent/discussions/19406\" rel=\"nofollow\">Open questions on GitHub qBittorrent project\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://en.wikipedia.org/wiki/Bencode\" rel=\"nofollow\">Wikipedia: Bencode\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://stackoverflow.com/questions/28348678/what-exactly-is-the-info-hash-in-a-torrent-file\" rel=\"nofollow\">Stackoverflow: What exactly is the info_Hash in a torrent file\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-doxuny\">For this port and in other places we are using an online tool to generate JSON objects from torrent files: \u003Ca href=\"https://chocobo1.github.io/bencode_online/\" rel=\"nofollow\">https://chocobo1.github.io/bencode_online/\u003C/a> by \u003Ca href=\"https://github.com/Chocobo1\" rel=\"nofollow\">Mike Tzou\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-eiofbf\">\u003Ca href=\"https://github.com/Kimbatt\" rel=\"nofollow\">Kimbatt\u003C/a> \u003Ca href=\"https://github.com/Kimbatt/torrent-creator/issues/10#issuecomment-1664344502\" rel=\"nofollow\">helped us to find some sources of information\u003C/a>.\u003C/p> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ekwqiv\">While the BitTorrent protocol remains a cornerstone of peer-to-peer data sharing, there’s a palpable need for comprehensive, clear, and easily accessible documentation. The “source” field in the “info” part of the torrent files serves as a poignant reminder of this necessity. As we continue to rely on such protocols for our digital interactions, understanding their nuances becomes not just an intellectual exercise but a practical imperative.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-la46nn\">We are looking forward to finding the first implementation and the creator of the “Source” field in the “info” part of the torrent files. If you know of any, please let us know by opening an issue.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-mcy6nd\">If you have any questions or issues regarding this post, please \u003Ca href=\"https://github.com/torrust/torrust-website/issues/new\" rel=\"nofollow\">open an issue\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19k8tej\">For any other questions or issues related to Torrust repositories, please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r8qk6t\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Backend: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Frontend: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>","9 min read",{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},"Benchmarking the Torrust BitTorrent Tracker","benchmarking-the-torrust-bittorrent-tracker","/images/posts/benchmarking-the-torrust-bittorrent-tracker/benchmarking-the-torrust-bittorrent-tracker-banner.webp","2024-03-19T00:00:00.000Z","In the ever-evolving landscape of BitTorrent technology, performance and scalability are paramount. Torrust stands at the forefront, offering a suite of open-source software products designed to enhance peer-to-peer file sharing. At the heart of this suite is the Torrust BitTorrent Tracker, a Rust-based engine crafted for efficiency and speed. This post will introduce you to the benchmarking tools we are using at the moment for the tracker.",[41,42],"Performance","Benchmarking"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-1m3njcc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of Contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-1eez8z8\">\u003Cli>\u003Ca href=\"#introduction\">Introduction\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#understating-the-tracker\">Understating The Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#benchmarking-methodology\">Benchmarking Methodology\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#internal-repository-benchmarking\">Internal Repository Benchmarking\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#e2e-udp-benchmarking\">E2E UDP Benchmarking\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#comparative-udp-benchmarking-with-other-trackers\">Comparative UDP Benchmarking With Other Trackers\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#setup-the-chihaya-tracker\">Setup The Chihaya Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#setup-the-opentracker-tracker\">Setup The Opentracker Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#setup-the-aquatic-tracker\">Setup The Aquatic Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#running-the-bencher\">Running The Bencher\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#bencher-results\">Bencher Results\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#links\">Links\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-m3c9hm\">In the ever-evolving landscape of BitTorrent technology, performance and scalability are paramount. Torrust stands at the forefront, offering a suite of open-source software products designed to enhance peer-to-peer file sharing. At the heart of this suite is the \u003Ca href=\"https://github.com/torrust/torrust-tracker\" rel=\"nofollow\">Torrust BitTorrent Tracker\u003C/a>, a Rust-based engine crafted for efficiency and speed. This post will introduce you to the benchmarking tools we are using at the moment for the tracker. It will also shed light on its performance and how it stacks up against its contemporaries.\u003C/p> \u003Cp data-svelte-h=\"svelte-16u4lb6\">Before going into details we should explain what are the tradeoffs we did on the design of the Torrust Tracker. Our goal is to design a robust, reliable and fast tracker but at the same time a feature-reach and sustainable one. Very often those two groups of objectives are exclusive. We know that being the fastest tracker implies some drawbacks. In general, our rule is:\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1xu4f3t\">“Embracing a slight slowdown for substantial benefits underlines our commitment to delivering a tracker that’s not just fast but also rich in features and usability.”\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-eg2ndv\">We decided to use Rust due to its speed and memory-safe features but we also wanted to build a tracker with the following features:\u003C/p> \u003Cul data-svelte-h=\"svelte-1tc011q\">\u003Cli>A \u003Cstrong>comprehensive API\u003C/strong> that allow users to perform any action or extract any data from the tracker.\u003C/li> \u003Cli>A \u003Cstrong>good support for observability\u003C/strong>. For example, a logging system that allow users to detect errors or extract statistics. The logging has several levels. Enabling more verbose logging affects performance. But if you are only interested in performance you can disable logging. Observability it’s also related to testing. Code without support for observability it’s usually hard to test too.\u003C/li> \u003Cli>A \u003Cstrong>sustainable code\u003C/strong>. Very often “fast code” means “direct code” without abstraction layers and separation of concerns, but that leads to code that is hard to maintain and eventually to a death project. It’s hard to attract maintainers for open-source projects that are hard to understand. And even if it’s not hard to understand it’s usually hard to change because there are no independent parts that can be changed independently.\u003C/li>\u003C/ul> \u003Ch2 id=\"understating-the-tracker\" data-svelte-h=\"svelte-f7ma2w\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#understating-the-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Understating The Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-1191qar\">BitTorrent trackers play a crucial role in the file-sharing ecosystem, acting as intermediaries that facilitate the transfer of files among users. By tracking peer locations and helping them connect, these trackers ensure the swift and reliable distribution of data.\u003C/p> \u003Cp data-svelte-h=\"svelte-1kpnyqh\">Before benchmarking the tracker is important to know the internal architecture of the tracker. A deep dive into the Torrust Tracker’s architecture reveals a four-layer design, crucial for benchmarking accuracy.\u003C/p> \u003Cp data-svelte-h=\"svelte-1om9x5k\">The first layer is the delivery layer. Clients can connect to the tracker in different ways: using the HTTP tracker, the UDP tracker, the tracker API or console commands. Internally all requests are routed through application services and reaching the main tracker domain service that handles the \u003Ccode>announce\u003C/code> and \u003Ccode>scrape\u003C/code> requests. At the lowest level the tracker service stores all the information in different data structures. One of them is the torrent repository that holds the list of torrents. Each torrent entry on the list contains statistics like how many peers have downloaded the torrent and the list of peers for that torrent (swarm).\u003C/p> \u003Cimg srcset=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png\" src=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png\" alt=\"Torrust Architecture\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Ch2 id=\"benchmarking-methodology\" data-svelte-h=\"svelte-19pdx5j\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#benchmarking-methodology\">\u003Cspan>#\u003C/span>\u003C/a>Benchmarking Methodology\u003C/h2> \u003Cp data-svelte-h=\"svelte-7t1gkt\">Our benchmarking approach encompasses three pivotal areas:\u003C/p> \u003Cul data-svelte-h=\"svelte-14l9hbs\">\u003Cli>\u003Cstrong>Internal repository benchmarking\u003C/strong>: Evaluating the repository within the tracker responsible for managing peer lists across torrents.\u003C/li> \u003Cli>\u003Cstrong>End-to-End benchmarking\u003C/strong>: Utilizing an external UDP tracker load test tool from the aquatic repository to simulate some real-world scenarios.\u003C/li> \u003Cli>\u003Cstrong>Comparative Benchmarking with other trackers\u003C/strong>: Employing the “Bencher” from the Aquatic GitHub repository to compare the Torrust Tracker against notable implementations like \u003Ca href=\"https://erdgeist.org/arts/software/opentracker/\" rel=\"nofollow\">opentracker\u003C/a>, \u003Ca href=\"https://github.com/chihaya/chihaya\" rel=\"nofollow\">Chihaya\u003C/a>, and \u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">aquatic\u003C/a> itself.\u003C/li>\u003C/ul> \u003Ch2 id=\"internal-repository-benchmarking\" data-svelte-h=\"svelte-109aklx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#internal-repository-benchmarking\">\u003Cspan>#\u003C/span>\u003C/a>Internal Repository Benchmarking\u003C/h2> \u003Cp data-svelte-h=\"svelte-gryjgp\">Basically a tracker is just a shared data structure between all the BitTorrent peers. Peers announce themselves and the tracker builds up a list of torrents. For each torrent, the tracker keeps a list of peers interested in that torrent. The in-memory data structure is an array of structures that look like this one (example in JSON):\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"info_hash\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"090c6d4fb3a03191c4ef1fda6236ef0efb2d5c10\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"seeders\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"completed\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"leechers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"peers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"peer_id\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"id\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"0x2d71423030303030303030303030303030303031\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"client\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token null keyword\">null\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"peer_addr\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"0.0.0.0:17548\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"updated\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1709916034742\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"updated_milliseconds_ago\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1709916034742\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"uploaded\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"downloaded\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"left\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"event\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Completed\"\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\t\u003Cspan class=\"token punctuation\">]\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1nuj2p7\">There are many ways to keep this information in memory. The access to this data is actually a bottleneck. Eventually all requests hit this structure. The problem is all \u003Ccode>announce\u003C/code> requests need to update this structure. Due to Rust owning rules, only the owner can write into this struct. We have been trying different implementations to minimize contention. There is a trait for the torrent “Repository”. You can benchmark the different repository implementations by running the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cargo run --release -p torrust-torrent-repository-benchmarks -- --threads 4 --sleep 0 --compare true\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-176unt0\">The output at the time of writing this post is:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">tokio::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Entry&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (60ns, 59ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (10.909457ms, 0ns)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (13.88879ms, 0ns)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (7.772484ms, 7.782535ms)\n\nstd::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Entry&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (43ns, 39ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (4.020937ms, 4.020937ms)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (5.896177ms, 5.768448ms)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (3.883823ms, 3.883823ms)\n\nstd::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Arc&lt;std::sync::Mutex&lt;Entry&gt;&gt;&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (51ns, 49ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (3.252314ms, 3.149109ms)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (8.411094ms, 8.411094ms)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (4.106086ms, 4.106086ms)\n\ntokio::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Arc&lt;std::sync::Mutex&lt;Entry&gt;&gt;&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (91ns, 90ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (3.542378ms, 3.435695ms)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (15.651172ms, 15.651172ms)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (4.368189ms, 4.257572ms)\n\ntokio::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Arc&lt;tokio::sync::Mutex&lt;Entry&gt;&gt;&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (111ns, 109ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (6.590677ms, 6.808535ms)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (16.572217ms, 16.30488ms)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (4.073221ms, 4.000122ms)\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-l982n6\">We are benchmarking four scenarios that we think are the most relevant:\u003C/p> \u003Cul data-svelte-h=\"svelte-1y5y1bo\">\u003Cli>\u003Cstrong>Adding one torrent\u003C/strong>: How long it takes to add a new torrent to the tracker when there is only one peer. We run it several times sequentially to calculate the average.\u003C/li> \u003Cli>\u003Cstrong>Update one torrent in parallel\u003C/strong>: This is the same as the previous one but running updates in parallel, meaning we spawn some threads to make the same request. This case tries to simulate the case where multiple peers try to announce the same torrent, so they are competing to write on the same repository entry, which contains the peer list.\u003C/li> \u003Cli>\u003Cstrong>Add multiple torrents in parallel\u003C/strong>: In this case, the same peer is adding different torrents at the same time. This case tries to simulate many peers announcing different torrents, so they are not conflicting to access the same peer list.\u003C/li> \u003Cli>\u003Cstrong>Update multiple torrents in parallel\u003C/strong>: Finally, this case is the same as the previous one, but we prefill the repository with all the torrents. This tries to simulate an scenario where multiple peers are announcing multiple torrents but the torrent entries already exists. The main different in this case is that the application might not need to allocate more memory to increase the data structure. So the problem is reduced to contention or locking (how many writes we can do in parallel on the same peer list).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1d8sz3c\">At the moment we are trying with other data structures that allow concurrent updates like \u003Ca href=\"https://docs.rs/dashmap/latest/dashmap/\" rel=\"nofollow\">DashMap\u003C/a>. See \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues/565\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues/565\u003C/a>.\u003C/p> \u003Ch2 id=\"e2e-udp-benchmarking\" data-svelte-h=\"svelte-f8fokv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#e2e-udp-benchmarking\">\u003Cspan>#\u003C/span>\u003C/a>E2E UDP Benchmarking\u003C/h2> \u003Cp data-svelte-h=\"svelte-1s5piv7\">We have been using one of the aquatic packages to test the UDP tracker performance as a whole service.\u003C/p> \u003Cp data-svelte-h=\"svelte-1pgm7n2\">\u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">Aquatic\u003C/a> is a high-performance open BitTorrent tracker including a lot a packages. One of the tools provided by Aquatic is a UDP load test command.\u003C/p> \u003Cp data-svelte-h=\"svelte-eez38i\">In order to test the Torrust Tracker with the “UDP load test” tool you need to run both the tracker and this tester.\u003C/p> \u003Ch3 id=\"running-the-torrust-tracker\" data-svelte-h=\"svelte-1tmvw9e\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-the-torrust-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Running the Torrust Tracker\u003C/h3> \u003Cp data-svelte-h=\"svelte-583jw8\">You can follow the \u003Ca href=\"https://docs.rs/torrust-tracker\" rel=\"nofollow\">Torrust Tracker documentation\u003C/a> to install the tracker but there is an especial configuration for benchmarking. First at all, you should build the tracker for release (\u003Ccode>--release\u003C/code>) and you should also disable all services. Finally you should set the logging level to \u003Ccode>error\u003C/code>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-dwdsm1\">Logging levels are: \u003Ccode>Off\u003C/code>, \u003Ccode>Error\u003C/code>, \u003Ccode>Warn\u003C/code>, \u003Ccode>Info\u003C/code>, \u003Ccode>Debug\u003C/code> and \u003Ccode>Trace\u003C/code>. The more you increase the log level and the verbosity the worse the performance results are.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-18gtvwc\">We provide a especial configuration for benchmarking \u003Ccode>./share/default/config/tracker.udp.benchmarking.toml\u003C/code> with the best configuration to test the performance of the UDP tracker. After cloning the tracker repo you can build and run it with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cargo build --release\nTORRUST_TRACKER_PATH_CONFIG=&quot;./share/default/config/tracker.udp.benchmarking.toml&quot; ./target/release/torrust-tracker\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"running-the-aquatic-udp-load-test\" data-svelte-h=\"svelte-1xrliam\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-the-aquatic-udp-load-test\">\u003Cspan>#\u003C/span>\u003C/a>Running The Aquatic UDP Load Test\u003C/h3> \u003Cp data-svelte-h=\"svelte-eoqm0k\">For updated instructions about how to setup the tool please follow the \u003Ca href=\"https://github.com/greatest-ape/aquatic/tree/master/crates/\" rel=\"nofollow\">official documentation\u003C/a>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cd /tmp\ngit clone git@github.com:greatest-ape/aquatic.git\ncd aquatic\ncargo build --release -p aquatic_udp_load_test\n./target/release/aquatic_udp_load_test -p &gt; &quot;load-test-config.toml&quot;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1s28mzo\">The last line \u003Ccode>./target/release/aquatic_udp_load_test -p &gt; &quot;load-test-config.toml&quot;\u003C/code> generates a config file. At least you will need to change the UDP port from \u003Ccode>3000\u003C/code> to \u003Ccode>6969\u003C/code> which is the default one in the Torrust Tracker. You can also edit other options like how many requests of each type you want to make.\u003C/p> \u003Cp data-svelte-h=\"svelte-zm5uqe\">Edit the \u003Ccode>load-test-config.toml\u003C/code>:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-toml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-toml\">\u003Cspan class=\"token comment\"># ...\u003C/span>\n\u003Cspan class=\"token key property\">server_address\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"127.0.0.1:6969\"\u003C/span>\n\u003Cspan class=\"token comment\"># ...\u003C/span>\n\u003Cspan class=\"token comment\"># Probability that a generated request is a connect request as part\u003C/span>\n\u003Cspan class=\"token comment\"># of sum of the various weight arguments.\u003C/span>\n\u003Cspan class=\"token key property\">weight_connect\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\n\u003Cspan class=\"token comment\"># Probability that a generated request is a announce request, as part\u003C/span>\n\u003Cspan class=\"token comment\"># of sum of the various weight arguments.\u003C/span>\n\u003Cspan class=\"token key property\">weight_announce\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\n\u003Cspan class=\"token comment\"># Probability that a generated request is a scrape request, as part\u003C/span>\n\u003Cspan class=\"token comment\"># of sum of the various weight arguments.\u003C/span>\n\u003Cspan class=\"token key property\">weight_scrape\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\n\u003Cspan class=\"token comment\"># ...\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-v0q6o6\">Finally you can run the test with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">toml\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-toml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-toml\">\u003Cspan class=\"token punctuation\">.\u003C/span>/target/release/aquatic_udp_load_test -c \u003Cspan class=\"token string\">\"load-test-config.toml\"\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"test-results\" data-svelte-h=\"svelte-h1mmer\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#test-results\">\u003Cspan>#\u003C/span>\u003C/a>Test Results\u003C/h3> \u003Cp data-svelte-h=\"svelte-ctfkij\">Just as an example we show the test results with a non dedicated machine.\u003C/p> \u003Cp data-svelte-h=\"svelte-uwio4l\">\u003Cstrong>Machine used for the test\u003C/strong>:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t4jvex\">\u003Cli>RAM: 64GiB\u003C/li> \u003Cli>Processor: AMD Ryzen 9 7950X x 32\u003C/li> \u003Cli>Graphics: AMD Radeon Graphics / Intel Arc A770 Graphics (DG2)\u003C/li> \u003Cli>OS: Ubuntu 23.04\u003C/li> \u003Cli>OS Type: 64-bit\u003C/li> \u003Cli>Kernel Version: Linux 6.2.0-20-generic\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-wegm7a\">\u003Cstrong>Test result\u003C/strong>:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">Requests out: 388702.94/second\nResponses in: 349832.25/second\n  - Connect responses:  173325.85\n  - Announce responses: 173061.13\n  - Scrape responses:   3445.27\n  - Error responses:    0.00\nPeers per announce response: 0.00\nAnnounce responses per info hash:\n  - p10: 1\n  - p25: 1\n  - p50: 1\n  - p75: 1\n  - p90: 2\n  - p95: 3\n  - p99: 106\n  - p99.9: 283\n  - p100: 357\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"comparative-udp-benchmarking-with-other-trackers\" data-svelte-h=\"svelte-4irimp\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#comparative-udp-benchmarking-with-other-trackers\">\u003Cspan>#\u003C/span>\u003C/a>Comparative UDP Benchmarking With Other Trackers\u003C/h2> \u003Cp data-svelte-h=\"svelte-1eavs55\">Aquatic also provides a tool to compare how several trackers perform on the same machine. At the moment they support these tracker:\u003C/p> \u003Cul data-svelte-h=\"svelte-13yj5oq\">\u003Cli>\u003Ca href=\"https://erdgeist.org/arts/software/opentracker/\" rel=\"nofollow\">opentracker\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/chihaya/chihaya\" rel=\"nofollow\">Chihaya\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">aquatic\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-ir9hy0\">We’ve opened a \u003Ca href=\"https://github.com/greatest-ape/aquatic/pull/191\" rel=\"nofollow\">PR\u003C/a> to add support to the Torrust Tracker too.\u003C/p> \u003Cp data-svelte-h=\"svelte-160ca0h\">In order to run the Bencher you need to install all the trackers first.\u003C/p> \u003Ch3 id=\"setup-the-chihaya-tracker\" data-svelte-h=\"svelte-182q49k\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-the-chihaya-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Setup The Chihaya Tracker\u003C/h3> \u003Cp data-svelte-h=\"svelte-ol1vec\">Follow the \u003Ca href=\"https://github.com/chihaya/chihaya\" rel=\"nofollow\">official documentation\u003C/a>. You will need to install Go:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">sudo apt install golang-go\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"setup-the-opentracker-tracker\" data-svelte-h=\"svelte-15xxb3d\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-the-opentracker-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Setup The Opentracker Tracker\u003C/h3> \u003Cp data-svelte-h=\"svelte-17kavr\">You can \u003Ccode>make\u003C/code> it from sources following the \u003Ca href=\"https://erdgeist.org/arts/software/opentracker/#toc-entry-3\" rel=\"nofollow\">official documentation\u003C/a> or install it on Ubuntu with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cd /tmp\ncvs -d :pserver:cvs@cvs.fefe.de:/cvs -z9 co libowfat\ncd libowfat\nmake\ncd ..\ngit clone git://erdgeist.org/opentracker\ncd opentracker\nmake\ncp opentracker ~/bin\nopentracker -h\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1l9k0r8\">NOTICE: Installing the opentracker from Ubuntu repositories did not work for us. Maybe arguments to run the application have changes in recent versions.\u003C/p>\u003C/div> \u003Ch3 id=\"setup-the-aquatic-tracker\" data-svelte-h=\"svelte-xt6m5d\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-the-aquatic-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Setup The Aquatic Tracker\u003C/h3> \u003Cp data-svelte-h=\"svelte-1tyolfd\">You can follow the \u003Ca href=\"https://github.com/greatest-ape/aquatic/tree/master/crates/udp\" rel=\"nofollow\">official documentation\u003C/a>. At the moment this is the process:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">sudo apt update &amp;&amp; sudo apt upgrade -y\nsudo apt-get install libhwloc-dev\ncd /tmp\ngit clone git@github.com:greatest-ape/aquatic.git\ncd aquatic\ncargo build --profile=release-debug --all-features -p aquatic_udp\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1nn93ne\">NOTICE: \u003Ccode>libhwloc-dev\u003C/code> is needed for \u003Ccode>io-uring\u003C/code> feature.\u003C/p>\u003C/div> \u003Ch3 id=\"running-the-bencher\" data-svelte-h=\"svelte-hnytli\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-the-bencher\">\u003Cspan>#\u003C/span>\u003C/a>Running The Bencher\u003C/h3> \u003Cp data-svelte-h=\"svelte-269m44\">You don’t need to run the trackers manually the Bencher does it. First you need to build the Bencher:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cd /tmp\ngit clone git@github.com:greatest-ape/aquatic.git\ncd aquatic\ncargo build --profile=release-debug -p aquatic_bencher\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1x6qv3\">And then you can run it with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">./target/release-debug/aquatic_bencher udp\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1oe9wpg\">If you also want to include the Torrust Tracker make sure you use the fork in the \u003Ca href=\"https://github.com/greatest-ape/aquatic/pull/191\" rel=\"nofollow\">PR\u003C/a>.\u003C/p>\u003C/div> \u003Ch3 id=\"bencher-results\" data-svelte-h=\"svelte-1hc99h6\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#bencher-results\">\u003Cspan>#\u003C/span>\u003C/a>Bencher Results\u003C/h3> \u003Cp data-svelte-h=\"svelte-1lfvggd\">Again, this is only an example with the test result using a non dedicated machine.\u003C/p> \u003Cp data-svelte-h=\"svelte-16heg8s\">Machine used for the test:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t4jvex\">\u003Cli>RAM: 64GiB\u003C/li> \u003Cli>Processor: AMD Ryzen 9 7950X x 32\u003C/li> \u003Cli>Graphics: AMD Radeon Graphics / Intel Arc A770 Graphics (DG2)\u003C/li> \u003Cli>OS: Ubuntu 23.04\u003C/li> \u003Cli>OS Type: 64-bit\u003C/li> \u003Cli>Kernel Version: Linux 6.2.0-20-generic\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-uh73g0\">Bencher result:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\"># Benchmark report\n\nTotal number of load test runs: 72\nEstimated duration: 0 hours, 44 minutes\n\n## Tracker cores: 1 (cpus: 0,16)\n### aquatic_udp run (socket workers: 1) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 351,834\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 192.5 MiB\n### aquatic_udp run (socket workers: 1) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 372,991\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 191.9 MiB\n### aquatic_udp (io_uring) run (socket workers: 1) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 389,576\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 214 MiB\n### aquatic_udp (io_uring) run (socket workers: 1) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 409,824\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 214.7 MiB\n### opentracker run (workers: 0) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 297,698\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 71.7 MiB\n### opentracker run (workers: 0) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 307,874\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 72 MiB\n### opentracker run (workers: 1) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 343,570\n- Average tracker CPU utilization: 95.4%\n- Peak tracker RSS: 72 MiB\n### opentracker run (workers: 1) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 378,880\n- Average tracker CPU utilization: 95.3%\n- Peak tracker RSS: 72.2 MiB\n### chihaya run () (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 115,159\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 863.4 MiB\n### chihaya run () (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 113,002\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 867.4 MiB\n### torrust-tracker run () (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 222,330\n- Average tracker CPU utilization: 189%\n- Peak tracker RSS: 193.3 MiB\n### torrust-tracker run () (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 216,407\n- Average tracker CPU utilization: 189%\n- Peak tracker RSS: 191.8 MiB\n## Tracker cores: 2 (cpus: 0-1,16-17)\n### aquatic_udp run (socket workers: 2) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 699,783\n- Average tracker CPU utilization: 191%\n- Peak tracker RSS: 195.6 MiB\n### aquatic_udp run (socket workers: 2) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 804,774\n- Average tracker CPU utilization: 191%\n- Peak tracker RSS: 193.9 MiB\n### aquatic_udp (io_uring) run (socket workers: 2) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 749,745\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 237.4 MiB\n### aquatic_udp (io_uring) run (socket workers: 2) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 797,605\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 239 MiB\n### opentracker run (workers: 2) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 692,167\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 71.5 MiB\n### opentracker run (workers: 2) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 780,108\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 72 MiB\n### chihaya run () (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 185,137\n- Average tracker CPU utilization: 371%\n- Peak tracker RSS: 8.2 GiB\n### chihaya run () (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 186,243\n- Average tracker CPU utilization: 380%\n- Peak tracker RSS: 7.1 GiB\n### torrust-tracker run () (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 415,864\n- Average tracker CPU utilization: 374%\n- Peak tracker RSS: 188.4 MiB\n### torrust-tracker run () (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 407,551\n- Average tracker CPU utilization: 375%\n- Peak tracker RSS: 188.9 MiB\n## Tracker cores: 4 (cpus: 0-3,16-19)\n### aquatic_udp run (socket workers: 4) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 1,270,832\n- Average tracker CPU utilization: 369%\n- Peak tracker RSS: 194.9 MiB\n### aquatic_udp run (socket workers: 4) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 1,482,250\n- Average tracker CPU utilization: 382%\n- Peak tracker RSS: 194.9 MiB\n### aquatic_udp (io_uring) run (socket workers: 4) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 1,217,457\n- Average tracker CPU utilization: 354%\n- Peak tracker RSS: 237.9 MiB\n### aquatic_udp (io_uring) run (socket workers: 4) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 1,618,228\n- Average tracker CPU utilization: 381%\n- Peak tracker RSS: 284.3 MiB\n### opentracker run (workers: 4) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 1,348,825\n- Average tracker CPU utilization: 381%\n- Peak tracker RSS: 71.5 MiB\n### opentracker run (workers: 4) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 1,546,907\n- Average tracker CPU utilization: 381%\n- Peak tracker RSS: 71 MiB\n### chihaya run () (load test workers: 8, cpus: 8-15,24-31)\n...\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-c72574\">\u003Cstrong>IMPORTANT\u003C/strong>: The test was run is a non dedicated machine running other tasks. It’s just an example. You can get the latest results with dedicated machine on the \u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">Aquatic\u003C/a> repo.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1sz0tx0\">The extracted and ordered results for 1 core are:\u003C/p> \u003Cp data-svelte-h=\"svelte-145cgs5\">Average responses per second with 8 load test workers and cpus: 8-15,24-31\u003C/p> \u003Col data-svelte-h=\"svelte-aj8gko\">\u003Cli>\u003Cstrong>389,576\u003C/strong> aquatic (io_uring)\u003C/li> \u003Cli>\u003Cstrong>351,834\u003C/strong> aquatic\u003C/li> \u003Cli>\u003Cstrong>343,570\u003C/strong> opentracker (workers 1)\u003C/li> \u003Cli>\u003Cstrong>297,698\u003C/strong> opentracker (workers 0)\u003C/li> \u003Cli>\u003Cstrong>222,330\u003C/strong> torrust-tracker\u003C/li> \u003Cli>\u003Cstrong>115,159\u003C/strong> chihaya\u003C/li>\u003C/ol> \u003Cp data-svelte-h=\"svelte-vf59nm\">Average responses per second with 12 load test workers and cpus: 4-15,20-31\u003C/p> \u003Col data-svelte-h=\"svelte-104eset\">\u003Cli>\u003Cstrong>409,824\u003C/strong> aquatic (io_uring)\u003C/li> \u003Cli>\u003Cstrong>378,880\u003C/strong> opentracker (workers 1)\u003C/li> \u003Cli>\u003Cstrong>372,991\u003C/strong> aquatic\u003C/li> \u003Cli>\u003Cstrong>307,874\u003C/strong> opentracker (workers 0)\u003C/li> \u003Cli>\u003Cstrong>216,407\u003C/strong> torrust-tracker\u003C/li> \u003Cli>\u003Cstrong>113,002\u003C/strong> chihaya\u003C/li>\u003C/ol> \u003Cp data-svelte-h=\"svelte-1bra9f5\">The \u003Ca href=\"https://github.com/greatest-ape/aquatic/blob/master/documents/aquatic-udp-load-test-2024-02-10.md\" rel=\"nofollow\">latest official results\u003C/a> (2024-02-10):\u003C/p> \u003Cimg srcset=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/aquatic-bencher-average-responses-per-second.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/aquatic-bencher-average-responses-per-second.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/aquatic-bencher-average-responses-per-second.png\" src=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/aquatic-bencher-average-responses-per-second.png\" alt=\"Torrust Architecture\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-jo5kpe\">The Aquatic “Bencher” uses the Aquatic “UDP load test”.\u003C/p>\u003C/div> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-18l64hv\">As you have seen we are collecting metrics to improve the tracker and avoid performance regressions, by using these benchmarking tools provided by Aquatic. Although performance is important there are other factor like horizontal scalability that are even more critical because sooner or later no matter how powerful is your machine it will be not enough the handle all the requests. But that is our of the scope of this article.\u003C/p> \u003Cp data-svelte-h=\"svelte-no19bn\">On the other hand, we have analyzed performance only from the point of view of number of request handled per second. Memory consumption should be also considered. We have started instrumenting the application to track memory consumption. See \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues/567\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues/567\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-gxsd2p\">If you see something wrong or you want to contribute by:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pxkwtk\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think that could be interesting to have,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-jnq0pp\">If you have any questions or issues please open an issue in the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-psntnz\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li> \u003Cli>Torrust Compose: \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">https://github.com/torrust/torrust-compose\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cp data-svelte-h=\"svelte-q8fjkb\">Other trackers:\u003C/p> \u003Cul data-svelte-h=\"svelte-1jgk2dy\">\u003Cli>\u003Ca href=\"https://github.com/chihaya/chihaya\" rel=\"nofollow\">Chihaya\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://erdgeist.org/arts/software/opentracker/\" rel=\"nofollow\">opentracker\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">aquatic\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-f37z12\">Crates for concurrent writes:\u003C/p> \u003Cul data-svelte-h=\"svelte-1yvyf58\">\u003Cli>\u003Ca href=\"https://docs.rs/dashmap/latest/dashmap/\" rel=\"nofollow\">DashMap\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-uqycu9\">Other links:\u003C/p> \u003Cul data-svelte-h=\"svelte-1ig97l4\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/docs/benchmarking.md\" rel=\"nofollow\">Torrust Tracker Benchmarking Docs\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/greatest-ape/aquatic/tree/master/crates/udp_load_test\" rel=\"nofollow\">Aquatic UDP load test tool\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/greatest-ape/aquatic/tree/master/crates/bencher\" rel=\"nofollow\">Aquatic Bencher\u003C/a>.\u003C/li>\u003C/ul>\u003C/div>\u003C/div>","16 min read",[46,84,89,121,128,165,173,178,183,207,214,233,240,245,250,255,262,267,274,288,1,295,303,308,315,320,325,332,339,344,349,354],{"title":47,"slug":48,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":52,"hidden":12,"html":58,"readingTime":16,"relatedPosts":59},"Hash2Torrent - Retrieve Torrent Files Effortlessly!","hash2torrent-retrieve-torrent-files-effortlessly","/images/posts/hash2torrent-retrieve-torrent-files-effortlessly/hash2torrent-screenshot.png","2024-09-05T10:00:00.000Z","Discover Hash2Torrent, a new tool to fetch torrent files (metainfo files) directly from their infohash! Simplify your torrent management and integrations with our easy-to-use service.",[53,54,55,56,57],"Service","Demo","Metainfo","Metadata","Sample"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-outevg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-nkp85p\">\u003Cli>\u003Ca href=\"#why-this-tool\">Why this tool\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#implementation\">Implementation\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#alternative-methods\">Alternative Methods\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#benefits-of-using-hash2torrent\">Benefits of Using Hash2Torrent\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#links\">Links\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#acknowledgments\">Acknowledgments\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Cp data-svelte-h=\"svelte-ubtbd9\">Hello, Torrust community!\u003C/p> \u003Cp data-svelte-h=\"svelte-uyap3o\">We are thrilled to introduce our newest project: \u003Ca href=\"https://hash2torrent.com/\" rel=\"nofollow\">Hash2Torrent\u003C/a>, a web service that allows you to easily retrieve torrent files using only their infohash (version 1).\u003C/p> \u003Cp data-svelte-h=\"svelte-12jvpoc\">Hash2Torrent is designed to make torrent management more accessible and user-friendly, without the need to install a BitTorrent client.\u003C/p> \u003Cdiv class=\"callout-block success svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M7 12.5L10 15.5L17 8.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-7o6rhp\">\u003Ca href=\"https://hash2torrent.com\" rel=\"nofollow\">https://hash2torrent.com\u003C/a>\u003C/p>\u003C/div> \u003Ch2 id=\"why-this-tool\" data-svelte-h=\"svelte-zwumqj\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-this-tool\">\u003Cspan>#\u003C/span>\u003C/a>Why this tool\u003C/h2> \u003Cp data-svelte-h=\"svelte-up3155\">In our quest to find a straightforward tool that allows users to download torrent files directly from an infohash, we discovered that there wasn’t a simple, reliable service available. We set out to change that by creating Hash2Torrent — a service that fills this gap. With Hash2Torrent, you can now quickly download torrent files by simply entering the infohash on our website (\u003Ca href=\"https://hash2torrent.com/\" rel=\"nofollow\">hash2torrent.com\u003C/a>) or using a direct URL format:\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">https://hash2torrent.com/&#123;info-hash&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div> \u003Cp data-svelte-h=\"svelte-9lfeag\">For example: \u003Ca href=\"https://hash2torrent.com/443c7602b4fde83d1154d6d9da48808418b181b6\" rel=\"nofollow\">https://hash2torrent.com/443c7602b4fde83d1154d6d9da48808418b181b6\u003C/a>.\u003C/p> \u003Cdiv class=\"callout-block warning svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 7L12 13\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 17.01L12.01 16.9989\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-3s2m8o\">The service does NOT download the contents described in the torrent file. It only ask other peers for the torrent file, also called metainfo file. Besides, the file (called metadata in BEP 9) includes only the info dictionary because is the only part covered by the info-hash. See \u003Ca href=\"https://www.bittorrent.org/beps/bep_0009.html\" rel=\"nofollow\">BEP 9\u003C/a> for more information.\u003C/p>\u003C/div> \u003Ch2 id=\"implementation\" data-svelte-h=\"svelte-2yffi3\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#implementation\">\u003Cspan>#\u003C/span>\u003C/a>Implementation\u003C/h2> \u003Cp data-svelte-h=\"svelte-1id2b5t\">The project is a thin API wrapper that uses the Rust BitTorrent client \u003Ca href=\"https://github.com/ikatson/rqbit\" rel=\"nofollow\">rqbit\u003C/a>. rqbit has an option to add a torrent to the client in \u003Ccode>list-only\u003C/code> mode, meaning the torrent is not downloaded, but only listed in the client. When you add a new torrent from a magnet-link, the client automatically gets the torrent file from other peers if it’s available.\u003C/p> \u003Cp data-svelte-h=\"svelte-eu5zqp\">The API generates a magnet-link for the info-hash and adds that magnet-link to the client in \u003Ccode>list-only\u003C/code> mode. The clients returns the torrent file.\u003C/p> \u003Cdiv class=\"callout-block warning svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 7L12 13\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 17.01L12.01 16.9989\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-kd9eef\">For the time being, the service API only returns a direct (not user-friendly) timeout (408) if the client behind the service can’t find any peer having that torrent.\u003C/p>\u003C/div> \u003Ch2 id=\"alternative-methods\" data-svelte-h=\"svelte-1rprgya\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#alternative-methods\">\u003Cspan>#\u003C/span>\u003C/a>Alternative Methods\u003C/h2> \u003Cp data-svelte-h=\"svelte-wmzqmi\">Traditionally, if you wanted to retrieve a torrent file using its infohash, you would have to:\u003C/p> \u003Cul data-svelte-h=\"svelte-fsofnl\">\u003Cli>Open a BitTorrent client that supports DHT (Distributed Hash Table).\u003C/li> \u003Cli>Add the infohash as a magnet link.\u003C/li> \u003Cli>Wait for the client to find peers that have the torrent file.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-y1sn1a\">While this method works, it can be cumbersome and is not ideal if you’re looking for a lightweight solution or need to automate the process for integration into other services.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1uwzmsq\">\u003Cstrong>NOTICE:\u003C/strong> You need the DHT to find other peers having the torrent. In the future we could also also user to introduce a magnet-link that may contain a list of trackers. In that case, the client could use those tracker to find peers.\u003C/p>\u003C/div> \u003Ch2 id=\"benefits-of-using-hash2torrent\" data-svelte-h=\"svelte-1gjvvqk\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#benefits-of-using-hash2torrent\">\u003Cspan>#\u003C/span>\u003C/a>Benefits of Using Hash2Torrent\u003C/h2> \u003Cp data-svelte-h=\"svelte-1077nrr\">Hash2Torrent is all about simplicity and ease of integration:\u003C/p> \u003Cul data-svelte-h=\"svelte-np9emh\">\u003Cli>\u003Cstrong>User-Friendly Interface:\u003C/strong> Just like a Google search, simply type the infohash into our form, click download, and if peers are available, the torrent file will be downloaded within seconds.\u003C/li> \u003Cli>\u003Cstrong>Direct URL Access:\u003C/strong> Use our direct URL format to fetch torrent files programmatically, making it ideal for integration with other tools and services.\u003C/li> \u003Cli>\u003Cstrong>Efficiency:\u003C/strong> No need to deal with BitTorrent clients or complex setups. Hash2Torrent is the simplest way to get a torrent file from an infohash. We have also added a torrents cache so it will be even faster if the torrent is already cached.\u003C/li> \u003Cli>\u003Cstrong>Contribution to the Ecosystem:\u003C/strong> By providing this service, we aim to empower the community with more tools that enhance the overall BitTorrent experience.\u003C/li>\u003C/ul> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-12tu4dn\">Try it out! Visit Hash2Torrent (\u003Ca href=\"https://hash2torrent.com/\" rel=\"nofollow\">hash2torrent.com\u003C/a>) and give it a try with your favorite torrents’ infohashes. We are eager to hear your feedback and suggestions.\u003C/p>\u003C/div> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-riz87j\">We built Hash2Torrent to make torrent retrieval from infohashes as easy as possible. Whether you’re a casual user who needs the occasional torrent file or a developer looking to integrate torrent retrieval into your application, Hash2Torrent is here to help.\u003C/p> \u003Cp data-svelte-h=\"svelte-rnssrq\">This project is just one of the many ways we plan to contribute to the BitTorrent ecosystem by providing practical, user-friendly tools. We believe in building a more accessible torrenting experience for everyone, and Hash2Torrent is a significant step in that direction. We are excited to continue innovating and supporting the community with more tools like this!\u003C/p> \u003Cp data-svelte-h=\"svelte-3l3aev\">Happy torrenting!\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cul data-svelte-h=\"svelte-c92ij0\">\u003Cli>\u003Ca href=\"https://hash2torrent.com/\" rel=\"nofollow\">The live demo\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-hash2torrent\" rel=\"nofollow\">Github repo\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-gziuqu\">A massive thank you to all contributors who made this project possible, especially those involved in developing the Rust-based BitTorrent client that powers Hash2Torrent, specially to \u003Ca href=\"https://github.com/ikatson\" rel=\"nofollow\">Igor Katson\u003C/a> whose work underpins Hash2Torrent. Their dedication and contributions have been instrumental in bringing this service to life.\u003C/p> \u003Cp data-svelte-h=\"svelte-mcy6nd\">If you have any questions or issues regarding this post, please \u003Ca href=\"https://github.com/torrust/torrust-website/issues/new\" rel=\"nofollow\">open an issue\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19k8tej\">For any other questions or issues related to Torrust repositories, please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-1elgqc0\">\u003Cli>Torrust Hash2Torrent: \u003Ca href=\"https://github.com/torrust/torrust-hash2torrent/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-hash2torrent/issues\u003C/a>\u003C/li> \u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Backend: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Frontend: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>",[60,64,75],{"title":47,"slug":61,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":62,"hidden":12,"html":63,"readingTime":16},"/v2/hash2torrent-retrieve-torrent-files-effortlessly",[53,54,55,56,57]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Cp data-svelte-h=\"svelte-ubtbd9\">Hello, Torrust community!\u003C/p> \u003Cp data-svelte-h=\"svelte-uyap3o\">We are thrilled to introduce our newest project: \u003Ca href=\"https://hash2torrent.com/\" rel=\"nofollow\">Hash2Torrent\u003C/a>, a web service that allows you to easily retrieve torrent files using only their infohash (version 1).\u003C/p> \u003Cp data-svelte-h=\"svelte-12jvpoc\">Hash2Torrent is designed to make torrent management more accessible and user-friendly, without the need to install a BitTorrent client.\u003C/p> \u003Cdiv class=\"callout-block success svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M7 12.5L10 15.5L17 8.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-7o6rhp\">\u003Ca href=\"https://hash2torrent.com\" rel=\"nofollow\">https://hash2torrent.com\u003C/a>\u003C/p>\u003C/div> \u003Ch2 id=\"why-this-tool\" data-svelte-h=\"svelte-zwumqj\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-this-tool\">\u003Cspan>#\u003C/span>\u003C/a>Why this tool\u003C/h2> \u003Cp data-svelte-h=\"svelte-up3155\">In our quest to find a straightforward tool that allows users to download torrent files directly from an infohash, we discovered that there wasn’t a simple, reliable service available. We set out to change that by creating Hash2Torrent — a service that fills this gap. With Hash2Torrent, you can now quickly download torrent files by simply entering the infohash on our website (\u003Ca href=\"https://hash2torrent.com/\" rel=\"nofollow\">hash2torrent.com\u003C/a>) or using a direct URL format:\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">https://hash2torrent.com/&#123;info-hash&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div> \u003Cp data-svelte-h=\"svelte-zn98eu\">For example: \u003Ca href=\"https://hash2torrent.com/443c7602b4fde83d1154d6d9da48808418b181b6\" rel=\"nofollow\">https://hash2torrent.com/443c7602b4fde83d1154d6d9da48808418b181b6\u003C/a>\u003C/p> \u003Cdiv class=\"callout-block warning svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 7L12 13\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 17.01L12.01 16.9989\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-3s2m8o\">The service does NOT download the contents described in the torrent file. It only ask other peers for the torrent file, also called metainfo file. Besides, the file (called metadata in BEP 9) includes only the info dictionary because is the only part covered by the info-hash. See \u003Ca href=\"https://www.bittorrent.org/beps/bep_0009.html\" rel=\"nofollow\">BEP 9\u003C/a> for more information.\u003C/p>\u003C/div> \u003Ch2 id=\"implementation\" data-svelte-h=\"svelte-2yffi3\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#implementation\">\u003Cspan>#\u003C/span>\u003C/a>Implementation\u003C/h2> \u003Cp data-svelte-h=\"svelte-1id2b5t\">The project is a thin API wrapper that uses the Rust BitTorrent client \u003Ca href=\"https://github.com/ikatson/rqbit\" rel=\"nofollow\">rqbit\u003C/a>. rqbit has an option to add a torrent to the client in \u003Ccode>list-only\u003C/code> mode, meaning the torrent is not downloaded, but only listed in the client. When you add a new torrent from a magnet-link, the client automatically gets the torrent file from other peers if it’s available.\u003C/p> \u003Cp data-svelte-h=\"svelte-eu5zqp\">The API generates a magnet-link for the info-hash and adds that magnet-link to the client in \u003Ccode>list-only\u003C/code> mode. The clients returns the torrent file.\u003C/p> \u003Cdiv class=\"callout-block warning svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 7L12 13\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 17.01L12.01 16.9989\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-kd9eef\">For the time being, the service API only returns a direct (not user-friendly) timeout (408) if the client behind the service can’t find any peer having that torrent.\u003C/p>\u003C/div> \u003Ch2 id=\"alternative-methods\" data-svelte-h=\"svelte-1rprgya\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#alternative-methods\">\u003Cspan>#\u003C/span>\u003C/a>Alternative Methods\u003C/h2> \u003Cp data-svelte-h=\"svelte-wmzqmi\">Traditionally, if you wanted to retrieve a torrent file using its infohash, you would have to:\u003C/p> \u003Cul data-svelte-h=\"svelte-fsofnl\">\u003Cli>Open a BitTorrent client that supports DHT (Distributed Hash Table).\u003C/li> \u003Cli>Add the infohash as a magnet link.\u003C/li> \u003Cli>Wait for the client to find peers that have the torrent file.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-y1sn1a\">While this method works, it can be cumbersome and is not ideal if you’re looking for a lightweight solution or need to automate the process for integration into other services.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1uwzmsq\">\u003Cstrong>NOTICE:\u003C/strong> You need the DHT to find other peers having the torrent. In the future we could also also user to introduce a magnet-link that may contain a list of trackers. In that case, the client could use those tracker to find peers.\u003C/p>\u003C/div> \u003Ch2 id=\"benefits-of-using-hash2torrent\" data-svelte-h=\"svelte-1gjvvqk\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#benefits-of-using-hash2torrent\">\u003Cspan>#\u003C/span>\u003C/a>Benefits of Using Hash2Torrent\u003C/h2> \u003Cp data-svelte-h=\"svelte-1077nrr\">Hash2Torrent is all about simplicity and ease of integration:\u003C/p> \u003Cul data-svelte-h=\"svelte-np9emh\">\u003Cli>\u003Cstrong>User-Friendly Interface:\u003C/strong> Just like a Google search, simply type the infohash into our form, click download, and if peers are available, the torrent file will be downloaded within seconds.\u003C/li> \u003Cli>\u003Cstrong>Direct URL Access:\u003C/strong> Use our direct URL format to fetch torrent files programmatically, making it ideal for integration with other tools and services.\u003C/li> \u003Cli>\u003Cstrong>Efficiency:\u003C/strong> No need to deal with BitTorrent clients or complex setups. Hash2Torrent is the simplest way to get a torrent file from an infohash. We have also added a torrents cache so it will be even faster if the torrent is already cached.\u003C/li> \u003Cli>\u003Cstrong>Contribution to the Ecosystem:\u003C/strong> By providing this service, we aim to empower the community with more tools that enhance the overall BitTorrent experience.\u003C/li>\u003C/ul> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-12tu4dn\">Try it out! Visit Hash2Torrent (\u003Ca href=\"https://hash2torrent.com/\" rel=\"nofollow\">hash2torrent.com\u003C/a>) and give it a try with your favorite torrents’ infohashes. We are eager to hear your feedback and suggestions.\u003C/p>\u003C/div> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-riz87j\">We built Hash2Torrent to make torrent retrieval from infohashes as easy as possible. Whether you’re a casual user who needs the occasional torrent file or a developer looking to integrate torrent retrieval into your application, Hash2Torrent is here to help.\u003C/p> \u003Cp data-svelte-h=\"svelte-rnssrq\">This project is just one of the many ways we plan to contribute to the BitTorrent ecosystem by providing practical, user-friendly tools. We believe in building a more accessible torrenting experience for everyone, and Hash2Torrent is a significant step in that direction. We are excited to continue innovating and supporting the community with more tools like this!\u003C/p> \u003Cp data-svelte-h=\"svelte-3l3aev\">Happy torrenting!\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cul data-svelte-h=\"svelte-c92ij0\">\u003Cli>\u003Ca href=\"https://hash2torrent.com/\" rel=\"nofollow\">The live demo\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-hash2torrent\" rel=\"nofollow\">Github repo\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-gziuqu\">A massive thank you to all contributors who made this project possible, especially those involved in developing the Rust-based BitTorrent client that powers Hash2Torrent, specially to \u003Ca href=\"https://github.com/ikatson\" rel=\"nofollow\">Igor Katson\u003C/a> whose work underpins Hash2Torrent. Their dedication and contributions have been instrumental in bringing this service to life.\u003C/p> \u003Cp data-svelte-h=\"svelte-mcy6nd\">If you have any questions or issues regarding this post, please \u003Ca href=\"https://github.com/torrust/torrust-website/issues/new\" rel=\"nofollow\">open an issue\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19k8tej\">For any other questions or issues related to Torrust repositories, please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-1elgqc0\">\u003Cli>Torrust Hash2Torrent: \u003Ca href=\"https://github.com/torrust/torrust-hash2torrent/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-hash2torrent/issues\u003C/a>\u003C/li> \u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Backend: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Frontend: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>",{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},"How To Run A Local Demo","how-to-run-a-local-demo","/images/posts/mandelbrot-set-periods-torrent-screenshot.png","2023-07-11T15:28:28.769Z","2023-07-11T15:28:29.783Z","You can easily run the Torrust Index demo on your computer easily with Git and Docker.",[54,72,73],"Tutorial","Guide"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-1m3njcc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of Contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-3eplih\">\u003Cli>\u003Ca href=\"#requirements\">Requirements\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#running-the-demo\">Running the demo\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#application-setup\">Application Setup\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#advanced-setup\">Advanced Setup\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Cp data-svelte-h=\"svelte-bew7i4\">If you want to try the Torrust Index \u003Cstrong>demo\u003C/strong> on your computer, you can easily run it with Git and Docker. This guide will explain how to setup the demo on your own computer in \u003Cstrong>a few seconds\u003C/strong>.\u003C/p> \u003Ch2 id=\"requirements\" data-svelte-h=\"svelte-d9t7ph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#requirements\">\u003Cspan>#\u003C/span>\u003C/a>Requirements\u003C/h2> \u003Cp data-svelte-h=\"svelte-rad3cl\">You are going to need the following tools:\u003C/p> \u003Cul data-svelte-h=\"svelte-1iphsw0\">\u003Cli>Git\u003C/li> \u003Cli>Docker\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-zalwqu\">At the time of writing, we are using Git version \u003Ccode>2.39.2\u003C/code> and Docker version \u003Ccode>26.1.3\u003C/code>, but it should work with any recent version.\u003C/p> \u003Cp data-svelte-h=\"svelte-1u2axvt\">By default, the demo uses SQLite3 as database driver, but you can also use MySQL. If you want to use SQLite3, you do not need to install anything else. If you want to take a look at the internal database structure or data, you can install \u003Ca href=\"https://sqlitebrowser.org/\" rel=\"nofollow\">DB Browser for SQLite\u003C/a>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> Although we use some small bash scripts, you can run the demo on different operating systems by executing the docker-compose command manually. We have tested it on Linux.\u003C/div> \u003Ch2 id=\"running-the-demo\" data-svelte-h=\"svelte-103hfc0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-the-demo\">\u003Cspan>#\u003C/span>\u003C/a>Running the demo\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ung1ed\">We are going to use a temporary directory to run the demo. You can install the demo with the following commands:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">mkdir -p /tmp/torrust \\\n  &amp;&amp; cd /tmp/torrust \\\n  &amp;&amp; git clone git@github.com:torrust/torrust-compose.git \\\n  &amp;&amp; cd torrust-compose/demo \\\n  &amp;&amp; ./bin/install.sh\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1yy75v2\">To start the application:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">./bin/start.sh\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-v2dpew\">To stop the application:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">./bin/stop.sh\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-a20ena\">After starting the demo you can check that all container are running with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">$ docker ps\nCONTAINER ID   IMAGE                       COMMAND                  CREATED         STATUS                            PORTS                                                                                                      NAMES\ne380a435eede   torrust/index-gui:develop   &quot;/usr/local/bin/entrypoint.sh&quot;   4 seconds ago   Up 3 seconds (health: starting)   0.0.0.0:3000-&gt;3000/tcp, :::3000-&gt;3000/tcp, 0.0.0.0:24678-&gt;24678/tcp, :::24678-&gt;24678/tcp                   torrust-index-gui-1\ndb8f7c679b66   torrust/index:develop       &quot;/usr/local/bin/entrypoint.sh&quot;   5 seconds ago   Up 3 seconds (health: starting)   0.0.0.0:3001-&gt;3001/tcp, :::3001-&gt;3001/tcp                                                                  torrust-index-1\n820720c37d80   torrust/tracker:develop     &quot;/usr/local/bin/entrypoint.sh&quot;   5 seconds ago   Up 4 seconds (health: starting)   1313/tcp, 0.0.0.0:1212-&gt;1212/tcp, :::1212-&gt;1212/tcp, 7070/tcp, 0.0.0.0:6969-&gt;6969/udp, :::6969-&gt;6969/udp   torrust-tracker-1\na9668e78f3cc   mysql:8.0                   &quot;docker-entrypoint.s…&quot;   5 seconds ago   Up 4 seconds (health: starting)   0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp                                                       torrust-mysql-1\nc10ad938b283   dockage/mailcatcher:0.8.2   &quot;entrypoint mailcatcher&quot;   5 seconds ago   Up 4 seconds                      0.0.0.0:1025-&gt;1025/tcp, :::1025-&gt;1025/tcp, 0.0.0.0:1080-&gt;1080/tcp, :::1080-&gt;1080/tcp                       torrust-mailcatcher-1\n\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> IMPORTANT! We use the latest commit from the develop branches of the Torrust repositories. If you want to use the latest stable version, you can change the tag for the docker images in the `docker-compose.yml` file.\u003C/div> \u003Cp data-svelte-h=\"svelte-qp6dwn\">Once the demo is running, you go to \u003Ca href=\"http://localhost:3000/\" rel=\"nofollow\">http://localhost:3000/\u003C/a> to start using it.\u003C/p> \u003Ch2 id=\"application-setup\" data-svelte-h=\"svelte-1wcjsvs\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#application-setup\">\u003Cspan>#\u003C/span>\u003C/a>Application Setup\u003C/h2> \u003Cp data-svelte-h=\"svelte-161iicw\">The application has some public pages like the torrent list or torrent details pages. But other pages require authentication. To access those pages you need to create an account. You can do it from the signup page:\u003C/p> \u003Cp data-svelte-h=\"svelte-cpmctb\">\u003Ca href=\"http://localhost:3000/signup\" rel=\"nofollow\">http://localhost:3000/signup\u003C/a>\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> The first user registered will be the \u003Ccode data-svelte-h=\"svelte-ik7s6n\">admin\u003C/code> user. The application only has one admin user.\u003C/div> \u003Cp data-svelte-h=\"svelte-1hm9zmc\">The application is very easy to use but you can find comprehensive documentation in the following links:\u003C/p> \u003Cul data-svelte-h=\"svelte-46v7wy\">\u003Cli>\u003Ca href=\"https://torrust.github.io/torrust-index-gui-user-guide/\" rel=\"nofollow\">Torrust Index GUI User’s Guide\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-gui/blob/develop/docs/index.md\" rel=\"nofollow\">Torrust Index GUI\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://docs.rs/torrust-index%3E\" rel=\"nofollow\">Torrust Index\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://docs.rs/torrust-tracker\" rel=\"nofollow\">Torrust Tracker\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"advanced-setup\" data-svelte-h=\"svelte-1efp6lo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#advanced-setup\">\u003Cspan>#\u003C/span>\u003C/a>Advanced Setup\u003C/h2> \u003Cp data-svelte-h=\"svelte-1y02r6p\">You can modify the configuration of the demo to use different ports, database drivers, etcetera. But we are going to use the default configuration in this guide.\u003C/p> \u003Cp data-svelte-h=\"svelte-lvns2y\">If you want to change the configuration for the Tracker or the Index Backend, you can do it by modifying the \u003Ccode>config-tracker.local.toml\u003C/code> or \u003Ccode>config-index.local.toml\u003C/code> files and stopping (\u003Ccode>./bin/stop.sh\u003C/code>) and starting (\u003Ccode>./bin/start.sh\u003C/code>) the docker containers again.\u003C/p> \u003Cp data-svelte-h=\"svelte-kj0r6a\">Refer to the documentation of the corresponding application to know more about the configuration options:\u003C/p> \u003Cul data-svelte-h=\"svelte-1m2k50q\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker\" rel=\"nofollow\">Torrust Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index\" rel=\"nofollow\">Torrust Index\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-gui\" rel=\"nofollow\">Torrust Index GUI\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1gntbj7\">That’s it. Enjoy the demo! We will publish a new blog post soon explaining how to use the demo for basics tasks like uploading a torrent, adding categories or tags, etcetera.\u003C/p> \u003Cp data-svelte-h=\"svelte-1e9qm2v\">If you have any questions or issues please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-fxskft\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">Torrust Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">Torrust Index\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">Torrust Index GUI\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>",{"title":76,"slug":77,"coverImage":78,"date":79,"updated":79,"excerpt":80,"contributor":24,"contributorSlug":25,"tags":81,"hidden":12,"html":83,"readingTime":16},"Introducing the New Sample Torrent Migration Tool","introducing-the-new-sample-torrent-migration-tool","/images/posts/pexels-david-dibert-7177008.jpg","2023-09-04T13:24:27.241Z","Looking to migrate to the Torrust Index? Dive into our Torrents Importer Sample to seamlessly transfer your torrents to Torrust.",[82,57],"Migration Tool","\u003Cp data-svelte-h=\"svelte-1iefhg6\">Photo by David Dibert: \u003Ca href=\"https://www.pexels.com/photo/a-flock-of-geese-flying-7177008/\" rel=\"nofollow\">https://www.pexels.com/photo/a-flock-of-geese-flying-7177008/\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-ubtbd9\">Hello, Torrust community!\u003C/p> \u003Cp data-svelte-h=\"svelte-1iez7gt\">We’re always looking for ways to enhance your experience with Torrust, and today, we’re excited to unveil our latest addition: \u003Ca href=\"https://github.com/torrust/torrents-importer-sample\" rel=\"nofollow\">A sample migration tool written in Rust\u003C/a>, specifically designed for those looking to seamlessly import torrents from other sources into our \u003Ca href=\"https://github.com/torrust/torrust-index-backend\" rel=\"nofollow\">Torrust Index\u003C/a>!\u003C/p>  \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-outevg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-1aqjmzy\">\u003Cli>\u003Ca href=\"#why-this-tool\">Why this tool?\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#capabilities\">Capabilities\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#links\">Links\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#acknowledgments\">Acknowledgments\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"why-this-tool\" data-svelte-h=\"svelte-1hhz7u8\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-this-tool\">\u003Cspan>#\u003C/span>\u003C/a>Why this tool?\u003C/h2> \u003Cp data-svelte-h=\"svelte-m00pe5\">Many in our community have asked us for an efficient method to migrate torrents from their current Index/Trackers to Torrust. Recognizing this need, we took it upon ourselves to develop a solution that would make this process as hassle-free as possible.\u003C/p> \u003Cp data-svelte-h=\"svelte-1bwpwz\">On the other hand, we have been doing an intensive testing of the Torrust Index Backend. We wanted to test the backend with a large set of real torrents. We found the site \u003Ca href=\"https://academictorrents.com/\" rel=\"nofollow\">https://academictorrents.com/\u003C/a> which has thousands of torrents and they kindly make them public available.\u003C/p> \u003Cp data-svelte-h=\"svelte-ewj05f\">We decided to create a tool that would allow us to import torrents from this site into our Torrust Index. This tool is a sample project that we are sharing with the community. We hope that it will be useful for those who want to migrate their torrents to Torrust.\u003C/p> \u003Cp data-svelte-h=\"svelte-891gdg\">The example repo is \u003Ca href=\"https://github.com/torrust/torrents-importer-sample\" rel=\"nofollow\">https://github.com/torrust/torrents-importer-sample\u003C/a>\u003C/p> \u003Ch2 id=\"capabilities\" data-svelte-h=\"svelte-y3ky5f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#capabilities\">\u003Cspan>#\u003C/span>\u003C/a>Capabilities\u003C/h2> \u003Cp data-svelte-h=\"svelte-11106r8\">The migration tool sample offers a straightforward way to:\u003C/p> \u003Cul data-svelte-h=\"svelte-zfhc8b\">\u003Cli>Fetch Torrents from XML Lists: The tool takes torrents from a list in an XML file, ensuring you don’t have to manually pick and transfer torrents one by one.\u003C/li> \u003Cli>Download Torrents from Other Sites: No more downloading and re-uploading! Our tool will directly fetch the torrents for you.\u003C/li> \u003Cli>Upload to Torrust: With the help of the Torrust Index REST API, the torrents are then uploaded into our software, ready for classification and use.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1dt3i5t\">While our initial test run has been on an index containing academic torrents, the tool is versatile enough to handle a variety of sources. The underlying principles remain the same.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-k0wwwx\">\u003Cstrong>Disclaimer\u003C/strong>: This sample project is not intended to be a production-ready tool. It is a sample project that we are sharing with the community. We hope that it will be useful for those who want to migrate their torrents to Torrust. For larger datasets it would be convenient to handle errors asynchronously. In the current version the application exists immediately when something goes wrong and you have to handle the problem yourself and restart it.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1oc41sa\">You will problably need to rewrite the whole “source” part of the application to adapt it to your needs. The “destination” part should be reusable as it is.\u003C/p> \u003Cp data-svelte-h=\"svelte-1uuu4wv\">When you run the importer, the output will be something like this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">$ cargo run\n    Finished dev [unoptimized + debuginfo] target(s) in 0.02s\n     Running &#96;target/debug/torrents-importer-sample&#96;\nAPI login with username admin ...\nLogged as admin with account admin\nReading file ./data/database.xml ...\nProcessing channel ...\n  Title: Mandelbrot Set Collection\n  description: Torrents with Mandelbrot Set Images\n  Link: https://github.com/torrust/torrents-importer-sample\nProcessing only 1 torrent ...\nProcessing torrent #1 ...\n  Title: MandelBrot Set 01\n  Category: Fractal\n  Infohash: 0c90fbf036e28370c1ec773401bc7620146b1d48\n  Guid: https://raw.githubusercontent.com/torrust/torrents-importer-sample/main/tests/fixtures/torrents/mandelbrot_set_01.torrent\n  Link: https://raw.githubusercontent.com/torrust/torrents-importer-sample/main/tests/fixtures/torrents/mandelbrot_set_01.torrent\n  Description:  ...\n  Size: 17130410419\nChecking if the torrent 0c90fbf036e28370c1ec773401bc7620146b1d48 exist in the Torrust Index ...\nDownloading the torrent file from the source server ...\nDownloading torrent from https://raw.githubusercontent.com/torrust/torrents-importer-sample/main/tests/fixtures/torrents/0c90fbf036e28370c1ec773401bc7620146b1d48.torrent into ./data/torrents/0c90fbf036e28370c1ec773401bc7620146b1d48.torrent\nTorrent successfully downloaded.\nUploading the torrent 0c90fbf036e28370c1ec773401bc7620146b1d48 to the Torrust Index ...\nresponse: 200\nTorrent uploaded UploadedTorrent &#123;\n    torrent_id: 2529,\n    info_hash: &quot;0c90fbf036e28370c1ec773401bc7620146b1d48&quot;,\n&#125;\nProcessed torrents: 1\nUploaded torrents:  1\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-jshx3u\">Being a sample project, we believe that there’s always room for improvement. We invite the Torrust community to use the tool, provide feedback, and even contribute to its enhancement. Together, we can refine it and adapt it to cater to more diverse needs.\u003C/p> \u003Cp data-svelte-h=\"svelte-nmkdav\">We’re committed to evolving and making Torrust a go-to solution for all torrent aficionados. Our new migration tool is just one step in this journey. Whether you’re a casual user or an enterprise looking to migrate a large number of torrents, our tool aims to make the transition smoother for you.\u003C/p> \u003Cp data-svelte-h=\"svelte-pw1bp9\">A big shout-out to everyone involved in this project! We encourage everyone to give it a try and share your experiences. Together, let’s make the world of torrents even more connected and accessible.\u003C/p> \u003Cp data-svelte-h=\"svelte-3l3aev\">Happy torrenting!\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cul data-svelte-h=\"svelte-1hy0y5t\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-backend\" rel=\"nofollow\">The Torrust Index Backend\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrents-importer-sample\" rel=\"nofollow\">The Torrust Torrents Importer Sample\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-1mqt1hd\">We would like to acknowledge the team from \u003Ca href=\"https://academictorrents.com/\" rel=\"nofollow\">https://academictorrents.com/\u003C/a> for their great work and for making their torrents public available.\u003C/p> \u003Cp data-svelte-h=\"svelte-mcy6nd\">If you have any questions or issues regarding this post, please \u003Ca href=\"https://github.com/torrust/torrust-website/issues/new\" rel=\"nofollow\">open an issue\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19k8tej\">For any other questions or issues related to Torrust repositories, please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r8qk6t\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Backend: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Frontend: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>",{"title":47,"slug":61,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":62,"hidden":12,"html":63,"readingTime":16,"relatedPosts":85},[86,87,88],{"title":47,"slug":48,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":52,"hidden":12,"html":58,"readingTime":16},{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":76,"slug":77,"coverImage":78,"date":79,"updated":79,"excerpt":80,"contributor":24,"contributorSlug":25,"tags":81,"hidden":12,"html":83,"readingTime":16},{"title":90,"slug":91,"coverImage":92,"date":93,"updated":93,"excerpt":94,"contributor":24,"contributorSlug":25,"tags":95,"hidden":12,"html":98,"readingTime":99,"relatedPosts":100},"Released version v3.0.0-beta","released-v3-0-0-beta","/images/posts/released-v3-0-0-beta/team.png","2024-09-03T14:30:38.554Z","We're excited to announce the release of v3.0.0-beta, marking a significant step towards our upcoming major release, v3.0.0. This release solidifies the features and prepares us for the beta phase.",[96,97],"Announcement","Release"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-outevg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-1vwra7g\">\u003Cli>\u003Ca href=\"#greetings-torrust-fans\">Greetings, Torrust Fans!\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#release-schedule\">Release Schedule\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#how-to-participate\">How to Participate\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#your-input-helps-us-improve\">Your Input Helps Us Improve\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#important-notice-demo-availability\">Important Notice: Demo Availability\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#special-thanks\">Special Thanks\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"greetings-torrust-fans\" data-svelte-h=\"svelte-81guo2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#greetings-torrust-fans\">\u003Cspan>#\u003C/span>\u003C/a>\u003Cstrong>Greetings, Torrust Fans!\u003C/strong>\u003C/h2> \u003Cp data-svelte-h=\"svelte-19yyzhb\">As we move forward according to our release plan, we’re excited to be nearing the final release of version 3.0.0.\u003C/p> \u003Cp data-svelte-h=\"svelte-zqgc4z\">On August 13th, we made \u003Ccode>v3.0.0-alpha.12\u003C/code> available, and now we’re pleased to present v3.0.0-beta. This release is a critical step as we refine the software in preparation for the official launch.\u003C/p> \u003Ch2 id=\"release-schedule\" data-svelte-h=\"svelte-fbktfz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#release-schedule\">\u003Cspan>#\u003C/span>\u003C/a>Release Schedule\u003C/h2> \u003Cp data-svelte-h=\"svelte-2jnc2v\">The journey to our major release continues, and here’s our roadmap:\u003C/p> \u003Ctable data-svelte-h=\"svelte-g6bxxo\">\u003Cthead>\u003Ctr>\u003Cth>Milestone\u003C/th> \u003Cth>Target Date\u003C/th> \u003Cth>Version\u003C/th>\u003C/tr>\u003C/thead> \u003Ctbody>\u003Ctr>\u003Ctd>Feature Freeze\u003C/td> \u003Ctd>13/08/2024\u003C/td> \u003Ctd>3.0.0-alpha.12\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Code Freeze\u003C/td> \u003Ctd>13/08/2024\u003C/td> \u003Ctd>3.0.0-alpha.12\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Beta Release\u003C/td> \u003Ctd>03/09/2024\u003C/td> \u003Ctd>3.0.0-beta\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Release Candidate\u003C/td> \u003Ctd>15/09/2024\u003C/td> \u003Ctd>3.0.0-rc.1\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Final Release\u003C/td> \u003Ctd>30/09/2024\u003C/td> \u003Ctd>3.0.0\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table> \u003Ch2 id=\"how-to-participate\" data-svelte-h=\"svelte-ja03fc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#how-to-participate\">\u003Cspan>#\u003C/span>\u003C/a>How to Participate\u003C/h2> \u003Cp data-svelte-h=\"svelte-rto9x1\">Your feedback is invaluable to us. As we move towards the beta phase, we invite you to download this beta release, test it extensively, and report any issues or suggestions you may have. Here’s how you can contribute:\u003C/p> \u003Cul data-svelte-h=\"svelte-1knhi4o\">\u003Cli>Testing: Download the alpha release and run it in your environment.\u003C/li> \u003Cli>Reporting Bugs: If you encounter any issues, please report them through our issue tracker.\u003C/li>\u003C/ul> \u003Ch2 id=\"your-input-helps-us-improve\" data-svelte-h=\"svelte-rynfgo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#your-input-helps-us-improve\">\u003Cspan>#\u003C/span>\u003C/a>Your Input Helps Us Improve\u003C/h2> \u003Cp data-svelte-h=\"svelte-1081bcg\">Your feedback is crucial in helping us refine this release. We want the community’s active involvement as we move forward.\u003C/p> \u003Cp data-svelte-h=\"svelte-bcbvzs\">After the final version 3.0.0 is released, we plan to open discussions about our future roadmap. We encourage you to propose features and improvements to help us continue building superior tools and enhance the BitTorrent ecosystem.\u003C/p> \u003Cp data-svelte-h=\"svelte-3lnjb8\">Have ideas or suggestions? Join the \u003Ca href=\"https://github.com/torrust/torrust-index-gui/discussions\" rel=\"nofollow\">discussion\u003C/a> on our GitHub repository. Your contributions are key to our collaborative development approach. Let’s work together to make Torrust even better!\u003C/p> \u003Ch2 id=\"important-notice-demo-availability\" data-svelte-h=\"svelte-1b7v9jv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#important-notice-demo-availability\">\u003Cspan>#\u003C/span>\u003C/a>Important Notice: Demo Availability\u003C/h2> \u003Cdiv class=\"callout-block warning svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 7L12 13\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 17.01L12.01 16.9989\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-f4ma2\">Please note that the \u003Ca href=\"https://index.torrust-demo.com/\" rel=\"nofollow\">demo\u003C/a> environment may experience downtime or resets as part of our ongoing testing. As this is a beta version, data may be lost during these phases. We appreciate your patience and understanding as we fine-tune the system.\u003C/p>\u003C/div> \u003Ch2 id=\"special-thanks\" data-svelte-h=\"svelte-1klzy15\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#special-thanks\">\u003Cspan>#\u003C/span>\u003C/a>Special Thanks\u003C/h2> \u003Cp data-svelte-h=\"svelte-1agj1iq\">We want to extend our deepest thanks to all the contributors who have tirelessly tested and provided feedback on this release. Your insights have been crucial in getting us this far, and we look forward to continuing this journey together.\u003C/p>\u003C/div>\u003C/div>","2 min read",[101,110,113],{"title":102,"slug":103,"coverImage":104,"date":105,"updated":6,"excerpt":106,"contributor":24,"contributorSlug":25,"tags":107,"hidden":12,"html":108,"readingTime":109},"Released version v3.0.0-alpha.12","released-v3-0-0-alpha-12","/images/posts/released-v3-0-0-alpha-12/team.png","2024-08-13T14:30:38.554Z","We're excited to announce the release of v3.0.0-alpha.12, marking a significant step towards our upcoming major release, v3.0.0. This release solidifies the features and prepares us for the beta phase.",[96,97]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-outevg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-cy4tdl\">\u003Cli>\u003Ca href=\"#hello-torrust-community\">Hello, Torrust Community!\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#whats-new-in-v300-alpha12\">What’s New in v3.0.0-alpha.12\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#release-schedule\">Release Schedule\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#how-to-get-involved\">How to Get Involved\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#your-feedback-makes-us-better\">Your Feedback Makes Us Better\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#important-notice-demo-availability\">Important Notice: Demo Availability\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#acknowledgments\">Acknowledgments\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"hello-torrust-community\" data-svelte-h=\"svelte-1vh8tpj\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hello-torrust-community\">\u003Cspan>#\u003C/span>\u003C/a>\u003Cstrong>Hello, Torrust Community!\u003C/strong>\u003C/h2> \u003Cp data-svelte-h=\"svelte-1v9vz85\">We know you’ve been eagerly anticipating the next major release of Torrust, and we’re thrilled to announce that we’re one step closer. Today, we’re excited to unveil version v3.0.0-alpha.12, a milestone that locks in the features for our upcoming major release. This alpha release is a critical step in our development cycle, and your participation in testing and feedback is more important than ever.\u003C/p> \u003Ch2 id=\"whats-new-in-v300-alpha12\" data-svelte-h=\"svelte-11j7qb3\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#whats-new-in-v300-alpha12\">\u003Cspan>#\u003C/span>\u003C/a>What’s New in v3.0.0-alpha.12\u003C/h2> \u003Cp data-svelte-h=\"svelte-x4lxas\">In this release, we’ve focused on stabilizing the new features and refining the performance of Torrust. We’ve made several improvements under the hood that pave the way for a smoother user experience and better scalability. Here’s a quick rundown of what you can expect:\u003C/p> \u003Cul data-svelte-h=\"svelte-2efcfg\">\u003Cli>\u003Cstrong>New features:\u003C/strong> Permanent tracker keys and allow to upload pre-generated keys. That would help users who want to migrate to the Torrust Tracker without affecting their active users.\u003C/li> \u003Cli>\u003Cstrong>Improved configuration:\u003C/strong> Configuration has been changed in both the Tracker and Index to make it clearer. Error messages have also been improved to help administrators to fix configuration errors.\u003C/li> \u003Cli>\u003Cstrong>Security Updates\u003C/strong>.\u003C/li> \u003Cli>\u003Cstrong>UI/UX Refinements:\u003C/strong> Minor tweaks and fixes to the user interface, enhancing usability and user experience.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-171nzu4\">The live demo is always updated to the latest version. We encourage you to explore it, try out the new features, and share your thoughts.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-aowssa\">Live demo: \u003Ca href=\"http://index.torrust-demo.com\" rel=\"nofollow\">http://index.torrust-demo.com\u003C/a>\u003C/p>\u003C/div> \u003Ch2 id=\"release-schedule\" data-svelte-h=\"svelte-fbktfz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#release-schedule\">\u003Cspan>#\u003C/span>\u003C/a>Release Schedule\u003C/h2> \u003Cp data-svelte-h=\"svelte-2jnc2v\">The journey to our major release continues, and here’s our roadmap:\u003C/p> \u003Ctable data-svelte-h=\"svelte-1i7spot\">\u003Cthead>\u003Ctr>\u003Cth>Milestone\u003C/th> \u003Cth>Target Date\u003C/th> \u003Cth>Version\u003C/th>\u003C/tr>\u003C/thead> \u003Ctbody>\u003Ctr>\u003Ctd>Feature Freeze\u003C/td> \u003Ctd>15/08/2024\u003C/td> \u003Ctd>3.0.0-alpha.12\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Code Freeze\u003C/td> \u003Ctd>15/08/2024\u003C/td> \u003Ctd>\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Beta Release\u003C/td> \u003Ctd>31/08/2024\u003C/td> \u003Ctd>3.0.0-beta\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Release Candidate\u003C/td> \u003Ctd>15/09/2024\u003C/td> \u003Ctd>3.0.0-rc.1\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Final Release\u003C/td> \u003Ctd>30/09/2024\u003C/td> \u003Ctd>3.0.0\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table> \u003Ch2 id=\"how-to-get-involved\" data-svelte-h=\"svelte-1rvh1lv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#how-to-get-involved\">\u003Cspan>#\u003C/span>\u003C/a>How to Get Involved\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ihzgpp\">Your feedback is invaluable to us. As we move towards the beta phase, we invite you to download this alpha release, test it extensively, and report any issues or suggestions you may have. Here’s how you can contribute:\u003C/p> \u003Cul data-svelte-h=\"svelte-1knhi4o\">\u003Cli>Testing: Download the alpha release and run it in your environment.\u003C/li> \u003Cli>Reporting Bugs: If you encounter any issues, please report them through our issue tracker.\u003C/li>\u003C/ul> \u003Ch2 id=\"your-feedback-makes-us-better\" data-svelte-h=\"svelte-1mkcvv2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#your-feedback-makes-us-better\">\u003Cspan>#\u003C/span>\u003C/a>Your Feedback Makes Us Better\u003C/h2> \u003Cp data-svelte-h=\"svelte-1hiya5q\">We would like the community to participate in testing this release and give us feedback.\u003C/p> \u003Cp data-svelte-h=\"svelte-a2sf39\">After releasing the final version 3.0.0 we want to open discussions for the roadmap. We want you to propose features to help us continue building even better tools and allow people to make use of the BitTorrent ecosystem.\u003C/p> \u003Cp data-svelte-h=\"svelte-plipxz\">Got ideas? Suggestions for improvement? Join the \u003Ca href=\"https://github.com/torrust/torrust-index-gui/discussions\" rel=\"nofollow\">discussion\u003C/a> on our GitHub repo’s discussion section. Your thoughts and proposals are a key part of our collaborative development process. Let’s brainstorm together to make Torrust even better.\u003C/p> \u003Ch2 id=\"important-notice-demo-availability\" data-svelte-h=\"svelte-1b7v9jv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#important-notice-demo-availability\">\u003Cspan>#\u003C/span>\u003C/a>Important Notice: Demo Availability\u003C/h2> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-168ochg\">Please be aware that the demo is subject to downtime or resets. As a beta version, it’s part of our testing process. Any data you add may be lost during these periods. We appreciate your understanding and patience as we fine-tune the platform.\u003C/p>\u003C/div> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-1agj1iq\">We want to extend our deepest thanks to all the contributors who have tirelessly tested and provided feedback on this release. Your insights have been crucial in getting us this far, and we look forward to continuing this journey together.\u003C/p>\u003C/div>\u003C/div>","3 min read",{"title":102,"slug":103,"coverImage":104,"date":105,"updated":6,"excerpt":106,"contributor":24,"contributorSlug":25,"tags":111,"hidden":12,"html":112,"readingTime":109},[96,97]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"hello-torrust-community\" data-svelte-h=\"svelte-1vh8tpj\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hello-torrust-community\">\u003Cspan>#\u003C/span>\u003C/a>\u003Cstrong>Hello, Torrust Community!\u003C/strong>\u003C/h2> \u003Cp data-svelte-h=\"svelte-1v9vz85\">We know you’ve been eagerly anticipating the next major release of Torrust, and we’re thrilled to announce that we’re one step closer. Today, we’re excited to unveil version v3.0.0-alpha.12, a milestone that locks in the features for our upcoming major release. This alpha release is a critical step in our development cycle, and your participation in testing and feedback is more important than ever.\u003C/p> \u003Ch2 id=\"whats-new-in-v300-alpha12\" data-svelte-h=\"svelte-11j7qb3\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#whats-new-in-v300-alpha12\">\u003Cspan>#\u003C/span>\u003C/a>What’s New in v3.0.0-alpha.12\u003C/h2> \u003Cp data-svelte-h=\"svelte-x4lxas\">In this release, we’ve focused on stabilizing the new features and refining the performance of Torrust. We’ve made several improvements under the hood that pave the way for a smoother user experience and better scalability. Here’s a quick rundown of what you can expect:\u003C/p> \u003Cul data-svelte-h=\"svelte-2efcfg\">\u003Cli>\u003Cstrong>New features:\u003C/strong> Permanent tracker keys and allow to upload pre-generated keys. That would help users who want to migrate to the Torrust Tracker without affecting their active users.\u003C/li> \u003Cli>\u003Cstrong>Improved configuration:\u003C/strong> Configuration has been changed in both the Tracker and Index to make it clearer. Error messages have also been improved to help administrators to fix configuration errors.\u003C/li> \u003Cli>\u003Cstrong>Security Updates\u003C/strong>.\u003C/li> \u003Cli>\u003Cstrong>UI/UX Refinements:\u003C/strong> Minor tweaks and fixes to the user interface, enhancing usability and user experience.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-171nzu4\">The live demo is always updated to the latest version. We encourage you to explore it, try out the new features, and share your thoughts.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-aowssa\">Live demo: \u003Ca href=\"http://index.torrust-demo.com\" rel=\"nofollow\">http://index.torrust-demo.com\u003C/a>\u003C/p>\u003C/div> \u003Ch2 id=\"release-schedule\" data-svelte-h=\"svelte-fbktfz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#release-schedule\">\u003Cspan>#\u003C/span>\u003C/a>Release Schedule\u003C/h2> \u003Cp data-svelte-h=\"svelte-2jnc2v\">The journey to our major release continues, and here’s our roadmap:\u003C/p> \u003Ctable data-svelte-h=\"svelte-1i7spot\">\u003Cthead>\u003Ctr>\u003Cth>Milestone\u003C/th> \u003Cth>Target Date\u003C/th> \u003Cth>Version\u003C/th>\u003C/tr>\u003C/thead> \u003Ctbody>\u003Ctr>\u003Ctd>Feature Freeze\u003C/td> \u003Ctd>15/08/2024\u003C/td> \u003Ctd>3.0.0-alpha.12\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Code Freeze\u003C/td> \u003Ctd>15/08/2024\u003C/td> \u003Ctd>\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Beta Release\u003C/td> \u003Ctd>31/08/2024\u003C/td> \u003Ctd>3.0.0-beta\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Release Candidate\u003C/td> \u003Ctd>15/09/2024\u003C/td> \u003Ctd>3.0.0-rc.1\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Final Release\u003C/td> \u003Ctd>30/09/2024\u003C/td> \u003Ctd>3.0.0\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table> \u003Ch2 id=\"how-to-get-involved\" data-svelte-h=\"svelte-1rvh1lv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#how-to-get-involved\">\u003Cspan>#\u003C/span>\u003C/a>How to Get Involved\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ihzgpp\">Your feedback is invaluable to us. As we move towards the beta phase, we invite you to download this alpha release, test it extensively, and report any issues or suggestions you may have. Here’s how you can contribute:\u003C/p> \u003Cul data-svelte-h=\"svelte-1knhi4o\">\u003Cli>Testing: Download the alpha release and run it in your environment.\u003C/li> \u003Cli>Reporting Bugs: If you encounter any issues, please report them through our issue tracker.\u003C/li>\u003C/ul> \u003Ch2 id=\"your-feedback-makes-us-better\" data-svelte-h=\"svelte-1mkcvv2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#your-feedback-makes-us-better\">\u003Cspan>#\u003C/span>\u003C/a>Your Feedback Makes Us Better\u003C/h2> \u003Cp data-svelte-h=\"svelte-1hiya5q\">We would like the community to participate in testing this release and give us feedback.\u003C/p> \u003Cp data-svelte-h=\"svelte-a2sf39\">After releasing the final version 3.0.0 we want to open discussions for the roadmap. We want you to propose features to help us continue building even better tools and allow people to make use of the BitTorrent ecosystem.\u003C/p> \u003Cp data-svelte-h=\"svelte-plipxz\">Got ideas? Suggestions for improvement? Join the \u003Ca href=\"https://github.com/torrust/torrust-index-gui/discussions\" rel=\"nofollow\">discussion\u003C/a> on our GitHub repo’s discussion section. Your thoughts and proposals are a key part of our collaborative development process. Let’s brainstorm together to make Torrust even better.\u003C/p> \u003Ch2 id=\"important-notice-demo-availability\" data-svelte-h=\"svelte-1b7v9jv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#important-notice-demo-availability\">\u003Cspan>#\u003C/span>\u003C/a>Important Notice: Demo Availability\u003C/h2> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-168ochg\">Please be aware that the demo is subject to downtime or resets. As a beta version, it’s part of our testing process. Any data you add may be lost during these periods. We appreciate your understanding and patience as we fine-tune the platform.\u003C/p>\u003C/div> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-1agj1iq\">We want to extend our deepest thanks to all the contributors who have tirelessly tested and provided feedback on this release. Your insights have been crucial in getting us this far, and we look forward to continuing this journey together.\u003C/p>\u003C/div>\u003C/div>",{"title":114,"slug":115,"coverImage":116,"date":117,"updated":6,"excerpt":118,"contributor":24,"contributorSlug":25,"tags":119,"hidden":12,"html":120,"readingTime":99},"Announcing the Beta v3.0.0 Live Demo","live-demo-beta-v3","/images/posts/rust-crab-happy.jpg","2023-12-15T12:08:04.295Z","We will release a new major version v3.0.0. We want the community to test it before the final release while it's still in Beta. You can contribute to make Torrust better.",[96,54]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-outevg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-o4wcxk\">\u003Cli>\u003Ca href=\"#hello-torrent-enthusiasts\">Hello, Torrent Enthusiasts!\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#experience-the-beta-demo-today\">Experience the Beta Demo Today\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#your-feedback-makes-us-better\">Your Feedback Makes Us Better\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#join-the-conversation\">Join the Conversation\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#important-notice-demo-availability\">Important Notice: Demo Availability\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#a-heartfelt-thank-you-to-our-contributors\">A Heartfelt Thank You to Our Contributors\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#join-us-in-this-exciting-journey\">Join Us in This Exciting Journey\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"hello-torrent-enthusiasts\" data-svelte-h=\"svelte-rwov94\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hello-torrent-enthusiasts\">\u003Cspan>#\u003C/span>\u003C/a>\u003Cstrong>Hello, Torrent Enthusiasts!\u003C/strong>\u003C/h2> \u003Cp data-svelte-h=\"svelte-6xxpl4\">We’re thrilled to announce the beta demo of Bittorrent Torrust Index v3.0.0 is now live! This is a significant milestone for us, and we’re eager to share what we’ve been working on with our vibrant community.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-aowssa\">Live demo: \u003Ca href=\"http://index.torrust-demo.com\" rel=\"nofollow\">http://index.torrust-demo.com\u003C/a>\u003C/p>\u003C/div> \u003Ch2 id=\"experience-the-beta-demo-today\" data-svelte-h=\"svelte-19bz0w0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#experience-the-beta-demo-today\">\u003Cspan>#\u003C/span>\u003C/a>Experience the Beta Demo Today\u003C/h2> \u003Cp data-svelte-h=\"svelte-1a4oy3w\">Our beta demo is your sneak peek into the future of torrent indexing. We invite you to dive in, explore its features, and experience the enhancements firsthand. Remember, this is a beta version, so you’re getting an early glimpse before the final release!\u003C/p> \u003Cp data-svelte-h=\"svelte-nxw1jv\">You can test it at: \u003Cstrong>\u003Ca href=\"http://index.torrust-demo.com\" rel=\"nofollow\">http://index.torrust-demo.com\u003C/a>\u003C/strong>\u003C/p> \u003Ch2 id=\"your-feedback-makes-us-better\" data-svelte-h=\"svelte-1mkcvv2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#your-feedback-makes-us-better\">\u003Cspan>#\u003C/span>\u003C/a>Your Feedback Makes Us Better\u003C/h2> \u003Cp data-svelte-h=\"svelte-1c0y8q4\">We believe in the power of community-driven development. That’s why we’re calling on you, our users, to actively participate in testing the beta.\u003C/p> \u003Cp data-svelte-h=\"svelte-ktuu5f\">Encountered a bug? Noticed something off? We want to hear about it. Please contribute by opening issues on our GitHub repository. Your insights are invaluable in refining and perfecting the platform.\u003C/p> \u003Ch2 id=\"join-the-conversation\" data-svelte-h=\"svelte-1tji4rp\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#join-the-conversation\">\u003Cspan>#\u003C/span>\u003C/a>Join the Conversation\u003C/h2> \u003Cp data-svelte-h=\"svelte-plipxz\">Got ideas? Suggestions for improvement? Join the \u003Ca href=\"https://github.com/torrust/torrust-index-gui/discussions\" rel=\"nofollow\">discussion\u003C/a> on our GitHub repo’s discussion section. Your thoughts and proposals are a key part of our collaborative development process. Let’s brainstorm together to make Torrust even better.\u003C/p> \u003Ch2 id=\"important-notice-demo-availability\" data-svelte-h=\"svelte-1b7v9jv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#important-notice-demo-availability\">\u003Cspan>#\u003C/span>\u003C/a>Important Notice: Demo Availability\u003C/h2> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-168ochg\">Please be aware that the demo is subject to downtime or resets. As a beta version, it’s part of our testing process. Any data you add may be lost during these periods. We appreciate your understanding and patience as we fine-tune the platform.\u003C/p>\u003C/div> \u003Ch2 id=\"a-heartfelt-thank-you-to-our-contributors\" data-svelte-h=\"svelte-mak5d\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#a-heartfelt-thank-you-to-our-contributors\">\u003Cspan>#\u003C/span>\u003C/a>A Heartfelt Thank You to Our Contributors\u003C/h2> \u003Cp data-svelte-h=\"svelte-1fk4nd3\">This release wouldn’t have been possible without the dedication and hard work of our contributors. A big shout-out to everyone who has contributed their time, skills, and passion to this release. Your contributions are the backbone of this project, and we’re immensely grateful for your support.\u003C/p> \u003Ch2 id=\"join-us-in-this-exciting-journey\" data-svelte-h=\"svelte-1rcv7xf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#join-us-in-this-exciting-journey\">\u003Cspan>#\u003C/span>\u003C/a>Join Us in This Exciting Journey\u003C/h2> \u003Cp data-svelte-h=\"svelte-1skoy0k\">We’re just getting started, and there’s much more to come. Stay tuned for more updates, and thank you for being a part of this journey. We very welcome any contributions to the projects.\u003C/p>\u003C/div>\u003C/div>",{"title":90,"slug":91,"coverImage":92,"date":93,"updated":93,"excerpt":94,"contributor":24,"contributorSlug":25,"tags":122,"hidden":12,"html":123,"readingTime":99,"relatedPosts":124},[96,97]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"greetings-torrust-fans\" data-svelte-h=\"svelte-81guo2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#greetings-torrust-fans\">\u003Cspan>#\u003C/span>\u003C/a>\u003Cstrong>Greetings, Torrust Fans!\u003C/strong>\u003C/h2> \u003Cp data-svelte-h=\"svelte-19yyzhb\">As we move forward according to our release plan, we’re excited to be nearing the final release of version 3.0.0.\u003C/p> \u003Cp data-svelte-h=\"svelte-zqgc4z\">On August 13th, we made \u003Ccode>v3.0.0-alpha.12\u003C/code> available, and now we’re pleased to present v3.0.0-beta. This release is a critical step as we refine the software in preparation for the official launch.\u003C/p> \u003Ch2 id=\"release-schedule\" data-svelte-h=\"svelte-fbktfz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#release-schedule\">\u003Cspan>#\u003C/span>\u003C/a>Release Schedule\u003C/h2> \u003Cp data-svelte-h=\"svelte-2jnc2v\">The journey to our major release continues, and here’s our roadmap:\u003C/p> \u003Ctable data-svelte-h=\"svelte-g6bxxo\">\u003Cthead>\u003Ctr>\u003Cth>Milestone\u003C/th> \u003Cth>Target Date\u003C/th> \u003Cth>Version\u003C/th>\u003C/tr>\u003C/thead> \u003Ctbody>\u003Ctr>\u003Ctd>Feature Freeze\u003C/td> \u003Ctd>13/08/2024\u003C/td> \u003Ctd>3.0.0-alpha.12\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Code Freeze\u003C/td> \u003Ctd>13/08/2024\u003C/td> \u003Ctd>3.0.0-alpha.12\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Beta Release\u003C/td> \u003Ctd>03/09/2024\u003C/td> \u003Ctd>3.0.0-beta\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Release Candidate\u003C/td> \u003Ctd>15/09/2024\u003C/td> \u003Ctd>3.0.0-rc.1\u003C/td>\u003C/tr> \u003Ctr>\u003Ctd>Final Release\u003C/td> \u003Ctd>30/09/2024\u003C/td> \u003Ctd>3.0.0\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table> \u003Ch2 id=\"how-to-participate\" data-svelte-h=\"svelte-ja03fc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#how-to-participate\">\u003Cspan>#\u003C/span>\u003C/a>How to Participate\u003C/h2> \u003Cp data-svelte-h=\"svelte-rto9x1\">Your feedback is invaluable to us. As we move towards the beta phase, we invite you to download this beta release, test it extensively, and report any issues or suggestions you may have. Here’s how you can contribute:\u003C/p> \u003Cul data-svelte-h=\"svelte-1knhi4o\">\u003Cli>Testing: Download the alpha release and run it in your environment.\u003C/li> \u003Cli>Reporting Bugs: If you encounter any issues, please report them through our issue tracker.\u003C/li>\u003C/ul> \u003Ch2 id=\"your-input-helps-us-improve\" data-svelte-h=\"svelte-rynfgo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#your-input-helps-us-improve\">\u003Cspan>#\u003C/span>\u003C/a>Your Input Helps Us Improve\u003C/h2> \u003Cp data-svelte-h=\"svelte-1081bcg\">Your feedback is crucial in helping us refine this release. We want the community’s active involvement as we move forward.\u003C/p> \u003Cp data-svelte-h=\"svelte-bcbvzs\">After the final version 3.0.0 is released, we plan to open discussions about our future roadmap. We encourage you to propose features and improvements to help us continue building superior tools and enhance the BitTorrent ecosystem.\u003C/p> \u003Cp data-svelte-h=\"svelte-3lnjb8\">Have ideas or suggestions? Join the \u003Ca href=\"https://github.com/torrust/torrust-index-gui/discussions\" rel=\"nofollow\">discussion\u003C/a> on our GitHub repository. Your contributions are key to our collaborative development approach. Let’s work together to make Torrust even better!\u003C/p> \u003Ch2 id=\"important-notice-demo-availability\" data-svelte-h=\"svelte-1b7v9jv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#important-notice-demo-availability\">\u003Cspan>#\u003C/span>\u003C/a>Important Notice: Demo Availability\u003C/h2> \u003Cdiv class=\"callout-block warning svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 7L12 13\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 17.01L12.01 16.9989\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-f4ma2\">Please note that the \u003Ca href=\"https://index.torrust-demo.com/\" rel=\"nofollow\">demo\u003C/a> environment may experience downtime or resets as part of our ongoing testing. As this is a beta version, data may be lost during these phases. We appreciate your patience and understanding as we fine-tune the system.\u003C/p>\u003C/div> \u003Ch2 id=\"special-thanks\" data-svelte-h=\"svelte-1klzy15\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#special-thanks\">\u003Cspan>#\u003C/span>\u003C/a>Special Thanks\u003C/h2> \u003Cp data-svelte-h=\"svelte-1agj1iq\">We want to extend our deepest thanks to all the contributors who have tirelessly tested and provided feedback on this release. Your insights have been crucial in getting us this far, and we look forward to continuing this journey together.\u003C/p>\u003C/div>\u003C/div>",[125,126,127],{"title":102,"slug":103,"coverImage":104,"date":105,"updated":6,"excerpt":106,"contributor":24,"contributorSlug":25,"tags":107,"hidden":12,"html":108,"readingTime":109},{"title":102,"slug":103,"coverImage":104,"date":105,"updated":6,"excerpt":106,"contributor":24,"contributorSlug":25,"tags":111,"hidden":12,"html":112,"readingTime":109},{"title":114,"slug":115,"coverImage":116,"date":117,"updated":6,"excerpt":118,"contributor":24,"contributorSlug":25,"tags":119,"hidden":12,"html":120,"readingTime":99},{"title":129,"slug":130,"coverImage":131,"date":132,"updated":6,"excerpt":133,"contributor":24,"contributorSlug":25,"tags":134,"hidden":12,"html":138,"readingTime":33,"relatedPosts":139},"Review and Setup Guide for UNIT3D","review-and-setup-guide-for-unit3d","/images/posts/review-and-setup-guide-for-unit3d/unit3d-user-profile-screenshot.png","2024-08-16T09:36:17.990Z","UNIT3D is one of the fully featured BitTorrent Indexes that promises a robust, customizable, and community-driven experience. In this first post of our review series at Torrust, we’ll dive into UNIT3D, evaluating its features, installation process, and overall usability. Whether you're an open-source advocate or a BitTorrent expert, this guide will help you understand the ins and outs of UNIT3D, including a step-by-step tutorial to set it up on a Digital Ocean droplet.",[72,135,136,137],"Review","Index","Third-party"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-outevg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-19g00rb\">\u003Cli>\u003Ca href=\"#introduction-to-unit3d\">Introduction to UNIT3D\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#overview\">Overview\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#key-features\">Key features\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#unit3d-review\">UNIT3D Review\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#tutorial-setting-up-unit3d-on-a-digital-ocean-droplet\">Tutorial: Setting Up UNIT3D on a Digital Ocean Droplet\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#requirements\">Requirements\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#step-1-create-the-droplet-in-digital-ocean\">Step 1. Create the Droplet in Digital Ocean\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#step-2-update-the-server\">Step 2. Update the Server\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#step-3-run-the-unit3d-installer\">Step 3. Run the UNIT3D Installer\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#step-4-login-page\">Step 4. Login Page\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#troubleshooting\">Troubleshooting\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#user-interface\">User Interface\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction-to-unit3d\" data-svelte-h=\"svelte-1megvfz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction-to-unit3d\">\u003Cspan>#\u003C/span>\u003C/a>Introduction to UNIT3D\u003C/h2> \u003Cp data-svelte-h=\"svelte-1r1se51\">This blog post serves as an introduction to our review series at Torrust, where we’ll continue to explore and evaluate other projects within the BitTorrent ecosystem.\u003C/p> \u003Cp data-svelte-h=\"svelte-o6j4j8\">UNIT3D is a private torrent tracker software, crafted meticulously in \u003Ca href=\"https://www.php.net/\" rel=\"nofollow\">PHP\u003C/a> using the \u003Ca href=\"https://laravel.com/\" rel=\"nofollow\">Laravel\u003C/a> framework. Whether you’re a developer looking to deploy a robust BitTorrent index or an enthusiast exploring the depths of the BitTorrent ecosystem, this guide will walk you through UNIT3D’s features and provide a detailed, step-by-step setup tutorial.\u003C/p> \u003Cp data-svelte-h=\"svelte-167hh4r\">UNIT3D was created from scratch. The first commit was on December 2017.\u003C/p> \u003Cul data-svelte-h=\"svelte-1b7xkeb\">\u003Cli>\u003Cstrong>Repo:\u003C/strong> \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition\" rel=\"nofollow\">https://github.com/HDInnovations/UNIT3D-Community-Edition\u003C/a>\u003C/li> \u003Cli>\u003Cstrong>Contributors:\u003C/strong> \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/graphs/contributors\" rel=\"nofollow\">116\u003C/a>\u003C/li> \u003Cli>\u003Cstrong>Starts:\u003C/strong> 1.9k.\u003C/li> \u003Cli>\u003Cstrong>Production Stats\u003C/strong>:\u003Cul>\u003Cli>Installations: 26\u003C/li> \u003Cli>Users: 235,041\u003C/li> \u003Cli>Torrents: 1,570,340\u003C/li> \u003Cli>Peers: 5,881,717\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Cstrong>Official Demo Site:\u003C/strong> \u003Ca href=\"https://unit3d.dev/\" rel=\"nofollow\">https://unit3d.dev/\u003C/a> (currently not working).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-x4yzfh\">Stats from \u003Ca href=\"https://hdvinnie.github.io/Private-Trackers-Spreadsheet/\" rel=\"nofollow\">Private-Trackers-Spreadsheet\u003C/a>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-gbf7ow\">To write this post we have setup a new demo site on: \u003Ca href=\"https://www.unit3d-demo.com/\" rel=\"nofollow\">https://www.unit3d-demo.com/\u003C/a>. Following the tutorial section you can also easily deploy your UNIT3D Index. The demo site could be shutdown at any time.\u003C/p>\u003C/div> \u003Ch3 id=\"overview\" data-svelte-h=\"svelte-cnawga\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#overview\">\u003Cspan>#\u003C/span>\u003C/a>Overview\u003C/h3> \u003Cp data-svelte-h=\"svelte-ozk3hp\">It’s not our intention to list and evaluate all the features because that would be a really hard task. However we want to give you an idea about how many features this software includes:\u003C/p> \u003Ch3 id=\"key-features\" data-svelte-h=\"svelte-1lkc5br\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#key-features\">\u003Cspan>#\u003C/span>\u003C/a>Key features\u003C/h3> \u003Ch4 id=\"torrents\" data-svelte-h=\"svelte-2sh6eo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#torrents\">\u003Cspan>#\u003C/span>\u003C/a>Torrents\u003C/h4> \u003Cul data-svelte-h=\"svelte-1rjippc\">\u003Cli>Index, Search, Upload\u003C/li> \u003Cli>Requests\u003C/li> \u003Cli>RSS\u003C/li>\u003C/ul> \u003Ch4 id=\"community\" data-svelte-h=\"svelte-1l6xbcw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#community\">\u003Cspan>#\u003C/span>\u003C/a>Community\u003C/h4> \u003Cul data-svelte-h=\"svelte-bpoh5e\">\u003Cli>Forums\u003C/li> \u003Cli>Chatrooms with chatbot\u003C/li> \u003Cli>Playlists\u003C/li> \u003Cli>Polls\u003C/li> \u003Cli>News\u003C/li> \u003Cli>Bonus Points\u003C/li> \u003Cli>User profiles\u003C/li> \u003Cli>Achievements\u003C/li>\u003C/ul> \u003Ch4 id=\"support\" data-svelte-h=\"svelte-1o7u1oa\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#support\">\u003Cspan>#\u003C/span>\u003C/a>Support\u003C/h4> \u003Cul data-svelte-h=\"svelte-s60zfu\">\u003Cli>Custom pages: rules, FAQ, Wikis\u003C/li> \u003Cli>Helpdesk\u003C/li> \u003Cli>Staff\u003C/li>\u003C/ul> \u003Ch4 id=\"platform-management\" data-svelte-h=\"svelte-1yqepmv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#platform-management\">\u003Cspan>#\u003C/span>\u003C/a>Platform Management\u003C/h4> \u003Cul data-svelte-h=\"svelte-12x0nbi\">\u003Cli>Logs\u003C/li> \u003Cli>Access Restrictions\u003Cul>\u003Cli>Client Blacklist\u003C/li> \u003Cli>Whitelisted Image URLs\u003C/li> \u003Cli>Blocked IPs\u003C/li>\u003C/ul>\u003C/li> \u003Cli>Torrents\u003Cul>\u003Cli>Moderation\u003C/li> \u003Cli>Classification: categories, resolutions, regions, distributions\u003C/li>\u003C/ul>\u003C/li> \u003Cli>Peers\u003C/li> \u003Cli>Users\u003Cul>\u003Cli>Search\u003C/li> \u003Cli>Applications, Invitations\u003C/li> \u003Cli>Keys: API, passkeys, RSS keys, 2FA, …\u003C/li> \u003Cli>Groups (roles)\u003C/li> \u003Cli>Notifications (alerts)\u003C/li> \u003Cli>Messages\u003C/li>\u003C/ul>\u003C/li>\u003C/ul> \u003Ch4 id=\"integrations\" data-svelte-h=\"svelte-c4dffs\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#integrations\">\u003Cspan>#\u003C/span>\u003C/a>Integrations\u003C/h4> \u003Cul data-svelte-h=\"svelte-1fymr3y\">\u003Cli>Torrent API: \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/wiki/Torrent-API-(UNIT3D-v8.x.x)\" rel=\"nofollow\">https://github.com/HDInnovations/UNIT3D-Community-Edition/wiki/Torrent-API-(UNIT3D-v8.x.x)\u003C/a>\u003C/li> \u003Cli>Other metadata API like \u003Ca href=\"https://www.themoviedb.org/\" rel=\"nofollow\">https://www.themoviedb.org/\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"unit3d-review\" data-svelte-h=\"svelte-gnutj4\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#unit3d-review\">\u003Cspan>#\u003C/span>\u003C/a>UNIT3D Review\u003C/h2> \u003Ch3 id=\"code-quality-and-structure\" data-svelte-h=\"svelte-u6d479\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#code-quality-and-structure\">\u003Cspan>#\u003C/span>\u003C/a>Code Quality and Structure\u003C/h3> \u003Cp data-svelte-h=\"svelte-f7l6zy\">UNIT3D boasts a well-organized codebase, adhering to modern PHP development standards. The use of Laravel as the underlying framework ensures a modular structure, making it easier for developers to extend and customize the platform. Code readability is generally high, with well-commented sections that clarify complex logic.\u003C/p> \u003Ch3 id=\"documentation-and-user-guides\" data-svelte-h=\"svelte-l6xr16\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#documentation-and-user-guides\">\u003Cspan>#\u003C/span>\u003C/a>Documentation and User Guides\u003C/h3> \u003Cp data-svelte-h=\"svelte-mrzit0\">The \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/wiki\" rel=\"nofollow\">documentation\u003C/a> for UNIT3D system dependencies is comprehensive, covering local development and basic server management. However, there is room for improvement in terms of end user guides, tutorials, examples, installation for production and troubleshooting guides.\u003C/p> \u003Ch3 id=\"community-support-and-activity\" data-svelte-h=\"svelte-17pa4sd\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#community-support-and-activity\">\u003Cspan>#\u003C/span>\u003C/a>Community Support and Activity\u003C/h3> \u003Cp data-svelte-h=\"svelte-2q3ir0\">UNIT3D has an active and growing community. The project’s GitHub repository shows regular commits, indicating ongoing development. There are also Discord channels for sponsors where they and developers discuss issues, share tips, and contribute to the project’s roadmap. You can also support UNIT3D development via \u003Ca href=\"https://polar.sh/HDInnovations\" rel=\"nofollow\">https://polar.sh/HDInnovations\u003C/a>.\u003C/p> \u003Ch3 id=\"contribution-guidelines-and-license\" data-svelte-h=\"svelte-50kvt6\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#contribution-guidelines-and-license\">\u003Cspan>#\u003C/span>\u003C/a>Contribution Guidelines and License\u003C/h3> \u003Cp data-svelte-h=\"svelte-1hqvwwq\">UNIT3D is licensed under the AGPL-3.0 license license. The \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/blob/master/CONTRIBUTING.md\" rel=\"nofollow\">contribution guidelines\u003C/a> are well-documented, with clear instructions on how to fork the repository, submit pull requests, and report issues.\u003C/p> \u003Ch3 id=\"installation-process-overview\" data-svelte-h=\"svelte-zt6ocl\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#installation-process-overview\">\u003Cspan>#\u003C/span>\u003C/a>Installation Process Overview\u003C/h3> \u003Cp data-svelte-h=\"svelte-1rpop1i\">UNIT3D offers an \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Installer\" rel=\"nofollow\">installer\u003C/a>. At the time of this writing it supports:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t5v1st\">\u003Cli>Ubuntu 22.04 LTS (Jammy Jellyfish).\u003C/li> \u003Cli>Ubuntu 20.04 LTS (Focal Fossa)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-hdegu3\">We followed the instructions and the process was easy and fast. We will describe the process in detail in the installation tutorial. Hopefully, that will make the process even easier for other users.\u003C/p> \u003Ch2 id=\"tutorial-setting-up-unit3d-on-a-digital-ocean-droplet\" data-svelte-h=\"svelte-1lm4unn\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#tutorial-setting-up-unit3d-on-a-digital-ocean-droplet\">\u003Cspan>#\u003C/span>\u003C/a>Tutorial: Setting Up UNIT3D on a Digital Ocean Droplet\u003C/h2> \u003Cp data-svelte-h=\"svelte-10o3ga8\">To install the software we have followed the steps described in the official installer:\u003C/p> \u003Cp data-svelte-h=\"svelte-1jofot3\">\u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Installer\" rel=\"nofollow\">https://github.com/HDInnovations/UNIT3D-Installer\u003C/a>.\u003C/p> \u003Ch3 id=\"requirements\" data-svelte-h=\"svelte-1igrg2h\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#requirements\">\u003Cspan>#\u003C/span>\u003C/a>Requirements\u003C/h3> \u003Cp data-svelte-h=\"svelte-2b7r4d\">Although you can just execute the installer directly you will need to create some services during the installation. We would recommend to fulfill all the requirements before executing the installer, that would make the process faster and you can avoid some mistakes we made.\u003C/p> \u003Cp data-svelte-h=\"svelte-1ig73ca\">Let’s review what you will need:\u003C/p> \u003Cul data-svelte-h=\"svelte-1ogoxxg\">\u003Cli>Server (virtual machine)\u003C/li> \u003Cli>External Services\u003C/li> \u003Cli>System requirements (software installed on the server)\u003C/li>\u003C/ul> \u003Ch4 id=\"hardware-requirements-server\" data-svelte-h=\"svelte-pgiu57\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hardware-requirements-server\">\u003Cspan>#\u003C/span>\u003C/a>Hardware Requirements (server)\u003C/h4> \u003Cp data-svelte-h=\"svelte-am23js\">We opted for using a Digital Ocean droplet just because we are used to their interface and it’s straightforward. Feel free to use your favorite provider.\u003C/p> \u003Cp data-svelte-h=\"svelte-14q3zex\">In our first attempt we used the minimum size image. However it was too small. The server had problems building the frontend and that’s one of the last steps in the installation. Finally we used a VM (Digital Ocean call them droplets) with these characteristics:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r9cm0c\">\u003Cli>Image: \u003Cstrong>Ubuntu 22.04 (LTS) x64\u003C/strong>\u003C/li> \u003Cli>Size: \u003Cstrong>1 vCPU; 2GB / 50GB Disk; ($12/month)\u003C/strong>\u003C/li>\u003C/ul> \u003Ch4 id=\"external-services\" data-svelte-h=\"svelte-1fspz0e\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#external-services\">\u003Cspan>#\u003C/span>\u003C/a>External Services\u003C/h4> \u003Cul data-svelte-h=\"svelte-qgx1j3\">\u003Cli>Domain: We registered a new one only for this purpose: \u003Ca href=\"https://unit3d-demo.com/\" rel=\"nofollow\">https://unit3d-demo.com/\u003C/a>.\u003C/li> \u003Cli>DNS: Since We are using Digital Ocean, we only needed to assign the the Digital Ocean’s name servers to the domain.\u003C/li> \u003Cli>Email delivery service: We just picked up one from the list of supported services by UNIT3D. We selected \u003Ca href=\"https://postmarkapp.com/\" rel=\"nofollow\">https://postmarkapp.com/\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-12cga0t\">How to register the domain, setup the DNS and the email service is out of the scope of this article. Anyway it depends on your providers.\u003C/p> \u003Ch4 id=\"system-requirements\" data-svelte-h=\"svelte-3171kw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#system-requirements\">\u003Cspan>#\u003C/span>\u003C/a>System Requirements\u003C/h4> \u003Cp data-svelte-h=\"svelte-19w1vh9\">The installer installs all the system dependencies that you need, like MySQL, Redis, etcetera. You only need a fresh Ubuntu server using one of these versions:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t5v1st\">\u003Cli>Ubuntu 22.04 LTS (Jammy Jellyfish).\u003C/li> \u003Cli>Ubuntu 20.04 LTS (Focal Fossa)\u003C/li>\u003C/ul> \u003Ch4 id=\"information-needed\" data-svelte-h=\"svelte-1f8m14g\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#information-needed\">\u003Cspan>#\u003C/span>\u003C/a>Information needed\u003C/h4> \u003Cp data-svelte-h=\"svelte-42kb83\">During the installation process you will need to respond to some questions. The following are the main values you will have to provide:\u003C/p> \u003Cp data-svelte-h=\"svelte-d4ztcc\">Droplet:\u003C/p> \u003Cul data-svelte-h=\"svelte-ngkobo\">\u003Cli>Root password.\u003C/li> \u003Cli>Hostname: \u003Ccode>unit3d-demo\u003C/code>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-isjbbc\">Postmark (sign up):\u003C/p> \u003Cul data-svelte-h=\"svelte-ff4q3w\">\u003Cli>Username.\u003C/li> \u003Cli>Email.\u003C/li> \u003Cli>Password.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-mczh9l\">UNIT3D Platform Owner:\u003C/p> \u003Cul data-svelte-h=\"svelte-187yq1r\">\u003Cli>Username: We used \u003Ccode>unit3d-owner\u003C/code>.\u003C/li> \u003Cli>Email.\u003C/li> \u003Cli>Password.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-ep22g\">MySQL:\u003C/p> \u003Cul data-svelte-h=\"svelte-4e0vgm\">\u003Cli>Root password.\u003C/li> \u003Cli>UNIT3D user: username (\u003Ccode>unit3d\u003C/code>) and password.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1m0izm8\">SMTP Configuration:\u003C/p> \u003Cul data-svelte-h=\"svelte-19nz10z\">\u003Cli>Driver: smtp.\u003C/li> \u003Cli>Server: \u003Ccode>smtp.postmarkapp.com\u003C/code>.\u003C/li> \u003Cli>Port: \u003Ccode>587\u003C/code>.\u003C/li> \u003Cli>Username: A token provided by postmarkapp.\u003C/li> \u003Cli>Password: Same as username.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1g443ni\">TMDB (\u003Ca href=\"https://www.themoviedb.org/\" rel=\"nofollow\">themoviedb.org\u003C/a>, a service to get metadata about movies):\u003C/p> \u003Cul data-svelte-h=\"svelte-1mat26a\">\u003Cli>API key.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-voi7bs\">Used Versions:\u003C/p> \u003Cul data-svelte-h=\"svelte-m2eret\">\u003Cli>OS: Ubuntu 22.04 LTS (Jammy Jellyfish)\u003C/li> \u003Cli>PHP: 8.3.10\u003C/li> \u003Cli>Database: 8.0.39-0ubuntu0.22.04.1\u003C/li> \u003Cli>Laravel: 11.5.0\u003C/li> \u003Cli>UNIT3D Community Edition: v8.1.3\u003C/li> \u003Cli>Installation dir: \u003Ccode>/var/www/html\u003C/code>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1kmvvj\">Let’s install the software step by step.\u003C/p> \u003Ch3 id=\"step-1-create-the-droplet-in-digital-ocean\" data-svelte-h=\"svelte-1ww2fuo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#step-1-create-the-droplet-in-digital-ocean\">\u003Cspan>#\u003C/span>\u003C/a>Step 1. Create the Droplet in Digital Ocean\u003C/h3> \u003Cp data-svelte-h=\"svelte-1558emt\">We decided to create a new project so we can assign resources to this project:\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/01-new-project-in-do.png, /images/posts/review-and-setup-guide-for-unit3d/01-new-project-in-do.png, /images/posts/review-and-setup-guide-for-unit3d/01-new-project-in-do.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/01-new-project-in-do.png\" alt=\"Create a new project in Digital Ocean\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-d46xoo\">And this is the droplet configuration.\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/02-create-droplet-12-dollars.png, /images/posts/review-and-setup-guide-for-unit3d/02-create-droplet-12-dollars.png, /images/posts/review-and-setup-guide-for-unit3d/02-create-droplet-12-dollars.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/02-create-droplet-12-dollars.png\" alt=\"Create a new 12-dollar droplet in Digital Ocean\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-lhdl8g\">Before continuing with the tutorial make sure your root domain and \u003Ccode>www\u003C/code> subdomain are pointing to the droplet’s IP.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">ping unit3d-demo.com\nPING unit3d-demo.com (134.122.65.71) 56(84) bytes of data.\n\nping &lt;www.unit3d-demo.com&gt;\nPING unit3d-demo.com (134.122.65.71) 56(84) bytes of data.\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-j3ieou\">Also, check that you can login using SSH:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">ssh root@134.122.65.71\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"step-2-update-the-server\" data-svelte-h=\"svelte-1tvc6v4\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#step-2-update-the-server\">\u003Cspan>#\u003C/span>\u003C/a>Step 2. Update the Server\u003C/h3> \u003Cp data-svelte-h=\"svelte-1uel1v7\">This is only a recommendation before running the installer.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">sudo apt-get update\nHit:1 http://mirrors.digitalocean.com/ubuntu jammy InRelease\nHit:2 https://repos.insights.digitalocean.com/apt/do-agent main InRelease\nHit:3 http://mirrors.digitalocean.com/ubuntu jammy-updates InRelease\nHit:4 https://repos-droplet.digitalocean.com/apt/droplet-agent main InRelease\nHit:5 http://mirrors.digitalocean.com/ubuntu jammy-backports InRelease\nHit:6 http://security.ubuntu.com/ubuntu jammy-security InRelease\nReading package lists... Done\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"step-3-run-the-unit3d-installer\" data-svelte-h=\"svelte-lq6m1r\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#step-3-run-the-unit3d-installer\">\u003Cspan>#\u003C/span>\u003C/a>Step 3. Run the UNIT3D Installer\u003C/h3> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">sudo apt -y install git\ngit clone https://github.com/HDInnovations/UNIT3D-Installer.git installer\ncd installer\nsudo ./install.sh\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-ev6kxw\">The installer has some steps:\u003C/p> \u003Cul data-svelte-h=\"svelte-1gccjx5\">\u003Cli>Validate Installer Policies\u003C/li> \u003Cli>Server Setup\u003C/li> \u003Cli>Prerequisites\u003C/li> \u003Cli>Database Setup\u003C/li> \u003Cli>Php Setup (PHP &amp; PHP-FPM Configuration)\u003C/li> \u003Cli>Nginx Setup (Nginx Setup &amp; Configurations)\u003C/li> \u003Cli>Unit3d Setup (UNIT3D-Community-Edition Settings and Configuration)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-qijvl3\">First, an assistant will run some checks and it will ask your preferences:\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/03-installer.png, /images/posts/review-and-setup-guide-for-unit3d/03-installer.png, /images/posts/review-and-setup-guide-for-unit3d/03-installer.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/03-installer.png\" alt=\"UNIT3D Installer\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-nhxdxt\">All settings are really easy, specially if you already have all the tokes and password for integrations with external services. When you finish the initial questionnaire you will reach the following confirmation point:\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/04-last-step-installer.png, /images/posts/review-and-setup-guide-for-unit3d/04-last-step-installer.png, /images/posts/review-and-setup-guide-for-unit3d/04-last-step-installer.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/04-last-step-installer.png\" alt=\"UNIT3D Installer\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Ch3 id=\"step-4-login-page\" data-svelte-h=\"svelte-13oymvp\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#step-4-login-page\">\u003Cspan>#\u003C/span>\u003C/a>Step 4. Login Page\u003C/h3> \u003Cp data-svelte-h=\"svelte-1si8nz2\">That’s it. If all went fine during the installation you can load the login page:\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/unit3d-login-page.png, /images/posts/review-and-setup-guide-for-unit3d/unit3d-login-page.png, /images/posts/review-and-setup-guide-for-unit3d/unit3d-login-page.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/unit3d-login-page.png\" alt=\"UNIT3D Login Page\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-1vods3x\">You can use the owner account credentials you provided during the installation.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-shjskw\">If the official demo is down you can apply for signing up in our demo on: \u003Ca href=\"https://www.unit3d-demo.com/application\" rel=\"nofollow\">https://www.unit3d-demo.com/application\u003C/a>. You don’t need to provide real data, just a valid email so we can confirm it manually. We want to highlight, however, that we may shut down this demo at any time.\u003C/p>\u003C/div> \u003Ch3 id=\"troubleshooting\" data-svelte-h=\"svelte-msbux3\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#troubleshooting\">\u003Cspan>#\u003C/span>\u003C/a>Troubleshooting\u003C/h3> \u003Cp data-svelte-h=\"svelte-1nj3imx\">During the installation we had a couple of issues.\u003C/p> \u003Cp data-svelte-h=\"svelte-8diijs\">\u003Cstrong>First\u003C/strong>, we chose to use HTTPs but the domain was not pointing the droplet’s IP. The generation of the Let’s Encrypt certificates with certbot failed because it was not able to reach the server to check the challenge. Once we fixed the DNS we could not continue on that point because other steps like inserting some values in the database failed. \u003Cstrong>The installation process does not allow to go back or reset to the initial state\u003C/strong>. We needed to create a new droplet.\u003C/p> \u003Cp data-svelte-h=\"svelte-k5po1m\">\u003Cstrong>Second\u003C/strong>, the initial server was too small and it stuck at building the frontend app. We got this error:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">[Warning] $ vite build\nerror: script &quot;build&quot; was terminated by signal SIGKILL (Forced Quit)\nKilled\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-4b5k5p\">The problem was solved by increasing the droplet size. Anyway, It was too small to host all the services UNIT3D requires. Currently, with no users, the \u003Cstrong>CPU Usage\u003C/strong> is at almost \u003Cstrong>30%\u003C/strong> using a 1 vCPU; 2GB RAM instance.\u003C/p> \u003Cp data-svelte-h=\"svelte-6lrf1i\">Finally, we also saw a warning in the Laravel logs.\u003C/p> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">Base table or view not found: 1146 Table 'unit3d.torrents'\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-50ztmp\">We opened an \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/issues/4048\" rel=\"nofollow\">issue\u003C/a>. However, we checked it and the table was there and the application seems to work fine.\u003C/p> \u003Ch2 id=\"user-interface\" data-svelte-h=\"svelte-1gcwmll\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#user-interface\">\u003Cspan>#\u003C/span>\u003C/a>User Interface\u003C/h2> \u003Cp data-svelte-h=\"svelte-1d1o6hr\">After installing the application, we were using it for a while. We:\u003C/p> \u003Cul data-svelte-h=\"svelte-1cblm8y\">\u003Cli>Uploaded a torrent.\u003C/li> \u003Cli>Tried to send an invitation.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-19g8edd\">The application has a lot of features and it can be a little bit overwhelming the first time you use it, specially if you are not used to the BitTorrent index terminology. We could not send an invitation even with the owner account because you need to give some points to the account to enable the user to send invitations. Without a basic knowledge about the common features in indexes it can be tough to understand what some features are or how to customize the index to your needs. Fortunately the maintainers offer install and tuning services.\u003C/p> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1fcsocp\">UNIT3D stands out as a fully-featured BitTorrent index, offering a wide array of functionalities that cater to both developers and community moderators. Its robust codebase and ease of installation are significant advantages, though newcomers may find the platform’s complexity daunting. The lack of extensive documentation on best practices within the BitTorrent community is a challenge, but with support from active maintainers, users can still achieve a high level of customization and control.\u003C/p>\u003C/div>\u003C/div>",[140,151,152],{"title":141,"slug":142,"coverImage":143,"date":144,"updated":6,"excerpt":145,"contributor":24,"contributorSlug":25,"tags":146,"hidden":12,"html":149,"readingTime":150},"Deploying Torrust To Production","deploying-torrust-to-production","/images/posts/deploying-torrust-to-production/deploy-torrust-to-a-digital-ocean-droplet.png","2023-12-20T00:00:00.000Z","Dive into our step-by-step tutorial on deploying a BitTorrent Index and Tracker, written in Rust, on a Digital Ocean droplet. From initial server setup to advanced configurations, this guide is designed for both non-developers and tech-savvy users, ensuring a seamless, production-ready deployment.",[72,147,148],"Deployment","Production"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-1m3njcc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of Contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-1ryjzs2\">\u003Cli>\u003Ca href=\"#introduction\">Introduction\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#requirements\">Requirements\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#initial-server-setup\">Initial Server Setup\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#setup-ssh-keys\">Setup SSH Keys\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#install-docker\">Install Docker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#install-docker-compose\">Install Docker Compose\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#install-sqlite\">Install SQLite\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#setup-the-dns\">Setup The DNS\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#install-the-application\">Install The Application\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#without-certificates\">Without Certificates\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#generate-certificates-with-lets-encrypt\">Generate Certificates With Let’s Encrypt\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#change-nginx-configuration-to-use-certificates\">Change Nginx Configuration To Use Certificates\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#setup-cronjob-to-renew-certificates\">Setup Cronjob To Renew Certificates\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#exposed-services\">Exposed Services\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#firewall\">Firewall\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#health-checks\">Health checks\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#troubleshooting\">Troubleshooting\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#maintenance\">Maintenance\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#backups\">Backups\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#monitoring\">Monitoring\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#cost\">Cost\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#other-considerations\">Other Considerations\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#links\">Links\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-1awa8lh\">Welcome to our guide on deploying a BitTorrent Index and Tracker. We’ll walk you through each step, explaining the process in a user-friendly manner, so you can understand the magic behind hosting a powerful, Rust-based application on the cloud.\u003C/p> \u003Cp data-svelte-h=\"svelte-jwgro1\">This guide provides detailed, technical steps for deploying your Rust-based BitTorrent Index and Tracker on a Digital Ocean droplet. You’ll find precise commands and configurations to ensure a smooth, efficient setup.\u003C/p> \u003Cp data-svelte-h=\"svelte-kguc39\">You can find the docker compose configuration used in this guide on the following GitHub repo:\u003C/p> \u003Cp data-svelte-h=\"svelte-1o7fl1r\">\u003Ca href=\"https://github.com/torrust/torrust-compose/tree/main/droplet\" rel=\"nofollow\">https://github.com/torrust/torrust-compose/tree/main/droplet\u003C/a>\u003C/p> \u003Cp data-svelte-h=\"svelte-tpmjyq\">Although we are using a droplet, this tutorial is intended to be so generic that\nyou should be able to setup the services in any virtual machine with docker and docker compose.\u003C/p> \u003Cp data-svelte-h=\"svelte-1tn4ufv\">This tutorial is based on the Digital Ocean tutorial:\u003C/p> \u003Cp data-svelte-h=\"svelte-zy2fnp\">\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-secure-a-containerized-node-js-application-with-nginx-let-s-encrypt-and-docker-compose\" rel=\"nofollow\">How To Secure a Containerized Node.js Application with Nginx, Let’s Encrypt, and Docker Compose\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-ijmibu\">We have only changed the docker compose configuration and some steps to configure the \u003Cstrong>Torrust Index and Tracker\u003C/strong> instead of\nthe sample node application.\u003C/p> \u003Cp data-svelte-h=\"svelte-nro7oh\">After finishing this tutorial you will have these public services available (with your own domain):\u003C/p> \u003Cul data-svelte-h=\"svelte-fk1fu0\">\u003Cli>Torrust Index: \u003Ca href=\"https://index.torrust-demo.com\" rel=\"nofollow\">https://index.torrust-demo.com\u003C/a>\u003C/li> \u003Cli>Torrust HTTP Tracker: \u003Ca href=\"https://tracker.torrust-demo.com/announce\" rel=\"nofollow\">https://tracker.torrust-demo.com/announce\u003C/a>\u003C/li> \u003Cli>Torrust UDP Tracker: \u003Ca href=\"udp://tracker.torrust-demo.com:6969/announce\">udp://tracker.torrust-demo.com:6969/announce\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"requirements\" data-svelte-h=\"svelte-d9t7ph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#requirements\">\u003Cspan>#\u003C/span>\u003C/a>Requirements\u003C/h2> \u003Cp data-svelte-h=\"svelte-14h9udh\">You will need:\u003C/p> \u003Cul data-svelte-h=\"svelte-kzy662\">\u003Cli>A Digital Ocean account.\u003C/li> \u003Cli>A Digital Ocean virtual machine (droplet) with Ubuntu 22.04.2 LTS.\u003C/li> \u003Cli>Docker, Docker Compose, SQLite3 and Git installed on the server.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-481lss\">We will explain how to install the required dependencies in the Ubuntu server.\u003C/p> \u003Ch3 id=\"server\" data-svelte-h=\"svelte-1lk2f4q\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#server\">\u003Cspan>#\u003C/span>\u003C/a>Server\u003C/h3> \u003Cp data-svelte-h=\"svelte-1zoymk\">A Digital Ocean Droplet with a configuration similar to this:\u003C/p> \u003Cul data-svelte-h=\"svelte-2vrxe3\">\u003Cli>\u003Cstrong>Datacenter\u003C/strong>: Frankfurt (FRA1).\u003C/li> \u003Cli>\u003Cstrong>Image\u003C/strong>: Ubuntu 22.04 (LTS) x64.\u003C/li> \u003Cli>\u003Cstrong>Droplet Type\u003C/strong>: Shared CPU (Basic).\u003C/li> \u003Cli>\u003Cstrong>CPU options\u003C/strong>: Regular (Disk Type: SSD).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1plfg5n\">Resources:\u003C/p> \u003Cul data-svelte-h=\"svelte-ogyfwb\">\u003Cli>1 GB/1CPU.\u003C/li> \u003Cli>25 GB SS Disk.\u003C/li> \u003Cli>1000 GB transfer.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-fn4rp3\">Features:\u003C/p> \u003Cul data-svelte-h=\"svelte-hg1gm8\">\u003Cli>Backups enabled.\u003C/li> \u003Cli>With improved metrics monitoring and alerting.\u003C/li>\u003C/ul> \u003Ch3 id=\"software\" data-svelte-h=\"svelte-1rxdbuo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#software\">\u003Cspan>#\u003C/span>\u003C/a>Software\u003C/h3> \u003Cul data-svelte-h=\"svelte-16fgxx0\">\u003Cli>Ubuntu 22.04.2 LTS (already installed in the droplet)\u003C/li> \u003Cli>Docker version 24.0.7, build afdd53b.\u003C/li> \u003Cli>Docker Compose version v2.3.3.\u003C/li> \u003Cli>SQLite3 version 3.37.2 2022-01-06 13:25:41 872ba256cbf61d9290b571c0e6d82a20c224ca3ad82971edc46b29818d5dalt1.\u003C/li> \u003Cli>Git version 2.34.1 (only for the installation).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-17kxcyd\">The Docker images used by this tutorial are:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">$ docker images --digests\nREPOSITORY          TAG               DIGEST                                                                    IMAGE ID       CREATED       SIZE\ntorrust/tracker     develop           sha256:5589eaf57af277feda6eca6f841859fd2aa05af7deafca546ad0a17fe36d8e51   c42f0cce3304   4 days ago    160MB\nnginx               mainline-alpine   sha256:3923f8de8d2214b9490e68fd6ae63ea604deddd166df2755b788bef04848b9bc   01e5c69afaf6   2 weeks ago   42.6MB\ntorrust/index       develop           sha256:69b12dfcb9c47267bd314f4869dfce7585d3f2b172200ef0d7d7bb776e209fe6   a3db4d4e5d6a   2 weeks ago   64.9MB\ntorrust/index-gui   develop           sha256:b30deb84cdee8fa34e4d3783ce2f467542e6fdc13a14dd6bbed879e2e2b82bcb   4f6e446cb009   2 weeks ago   175MB\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> We will update them to use a concrete tag v3.0 after releasing it.\u003C/div> \u003Ch3 id=\"domain\" data-svelte-h=\"svelte-xf7of1\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#domain\">\u003Cspan>#\u003C/span>\u003C/a>Domain\u003C/h3> \u003Cp data-svelte-h=\"svelte-sbcnpw\">You will need a domain. We are using “torrust-demo.com” in this tutorial.\u003C/p> \u003Ch2 id=\"initial-server-setup\" data-svelte-h=\"svelte-1lt2y63\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#initial-server-setup\">\u003Cspan>#\u003C/span>\u003C/a>Initial Server Setup\u003C/h2> \u003Cp data-svelte-h=\"svelte-1hq0qaj\">Starting off, we’ll set up a virtual server using Ubuntu 22.04. Think of it as preparing a new computer for your application, ensuring it’s ready to run smoothly.\u003C/p> \u003Cp data-svelte-h=\"svelte-wt4zra\">This section covers the initial configuration of your Ubuntu 22.04 server, focusing on essential security and performance optimizations.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> Disclaimer: For the initial server setup we only highlight the main points. We provide the links to Digital Ocean tutorials\n  where you will find detailed information.\u003C/div> \u003Cp data-svelte-h=\"svelte-102dmr8\">Please refer to \u003Ca href=\"https://docs.digitalocean.com/\" rel=\"nofollow\">Digital Ocean Documentation\u003C/a> for more information about how to create projects and droplets. Projects are the way DO (Digital Ocean) organizes resources (virtual machines, databases, domains, etc.). We have a project called “torrust-demo.com”.\u003C/p> \u003Cp data-svelte-h=\"svelte-kbwxhx\">Once you have created your project and droplet you can follow the \u003Ca href=\"https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-22-04\" rel=\"nofollow\">Digital Ocean guide to setup a new Ubuntu server\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-masdly\">For this tutorial we have used our demo environment.\u003C/p> \u003Cp data-svelte-h=\"svelte-73slgm\">In this first step you will:\u003C/p> \u003Cul data-svelte-h=\"svelte-2mg5wg\">\u003Cli>Create a virtual machine (droplet).\u003C/li> \u003Cli>Access the virtual machine using the \u003Ccode>root\u003C/code> account.\u003C/li> \u003Cli>Create a new user \u003Ccode>torrust\u003C/code>.\u003C/li> \u003Cli>Access the server using the new account \u003Ccode>torrust\u003C/code>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1gnydxc\">After creating the droplet you should be able to connect by using SSH with the \u003Ccode>root\u003C/code> account providing the password you set\nduring the droplet creation:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">ssh\u003C/span> root@139.59.150.216\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-bsztye\">After logging in you can create the new user account:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">adduser torrust\n\u003Cspan class=\"token function\">usermod\u003C/span> \u003Cspan class=\"token parameter variable\">-aG\u003C/span> \u003Cspan class=\"token function\">sudo\u003C/span> torrust\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-e6ugj6\">The user is added to the sudo group you can can execute command as root when needed.\u003C/p> \u003Ch3 id=\"setup-ssh-keys\" data-svelte-h=\"svelte-1rxyfkq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-ssh-keys\">\u003Cspan>#\u003C/span>\u003C/a>Setup SSH Keys\u003C/h3> \u003Cp data-svelte-h=\"svelte-g4kj1e\">Security is key! Setting up SSH keys is like creating a special passcode for safe and secure access to your server.\u003C/p> \u003Cp data-svelte-h=\"svelte-ue2jkk\">Follow the \u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-22-04\" rel=\"nofollow\">Digital Ocean tutorial\u003C/a> to establish secure SSH key authentication, enhancing the security of your server connections.\u003C/p> \u003Cp data-svelte-h=\"svelte-r2i9gz\">You have to generate a new key and copy it to the server:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">ssh-copy-id \u003Cspan class=\"token parameter variable\">-i\u003C/span> ~/.ssh/torrust_rsa.pub torrust@139.59.150.216\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1agehpc\">If all went fine you should be able to login to the server with your SSH key.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">ssh\u003C/span> torrust@139.59.150.216\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"install-docker\" data-svelte-h=\"svelte-dcwzx2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#install-docker\">\u003Cspan>#\u003C/span>\u003C/a>Install Docker\u003C/h3> \u003Cp data-svelte-h=\"svelte-1iktbq8\">Docker is a tool that lets you run applications in a consistent environment. It’s like having a universal app runner that works the same everywhere.\u003C/p> \u003Cp data-svelte-h=\"svelte-w05d69\">You can also follow the DO guide: \u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-22-04\" rel=\"nofollow\">How To Install and Use Docker on Ubuntu 22.04\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1tjig7w\">In short, you only need to execute some commands:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> update\n\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> apt-transport-https ca-certificates \u003Cspan class=\"token function\">curl\u003C/span> software-properties-common\n\u003Cspan class=\"token function\">curl\u003C/span> \u003Cspan class=\"token parameter variable\">-fsSL\u003C/span> https://download.docker.com/linux/ubuntu/gpg \u003Cspan class=\"token operator\">|\u003C/span> \u003Cspan class=\"token function\">sudo\u003C/span> gpg \u003Cspan class=\"token parameter variable\">--dearmor\u003C/span> \u003Cspan class=\"token parameter variable\">-o\u003C/span> /usr/share/keyrings/docker-archive-keyring.gpg\n\u003Cspan class=\"token builtin class-name\">echo\u003C/span> \u003Cspan class=\"token string\">\"deb [arch=\u003Cspan class=\"token variable\">\u003Cspan class=\"token variable\">$(\u003C/span>dpkg --print-architecture\u003Cspan class=\"token variable\">)\u003C/span>\u003C/span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \u003Cspan class=\"token variable\">\u003Cspan class=\"token variable\">$(\u003C/span>lsb_release \u003Cspan class=\"token parameter variable\">-cs\u003C/span>\u003Cspan class=\"token variable\">)\u003C/span>\u003C/span> stable\"\u003C/span> \u003Cspan class=\"token operator\">|\u003C/span> \u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">tee\u003C/span> /etc/apt/sources.list.d/docker.list \u003Cspan class=\"token operator\">>\u003C/span> /dev/null\n\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> update\n\u003Cspan class=\"token function\">apt-cache\u003C/span> policy docker-ce\n\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> docker-ce\n\u003Cspan class=\"token function\">sudo\u003C/span> systemctl status \u003Cspan class=\"token function\">docker\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-nhz2wx\">If you want to execute docker without sudo you will need to execute some more commands:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">usermod\u003C/span> \u003Cspan class=\"token parameter variable\">-aG\u003C/span> \u003Cspan class=\"token function\">docker\u003C/span> \u003Cspan class=\"token variable\">$&#123;\u003Cspan class=\"token environment constant\">USER\u003C/span>&#125;\u003C/span>\n\u003Cspan class=\"token function\">su\u003C/span> - \u003Cspan class=\"token variable\">$&#123;\u003Cspan class=\"token environment constant\">USER\u003C/span>&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-rcbycd\">Make sure docker is running with \u003Ccode>docker run hello-world\u003C/code>.\u003C/p> \u003Ch3 id=\"install-docker-compose\" data-svelte-h=\"svelte-cbitrm\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#install-docker-compose\">\u003Cspan>#\u003C/span>\u003C/a>Install Docker Compose\u003C/h3> \u003Cp data-svelte-h=\"svelte-1pn413f\">Docker Compose helps in running complex apps easily. It’s like a recipe that tells Docker how to prepare and serve your app.\u003C/p> \u003Cp data-svelte-h=\"svelte-q7j166\">You can follow the Digital Ocean Tutorial: \u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-22-04\" rel=\"nofollow\">How To Install and Use Docker Compose on Ubuntu 22.04\u003C/a>\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">mkdir\u003C/span> \u003Cspan class=\"token parameter variable\">-p\u003C/span> ~/.docker/cli-plugins/\n\u003Cspan class=\"token function\">curl\u003C/span> \u003Cspan class=\"token parameter variable\">-SL\u003C/span> https://github.com/docker/compose/releases/download/v2.3.3/docker-compose-linux-x86_64 \u003Cspan class=\"token parameter variable\">-o\u003C/span> ~/.docker/cli-plugins/docker-compose\n\u003Cspan class=\"token function\">chmod\u003C/span> +x ~/.docker/cli-plugins/docker-compose\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-hvrddu\">And also make sure it’s installed correctly with \u003Ccode>docker compose version\u003C/code>.\u003C/p> \u003Ch3 id=\"install-sqlite\" data-svelte-h=\"svelte-euwmmq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#install-sqlite\">\u003Cspan>#\u003C/span>\u003C/a>Install SQLite\u003C/h3> \u003Cp data-svelte-h=\"svelte-kfcmms\">SQLite is a simple database system. You won’t needed if you use MySQL for both the Index and Tracker. In this tutorial\nwe will use it.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> update\n\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> sqlite3\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1dgnv5y\">You can check if it’s installed correctly with \u003Ccode>sqlite3 --version\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-55ocrl\">You can execute queries to get the Tracker or Index data connecting with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">$ sqlite3 ./storage/index/lib/database/sqlite3.db\nSQLite version \u003Cspan class=\"token number\">3.37\u003C/span>.2 \u003Cspan class=\"token number\">2022\u003C/span>-01-06 \u003Cspan class=\"token number\">13\u003C/span>:25:41\nEnter \u003Cspan class=\"token string\">\".help\"\u003C/span> \u003Cspan class=\"token keyword\">for\u003C/span> usage hints.\nsqlite\u003Cspan class=\"token operator\">>\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1xpdkxs\">Some useful commands are:\u003C/p> \u003Cul data-svelte-h=\"svelte-16kbk4m\">\u003Cli>\u003Ccode>.help\u003C/code>: show help.\u003C/li> \u003Cli>\u003Ccode>.tables\u003C/code>: list tables.\u003C/li> \u003Cli>\u003Ccode>.quit\u003C/code>: exit.\u003C/li>\u003C/ul> \u003Ch2 id=\"setup-the-dns\" data-svelte-h=\"svelte-yrf5v8\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-the-dns\">\u003Cspan>#\u003C/span>\u003C/a>Setup The DNS\u003C/h2> \u003Cp data-svelte-h=\"svelte-11szrw9\">Before running the application we have to setup the DNS. You can load the application using your domain instead of the droplet IP.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> The droplet has an IP that can be used to setup the DNS, but we recommend using an reserved IP. You can link the reserved IP to the droplet.\u003C/div> \u003Cp data-svelte-h=\"svelte-1fzhnoh\">First at all, you need to change your name servers and use the ones from Digital Ocean. You have to find out how to do that\nin your domain provider.\u003C/p> \u003Cp data-svelte-h=\"svelte-1gx85hd\">Then you need to create two \u003Ccode>A\u003C/code> records to point the domains to the droplet IP (or the reserved IP if you are using one).\u003C/p> \u003Cp data-svelte-h=\"svelte-1oivqlp\">Here is how the DNS configuration looks like for our demo:\u003C/p> \u003Cimg srcset=\"/images/posts/deploying-torrust-to-production/dns-configuration.png, /images/posts/deploying-torrust-to-production/dns-configuration.png, /images/posts/deploying-torrust-to-production/dns-configuration.png\" src=\"/images/posts/deploying-torrust-to-production/dns-configuration.png\" alt=\"Create\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Ch3 id=\"bep-34\" data-svelte-h=\"svelte-12m5xlv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#bep-34\">\u003Cspan>#\u003C/span>\u003C/a>BEP 34\u003C/h3> \u003Cp data-svelte-h=\"svelte-kibdaw\">As you can see in our DNS configuration we have a \u003Ccode>TXT\u003C/code> record for the tracker with this value:\u003C/p> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">BITTORRENT UDP:6969 TCP:443\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-12rh0x4\">That record implements the \u003Ca href=\"https://www.bittorrent.org/beps/bep_0034.html\" rel=\"nofollow\">BEP 34 DNS Tracker Preferences\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-9lq4rk\">That allows administrators to declare the port and the service priorities for a tracker domain. In our case, we have two different trackers running on ports \u003Ccode>6969\u003C/code> and \u003Ccode>443\u003C/code> and we prioritize the UDP tracker.\u003C/p> \u003Cp data-svelte-h=\"svelte-1u4ac1h\">Some services related to tracker (for instance \u003Ca href=\"https://newtrackon.com\" rel=\"nofollow\">https://newtrackon.com\u003C/a>) use this DNS record to verify tracker URLs.\u003C/p> \u003Ch2 id=\"install-the-application\" data-svelte-h=\"svelte-146i9al\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#install-the-application\">\u003Cspan>#\u003C/span>\u003C/a>Install The Application\u003C/h2> \u003Cp data-svelte-h=\"svelte-8lo22w\">First, we will install the application on port \u003Ccode>80\u003C/code> because we need a live app to generate the HTTPs certificates with\nLet’s Encrypt. Once we generate the certificates we can change the configuration to serve the application on port \u003Ccode>443\u003C/code>.\u003C/p> \u003Ch3 id=\"without-certificates\" data-svelte-h=\"svelte-j2n8q1\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#without-certificates\">\u003Cspan>#\u003C/span>\u003C/a>Without certificates\u003C/h3> \u003Cp data-svelte-h=\"svelte-eiuzgi\">We’ll start by launching your app in a basic, non-secure mode. Initial deployment steps will be covered, focusing on functionality before implementing SSL/TLS certificates. We need to run the application in order to generate certificates with Let’s Encrypt.\u003C/p> \u003Cp data-svelte-h=\"svelte-1k7c2w7\">First, we need to get the docker compose configuration. You can download it directly from the \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">Torrust Compose GitHub repo\u003C/a> or you can use Git:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token builtin class-name\">cd\u003C/span> \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token function\">mkdir\u003C/span> \u003Cspan class=\"token parameter variable\">-p\u003C/span> github/torrust \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token builtin class-name\">cd\u003C/span> torrust/  \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token function\">git\u003C/span> clone --single-branch \u003Cspan class=\"token parameter variable\">--branch\u003C/span> main https://github.com/torrust/torrust-compose.git  \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token builtin class-name\">cd\u003C/span> torrust-compose/  \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token function\">git\u003C/span> status  \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token builtin class-name\">cd\u003C/span> droplet/\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-f6dfud\">If you use Git you will need to install it in the server. Follow the \u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-git-on-ubuntu-22-04\" rel=\"nofollow\">“How To Install Git on Ubuntu 22.04”\u003C/a> guide.\u003C/p> \u003Cp data-svelte-h=\"svelte-8zuklx\">After cloning the repository you have to run the install script:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">$ ./bin/install.sh\nCreating compose .env \u003Cspan class=\"token string\">'./.env'\u003C/span>\nCreating proxy config file: \u003Cspan class=\"token string\">'./storage/proxy/etc/nginx-conf/nginx.conf'\u003C/span>\nCreating index database: \u003Cspan class=\"token string\">'./storage/index/lib/database/sqlite3.db'\u003C/span>\nCreating index configuration: \u003Cspan class=\"token string\">'./storage/index/etc/index.toml'\u003C/span>\nCreating tracker database: \u003Cspan class=\"token string\">'./storage/tracker/lib/database/sqlite3.db'\u003C/span>\nCreating tracker configuration: \u003Cspan class=\"token string\">'./storage/tracker/etc/tracker.toml'\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-kgb9wo\">The script will create some needed directories and empty SQLite databases:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">$ tree storage/\nstorage/\n├── certbot\n│   ├── etc\n│   └── lib\n├── dhparam\n├── index\n│   ├── etc\n│   │   └── index.toml\n│   └── lib\n│       └── database\n│           └── sqlite3.db\n├── proxy\n│   ├── etc\n│   │   └── nginx-conf\n│   │       └── nginx.conf\n│   └── webroot\n└── tracker\n    ├── etc\n    │   └── tracker.toml\n    └── lib\n        └── database\n            └── sqlite3.db\n\n\u003Cspan class=\"token number\">17\u003C/span> directories, \u003Cspan class=\"token number\">5\u003C/span> files\n\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1qjv41z\">Now you can continue with some customizations. You can adjust the default configuration for all services\nor leave the default values. But at least you must change the domain and the secrets.\u003C/p> \u003Cp data-svelte-h=\"svelte-gb06cg\">First open the \u003Ccode>.env\u003C/code> file and find these environment variables:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r13dla\">\u003Cli>\u003Ccode>TORRUST_INDEX_GUI_API_BASE_URL\u003C/code>\u003C/li> \u003Cli>\u003Ccode>TORRUST_INDEX_CONFIG_OVERRIDE_TRACKER__TOKEN\u003C/code>\u003C/li> \u003Cli>\u003Ccode>TORRUST_INDEX_CONFIG_OVERRIDE_AUTH__SECRET_KEY\u003C/code>\u003C/li> \u003Cli>\u003Ccode>TORRUST_TRACKER_CONFIG_OVERRIDE_HTTP_API__ACCESS_TOKENS__ADMIN\u003C/code>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-wdd93k\">Replace the value for \u003Ccode>TORRUST_INDEX_GUI_API_BASE_URL\u003C/code> with your domain:\u003C/p> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">TORRUST_INDEX_GUI_API_BASE_URL='http://index.your-domain.com/api/v1'\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-vqh9gt\">You can generate the Tracker API token and the Auth Secret Key with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\"> gpg \u003Cspan class=\"token parameter variable\">--armor\u003C/span> --gen-random \u003Cspan class=\"token number\">1\u003C/span> \u003Cspan class=\"token number\">40\u003C/span>\n\u003Cspan class=\"token assign-left variable\">jcrmbzlGyeP7z53TUQtXmtltMb5TubsIE9e0DPLnS4Ih29JddQw5JA\u003C/span>\u003Cspan class=\"token operator\">==\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> NOTICE: We are not sending emails from the application because user&#39;s email validation is disabled on registration for the demo. If you want to enable email validation you will need to provide the SMTP configuration including the password in the `storage/index/etc/index.toml` config file.\u003C/div> \u003Cp data-svelte-h=\"svelte-1l5cthl\">Now, you should be able to run the application with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose up \u003Cspan class=\"token parameter variable\">--build\u003C/span> \u003Cspan class=\"token parameter variable\">--detach\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-48w7bs\">If you have reached this point, congratulations! you already have these live services:\u003C/p> \u003Cul data-svelte-h=\"svelte-paup52\">\u003Cli>Torrust Index: \u003Ca href=\"http://index.your-domain.com\" rel=\"nofollow\">http://index.your-domain.com\u003C/a>\u003C/li> \u003Cli>Torrust HTTP Tracker: \u003Ca href=\"http://tracker.your-domain.com/announce\" rel=\"nofollow\">http://tracker.your-domain.com/announce\u003C/a>\u003C/li> \u003Cli>Torrust UDP Tracker: \u003Ca href=\"udp://tracker.your-domain.com:6969/announce\">udp://tracker.your-domain.com:6969/announce\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1np0zyr\">In the next sections we will describe how to use Let’s Encrypt to generate certificates to use HTTPs for the Index website and HTTP Tracker.\u003C/p> \u003Ch3 id=\"generate-certificates-with-lets-encrypt\" data-svelte-h=\"svelte-luskqm\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#generate-certificates-with-lets-encrypt\">\u003Cspan>#\u003C/span>\u003C/a>Generate Certificates With Let’s Encrypt\u003C/h3> \u003Cp data-svelte-h=\"svelte-9zvs5l\">Let’s Encrypt provides free certificates. You’ll learn how to obtain and configure Let’s Encrypt SSL certificates for secure HTTPS connections.\u003C/p> \u003Cp data-svelte-h=\"svelte-402pa9\">First, you need to log in the “certbot” container. \u003Ca href=\"https://certbot.eff.org/\" rel=\"nofollow\">Certbot\u003C/a> is a free, open source software tool for automatically (using Let’s Encrypt certificates) enable HTTPS.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose run \u003Cspan class=\"token parameter variable\">--entrypoint\u003C/span> /bin/sh certbot\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> Notice that the previous command recreates the docker containers so you site will be down for some seconds.\u003C/div> \u003Cp data-svelte-h=\"svelte-3km01r\">Once you are logged in the certbot container you need to execute these certbot commands to generate the staging certificates:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">certbot certonly \u003Cspan class=\"token parameter variable\">--webroot\u003C/span> --webroot-path\u003Cspan class=\"token operator\">=\u003C/span>/var/www/html \u003Cspan class=\"token parameter variable\">--email\u003C/span> email@example.com --agree-tos --no-eff-email \u003Cspan class=\"token parameter variable\">--staging\u003C/span> \u003Cspan class=\"token parameter variable\">-d\u003C/span> index.torrust-demo.com\ncertbot certonly \u003Cspan class=\"token parameter variable\">--webroot\u003C/span> --webroot-path\u003Cspan class=\"token operator\">=\u003C/span>/var/www/html \u003Cspan class=\"token parameter variable\">--email\u003C/span> email@example.com --agree-tos --no-eff-email \u003Cspan class=\"token parameter variable\">--staging\u003C/span> \u003Cspan class=\"token parameter variable\">-d\u003C/span> tracker.torrust-demo.com\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-wk4kyj\">Replace \u003Ccode>email@example.com\u003C/code> with your email.\u003C/p> \u003Cp data-svelte-h=\"svelte-bhkkmm\">For the production certificates you can execute the same command but removing the flag \u003Ccode>--staging\u003C/code>:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">certbot certonly \u003Cspan class=\"token parameter variable\">--webroot\u003C/span> --webroot-path\u003Cspan class=\"token operator\">=\u003C/span>/var/www/html \u003Cspan class=\"token parameter variable\">--email\u003C/span> email@example.com --agree-tos --no-eff-email --force-renewal \u003Cspan class=\"token parameter variable\">-d\u003C/span> index.torrust-demo.com\ncertbot certonly \u003Cspan class=\"token parameter variable\">--webroot\u003C/span> --webroot-path\u003Cspan class=\"token operator\">=\u003C/span>/var/www/html \u003Cspan class=\"token parameter variable\">--email\u003C/span> email@example.com --agree-tos --no-eff-email --force-renewal \u003Cspan class=\"token parameter variable\">-d\u003C/span> tracker.torrust-demo.com\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-e0iof\">In the directory \u003Ccode>storage/certbot/etc/live\u003C/code> you should have at least one directory per domain.\u003C/p> \u003Ch3 id=\"change-nginx-configuration-to-use-certificates\" data-svelte-h=\"svelte-9zpi6d\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#change-nginx-configuration-to-use-certificates\">\u003Cspan>#\u003C/span>\u003C/a>Change Nginx Configuration To Use Certificates\u003C/h3> \u003Cp data-svelte-h=\"svelte-r7njd6\">Once we have the certificates, we’ll tell our server (Nginx) to use them, ensuring a secure website. Detailed steps to modify your Nginx configuration for SSL implementation will be provided.\u003C/p> \u003Ch4 id=\"generate-the-diffie-hellman-key\" data-svelte-h=\"svelte-1a5u8pf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#generate-the-diffie-hellman-key\">\u003Cspan>#\u003C/span>\u003C/a>Generate The Diffie-Hellman Key\u003C/h4> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> openssl dhparam \u003Cspan class=\"token parameter variable\">-out\u003C/span> /home/torrust/github/torrust/torrust-compose/droplet/storage/dhparam/dhparam-2048.pem \u003Cspan class=\"token number\">2048\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch4 id=\"update-nginx-configuration\" data-svelte-h=\"svelte-1osroiw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#update-nginx-configuration\">\u003Cspan>#\u003C/span>\u003C/a>Update Nginx Configuration\u003C/h4> \u003Cp data-svelte-h=\"svelte-19ikup3\">Edit the file \u003Ccode>./storage/proxy/etc/nginx-conf/nginx.conf\u003C/code> and uncomment all the commented lines for HTTPs servers:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">nginx\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-nginx\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-nginx\">\u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server\u003C/span>\u003C/span>\n\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> \u003Cspan class=\"token number\">443\u003C/span> ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> [::]:443 ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_name\u003C/span> index.torrust-demo.com\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_tokens\u003C/span> \u003Cspan class=\"token boolean\">off\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_certificate\u003C/span> /etc/letsencrypt/live/index.torrust-demo.com-0001/fullchain.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_certificate_key\u003C/span> /etc/letsencrypt/live/index.torrust-demo.com-0001/privkey.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_buffer_size\u003C/span> \u003Cspan class=\"token number\">8k\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_dhparam\u003C/span> /etc/ssl/certs/dhparam-2048.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_protocols\u003C/span> TLSv1.2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_prefer_server_ciphers\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_ciphers\u003C/span> ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_ecdh_curve\u003C/span> secp384r1\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_session_tickets\u003C/span> \u003Cspan class=\"token boolean\">off\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_stapling\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_stapling_verify\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">resolver\u003C/span> 8.8.8.8\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> ^~/api/\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">rewrite\u003C/span> ^/api/(.*)$ /\u003Cspan class=\"token variable\">$1\u003C/span> break\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">try_files\u003C/span> \u003Cspan class=\"token variable\">$uri\u003C/span> @index\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> /\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">try_files\u003C/span> \u003Cspan class=\"token variable\">$uri\u003C/span> @index-gui\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> @index\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_pass\u003C/span> http://index:3001\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Frame-Options \u003Cspan class=\"token string\">\"SAMEORIGIN\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-XSS-Protection \u003Cspan class=\"token string\">\"1; mode=block\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Content-Type-Options \u003Cspan class=\"token string\">\"nosniff\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Referrer-Policy \u003Cspan class=\"token string\">\"no-referrer-when-downgrade\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Content-Security-Policy \u003Cspan class=\"token string\">\"default-src * data: 'unsafe-eval' 'unsafe-inline'\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token comment\">#add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\u003C/span>\n    \u003Cspan class=\"token comment\"># enable strict transport security only if you understand the implications\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> @index-gui\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_pass\u003C/span> http://index-gui:3000\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Frame-Options \u003Cspan class=\"token string\">\"SAMEORIGIN\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-XSS-Protection \u003Cspan class=\"token string\">\"1; mode=block\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Content-Type-Options \u003Cspan class=\"token string\">\"nosniff\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Referrer-Policy \u003Cspan class=\"token string\">\"no-referrer-when-downgrade\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Content-Security-Policy \u003Cspan class=\"token string\">\"default-src * data: 'unsafe-eval' 'unsafe-inline'\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token comment\">#add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\u003C/span>\n    \u003Cspan class=\"token comment\"># enable strict transport security only if you understand the implications\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">root\u003C/span> /var/www/html\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">index\u003C/span> index.html index.htm index.nginx-debian.html\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server\u003C/span>\u003C/span>\n\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> \u003Cspan class=\"token number\">443\u003C/span> ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> [::]:443 ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_name\u003C/span> tracker.torrust-demo.com\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_tokens\u003C/span> \u003Cspan class=\"token boolean\">off\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_certificate\u003C/span> /etc/letsencrypt/live/tracker.torrust-demo.com/fullchain.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_certificate_key\u003C/span> /etc/letsencrypt/live/tracker.torrust-demo.com/privkey.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_buffer_size\u003C/span> \u003Cspan class=\"token number\">8k\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_dhparam\u003C/span> /etc/ssl/certs/dhparam-2048.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_protocols\u003C/span> TLSv1.2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_prefer_server_ciphers\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_ciphers\u003C/span> ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_ecdh_curve\u003C/span> secp384r1\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_session_tickets\u003C/span> \u003Cspan class=\"token boolean\">off\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_stapling\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_stapling_verify\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">resolver\u003C/span> 8.8.8.8\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> /api/\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">try_files\u003C/span> \u003Cspan class=\"token variable\">$uri\u003C/span> @tracker-api\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> /\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">try_files\u003C/span> \u003Cspan class=\"token variable\">$uri\u003C/span> @tracker-http\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> @tracker-api\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_pass\u003C/span> http://tracker:1212\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Frame-Options \u003Cspan class=\"token string\">\"SAMEORIGIN\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-XSS-Protection \u003Cspan class=\"token string\">\"1; mode=block\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Content-Type-Options \u003Cspan class=\"token string\">\"nosniff\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Referrer-Policy \u003Cspan class=\"token string\">\"no-referrer-when-downgrade\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Content-Security-Policy \u003Cspan class=\"token string\">\"default-src * data: 'unsafe-eval' 'unsafe-inline'\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token comment\">#add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\u003C/span>\n    \u003Cspan class=\"token comment\"># enable strict transport security only if you understand the implications\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> @tracker-http\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_pass\u003C/span> http://tracker:7070\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Frame-Options \u003Cspan class=\"token string\">\"SAMEORIGIN\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-XSS-Protection \u003Cspan class=\"token string\">\"1; mode=block\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Content-Type-Options \u003Cspan class=\"token string\">\"nosniff\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Referrer-Policy \u003Cspan class=\"token string\">\"no-referrer-when-downgrade\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Content-Security-Policy \u003Cspan class=\"token string\">\"default-src * data: 'unsafe-eval' 'unsafe-inline'\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token comment\">#add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\u003C/span>\n    \u003Cspan class=\"token comment\"># enable strict transport security only if you understand the implications\u003C/span>\n\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_set_header\u003C/span> X-Forwarded-For \u003Cspan class=\"token variable\">$proxy_add_x_forwarded_for\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">root\u003C/span> /var/www/html\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">index\u003C/span> index.html index.htm index.nginx-debian.html\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-b4z69l\">Make sure you also change the domains:\u003C/p> \u003Cul data-svelte-h=\"svelte-1gfj7cg\">\u003Cli>index.torrust-demo.com\u003C/li> \u003Cli>tracker.torrust-demo.com\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-vpc8yu\">You also have to change the API base URL in the \u003Ccode>.env\u003C/code> file:\u003C/p> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">TORRUST_INDEX_GUI_API_BASE_URL=https://index.torrust-demo.com/api/v1\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-aivotr\">Replace it from \u003Ccode>http://index.torrust-demo.com/api/v1\u003C/code> to \u003Ccode>https://index.torrust-demo.com/api/v1\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1crqqiv\">After changing the Nginx configuration you need to restart the Nginx server:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose \u003Cspan class=\"token parameter variable\">--ansi\u003C/span> never restart proxy\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"setup-cronjob-to-renew-certificates\" data-svelte-h=\"svelte-1kcbweb\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-cronjob-to-renew-certificates\">\u003Cspan>#\u003C/span>\u003C/a>Setup Cronjob To Renew Certificates\u003C/h3> \u003Cp data-svelte-h=\"svelte-ds65v7\">Certificates expire, so we’ll set up an automatic renewal system, like a subscription that renews itself. We will set up an automate SSL certificate renewal using cronjobs to maintain continuous security.\u003C/p> \u003Cp data-svelte-h=\"svelte-el7wb5\">We will use crontab to execute a command every day:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">crontab\u003C/span> \u003Cspan class=\"token parameter variable\">-e\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-254yos\">Add the following crontab line:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">text\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">0 12 * * * /home/torrust/github/torrust/torrust-compose/droplet/bin/ssl_renew.sh >> /var/log/cron.log 2>&amp;1\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-pebjgs\">You can check the cronjob output with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">tail\u003C/span> \u003Cspan class=\"token parameter variable\">-f\u003C/span> /var/log/cron.log\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1t6fbuj\">After generating the certificates and renewing them you should have a certbot directory structure similar to this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">$ \u003Cspan class=\"token function\">sudo\u003C/span> tree storage/certbot/\n\u003Cspan class=\"token punctuation\">[\u003C/span>sudo\u003Cspan class=\"token punctuation\">]\u003C/span> password \u003Cspan class=\"token keyword\">for\u003C/span> torrust:\nstorage/certbot/\n├── etc\n│   ├── accounts\n│   │   ├── acme-staging-v02.api.letsencrypt.org\n│   │   │   └── directory\n│   │   │       └── b39c03e978*****df8366ab6539\n│   │   │           ├── meta.json\n│   │   │           ├── private_key.json\n│   │   │           └── regr.json\n│   │   └── acme-v02.api.letsencrypt.org\n│   │       └── directory\n│   │           └── 441a435b0f8*****cc6dd22f34468\n│   │               ├── meta.json\n│   │               ├── private_key.json\n│   │               └── regr.json\n│   ├── archive\n│   │   ├── index.torrust-demo.com\n│   │   │   ├── cert1.pem\n│   │   │   ├── chain1.pem\n│   │   │   ├── fullchain1.pem\n│   │   │   └── privkey1.pem\n│   │   ├── index.torrust-demo.com-0001\n│   │   │   ├── cert1.pem\n│   │   │   ├── cert2.pem\n│   │   │   ├── chain1.pem\n│   │   │   ├── chain2.pem\n│   │   │   ├── fullchain1.pem\n│   │   │   ├── fullchain2.pem\n│   │   │   ├── privkey1.pem\n│   │   │   └── privkey2.pem\n│   │   └── tracker.torrust-demo.com\n│   │       ├── cert1.pem\n│   │       ├── cert2.pem\n│   │       ├── cert3.pem\n│   │       ├── chain1.pem\n│   │       ├── chain2.pem\n│   │       ├── chain3.pem\n│   │       ├── fullchain1.pem\n│   │       ├── fullchain2.pem\n│   │       ├── fullchain3.pem\n│   │       ├── privkey1.pem\n│   │       ├── privkey2.pem\n│   │       └── privkey3.pem\n│   ├── live\n│   │   ├── README\n│   │   ├── index.torrust-demo.com\n│   │   │   ├── README\n│   │   │   ├── cert.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com/cert1.pem\n│   │   │   ├── chain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com/chain1.pem\n│   │   │   ├── fullchain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com/fullchain1.pem\n│   │   │   └── privkey.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com/privkey1.pem\n│   │   ├── index.torrust-demo.com-0001\n│   │   │   ├── README\n│   │   │   ├── cert.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com-0001/cert2.pem\n│   │   │   ├── chain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com-0001/chain2.pem\n│   │   │   ├── fullchain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com-0001/fullchain2.pem\n│   │   │   └── privkey.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com-0001/privkey2.pem\n│   │   └── tracker.torrust-demo.com\n│   │       ├── README\n│   │       ├── cert.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/tracker.torrust-demo.com/cert3.pem\n│   │       ├── chain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/tracker.torrust-demo.com/chain3.pem\n│   │       ├── fullchain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/tracker.torrust-demo.com/fullchain3.pem\n│   │       └── privkey.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/tracker.torrust-demo.com/privkey3.pem\n│   ├── renewal\n│   │   ├── index.torrust-demo.com-0001.conf\n│   │   ├── index.torrust-demo.com.conf\n│   │   └── tracker.torrust-demo.com.conf\n│   └── renewal-hooks\n│       ├── deploy\n│       ├── post\n│       └── pre\n└── lib\n\n\u003Cspan class=\"token number\">22\u003C/span> directories, \u003Cspan class=\"token number\">49\u003C/span> files\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"exposed-services\" data-svelte-h=\"svelte-48ebsd\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#exposed-services\">\u003Cspan>#\u003C/span>\u003C/a>Exposed services\u003C/h2> \u003Cp data-svelte-h=\"svelte-1pc2bld\">After finishing the instalaltion the main available services are:\u003C/p> \u003Cul data-svelte-h=\"svelte-1biu1k0\">\u003Cli>The Index: \u003Ca href=\"http://index.torrust-demo.com/\" rel=\"nofollow\">http://index.torrust-demo.com/\u003C/a>\u003C/li> \u003Cli>The HTTP Tracker: \u003Ca href=\"https://tracker.torrust-demo.com/announce\" rel=\"nofollow\">https://tracker.torrust-demo.com/announce\u003C/a>\u003C/li> \u003Cli>The UDP Tracker: \u003Ca href=\"udp://tracker.torrust-demo.com:6969/announce\">udp://tracker.torrust-demo.com:6969/announce\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-5q9hh8\">But there are some other exposed ports. In addition to the SSH port (22), when you run the container you’ll expose all the following ports on the server:\u003C/p> \u003Cul data-svelte-h=\"svelte-1qll13y\">\u003Cli>80 (proxy)\u003C/li> \u003Cli>443 (proxy)\u003C/li> \u003Cli>3001 (index-gui)\u003C/li> \u003Cli>3000 (index)\u003C/li> \u003Cli>6969 (tracker)\u003C/li> \u003Cli>7070 (tracker)\u003C/li> \u003Cli>1212 (tracker)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1scudva\">You should have access to all exposed services by default.\u003C/p> \u003Cp data-svelte-h=\"svelte-6ax34j\">You should be able to access the services directly (with no proxy) connecting to the containers:\u003C/p> \u003Cul data-svelte-h=\"svelte-16yb0ke\">\u003Cli>Index GUI (webapp): \u003Ca href=\"http://index.torrust-demo.com:3000\" rel=\"nofollow\">http://index.torrust-demo.com:3000\u003C/a>\u003C/li> \u003Cli>Index (API): \u003Ca href=\"http://tracker.torrust-demo.com:3001\" rel=\"nofollow\">http://tracker.torrust-demo.com:3001\u003C/a>\u003C/li> \u003Cli>Tracker (HTTP): \u003Ca href=\"http://tracker.torrust-demo.com:7070/announce\" rel=\"nofollow\">http://tracker.torrust-demo.com:7070/announce\u003C/a>\u003C/li> \u003Cli>Tracker (UDP): udp://tracker.torrust-demo.com:6969\u003C/li> \u003Cli>Tracker (API): \u003Ca href=\"http://tracker.torrust-demo.com:1212\" rel=\"nofollow\">http://tracker.torrust-demo.com:1212\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-ajgwh5\">But you should also be able to connect to all services except the UDP Tracker via the Nginx proxy both with HTTP\nor HTTPs:\u003C/p> \u003Cp data-svelte-h=\"svelte-1p0yt7j\">HTTP access to services via proxy:\u003C/p> \u003Cul data-svelte-h=\"svelte-qcct0u\">\u003Cli>\u003Cp>Index GUI (webapp): \u003Ca href=\"http://index.torrust-demo.com\" rel=\"nofollow\">http://index.torrust-demo.com\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Index (API): \u003Ca href=\"http://index.torrust-demo.com/api\" rel=\"nofollow\">http://index.torrust-demo.com/api\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Tracker (HTTP): \u003Ca href=\"http://tracker.torrust-demo.com/announce\" rel=\"nofollow\">http://tracker.torrust-demo.com/announce\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Tracker (API): \u003Ca href=\"http://tracker.torrust-demo.com/api\" rel=\"nofollow\">http://tracker.torrust-demo.com/api\u003C/a>\u003C/p>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-14y9mds\">HTTPs access to services via proxy:\u003C/p> \u003Cul data-svelte-h=\"svelte-168ip3o\">\u003Cli>\u003Cp>Index GUI (webapp): \u003Ca href=\"https://index.torrust-demo.com\" rel=\"nofollow\">https://index.torrust-demo.com\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Index (API): \u003Ca href=\"https://index.torrust-demo.com/api\" rel=\"nofollow\">https://index.torrust-demo.com/api\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Tracker (HTTP): \u003Ca href=\"https://tracker.torrust-demo.com/announce\" rel=\"nofollow\">https://tracker.torrust-demo.com/announce\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Tracker (API): \u003Ca href=\"https://tracker.torrust-demo.com/api\" rel=\"nofollow\">https://tracker.torrust-demo.com/api\u003C/a>\u003C/p>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-2tutof\">You can disable both, direct access to the container (without using the Nginx proxy) and also access without certificates (HTTP). In that case you only need to expose port: \u003Ccode>443\u003C/code> and \u003Ccode>6969\u003C/code>. In order to do that you will\nneed to enable a firewall on the server or the Digital Ocean firewall.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> Notice: The UDP tracker is not available via the proxy. If you want all requests to go through the\n  proxy you need to change the Nginx configuration to set up a UDP proxy. There is a discussion\n  on the Tracker repository on GitHub about how to setup the proxy for the UDP tracker.\u003C/div> \u003Ch3 id=\"firewall\" data-svelte-h=\"svelte-i8d4dt\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#firewall\">\u003Cspan>#\u003C/span>\u003C/a>Firewall\u003C/h3> \u003Cp data-svelte-h=\"svelte-ogbeo\">By default there is no firewall on the server. If you want to enable the firewall you have two options:\u003C/p> \u003Cul data-svelte-h=\"svelte-yg13nw\">\u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-22-04\" rel=\"nofollow\">Setup your own firewall on the server\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.digitalocean.com/products/networking/firewalls/getting-started/quickstart/\" rel=\"nofollow\">Enable the Digital Ocean firewall\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-kmoeiz\">You can enable the UFW firewall on the server by following the Digital Ocean guide:\u003C/p> \u003Cp data-svelte-h=\"svelte-wepyce\">\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-22-04\" rel=\"nofollow\">How To Set Up a Firewall with UFW on Ubuntu 22.04\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1loho9w\">For example, you can allow only the ports \u003Ccode>22\u003C/code>, \u003Ccode>43\u003C/code> and \u003Ccode>6969\u003C/code> with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> ufw default deny incoming\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw default allow outgoing\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw allow \u003Cspan class=\"token function\">ssh\u003C/span>\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw allow \u003Cspan class=\"token number\">443\u003C/span>\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw allow \u003Cspan class=\"token number\">6969\u003C/span>/udp\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw \u003Cspan class=\"token builtin class-name\">enable\u003C/span>\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw status verbose\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> However, there is a problem with setting up your own firewall. By default, Docker manipulates iptables to set up network isolation. However, this can interfere with UFW. To fix this, you need to tell Docker not to modify iptables.\u003C/div> \u003Ch3 id=\"health-checks\" data-svelte-h=\"svelte-1pfvxou\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#health-checks\">\u003Cspan>#\u003C/span>\u003C/a>Health checks\u003C/h3> \u003Cp data-svelte-h=\"svelte-1yq9drv\">Some services expose public health check endpoints.\u003C/p> \u003Cp data-svelte-h=\"svelte-6kq4xr\">Via proxy (HTTP):\u003C/p> \u003Cul data-svelte-h=\"svelte-1ajx2es\">\u003Cli>Index API: \u003Ca href=\"http://index.torrust-demo.com/api/health_check\" rel=\"nofollow\">http://index.torrust-demo.com/api/health_check\u003C/a>\u003C/li> \u003Cli>Tracker API: \u003Ca href=\"http://tracker.torrust-demo.com/api/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com/api/health_check\u003C/a>\u003C/li> \u003Cli>Tracker HTTP: \u003Ca href=\"http://tracker.torrust-demo.com/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com/health_check\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-xo4ab2\">Via proxy (HTTPs):\u003C/p> \u003Cul data-svelte-h=\"svelte-1ljr93f\">\u003Cli>Index: \u003Ca href=\"https://index.torrust-demo.com/api/health_check\" rel=\"nofollow\">https://index.torrust-demo.com/api/health_check\u003C/a>\u003C/li> \u003Cli>Tracker API: \u003Ca href=\"https://tracker.torrust-demo.com/api/health_check\" rel=\"nofollow\">https://tracker.torrust-demo.com/api/health_check\u003C/a>\u003C/li> \u003Cli>Tracker HTTPs: \u003Ca href=\"https://tracker.torrust-demo.com/health_check\" rel=\"nofollow\">https://tracker.torrust-demo.com/health_check\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1fvfa7z\">Direct access:\u003C/p> \u003Cul data-svelte-h=\"svelte-e687zk\">\u003Cli>Index API: \u003Ca href=\"http://tracker.torrust-demo.com:3001/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com:3001/health_check\u003C/a>\u003C/li> \u003Cli>Tracker API: \u003Ca href=\"http://tracker.torrust-demo.com:1212/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com:1212/health_check\u003C/a>\u003C/li> \u003Cli>Tracker HTTP: \u003Ca href=\"http://tracker.torrust-demo.com:7070/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com:7070/health_check\u003C/a>\u003C/li>\u003C/ul> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> These endpoints are very useful to test if your installation is OK.\u003C/div> \u003Ch2 id=\"troubleshooting\" data-svelte-h=\"svelte-2s3f5p\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#troubleshooting\">\u003Cspan>#\u003C/span>\u003C/a>Troubleshooting\u003C/h2> \u003Cp data-svelte-h=\"svelte-ax5yuc\">You might have problems setting up the application. There are some useful things you should know\nin order to be able to address potential problems.\u003C/p> \u003Cp data-svelte-h=\"svelte-o6x4qt\">First, it might be useful to enable the debug logging for some services. Both the Index and the Tracker\nhave a configuration option \u003Ccode>log_level = &quot;info&quot;\u003C/code>. You can change the logging level to \u003Ccode>debug\u003C/code> or even \u003Ccode>trace\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-51udfm\">Configuration files are located in:\u003C/p> \u003Cul data-svelte-h=\"svelte-1wxrdno\">\u003Cli>\u003Ccode>./storage/index/etc/index.toml\u003C/code>.\u003C/li> \u003Cli>\u003Ccode>./storage/tracker/etc/tracker.toml\u003C/code>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-30yl3m\">If you change the config files you will need to restart the services:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose restart\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1q5ghpo\">You can also check the logs of any service with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose logs proxy\n\u003Cspan class=\"token function\">docker\u003C/span> compose logs certbot\n\u003Cspan class=\"token function\">docker\u003C/span> compose logs index\n\u003Cspan class=\"token function\">docker\u003C/span> compose logs index-gui\n\u003Cspan class=\"token function\">docker\u003C/span> compose logs tracker\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1jdvk2u\">If you change the config files you will need to restart the services.\u003C/p> \u003Cp data-svelte-h=\"svelte-qbolzt\">You can also enable the debug for the Nginx proxy. Edit the file \u003Ccode>./storage/proxy/etc/nginx-conf/nginx.conf\u003C/code> and add \u003Ccode>error_log\u003C/code> to the server configuration:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">nginx\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-nginx\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-nginx\">\u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server\u003C/span>\u003C/span>\n\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> \u003Cspan class=\"token number\">443\u003C/span> ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> [::]:443 ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_name\u003C/span> index.torrust-demo.com\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">error_log\u003C/span> /var/log/nginx/error.log debug\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n    ...\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-pqdj5w\">If your server does not have too much disk space you could run out of disk space.\u003C/p> \u003Cp data-svelte-h=\"svelte-40sbj9\">Docker stores the logs in a separate directory, if you want to truncate the logs you can find them first with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token builtin class-name\">:\u003C/span> \u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token variable\">\u003Cspan class=\"token variable\">$(\u003C/span>\u003Cspan class=\"token function\">docker\u003C/span> inspect \u003Cspan class=\"token parameter variable\">--format\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">'&#123;&#123;.LogPath&#125;&#125;'\u003C/span> tracker\u003Cspan class=\"token variable\">)\u003C/span>\u003C/span>\n-bash: /var/lib/docker/containers/397484cca9572d98524e4f81095bb27f90c349306c39bc517afe5bcb3a6d7f5e/397484cca9572d98524e4f81095bb27f90c349306c39bc517afe5bcb3a6d7f5e-json.log: Permission denied\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1xly7ax\">And then truncate the file with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> truncate \u003Cspan class=\"token parameter variable\">-s\u003C/span> \u003Cspan class=\"token number\">0\u003C/span> /var/lib/docker/containers/397484cca9572d98524e4f81095bb27f90c349306c39bc517afe5bcb3a6d7f5e/397484cca9572d98524e4f81095bb27f90c349306c39bc517afe5bcb3a6d7f5e-json.log\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1c5ztdz\">The docker compose configuration sets a limit on the number of log files and their size.\u003C/p> \u003Cp data-svelte-h=\"svelte-x4ieeu\">Finally, if you need some URL to test the HTTP tracker you can use these ones:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pyl43x\">\u003Cli>Announce request: \u003Ca href=\"https://tracker.torrust-demo.com/announce?info_hash=%44%3C%76%02%B4%FD%E8%3D%11%54%D6%D9%DA%48%80%84%18%B1%81%B6&amp;peer_addr=2.137.87.41&amp;downloaded=0&amp;uploaded=0&amp;peer_id=-qB00000000000000001&amp;port=17548&amp;left=0&amp;event=completed&amp;compact=0\" rel=\"nofollow\">https://tracker.torrust-demo.com/announce?info_hash=%44%3C%76%02%B4%FD%E8%3D%11%54%D6%D9%DA%48%80%84%18%B1%81%B6&amp;peer_addr=2.137.87.41&amp;downloaded=0&amp;uploaded=0&amp;peer_id=-qB00000000000000001&amp;port=17548&amp;left=0&amp;event=completed&amp;compact=0\u003C/a>\u003C/li> \u003Cli>Scrape request: \u003Ca href=\"https://tracker.torrust-demo.com/scrape?info_hash=%44%3C%76%02%B4%FD%E8%3D%11%54%D6%D9%DA%48%80%84%18%B1%81%B6\" rel=\"nofollow\">https://tracker.torrust-demo.com/scrape?info_hash=%44%3C%76%02%B4%FD%E8%3D%11%54%D6%D9%DA%48%80%84%18%B1%81%B6\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-lmmkiu\">The infohash used is \u003Ccode>443C7602B4FDE83D1154D6D9DA48808418B181B6\u003C/code>.\u003C/p> \u003Ch2 id=\"maintenance\" data-svelte-h=\"svelte-mogi0a\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#maintenance\">\u003Cspan>#\u003C/span>\u003C/a>Maintenance\u003C/h2> \u003Ch3 id=\"backups\" data-svelte-h=\"svelte-d0a5l2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#backups\">\u003Cspan>#\u003C/span>\u003C/a>Backups\u003C/h3> \u003Cp data-svelte-h=\"svelte-1te7x1f\">All the data used by the application is in the \u003Ccode>storage\u003C/code> folder.\u003C/p> \u003Cp data-svelte-h=\"svelte-t1o99j\">We are using SQLite so the only thing we need to do is to backup the database files.\u003C/p> \u003Cul data-svelte-h=\"svelte-zxwgiw\">\u003Cli>Index database: \u003Ccode>index/lib/database/sqlite3.db\u003C/code>\u003C/li> \u003Cli>Tracker database: \u003Ccode>tracker/lib/database/sqlite3.db\u003C/code>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-olrpu9\">We enabled backups for the droplet when we created it. Droplet backups are generated\nonce per week. You should setup a better backup policy or use a MySQL service that provides backup.\nAn easy way to increase the number of backups would be to mount a volume and periodically backup the files\nyou want to backup, for example the database files or the configuration files.\u003C/p> \u003Cp data-svelte-h=\"svelte-1nkmtva\">Alternatively, you can use \u003Ca href=\"https://docs.digitalocean.com/developer-center/droplets-and-volumes-backups-with-snapshooter/\" rel=\"nofollow\">SnapShooter to backup droplets and volumes\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-7p1mu4\">How to setup a proper backup policy is out of the scope of this tutorial.\u003C/p> \u003Ch3 id=\"monitoring\" data-svelte-h=\"svelte-17fd9jj\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#monitoring\">\u003Cspan>#\u003C/span>\u003C/a>Monitoring\u003C/h3> \u003Cp data-svelte-h=\"svelte-153j7wi\">It’s important to know the state of your services. Digital Ocean allow you to set:\u003C/p> \u003Cul data-svelte-h=\"svelte-olqmpi\">\u003Cli>Resource alerts\u003C/li> \u003Cli>Uptime checks\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1q6dx3g\">We have set up both.\u003C/p> \u003Cp data-svelte-h=\"svelte-mj1xlf\">With the “resource alerts” you can be notified when the droplet is having trouble with the resources (memory, CPU, disk or bandwidth).\u003C/p> \u003Cimg srcset=\"/images/posts/deploying-torrust-to-production/digital-ocean-monitoring-resource-alerts.png, /images/posts/deploying-torrust-to-production/digital-ocean-monitoring-resource-alerts.png, /images/posts/deploying-torrust-to-production/digital-ocean-monitoring-resource-alerts.png\" src=\"/images/posts/deploying-torrust-to-production/digital-ocean-monitoring-resource-alerts.png\" alt=\"Create\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-1v0fopu\">And “uptime checks” can be used to monitor the state of the services.\u003C/p> \u003Cimg srcset=\"/images/posts/deploying-torrust-to-production/digital-ocean-monitoring-uptime.png, /images/posts/deploying-torrust-to-production/digital-ocean-monitoring-uptime.png, /images/posts/deploying-torrust-to-production/digital-ocean-monitoring-uptime.png\" src=\"/images/posts/deploying-torrust-to-production/digital-ocean-monitoring-uptime.png\" alt=\"Create\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-8z1d4n\">We used the health check endpoints for some services like APIs and the HTTP tracker.\u003C/p> \u003Ch2 id=\"cost\" data-svelte-h=\"svelte-86dcoy\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#cost\">\u003Cspan>#\u003C/span>\u003C/a>Cost\u003C/h2> \u003Cul data-svelte-h=\"svelte-1kybchl\">\u003Cli>Basic droplet (1GB/1CPU, 25GB SSD Disk, 1000GB transfer): \u003Cstrong>$6\u003C/strong> per month.\u003C/li> \u003Cli>Weekly droplet backup: \u003Cstrong>$1.20\u003C/strong> per month.\u003C/li> \u003Cli>Reserved IP: \u003Cstrong>$5.00\u003C/strong> per month.\u003C/li> \u003Cli>Domain: depends on your provider.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1vxchds\">Total cost: \u003Cstrong>$12.2\u003C/strong> per month.\u003C/p> \u003Cp data-svelte-h=\"svelte-1ir26c8\">See \u003Ca href=\"https://www.digitalocean.com/pricing\" rel=\"nofollow\">Digital Ocean pricing\u003C/a> for more information.\u003C/p> \u003Ch2 id=\"other-considerations\" data-svelte-h=\"svelte-12m3v1c\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#other-considerations\">\u003Cspan>#\u003C/span>\u003C/a>Other Considerations\u003C/h2> \u003Ch3 id=\"adding-the-tracker-to-public-lists\" data-svelte-h=\"svelte-1rf8ibq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#adding-the-tracker-to-public-lists\">\u003Cspan>#\u003C/span>\u003C/a>Adding The Tracker To Public Lists\u003C/h3> \u003Cp data-svelte-h=\"svelte-8tcue5\">If you are interested in, you can add your tracker to some tracker lists, for example: \u003Ca href=\"https://newtrackon.com\" rel=\"nofollow\">https://newtrackon.com\u003C/a>.\u003C/p> \u003Ch3 id=\"sending-emails\" data-svelte-h=\"svelte-15ilxqw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#sending-emails\">\u003Cspan>#\u003C/span>\u003C/a>Sending Emails\u003C/h3> \u003Cp data-svelte-h=\"svelte-31tyot\">We have not enabled email verification. If you enable it you will need to configure the SMTP server in the Index configuration:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">toml\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-toml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-toml\">\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token table class-name\">mail\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\n\u003Cspan class=\"token key property\">email_verification_enabled\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token boolean\">false\u003C/span>\n\u003Cspan class=\"token key property\">from\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"example@email.com\"\u003C/span>\n\u003Cspan class=\"token key property\">reply_to\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"noreply@email.com\"\u003C/span>\n\u003Cspan class=\"token key property\">username\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"\"\u003C/span>\n\u003Cspan class=\"token key property\">password\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"\"\u003C/span>\n\u003Cspan class=\"token key property\">server\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"mailcatcher\"\u003C/span>\n\u003Cspan class=\"token key property\">port\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token number\">1025\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"docker-image-tags\" data-svelte-h=\"svelte-d1hppf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#docker-image-tags\">\u003Cspan>#\u003C/span>\u003C/a>Docker Image Tags\u003C/h3> \u003Cp data-svelte-h=\"svelte-mkbqhg\">We have used the \u003Ccode>develop\u003C/code> tag for the Docker images. We will update this guide to use version \u003Ccode>v3.0\u003C/code> once it’s released.\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cul data-svelte-h=\"svelte-15qc73f\">\u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-secure-a-containerized-node-js-application-with-nginx-let-s-encrypt-and-docker-compose\" rel=\"nofollow\">How To Secure a Containerized Node.js Application with Nginx, Let’s Encrypt, and Docker Compose\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-22-04\" rel=\"nofollow\">Initial Server Setup with Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-22-04\" rel=\"nofollow\">How to Set Up SSH Keys on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-22-04\" rel=\"nofollow\">How To Install and Use Docker on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-22-04\" rel=\"nofollow\">How To Install and Use Docker Compose on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-22-04\" rel=\"nofollow\">How To Set Up a Firewall with UFW on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-git-on-ubuntu-22-04\" rel=\"nofollow\">How To Install Git on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-22-04\" rel=\"nofollow\">How To Set Up a Firewall with UFW on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.bittorrent.org/beps/bep_0034.html\" rel=\"nofollow\">BEP 34 DNS Tracker Preferences\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://letsencrypt.org/\" rel=\"nofollow\">https://letsencrypt.org/\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://certbot.eff.org/\" rel=\"nofollow\">https://certbot.eff.org/\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/issues/11\" rel=\"nofollow\">UDP Tracker with Nginx proxy\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://docs.digitalocean.com/products/images/backups/details/features/\" rel=\"nofollow\">Digital Ocean - Backups Features\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.digitalocean.com/developer-center/droplets-and-volumes-backups-with-snapshooter/\" rel=\"nofollow\">Droplets and Volumes Backups with SnapShooter\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/pricing\" rel=\"nofollow\">Digital Ocean pricing\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-gy8emo\">With containerization, having a production ready Index and Tracker with Torrust is very easy. Containerization allows you to install the application in many different hosting providers with no effort.\u003C/p> \u003Cp data-svelte-h=\"svelte-30klad\">It also allows you to keep your production environment up to date, because it’s also possible to easily update the docker images.\u003C/p> \u003Cp data-svelte-h=\"svelte-km643h\">And finally, you can also scale up your production environment as long as the demand increases. For example, just increasing the droplet size.\u003C/p> \u003Cp data-svelte-h=\"svelte-1e29q46\">We hope you find this guide useful. Let us know what you think about it!\u003C/p> \u003Cul data-svelte-h=\"svelte-hqjduw\">\u003Cli>Do you think the process is to complex?\u003C/li> \u003Cli>Do you think the process could be improved or simplified?\u003C/li> \u003Cli>Is there something missing you want to know about?\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-gxsd2p\">If you see something wrong or you want to contribute by:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pxkwtk\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think that could be interesting to have,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-jnq0pp\">If you have any questions or issues please open an issue in the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-316cp7\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Compose: \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">https://github.com/torrust/torrust-compose\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p>\u003C/div>\u003C/div>","21 min read",{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},"How To Setup The Dev Env","how-to-setup-the-development-environment","/images/posts/development-environment.png","2023-07-11T12:29:04.295Z","2024-04-24T12:32:00.783Z","If you want to contribute to the Torrust Index, this article explains how to setup a development environment with the latest versions for all services.",[160,72,73,161,162],"Documentation","Development","Setup"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-1m3njcc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of Contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-997itw\">\u003Cli>\u003Ca href=\"#introduction\">Introduction\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#common-dependencies\">Common Dependencies\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#set-up-the-torrust-tracker\">Set Up the Torrust Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#set-up-the-torrust-index\">Set Up the Torrust Index\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#set-up-the-torrust-index-gui\">Set Up the Torrust Index GUI\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#application-setup\">Application Setup\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#development-tools\">Development tools\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-1xhj6nt\">Before explaining how to setup the development environment, it’s important to understand how the Torrust Index works. The Torrust Index is composed of multiple services, each one with its own codebase and repository. The services are:\u003C/p> \u003Cul data-svelte-h=\"svelte-1iedagn\">\u003Cli>A \u003Ca href=\"https://github.com/torrust/torrust-tracker\" rel=\"nofollow\">BitTorrent Tracker\u003C/a>, which is responsible for tracking the torrents and providing the peers to the clients.\u003C/li> \u003Cli>The \u003Ca href=\"https://github.com/torrust/torrust-index\" rel=\"nofollow\">Index\u003C/a>, which is a REST API that provides the data to the frontend.\u003C/li> \u003Cli>And the \u003Ca href=\"https://github.com/torrust/torrust-index-gui\" rel=\"nofollow\">Index GUI\u003C/a>, which is a webapp that displays the data to the user.\u003C/li>\u003C/ul> \u003Cimg srcset=\"/images/posts/torrust-architecture.png, /images/posts/torrust-architecture.png, /images/posts/torrust-architecture.png\" src=\"/images/posts/torrust-architecture.png\" alt=\"Torrust Architecture\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-2z7kcb\">You do not need to setup all services to contribute to the Torrust Index, but in this article we will explain how to setup the full development environment, which includes all services. Sometimes you might want to contribute with a full feature that involves multiple services, so it’s useful to have the full development environment setup.\u003C/p> \u003Cp data-svelte-h=\"svelte-1aybo28\">Setting up the development environment requires to setup the three main services.\u003C/p> \u003Cp data-svelte-h=\"svelte-776mhr\">First, we need to create the folder (in this example, a temp folder) where we will store the repositories of our services.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token builtin class-name\">cd\u003C/span> /tmp/\n\u003Cspan class=\"token function\">mkdir\u003C/span> \u003Cspan class=\"token parameter variable\">-p\u003C/span> torrust\n\u003Cspan class=\"token builtin class-name\">cd\u003C/span> torrust\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> This guide uses bash commands and it has been tested on Ubuntu Ubuntu 23.04. You should not encounter any problem if you are using a different Linux distribution, but there are some reported issues with Windows compilation for the Tracker. The installation scripts are very simple, so you can easily adapt them to your system or run the commands manually.\u003C/div> \u003Ch2 id=\"common-dependencies\" data-svelte-h=\"svelte-11zbw7j\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#common-dependencies\">\u003Cspan>#\u003C/span>\u003C/a>Common Dependencies\u003C/h2> \u003Cp data-svelte-h=\"svelte-1xycqr4\">If you are using SQLite3 as database driver for the Tracker or the Backend, you will need to install the following dependency:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt-get\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> libsqlite3-dev\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"set-up-the-torrust-tracker\" data-svelte-h=\"svelte-hbvu\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#set-up-the-torrust-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Set Up the Torrust Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-emwzfb\">This tutorial is tested with this Rust version:\u003C/p> \u003Cul data-svelte-h=\"svelte-1xkqa0c\">\u003Cli>rustc 1.80.0-nightly (9cdfe285c 2024-05-22)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-vla8v0\">Since we are using the openssl crate with the \u003Ca href=\"https://docs.rs/openssl/latest/openssl/#vendored\" rel=\"nofollow\">vendored\u003C/a> feature, enabled, you will need to install the following dependencies:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt-get\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> pkg-config libssl-dev \u003Cspan class=\"token function\">make\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1m5k4cs\">Now, we will build the tracker and create the storage folders where persistent data like databases will be stored:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">git clone https://github.com/torrust/torrust-tracker.git \\\n  &amp;&amp; cd torrust-tracker \\\n  &amp;&amp; cargo build \\\n  &amp;&amp; mkdir -p ./storage/tracker/lib/database \\\n  &amp;&amp; mkdir -p ./storage/tracker/lib/tls \\\n  &amp;&amp; mkdir -p ./storage/tracker/etc\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-10bhhza\">You can run the Tracker with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">cargo\u003C/span> run\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> NOTICE: You do not need to change the default values for development.\u003C/div> \u003Cp data-svelte-h=\"svelte-pmsag2\">After running the Tracker with \u003Ccode>cargo run\u003C/code> you should see the following output:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">Finished &#96;dev&#96; profile [optimized + debuginfo] target(s) in 0.09s\n     Running &#96;target/debug/torrust-tracker&#96;\nLoading configuration from default configuration file: &#96;./share/default/config/tracker.development.sqlite3.toml&#96; ...\n2024-05-27T11:39:21.332802857+01:00 [torrust_tracker::bootstrap::logging][INFO] logging initialized.\n2024-05-27T11:39:21.333426924+01:00 [UDP TRACKER][INFO] Starting on: udp://0.0.0.0:6969\n2024-05-27T11:39:21.333462384+01:00 [torrust_tracker::bootstrap::jobs][INFO] TLS not enabled\n2024-05-27T11:39:21.333491694+01:00 [HTTP TRACKER][INFO] Starting on: http://0.0.0.0:7070\n2024-05-27T11:39:21.333599174+01:00 [HTTP TRACKER][INFO] Started on: http://0.0.0.0:7070\n2024-05-27T11:39:21.333615604+01:00 [torrust_tracker::bootstrap::jobs][INFO] TLS not enabled\n2024-05-27T11:39:21.333814923+01:00 [API][INFO] Starting on http://127.0.0.1:1212\n2024-05-27T11:39:21.333839143+01:00 [API][INFO] Started on http://127.0.0.1:1212\n2024-05-27T11:39:21.333883712+01:00 [HEALTH CHECK API][INFO] Starting on: http://127.0.0.1:1313\n2024-05-27T11:39:21.333948472+01:00 [HEALTH CHECK API][INFO] Started on: http://127.0.0.1:1313\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> IMPORTANT: Every time you change the configuration you need to restart the service.\u003C/div> \u003Cp data-svelte-h=\"svelte-1bukm64\">By default, if you don’t specify any \u003Ccode>Config.toml\u003C/code> file, the application will use this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">Loading default configuration file: &#96;./share/default/config/tracker.development.sqlite3.toml&#96; ...\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-biz5qm\">You can’t change that file because it’s a template included in the repo. If you want to set your custom configuration, you can either:\u003C/p> \u003Col data-svelte-h=\"svelte-kbkmy\">\u003Cli>Use a different path for the config file.\u003C/li> \u003Cli>Inject the configuration with an environment variable.\u003C/li>\u003C/ol> \u003Ch2 id=\"custom-config-file\" data-svelte-h=\"svelte-1fqdo4k\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#custom-config-file\">\u003Cspan>#\u003C/span>\u003C/a>Custom config file\u003C/h2> \u003Cp data-svelte-h=\"svelte-vn595v\">First, copy the template file to the storage folder:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">cp\u003C/span> share/default/config/tracker.development.sqlite3.toml storage/tracker/etc/tracker.toml\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1wv0trn\">Then, you can change any value and finally run the tracker with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token assign-left variable\">TORRUST_TRACKER_CONFIG_TOML_PATH\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"./storage/tracker/etc/tracker.toml\"\u003C/span> \u003Cspan class=\"token function\">cargo\u003C/span> run\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1vsfe6t\">That would give you this output:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">TORRUST_TRACKER_CONFIG_TOML_PATH=&quot;./storage/tracker/etc/tracker.toml&quot; cargo run\n    Finished &#96;dev&#96; profile [optimized + debuginfo] target(s) in 0.09s\n     Running &#96;target/debug/torrust-tracker&#96;\nLoading configuration from file: &#96;./storage/tracker/etc/tracker.toml&#96; ...\n2024-05-27T12:52:00.364641064+01:00 [torrust_tracker::bootstrap::logging][INFO] logging initialized.\n2024-05-27T12:52:00.365277963+01:00 [UDP TRACKER][INFO] Starting on: udp://0.0.0.0:6969\n2024-05-27T12:52:00.365309093+01:00 [torrust_tracker::bootstrap::jobs][INFO] TLS not enabled\n2024-05-27T12:52:00.365355473+01:00 [HTTP TRACKER][INFO] Starting on: http://0.0.0.0:7070\n2024-05-27T12:52:00.365496743+01:00 [HTTP TRACKER][INFO] Started on: http://0.0.0.0:7070\n2024-05-27T12:52:00.365504943+01:00 [torrust_tracker::bootstrap::jobs][INFO] TLS not enabled\n2024-05-27T12:52:00.365596502+01:00 [API][INFO] Starting on http://127.0.0.1:1212\n2024-05-27T12:52:00.365599702+01:00 [API][INFO] Started on http://127.0.0.1:1212\n2024-05-27T12:52:00.365616862+01:00 [HEALTH CHECK API][INFO] Starting on: http://127.0.0.1:1313\n2024-05-27T12:52:00.365711472+01:00 [HEALTH CHECK API][INFO] Started on: http://127.0.0.1:1313\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"inject-the-configuration-with-an-environment-variable\" data-svelte-h=\"svelte-r84afx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#inject-the-configuration-with-an-environment-variable\">\u003Cspan>#\u003C/span>\u003C/a>Inject the configuration with an environment variable\u003C/h2> \u003Cp data-svelte-h=\"svelte-f9h3g2\">You can also inject the configuration with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token assign-left variable\">TORRUST_TRACKER_CONFIG_TOML\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token variable\">\u003Cspan class=\"token variable\">&#96;\u003C/span>\u003Cspan class=\"token function\">cat\u003C/span> share/default/config/tracker.development.sqlite3.toml\u003Cspan class=\"token variable\">&#96;\u003C/span>\u003C/span> \u003Cspan class=\"token function\">cargo\u003C/span> run\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> NOTICE: We load the whole file into the env var. This is not useful for development, but it&#39;s a different way to inject the configuration. It&#39;s used when running the tracker with docker.\u003C/div> \u003Cp data-svelte-h=\"svelte-jferun\">The response should be like this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"torrents\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"seeders\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"completed\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"leechers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp4_connections_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp4_announces_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp4_scrapes_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp6_connections_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp6_announces_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp6_scrapes_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp4_connections_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp4_announces_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp4_scrapes_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp6_connections_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp6_announces_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp6_scrapes_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1pa1388\">For more details about the Torrust Tracker, check the \u003Ca href=\"https://docs.rs/torrust-tracker/\" rel=\"nofollow\">Tracker documentation\u003C/a>.\u003C/p> \u003Ch2 id=\"set-up-the-torrust-index\" data-svelte-h=\"svelte-ezkl0q\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#set-up-the-torrust-index\">\u003Cspan>#\u003C/span>\u003C/a>Set Up the Torrust Index\u003C/h2> \u003Cp data-svelte-h=\"svelte-wv36gp\">This tutorial has been tested with this Rust version:\u003C/p> \u003Cul data-svelte-h=\"svelte-1xkqa0c\">\u003Cli>rustc 1.80.0-nightly (9cdfe285c 2024-05-22)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-koifhr\">To run the tests you will also need to install a command line tool to handle torrent files called \u003Ca href=\"https://github.com/casey/intermodal\" rel=\"nofollow\">imdl\u003C/a>. You can install it with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">cargo\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> imdl\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1cwintg\">You will also need to install a tool for database migrations if you are going to make changes to the database schema. We are using \u003Ca href=\"https://github.com/launchbadge/sqlx\" rel=\"nofollow\">SQLx\u003C/a>. You can install it with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">cargo\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> sqlx-cli\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-qyfhk7\">We will now clone the \u003Ccode>torrust-index\u003C/code> repository:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">  git clone https://github.com/torrust/torrust-index.git \\\n  &amp;&amp; cd torrust-index \\\n  &amp;&amp; cargo build \\\n  &amp;&amp; mkdir -p ./storage/index/lib/database \\\n  &amp;&amp; mkdir -p ./storage/index/lib/tls\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-jh7nwo\">You can run the Torrust Index with the following commands:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token assign-left variable\">TORRUST_INDEX_API_CORS_PERMISSIVE\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>true \u003Cspan class=\"token function\">cargo\u003C/span> run\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-coqvj0\">As you can see we are using the environment variable \u003Ccode>TORRUST_IDX_BACK_CORS_PERMISSIVE\u003C/code> to enable a permissive CORS policy. The default port for the Backend is \u003Ccode>3001\u003C/code> and for the web server serving the frontend application is \u003Ccode>3000\u003C/code>. Since they are different ports, we need to tell the backend to allow requests from a different port so that the frontend can make request to the API. To know more about CORS, check the \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\" rel=\"nofollow\">Mozilla CORS documentation\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-vvxm0\">After running the Index with \u003Ccode>TORRUST_INDEX_API_CORS_PERMISSIVE=true cargo run\u003C/code> you should see the following output:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">Loading configuration from default configuration file: &#96;./share/default/config/index.development.sqlite3.toml&#96; ...\n2024-05-27T12:56:25.300980998+01:00 [torrust_index::bootstrap::logging][INFO] logging initialized.\n2024-05-27T12:56:25.425949219+01:00 [torrust_index::web::api::server][INFO] TLS not enabled\n2024-05-27T12:56:25.425976429+01:00 [torrust_index::console::cronjobs::tracker_statistics_importer][INFO] Tracker statistics importer launcher started\n2024-05-27T12:56:25.426077258+01:00 [torrust_index::console::cronjobs::tracker_statistics_importer][INFO] Tracker statistics importer cronjob starting ...\n2024-05-27T12:56:25.426233288+01:00 [torrust_index::web::api::server][INFO] Starting API server with net config: 0.0.0.0:3001 ...\n2024-05-27T12:56:25.426290848+01:00 [torrust_index::console::cronjobs::tracker_statistics_importer][INFO] Tracker statistics importer API server listening on http://127.0.0.1:3002\n2024-05-27T12:56:25.426250898+01:00 [torrust_index::console::cronjobs::tracker_statistics_importer][INFO] Running tracker statistics importer every 2000 milliseconds ...\n2024-05-27T12:56:25.427603675+01:00 [torrust_index::web::api::server][INFO] API server listening on http://0.0.0.0:3001\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1gkdnwv\">You should be able to load the API entrypoint on \u003Ca href=\"http://0.0.0.0:3001/\" rel=\"nofollow\">http://0.0.0.0:3001/\u003C/a>\u003C/p> \u003Cimg srcset=\"/images/posts/torrust-backend-api-entrypoint-response-screenshot.png, /images/posts/torrust-backend-api-entrypoint-response-screenshot.png, /images/posts/torrust-backend-api-entrypoint-response-screenshot.png\" src=\"/images/posts/torrust-backend-api-entrypoint-response-screenshot.png\" alt=\"Screenshot of Torrust Backend API entrypoint response\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-1p9zi40\">For more details about the Torrust Index Backend, check the \u003Ca href=\"https://docs.rs/torrust-index/\" rel=\"nofollow\">Index Backend documentation\u003C/a>.\u003C/p> \u003Ch2 id=\"set-up-the-torrust-index-gui\" data-svelte-h=\"svelte-g4vxgr\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#set-up-the-torrust-index-gui\">\u003Cspan>#\u003C/span>\u003C/a>Set Up the Torrust Index GUI\u003C/h2> \u003Cp data-svelte-h=\"svelte-lnsdwq\">At the time of writing, the Index GUI requires:\u003C/p> \u003Cul data-svelte-h=\"svelte-1xzovqr\">\u003Cli>Node: \u003Ccode>^v20.12.2\u003C/code>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-brkedy\">The frontend is a \u003Ca href=\"https://nuxt.com/\" rel=\"nofollow\">Nuxt\u003C/a> application.\u003C/p> \u003Cp data-svelte-h=\"svelte-1ddgx9w\">The last repository we need to clone is the \u003Ccode>torrust-index-gui\u003C/code> repository . Remember to install Node.js and we need to be in the torrust folder to clone the repository.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">git clone https://github.com/torrust/torrust-index-gui.git \\\n  &amp;&amp; cd torrust-index-gui \\\n  &amp;&amp; npm install \\\n  &amp;&amp; cp .env.local .env \\\n  &amp;&amp; npm run dev\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-ln4r1w\">You should see the following output:\u003C/p> \u003Cimg srcset=\"/images/posts/how-to-setup-the-development-environment/npm-run-dev-output.png, /images/posts/how-to-setup-the-development-environment/npm-run-dev-output.png, /images/posts/how-to-setup-the-development-environment/npm-run-dev-output.png\" src=\"/images/posts/how-to-setup-the-development-environment/npm-run-dev-output.png\" alt=\"Screenshot of Torrust Index GUI running from the terminal\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-hzic0x\">Go to \u003Ca href=\"http://localhost:3000/torrents\" rel=\"nofollow\">http://localhost:3000/torrents\u003C/a> and you should see the torrent list page page:\u003C/p> \u003Cimg srcset=\"/images/posts/how-to-setup-the-development-environment/index-gui-after-fresh-install.png, /images/posts/how-to-setup-the-development-environment/index-gui-after-fresh-install.png, /images/posts/how-to-setup-the-development-environment/index-gui-after-fresh-install.png\" src=\"/images/posts/how-to-setup-the-development-environment/index-gui-after-fresh-install.png\" alt=\"Screenshot of torrent list page on the browser\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-jvt5ml\">For more details about the Torrust Index GUI, check the \u003Ca href=\"https://github.com/torrust/torrust-index-gui\" rel=\"nofollow\">Index GUI documentation\u003C/a>.\u003C/p> \u003Ch2 id=\"application-setup\" data-svelte-h=\"svelte-1wcjsvs\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#application-setup\">\u003Cspan>#\u003C/span>\u003C/a>Application Setup\u003C/h2> \u003Cp data-svelte-h=\"svelte-540nc4\">There are some public pages like the torrent list or torrent details pages. But there are some pages that require authentication like the admin pages or the pages for uploading or editing torrents.\u003C/p> \u003Cp data-svelte-h=\"svelte-hho5az\">To access those pages you need to create an account. You can do it from the signup page:\u003C/p> \u003Cp data-svelte-h=\"svelte-cpmctb\">\u003Ca href=\"http://localhost:3000/signup\" rel=\"nofollow\">http://localhost:3000/signup\u003C/a>\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> The first user created will be the \u003Ccode data-svelte-h=\"svelte-ik7s6n\">admin\u003C/code> user.\u003C/div> \u003Ch2 id=\"development-tools\" data-svelte-h=\"svelte-1dtp2xb\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#development-tools\">\u003Cspan>#\u003C/span>\u003C/a>Development tools\u003C/h2> \u003Cp data-svelte-h=\"svelte-vse8x8\">We found some tools very useful to develop the Torrust Tracker and Index. We hope you find them useful too.\u003C/p> \u003Cul data-svelte-h=\"svelte-xyysxk\">\u003Cli>DB Browser for SQLite: \u003Ca href=\"https://sqlitebrowser.org/\" rel=\"nofollow\">https://sqlitebrowser.org/\u003C/a>\u003C/li> \u003Cli>BitTorrent client: qBittorrent \u003Ca href=\"https://www.qbittorrent.org/\" rel=\"nofollow\">https://www.qbittorrent.org/\u003C/a>\u003C/li> \u003Cli>Torrent file editor: imdl \u003Ca href=\"https://github.com/casey/intermodal\" rel=\"nofollow\">https://github.com/casey/intermodal\u003C/a>\u003C/li> \u003Cli>DaisyUI component library: \u003Ca href=\"https://daisyui.com/components/\" rel=\"nofollow\">https://daisyui.com/components/\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1czzs8f\">As you can see, the Torrust Tracker and Index are very easy to set up. We hope you find this guide useful. You might have problems:\u003C/p> \u003Cul data-svelte-h=\"svelte-1o01036\">\u003Cli>Setting up some of the projects on Windows. \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues/325\" rel=\"nofollow\">We are working on it\u003C/a>.\u003C/li> \u003Cli>Or with some missing system dependencies.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1e9qm2v\">If you have any questions or issues please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-4xje26\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index GUI: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>","7 min read",{"title":129,"slug":130,"coverImage":131,"date":132,"updated":6,"excerpt":133,"contributor":24,"contributorSlug":25,"tags":166,"hidden":12,"html":167,"readingTime":168,"relatedPosts":169},[72,135,136,137]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction-to-unit3d\" data-svelte-h=\"svelte-1megvfz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction-to-unit3d\">\u003Cspan>#\u003C/span>\u003C/a>Introduction to UNIT3D\u003C/h2> \u003Cp data-svelte-h=\"svelte-1r1se51\">This blog post serves as an introduction to our review series at Torrust, where we’ll continue to explore and evaluate other projects within the BitTorrent ecosystem.\u003C/p> \u003Cp data-svelte-h=\"svelte-o6j4j8\">UNIT3D is a private torrent tracker software, crafted meticulously in \u003Ca href=\"https://www.php.net/\" rel=\"nofollow\">PHP\u003C/a> using the \u003Ca href=\"https://laravel.com/\" rel=\"nofollow\">Laravel\u003C/a> framework. Whether you’re a developer looking to deploy a robust BitTorrent index or an enthusiast exploring the depths of the BitTorrent ecosystem, this guide will walk you through UNIT3D’s features and provide a detailed, step-by-step setup tutorial.\u003C/p> \u003Cp data-svelte-h=\"svelte-167hh4r\">UNIT3D was created from scratch. The first commit was on December 2017.\u003C/p> \u003Cul data-svelte-h=\"svelte-1b7xkeb\">\u003Cli>\u003Cstrong>Repo:\u003C/strong> \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition\" rel=\"nofollow\">https://github.com/HDInnovations/UNIT3D-Community-Edition\u003C/a>\u003C/li> \u003Cli>\u003Cstrong>Contributors:\u003C/strong> \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/graphs/contributors\" rel=\"nofollow\">116\u003C/a>\u003C/li> \u003Cli>\u003Cstrong>Starts:\u003C/strong> 1.9k.\u003C/li> \u003Cli>\u003Cstrong>Production Stats\u003C/strong>:\u003Cul>\u003Cli>Installations: 26\u003C/li> \u003Cli>Users: 235,041\u003C/li> \u003Cli>Torrents: 1,570,340\u003C/li> \u003Cli>Peers: 5,881,717\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Cstrong>Official Demo Site:\u003C/strong> \u003Ca href=\"https://unit3d.dev/\" rel=\"nofollow\">https://unit3d.dev/\u003C/a> (currently not working).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-x4yzfh\">Stats from \u003Ca href=\"https://hdvinnie.github.io/Private-Trackers-Spreadsheet/\" rel=\"nofollow\">Private-Trackers-Spreadsheet\u003C/a>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-gbf7ow\">To write this post we have setup a new demo site on: \u003Ca href=\"https://www.unit3d-demo.com/\" rel=\"nofollow\">https://www.unit3d-demo.com/\u003C/a>. Following the tutorial section you can also easily deploy your UNIT3D Index. The demo site could be shutdown at any time.\u003C/p>\u003C/div> \u003Ch3 id=\"overview\" data-svelte-h=\"svelte-cnawga\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#overview\">\u003Cspan>#\u003C/span>\u003C/a>Overview\u003C/h3> \u003Cp data-svelte-h=\"svelte-ozk3hp\">It’s not our intention to list and evaluate all the features because that would be a really hard task. However we want to give you an idea about how many features this software includes:\u003C/p> \u003Ch3 id=\"key-features\" data-svelte-h=\"svelte-1lkc5br\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#key-features\">\u003Cspan>#\u003C/span>\u003C/a>Key features\u003C/h3> \u003Ch4 id=\"torrents\" data-svelte-h=\"svelte-2sh6eo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#torrents\">\u003Cspan>#\u003C/span>\u003C/a>Torrents\u003C/h4> \u003Cul data-svelte-h=\"svelte-1rjippc\">\u003Cli>Index, Search, Upload\u003C/li> \u003Cli>Requests\u003C/li> \u003Cli>RSS\u003C/li>\u003C/ul> \u003Ch4 id=\"community\" data-svelte-h=\"svelte-1l6xbcw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#community\">\u003Cspan>#\u003C/span>\u003C/a>Community\u003C/h4> \u003Cul data-svelte-h=\"svelte-bpoh5e\">\u003Cli>Forums\u003C/li> \u003Cli>Chatrooms with chatbot\u003C/li> \u003Cli>Playlists\u003C/li> \u003Cli>Polls\u003C/li> \u003Cli>News\u003C/li> \u003Cli>Bonus Points\u003C/li> \u003Cli>User profiles\u003C/li> \u003Cli>Achievements\u003C/li>\u003C/ul> \u003Ch4 id=\"support\" data-svelte-h=\"svelte-1o7u1oa\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#support\">\u003Cspan>#\u003C/span>\u003C/a>Support\u003C/h4> \u003Cul data-svelte-h=\"svelte-s60zfu\">\u003Cli>Custom pages: rules, FAQ, Wikis\u003C/li> \u003Cli>Helpdesk\u003C/li> \u003Cli>Staff\u003C/li>\u003C/ul> \u003Ch4 id=\"platform-management\" data-svelte-h=\"svelte-1yqepmv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#platform-management\">\u003Cspan>#\u003C/span>\u003C/a>Platform Management\u003C/h4> \u003Cul data-svelte-h=\"svelte-12x0nbi\">\u003Cli>Logs\u003C/li> \u003Cli>Access Restrictions\u003Cul>\u003Cli>Client Blacklist\u003C/li> \u003Cli>Whitelisted Image URLs\u003C/li> \u003Cli>Blocked IPs\u003C/li>\u003C/ul>\u003C/li> \u003Cli>Torrents\u003Cul>\u003Cli>Moderation\u003C/li> \u003Cli>Classification: categories, resolutions, regions, distributions\u003C/li>\u003C/ul>\u003C/li> \u003Cli>Peers\u003C/li> \u003Cli>Users\u003Cul>\u003Cli>Search\u003C/li> \u003Cli>Applications, Invitations\u003C/li> \u003Cli>Keys: API, passkeys, RSS keys, 2FA, …\u003C/li> \u003Cli>Groups (roles)\u003C/li> \u003Cli>Notifications (alerts)\u003C/li> \u003Cli>Messages\u003C/li>\u003C/ul>\u003C/li>\u003C/ul> \u003Ch4 id=\"integrations\" data-svelte-h=\"svelte-c4dffs\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#integrations\">\u003Cspan>#\u003C/span>\u003C/a>Integrations\u003C/h4> \u003Cul data-svelte-h=\"svelte-1fymr3y\">\u003Cli>Torrent API: \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/wiki/Torrent-API-(UNIT3D-v8.x.x)\" rel=\"nofollow\">https://github.com/HDInnovations/UNIT3D-Community-Edition/wiki/Torrent-API-(UNIT3D-v8.x.x)\u003C/a>\u003C/li> \u003Cli>Other metadata API like \u003Ca href=\"https://www.themoviedb.org/\" rel=\"nofollow\">https://www.themoviedb.org/\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"unit3d-review\" data-svelte-h=\"svelte-gnutj4\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#unit3d-review\">\u003Cspan>#\u003C/span>\u003C/a>UNIT3D Review\u003C/h2> \u003Ch3 id=\"code-quality-and-structure\" data-svelte-h=\"svelte-u6d479\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#code-quality-and-structure\">\u003Cspan>#\u003C/span>\u003C/a>Code Quality and Structure\u003C/h3> \u003Cp data-svelte-h=\"svelte-f7l6zy\">UNIT3D boasts a well-organized codebase, adhering to modern PHP development standards. The use of Laravel as the underlying framework ensures a modular structure, making it easier for developers to extend and customize the platform. Code readability is generally high, with well-commented sections that clarify complex logic.\u003C/p> \u003Ch3 id=\"documentation-and-user-guides\" data-svelte-h=\"svelte-l6xr16\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#documentation-and-user-guides\">\u003Cspan>#\u003C/span>\u003C/a>Documentation and User Guides\u003C/h3> \u003Cp data-svelte-h=\"svelte-mrzit0\">The \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/wiki\" rel=\"nofollow\">documentation\u003C/a> for UNIT3D system dependencies is comprehensive, covering local development and basic server management. However, there is room for improvement in terms of end user guides, tutorials, examples, installation for production and troubleshooting guides.\u003C/p> \u003Ch3 id=\"community-support-and-activity\" data-svelte-h=\"svelte-17pa4sd\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#community-support-and-activity\">\u003Cspan>#\u003C/span>\u003C/a>Community Support and Activity\u003C/h3> \u003Cp data-svelte-h=\"svelte-2q3ir0\">UNIT3D has an active and growing community. The project’s GitHub repository shows regular commits, indicating ongoing development. There are also Discord channels for sponsors where they and developers discuss issues, share tips, and contribute to the project’s roadmap. You can also support UNIT3D development via \u003Ca href=\"https://polar.sh/HDInnovations\" rel=\"nofollow\">https://polar.sh/HDInnovations\u003C/a>.\u003C/p> \u003Ch3 id=\"contribution-guidelines-and-license\" data-svelte-h=\"svelte-50kvt6\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#contribution-guidelines-and-license\">\u003Cspan>#\u003C/span>\u003C/a>Contribution Guidelines and License\u003C/h3> \u003Cp data-svelte-h=\"svelte-1hqvwwq\">UNIT3D is licensed under the AGPL-3.0 license license. The \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/blob/master/CONTRIBUTING.md\" rel=\"nofollow\">contribution guidelines\u003C/a> are well-documented, with clear instructions on how to fork the repository, submit pull requests, and report issues.\u003C/p> \u003Ch3 id=\"installation-process-overview\" data-svelte-h=\"svelte-zt6ocl\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#installation-process-overview\">\u003Cspan>#\u003C/span>\u003C/a>Installation Process Overview\u003C/h3> \u003Cp data-svelte-h=\"svelte-1rpop1i\">UNIT3D offers an \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Installer\" rel=\"nofollow\">installer\u003C/a>. At the time of this writing it supports:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t5v1st\">\u003Cli>Ubuntu 22.04 LTS (Jammy Jellyfish).\u003C/li> \u003Cli>Ubuntu 20.04 LTS (Focal Fossa)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-hdegu3\">We followed the instructions and the process was easy and fast. We will describe the process in detail in the installation tutorial. Hopefully, that will make the process even easier for other users.\u003C/p> \u003Ch2 id=\"tutorial-setting-up-unit3d-on-a-digital-ocean-droplet\" data-svelte-h=\"svelte-1lm4unn\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#tutorial-setting-up-unit3d-on-a-digital-ocean-droplet\">\u003Cspan>#\u003C/span>\u003C/a>Tutorial: Setting Up UNIT3D on a Digital Ocean Droplet\u003C/h2> \u003Cp data-svelte-h=\"svelte-10o3ga8\">To install the software we have followed the steps described in the official installer:\u003C/p> \u003Cp data-svelte-h=\"svelte-1jofot3\">\u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Installer\" rel=\"nofollow\">https://github.com/HDInnovations/UNIT3D-Installer\u003C/a>.\u003C/p> \u003Ch3 id=\"requirements\" data-svelte-h=\"svelte-1igrg2h\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#requirements\">\u003Cspan>#\u003C/span>\u003C/a>Requirements\u003C/h3> \u003Cp data-svelte-h=\"svelte-2b7r4d\">Although you can just execute the installer directly you will need to create some services during the installation. We would recommend to fulfill all the requirements before executing the installer, that would make the process faster and you can avoid some mistakes we made.\u003C/p> \u003Cp data-svelte-h=\"svelte-1ig73ca\">Let’s review what you will need:\u003C/p> \u003Cul data-svelte-h=\"svelte-1ogoxxg\">\u003Cli>Server (virtual machine)\u003C/li> \u003Cli>External Services\u003C/li> \u003Cli>System requirements (software installed on the server)\u003C/li>\u003C/ul> \u003Ch4 id=\"hardware-requirements-server\" data-svelte-h=\"svelte-pgiu57\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hardware-requirements-server\">\u003Cspan>#\u003C/span>\u003C/a>Hardware Requirements (server)\u003C/h4> \u003Cp data-svelte-h=\"svelte-am23js\">We opted for using a Digital Ocean droplet just because we are used to their interface and it’s straightforward. Feel free to use your favorite provider.\u003C/p> \u003Cp data-svelte-h=\"svelte-14q3zex\">In our first attempt we used the minimum size image. However it was too small. The server had problems building the frontend and that’s one of the last steps in the installation. Finally we used a VM (Digital Ocean call them droplets) with these characteristics:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r9cm0c\">\u003Cli>Image: \u003Cstrong>Ubuntu 22.04 (LTS) x64\u003C/strong>\u003C/li> \u003Cli>Size: \u003Cstrong>1 vCPU; 2GB / 50GB Disk; ($12/month)\u003C/strong>\u003C/li>\u003C/ul> \u003Ch4 id=\"external-services\" data-svelte-h=\"svelte-1fspz0e\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#external-services\">\u003Cspan>#\u003C/span>\u003C/a>External Services\u003C/h4> \u003Cul data-svelte-h=\"svelte-qgx1j3\">\u003Cli>Domain: We registered a new one only for this purpose: \u003Ca href=\"https://unit3d-demo.com/\" rel=\"nofollow\">https://unit3d-demo.com/\u003C/a>.\u003C/li> \u003Cli>DNS: Since We are using Digital Ocean, we only needed to assign the the Digital Ocean’s name servers to the domain.\u003C/li> \u003Cli>Email delivery service: We just picked up one from the list of supported services by UNIT3D. We selected \u003Ca href=\"https://postmarkapp.com/\" rel=\"nofollow\">https://postmarkapp.com/\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-12cga0t\">How to register the domain, setup the DNS and the email service is out of the scope of this article. Anyway it depends on your providers.\u003C/p> \u003Ch4 id=\"system-requirements\" data-svelte-h=\"svelte-3171kw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#system-requirements\">\u003Cspan>#\u003C/span>\u003C/a>System Requirements\u003C/h4> \u003Cp data-svelte-h=\"svelte-19w1vh9\">The installer installs all the system dependencies that you need, like MySQL, Redis, etcetera. You only need a fresh Ubuntu server using one of these versions:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t5v1st\">\u003Cli>Ubuntu 22.04 LTS (Jammy Jellyfish).\u003C/li> \u003Cli>Ubuntu 20.04 LTS (Focal Fossa)\u003C/li>\u003C/ul> \u003Ch4 id=\"information-needed\" data-svelte-h=\"svelte-1f8m14g\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#information-needed\">\u003Cspan>#\u003C/span>\u003C/a>Information needed\u003C/h4> \u003Cp data-svelte-h=\"svelte-42kb83\">During the installation process you will need to respond to some questions. The following are the main values you will have to provide:\u003C/p> \u003Cp data-svelte-h=\"svelte-d4ztcc\">Droplet:\u003C/p> \u003Cul data-svelte-h=\"svelte-ngkobo\">\u003Cli>Root password.\u003C/li> \u003Cli>Hostname: \u003Ccode>unit3d-demo\u003C/code>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-isjbbc\">Postmark (sign up):\u003C/p> \u003Cul data-svelte-h=\"svelte-ff4q3w\">\u003Cli>Username.\u003C/li> \u003Cli>Email.\u003C/li> \u003Cli>Password.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-mczh9l\">UNIT3D Platform Owner:\u003C/p> \u003Cul data-svelte-h=\"svelte-187yq1r\">\u003Cli>Username: We used \u003Ccode>unit3d-owner\u003C/code>.\u003C/li> \u003Cli>Email.\u003C/li> \u003Cli>Password.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-ep22g\">MySQL:\u003C/p> \u003Cul data-svelte-h=\"svelte-4e0vgm\">\u003Cli>Root password.\u003C/li> \u003Cli>UNIT3D user: username (\u003Ccode>unit3d\u003C/code>) and password.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1m0izm8\">SMTP Configuration:\u003C/p> \u003Cul data-svelte-h=\"svelte-19nz10z\">\u003Cli>Driver: smtp.\u003C/li> \u003Cli>Server: \u003Ccode>smtp.postmarkapp.com\u003C/code>.\u003C/li> \u003Cli>Port: \u003Ccode>587\u003C/code>.\u003C/li> \u003Cli>Username: A token provided by postmarkapp.\u003C/li> \u003Cli>Password: Same as username.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1g443ni\">TMDB (\u003Ca href=\"https://www.themoviedb.org/\" rel=\"nofollow\">themoviedb.org\u003C/a>, a service to get metadata about movies):\u003C/p> \u003Cul data-svelte-h=\"svelte-1mat26a\">\u003Cli>API key.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-voi7bs\">Used Versions:\u003C/p> \u003Cul data-svelte-h=\"svelte-m2eret\">\u003Cli>OS: Ubuntu 22.04 LTS (Jammy Jellyfish)\u003C/li> \u003Cli>PHP: 8.3.10\u003C/li> \u003Cli>Database: 8.0.39-0ubuntu0.22.04.1\u003C/li> \u003Cli>Laravel: 11.5.0\u003C/li> \u003Cli>UNIT3D Community Edition: v8.1.3\u003C/li> \u003Cli>Installation dir: \u003Ccode>/var/www/html\u003C/code>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1kmvvj\">Let’s install the software step by step.\u003C/p> \u003Ch3 id=\"step-1-create-the-droplet-in-digital-ocean\" data-svelte-h=\"svelte-1ww2fuo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#step-1-create-the-droplet-in-digital-ocean\">\u003Cspan>#\u003C/span>\u003C/a>Step 1. Create the Droplet in Digital Ocean\u003C/h3> \u003Cp data-svelte-h=\"svelte-1558emt\">We decided to create a new project so we can assign resources to this project:\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/01-new-project-in-do.png, /images/posts/review-and-setup-guide-for-unit3d/01-new-project-in-do.png, /images/posts/review-and-setup-guide-for-unit3d/01-new-project-in-do.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/01-new-project-in-do.png\" alt=\"Create a new project in Digital Ocean\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-d46xoo\">And this is the droplet configuration.\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/02-create-droplet-12-dollars.png, /images/posts/review-and-setup-guide-for-unit3d/02-create-droplet-12-dollars.png, /images/posts/review-and-setup-guide-for-unit3d/02-create-droplet-12-dollars.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/02-create-droplet-12-dollars.png\" alt=\"Create a new 12-dollar droplet in Digital Ocean\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-lhdl8g\">Before continuing with the tutorial make sure your root domain and \u003Ccode>www\u003C/code> subdomain are pointing to the droplet’s IP.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">ping unit3d-demo.com\nPING unit3d-demo.com (134.122.65.71) 56(84) bytes of data.\n\nping &lt;www.unit3d-demo.com&gt;\nPING unit3d-demo.com (134.122.65.71) 56(84) bytes of data.\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-j3ieou\">Also, check that you can login using SSH:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">ssh root@134.122.65.71\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"step-2-update-the-server\" data-svelte-h=\"svelte-1tvc6v4\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#step-2-update-the-server\">\u003Cspan>#\u003C/span>\u003C/a>Step 2. Update the Server\u003C/h3> \u003Cp data-svelte-h=\"svelte-1uel1v7\">This is only a recommendation before running the installer.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">sudo apt-get update\nHit:1 http://mirrors.digitalocean.com/ubuntu jammy InRelease\nHit:2 https://repos.insights.digitalocean.com/apt/do-agent main InRelease\nHit:3 http://mirrors.digitalocean.com/ubuntu jammy-updates InRelease\nHit:4 https://repos-droplet.digitalocean.com/apt/droplet-agent main InRelease\nHit:5 http://mirrors.digitalocean.com/ubuntu jammy-backports InRelease\nHit:6 http://security.ubuntu.com/ubuntu jammy-security InRelease\nReading package lists... Done\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"step-3-run-the-unit3d-installer\" data-svelte-h=\"svelte-lq6m1r\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#step-3-run-the-unit3d-installer\">\u003Cspan>#\u003C/span>\u003C/a>Step 3. Run the UNIT3D Installer\u003C/h3> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">sudo apt -y install git\ngit clone https://github.com/HDInnovations/UNIT3D-Installer.git installer\ncd installer\nsudo ./install.sh\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-ev6kxw\">The installer has some steps:\u003C/p> \u003Cul data-svelte-h=\"svelte-1gccjx5\">\u003Cli>Validate Installer Policies\u003C/li> \u003Cli>Server Setup\u003C/li> \u003Cli>Prerequisites\u003C/li> \u003Cli>Database Setup\u003C/li> \u003Cli>Php Setup (PHP &amp; PHP-FPM Configuration)\u003C/li> \u003Cli>Nginx Setup (Nginx Setup &amp; Configurations)\u003C/li> \u003Cli>Unit3d Setup (UNIT3D-Community-Edition Settings and Configuration)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-qijvl3\">First, an assistant will run some checks and it will ask your preferences:\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/03-installer.png, /images/posts/review-and-setup-guide-for-unit3d/03-installer.png, /images/posts/review-and-setup-guide-for-unit3d/03-installer.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/03-installer.png\" alt=\"UNIT3D Installer\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-nhxdxt\">All settings are really easy, specially if you already have all the tokes and password for integrations with external services. When you finish the initial questionnaire you will reach the following confirmation point:\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/04-last-step-installer.png, /images/posts/review-and-setup-guide-for-unit3d/04-last-step-installer.png, /images/posts/review-and-setup-guide-for-unit3d/04-last-step-installer.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/04-last-step-installer.png\" alt=\"UNIT3D Installer\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Ch3 id=\"step-4-login-page\" data-svelte-h=\"svelte-13oymvp\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#step-4-login-page\">\u003Cspan>#\u003C/span>\u003C/a>Step 4. Login Page\u003C/h3> \u003Cp data-svelte-h=\"svelte-1si8nz2\">That’s it. If all went fine during the installation you can load the login page:\u003C/p> \u003Cimg srcset=\"/images/posts/review-and-setup-guide-for-unit3d/unit3d-login-page.png, /images/posts/review-and-setup-guide-for-unit3d/unit3d-login-page.png, /images/posts/review-and-setup-guide-for-unit3d/unit3d-login-page.png\" src=\"/images/posts/review-and-setup-guide-for-unit3d/unit3d-login-page.png\" alt=\"UNIT3D Login Page\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-1vods3x\">You can use the owner account credentials you provided during the installation.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-shjskw\">If the official demo is down you can apply for signing up in our demo on: \u003Ca href=\"https://www.unit3d-demo.com/application\" rel=\"nofollow\">https://www.unit3d-demo.com/application\u003C/a>. You don’t need to provide real data, just a valid email so we can confirm it manually. We want to highlight, however, that we may shut down this demo at any time.\u003C/p>\u003C/div> \u003Ch3 id=\"troubleshooting\" data-svelte-h=\"svelte-msbux3\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#troubleshooting\">\u003Cspan>#\u003C/span>\u003C/a>Troubleshooting\u003C/h3> \u003Cp data-svelte-h=\"svelte-1nj3imx\">During the installation we had a couple of issues.\u003C/p> \u003Cp data-svelte-h=\"svelte-8diijs\">\u003Cstrong>First\u003C/strong>, we chose to use HTTPs but the domain was not pointing the droplet’s IP. The generation of the Let’s Encrypt certificates with certbot failed because it was not able to reach the server to check the challenge. Once we fixed the DNS we could not continue on that point because other steps like inserting some values in the database failed. \u003Cstrong>The installation process does not allow to go back or reset to the initial state\u003C/strong>. We needed to create a new droplet.\u003C/p> \u003Cp data-svelte-h=\"svelte-k5po1m\">\u003Cstrong>Second\u003C/strong>, the initial server was too small and it stuck at building the frontend app. We got this error:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">[Warning] $ vite build\nerror: script &quot;build&quot; was terminated by signal SIGKILL (Forced Quit)\nKilled\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-4b5k5p\">The problem was solved by increasing the droplet size. Anyway, It was too small to host all the services UNIT3D requires. Currently, with no users, the \u003Cstrong>CPU Usage\u003C/strong> is at almost \u003Cstrong>30%\u003C/strong> using a 1 vCPU; 2GB RAM instance.\u003C/p> \u003Cp data-svelte-h=\"svelte-6lrf1i\">Finally, we also saw a warning in the Laravel logs.\u003C/p> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">Base table or view not found: 1146 Table 'unit3d.torrents'\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-50ztmp\">We opened an \u003Ca href=\"https://github.com/HDInnovations/UNIT3D-Community-Edition/issues/4048\" rel=\"nofollow\">issue\u003C/a>. However, we checked it and the table was there and the application seems to work fine.\u003C/p> \u003Ch2 id=\"user-interface\" data-svelte-h=\"svelte-1gcwmll\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#user-interface\">\u003Cspan>#\u003C/span>\u003C/a>User Interface\u003C/h2> \u003Cp data-svelte-h=\"svelte-1d1o6hr\">After installing the application, we were using it for a while. We:\u003C/p> \u003Cul data-svelte-h=\"svelte-1cblm8y\">\u003Cli>Uploaded a torrent.\u003C/li> \u003Cli>Tried to send an invitation.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-19g8edd\">The application has a lot of features and it can be a little bit overwhelming the first time you use it, specially if you are not used to the BitTorrent index terminology. We could not send an invitation even with the owner account because you need to give some points to the account to enable the user to send invitations. Without a basic knowledge about the common features in indexes it can be tough to understand what some features are or how to customize the index to your needs. Fortunately the maintainers offer install and tuning services.\u003C/p> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1fcsocp\">UNIT3D stands out as a fully-featured BitTorrent index, offering a wide array of functionalities that cater to both developers and community moderators. Its robust codebase and ease of installation are significant advantages, though newcomers may find the platform’s complexity daunting. The lack of extensive documentation on best practices within the BitTorrent community is a challenge, but with support from active maintainers, users can still achieve a high level of customization and control.\u003C/p>\u003C/div>\u003C/div>","8 min read",[170,171,172],{"title":141,"slug":142,"coverImage":143,"date":144,"updated":6,"excerpt":145,"contributor":24,"contributorSlug":25,"tags":146,"hidden":12,"html":149,"readingTime":150},{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":102,"slug":103,"coverImage":104,"date":105,"updated":6,"excerpt":106,"contributor":24,"contributorSlug":25,"tags":107,"hidden":12,"html":108,"readingTime":109,"relatedPosts":174},[175,176,177],{"title":90,"slug":91,"coverImage":92,"date":93,"updated":93,"excerpt":94,"contributor":24,"contributorSlug":25,"tags":95,"hidden":12,"html":98,"readingTime":99},{"title":90,"slug":91,"coverImage":92,"date":93,"updated":93,"excerpt":94,"contributor":24,"contributorSlug":25,"tags":122,"hidden":12,"html":123,"readingTime":99},{"title":114,"slug":115,"coverImage":116,"date":117,"updated":6,"excerpt":118,"contributor":24,"contributorSlug":25,"tags":119,"hidden":12,"html":120,"readingTime":99},{"title":102,"slug":103,"coverImage":104,"date":105,"updated":6,"excerpt":106,"contributor":24,"contributorSlug":25,"tags":111,"hidden":12,"html":112,"readingTime":109,"relatedPosts":179},[180,181,182],{"title":90,"slug":91,"coverImage":92,"date":93,"updated":93,"excerpt":94,"contributor":24,"contributorSlug":25,"tags":95,"hidden":12,"html":98,"readingTime":99},{"title":90,"slug":91,"coverImage":92,"date":93,"updated":93,"excerpt":94,"contributor":24,"contributorSlug":25,"tags":122,"hidden":12,"html":123,"readingTime":99},{"title":114,"slug":115,"coverImage":116,"date":117,"updated":6,"excerpt":118,"contributor":24,"contributorSlug":25,"tags":119,"hidden":12,"html":120,"readingTime":99},{"title":184,"slug":185,"coverImage":143,"date":186,"updated":186,"excerpt":187,"contributor":24,"contributorSlug":25,"tags":188,"hidden":12,"html":191,"readingTime":168,"relatedPosts":192},"Torrust - Enhancing the BitTorrent Ecosystem","torrust-enhancing-the-bittorrent-ecosystem","2024-05-31T09:33:14.163Z","Torrust, an open-source organization, is making significant contributions to the BitTorrent ecosystem by developing robust tools, improving documentation, and fostering community collaboration.",[189,190],"Introduction","Torrust"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"hello-world-\" data-svelte-h=\"svelte-164pckj\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hello-world-\">\u003Cspan>#\u003C/span>\u003C/a>Hello World! \u003C/h2> \u003Cp data-svelte-h=\"svelte-1kz2xuo\">We haven’t introduced the Torrust Organization in this blog yet, including its vision, mission, and roadmap. This should have been the first post, but after contributing to the BitTorrent ecosystem for over three years, we now have a better understanding of what the BitTorrent protocols offer and how we can enhance the ecosystem.\u003C/p> \u003Cp data-svelte-h=\"svelte-b6ihlm\">Torrust is an Open-Source Organization. It was created by \u003Ca href=\"https://github.com/mickvandijke\" rel=\"nofollow\">@mickvandijke\u003C/a> in 2021. Mick started by forking the UDP tracker from a \u003Ca href=\"https://github.com/naim94a\" rel=\"nofollow\">@naim94a\u003C/a>’s’ repository \u003Ca href=\"https://github.com/naim94a/udpt\" rel=\"nofollow\">https://github.com/naim94a/udpt\u003C/a> and using some packages for the UDP tracker from \u003Ca href=\"https://github.com/greatest-ape\" rel=\"nofollow\">@greatest-ape\u003C/a>’s \u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">Aquatic\u003C/a> repo. \u003Ca href=\"https://github.com/naim94a\" rel=\"nofollow\">@naim94a\u003C/a> had been working on the tracker since December 2012. In August 2022, \u003Ca href=\"https://github.com/Nautilus-Cyberneering\" rel=\"nofollow\">Nautilus Cyberneering\u003C/a> joined the project. \u003Ca href=\"https://github.com/mickvandijke\" rel=\"nofollow\">@mickvandijke\u003C/a> was already in contact with the Nautilus, and Nautilus decided to contribute due to the traction it was getting from the community and the alignment with their interests.\u003C/p> \u003Cp data-svelte-h=\"svelte-1k5fja4\">We would like to thank \u003Ca href=\"https://github.com/naim94a\" rel=\"nofollow\">@naim94a\u003C/a> and \u003Ca href=\"https://github.com/greatest-ape\" rel=\"nofollow\">@greatest-ape\u003C/a> and all other contributors for their invaluable contributions in coding, opening issues, PRs, improving documentation, sharing ideas, etc.\u003C/p> \u003Cp data-svelte-h=\"svelte-gurw2h\">Over the last two years, significant efforts have been made to establish Torrust software as a leading software in the BitTorrent open-source community. We have applied the best languages, tools, and practices to bring a modern, reliable \u003Ca href=\"https://github.com/torrust/torrust-tracker\" rel=\"nofollow\">Tracker\u003C/a> and \u003Ca href=\"https://github.com/torrust/torrust-index\" rel=\"nofollow\">Index\u003C/a>. We are close to releasing the version v3.0.0, which we consider a solid foundation for future web3 projects requiring file-sharing services.\u003C/p> \u003Cp data-svelte-h=\"svelte-azxlt3\">During this time, we have focused not only on building great products but also on contributing to the community in different ways like improving BitTorrent documentation, helping maintainers to maintain their Rust-based BitTorrents packages, participating in protocol discussions, and writing articles about BitTorrent.\u003C/p> \u003Cp data-svelte-h=\"svelte-hm936d\">We have also prioritized onboarding contributors to the organization. We strive to provide a good experience for anyone interested in contributing, whether it’s fixing a small typo, improving documentation, or submitting a large PR with a new feature. We respond quickly and make it easy to contribute, exemplified by the extensive documentation we have written.\u003C/p> \u003Ch2 id=\"why-is-bittorrent-important\" data-svelte-h=\"svelte-4gd3lf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-is-bittorrent-important\">\u003Cspan>#\u003C/span>\u003C/a>Why is BitTorrent important?\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ii666i\">BitTorrent is a peer-to-peer (P2P) file sharing protocol, first released in 2001 by \u003Ca href=\"https://github.com/bramcohen\" rel=\"nofollow\">Bram Cohen\u003C/a>. It revolutionized file distribution across the internet by allowing efficient peer-to-peer sharing without relying on a single centralized server, making it highly resilient and scalable. BitTorrent enables each downloader to become an uploader, creating a network of file sharing that boosts download speeds and balances server loads.\u003C/p> \u003Cp data-svelte-h=\"svelte-ek6d9m\">BitTorrent has been very often related to illegal sharing of copyrighted material, it’s worth noting that BitTorrent itself is not illegal. It is a tool, and like any tool, its legality depends on how it’s used. It has numerous legitimate uses such as distributing open-source software, sharing large datasets, real-time communications, and even reducing server load for large-scale events like product launches or game updates.\u003C/p> \u003Cp data-svelte-h=\"svelte-a783k\">There have been many interesting and useful projects over the years, such as:\u003C/p> \u003Cul data-svelte-h=\"svelte-zhqt35\">\u003Cli>\u003Ca href=\"https://academictorrents.com/\" rel=\"nofollow\">https://academictorrents.com/\u003C/a> for sharing enormous datasets, for researchers, by researchers.\u003C/li> \u003Cli>\u003Ca href=\"https://help.archive.org/help/archive-bittorrents/\" rel=\"nofollow\">The Internet Archive\u003C/a> is also using torrents since 2012.\u003C/li> \u003Cli>\u003Ca href=\"https://www.legittorrents.info/\" rel=\"nofollow\">https://www.legittorrents.info/\u003C/a> was a collection of legal torrents.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1a1enxl\">More recently, the \u003Ca href=\"https://webtorrent.io/\" rel=\"nofollow\">webtorrent\u003C/a> extension has enabled BitTorrent clients to run in a browser, unlocking new capabilities like:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r3wa61\">\u003Cli>\u003Ca href=\"https://peertube.cpy.re/\" rel=\"nofollow\">PeerTube\u003C/a>: Prototype of a decentralized video streaming platform in the web browser.\u003C/li> \u003Cli>\u003Ca href=\"https://cinetimes.org/\" rel=\"nofollow\">CineTimes\u003C/a>: A streaming website of public domain movies.\u003C/li> \u003Cli>\u003Ca href=\"https://www.bitchute.com/\" rel=\"nofollow\">BitChute\u003C/a>: A decentralized video streaming social network.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-87h3tw\">You can find more \u003Ca href=\"https://webtorrent.io/faq\" rel=\"nofollow\">here\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1n6t80c\">Despite the emergence of blockchain alternatives like \u003Ca href=\"https://ipfs.tech/\" rel=\"nofollow\">IPFS\u003C/a> (InterPlanetary File System) or \u003Ca href=\"https://www.btfs.io/\" rel=\"nofollow\">BitTorrent File System 3.0\u003C/a>, we believe off-chain basic BitTorrent protocols without monetary incentives still fit many decentralization use cases. Many web3 applications could be based on what we already have, as shown in this \u003Ca href=\"https://webtorrent.io/faq\" rel=\"nofollow\">list\u003C/a>.\u003C/p> \u003Ch2 id=\"current-bittorrent-issues\" data-svelte-h=\"svelte-1a7f7y3\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#current-bittorrent-issues\">\u003Cspan>#\u003C/span>\u003C/a>Current BitTorrent Issues\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ahm3oe\">After being involved in the BitTorrent ecosystem for a couple of years, we believe there is a lot of room for improvement. For example:\u003C/p> \u003Ch3 id=\"documentation\" data-svelte-h=\"svelte-1l6himn\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#documentation\">\u003Cspan>#\u003C/span>\u003C/a>Documentation\u003C/h3> \u003Cp data-svelte-h=\"svelte-1h1okdb\">The source of true for BitTorrent protocols are \u003Ca href=\"https://www.bittorrent.org/beps/bep_0000.html\" rel=\"nofollow\">BEPs\u003C/a>. While it’s a good starting point, the information provided is often insufficient for implementation. Important details are sometimes missing, and there are commonly applied extensions that are not documented.\u003C/p> \u003Cp data-svelte-h=\"svelte-1rufgbm\">We aim to improve the official documentation in two stages. . First, we will write new \u003Ca href=\"https://github.com/torrust/teps\" rel=\"nofollow\">Torrust Enhancement Proposals\u003C/a>, and some of them could be converted into BEPs if they are generic enough.\u003C/p> \u003Cp data-svelte-h=\"svelte-1vipdn\">Not only the official protocol documentation is sometimes vague but also clients, trackers implementations, etc. We think the documentations should be:\u003C/p> \u003Cul data-svelte-h=\"svelte-1cnh3mu\">\u003Cli>Clear\u003C/li> \u003Cli>Comprehensive\u003C/li> \u003Cli>Accessible\u003C/li> \u003Cli>Up-to-date\u003C/li> \u003Cli>User-focused\u003C/li> \u003Cli>Interactive and engaging\u003C/li> \u003Cli>Easy to update and maintain\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-lobec9\">And that should be for all levels, from low-level protocols to high-level end-user applications.\u003C/p> \u003Cp data-svelte-h=\"svelte-8isw5t\">At Torrust, we document:\u003C/p> \u003Cul data-svelte-h=\"svelte-1nu6f04\">\u003Cli>Classes\u003C/li> \u003Cli>Modules\u003C/li> \u003Cli>Crates\u003C/li> \u003Cli>Application (including setup, how to use, ADRs, licenses, etc)\u003C/li> \u003Cli>Processes ((including how to contribute, how to release new version, how to make decisions, etc)\u003C/li>\u003C/ul> \u003Ch3 id=\"sustainability\" data-svelte-h=\"svelte-1555276\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#sustainability\">\u003Cspan>#\u003C/span>\u003C/a>Sustainability\u003C/h3> \u003Cp data-svelte-h=\"svelte-1uyvq8m\">Many projects are very old, which isn’t necessarily bad because they have proven to be robust and reliable. However, onboarding new contributors is often challenging.\u003C/p> \u003Ch3 id=\"scalability\" data-svelte-h=\"svelte-1pcrlzw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#scalability\">\u003Cspan>#\u003C/span>\u003C/a>Scalability\u003C/h3> \u003Cp data-svelte-h=\"svelte-hebmyo\">We haven’t seen many projects ready to scale horizontally. The focus is often on optimization for a single server. For example, the Tracker uses memory to keep peer lists, making it harder to use multiple servers. While our Tracker still has this limitation, other trackers like \u003Ca href=\"https://erdgeist.org/arts/software/opentracker/\" rel=\"nofollow\">opentracker\u003C/a> can run in a cluster.\u003C/p> \u003Ch3 id=\"lack-of-interest\" data-svelte-h=\"svelte-1kauuol\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#lack-of-interest\">\u003Cspan>#\u003C/span>\u003C/a>Lack of interest\u003C/h3> \u003Cp data-svelte-h=\"svelte-14ma3ct\">Despite the advent of blockchain, it seems that average people are not concerned about the problems of centralization. Blockchain projects might still attract developers and users, but BitTorrent is often seen as “old” technology for a problem that people don’t see or care about.\u003C/p> \u003Ch3 id=\"missing-features\" data-svelte-h=\"svelte-vs3fos\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#missing-features\">\u003Cspan>#\u003C/span>\u003C/a>Missing features\u003C/h3> \u003Cp data-svelte-h=\"svelte-z7jnql\">Several missing features make it harder to use BitTorrent in modern web3 applications:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pagpfy\">\u003Cli>\u003Cstrong>Versioning\u003C/strong>: There is no official way to create versions of the same torrent. Releasing new versions requires creating a completely new torrent, which duplicates its contents.\u003C/li> \u003Cli>\u003Cstrong>Guaranteed Seeding\u003C/strong>: Torrents might include URLs for seeding, but hosting the content when no peer is sharing the torrent can be challenging. Blockchain-based solutions solve this problem with monetary incentives.\u003C/li> \u003Cli>\u003Cstrong>Standards for Content Formats\u003C/strong>: Even if you build a web3 app based on BitTorrent, interoperability is not guaranteed if content doesn’t follow standards. For example, if you want to build a “hiking” app, you should specify the format of the files included in the torrents: title, description, track, images, waypoints, etc.\u003C/li>\u003C/ul> \u003Ch2 id=\"vision\" data-svelte-h=\"svelte-1fzx1sz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#vision\">\u003Cspan>#\u003C/span>\u003C/a>Vision\u003C/h2> \u003Cp data-svelte-h=\"svelte-1yki8nj\">Have you ever considered what would happen if the three big hosting providers (AWS, Azure, Google) disappeared?\u003C/p> \u003Cp data-svelte-h=\"svelte-wxd1rw\">You would probably be affected, just like millions of others. The internet was conceived as a decentralized network (Usenet, DNS, Fidonet, etc.), but it has become increasingly centralized, raising the risk of a global collapse. Decentralized apps are more resilient, though more complex to build and less efficient.\u003C/p> \u003Cp data-svelte-h=\"svelte-zh0sca\">There is content that we should all care about, such as scientific papers, datasets, and user-generated data like Wikipedia.\u003C/p> \u003Cp data-svelte-h=\"svelte-1jhr00p\">Decentralization is the only way to make data truly open and accessible for all. It also allows for interoperability and data migration, so data owners are not locked into a specific provider.\u003C/p> \u003Cp data-svelte-h=\"svelte-pzj23e\">Our vision is to \u003Cstrong>enable future generations to build a resilient information repositories that ensures data access for everyone\u003C/strong>. There is a lot of valuable information locked in data centers that could be lost forever. For example, if you enjoy hiking, you might use an app to follow a track and find the starting point. This cultural heritage, created over generations, could be needed again in the future.\u003C/p> \u003Ch2 id=\"mission\" data-svelte-h=\"svelte-a67asb\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#mission\">\u003Cspan>#\u003C/span>\u003C/a>Mission\u003C/h2> \u003Cp data-svelte-h=\"svelte-193jguq\">Where does Torrust fit into this picture? We aim to improve upon this impressive technology. Torrust is dedicated to developing robust, fault-tolerant tools for the BitTorrent ecosystem, with a focus on providing good testing coverage and thorough documentation for developers and users alike.\u003C/p> \u003Cp data-svelte-h=\"svelte-1nsj51\">Our current portfolio includes a Tracker and an Index. The tracker, written in Rust, is a server that helps coordinate peers in the BitTorrent protocol. The Index is a website that serves as a database of torrent files, comprising a frontend web app (Index GUI) for user interaction and a backend REST API written in Rust for data and business logic (Index).\u003C/p> \u003Cp data-svelte-h=\"svelte-inr52u\">We are planning to:\u003C/p> \u003Cul data-svelte-h=\"svelte-176lr2t\">\u003Cli>Provide these two components as a first step. In the medium term, we would like to extract more packages that could be used by other open-source BitTorrent projects, such as a core tracker, a tracker client library, etc.\u003C/li> \u003Cli>Build the foundations (libraries, apps, etc.) that will enable the creation of better BitTorrent apps more efficiently in the future.\u003C/li>\u003C/ul> \u003Ch2 id=\"roadmap\" data-svelte-h=\"svelte-171157t\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#roadmap\">\u003Cspan>#\u003C/span>\u003C/a>Roadmap\u003C/h2> \u003Cp data-svelte-h=\"svelte-equgtn\">Core:\u003C/p> \u003Cul data-svelte-h=\"svelte-ao54ly\">\u003Cli>Implement more BEPs.\u003C/li> \u003Cli>Support for \u003Ca href=\"https://webtorrent.io/\" rel=\"nofollow\">WebTorrent\u003C/a>.\u003C/li> \u003Cli>Extract packages that could be useful for other OS projects: tracker client, tracker checker.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1vcoczx\">New features:\u003C/p> \u003Cul data-svelte-h=\"svelte-13rykkv\">\u003Cli>Permanent keys for the Tracker.\u003C/li> \u003Cli>Peer and torrents specific statistics.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-sdcvrl\">Persistence:\u003C/p> \u003Cul data-svelte-h=\"svelte-1hiupqh\">\u003Cli>Support other databases like PostgreSQL.\u003C/li> \u003Cli>Migration to NoSQL?.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-q2yqsw\">Performance:\u003C/p> \u003Cul data-svelte-h=\"svelte-eeulbu\">\u003Cli>More optimizations for the tracker.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-p5rrof\">Integrations:\u003C/p> \u003Cul data-svelte-h=\"svelte-1u4mq5k\">\u003Cli>Monitoring (Prometheus).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-zj5j9u\">Improve interoperability:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t8iigk\">\u003Cli>Better support for Windows.\u003C/li> \u003Cli>Docker images for other architectures.\u003C/li>\u003C/ul> \u003Ch2 id=\"why-should-you-consider-collaborating-with-us\" data-svelte-h=\"svelte-x2zvve\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-should-you-consider-collaborating-with-us\">\u003Cspan>#\u003C/span>\u003C/a>Why should you consider collaborating with us?\u003C/h2> \u003Cp data-svelte-h=\"svelte-15ewmez\">Torrust is an excellent way to learn and gain practical experience with Rust and cutting-edge technologies that are quickly gaining popularity in the industry. It is also a fantastic opportunity to be part of a community that values knowledge sharing and collaboration. You can contribute to making data more open and accessible, potentially building an alternative infrastructure that can help avoid data loss or monopolization, which can be crucial for the survival of humanity.\u003C/p> \u003Ch2 id=\"contributing\" data-svelte-h=\"svelte-1gcj59h\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#contributing\">\u003Cspan>#\u003C/span>\u003C/a>Contributing\u003C/h2> \u003Cp data-svelte-h=\"svelte-zbwu22\">If you see something wrong or you want to contribute to this article by:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pxkwtk\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think that could be interesting to have,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-jnq0pp\">If you have any questions or issues please open an issue in the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-psntnz\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li> \u003Cli>Torrust Compose: \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">https://github.com/torrust/torrust-compose\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p>\u003C/div>\u003C/div>",[193,194,206],{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},"Containerizing Rust Applications","containerizing-rust-applications-best-practices","/images/posts/rust-crab-carrying-a-shipping-container.jpeg","2023-11-09T12:08:04.295Z","Torrust services (Tracker and Index) support docker, we want to ensure that contributors understand our containerfile and we also want to share good practices for containerizing Rust applications.",[160,201,202,203],"Docker","Containers","Rust"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-1m3njcc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of Contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-4wp562\">\u003Cli>\u003Ca href=\"#introduction\">Introduction\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#requirements\">Requirements\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#we-use-docker-oci-containers\">We Use Docker (OCI) Containers\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#basic-dockerized-rust-application\">Basic Dockerized Rust Application\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#use-multi-stage-builds-to-minimize-the-image-size\">Use Multi-Stage Builds to Minimize the Image Size\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#image-variants\">Image Variants\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#introduction-to-docker-layers-cache\">Introduction to Docker Layers Cache\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#caching-cargo-dependencies\">Caching Cargo Dependencies\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#demonstration-of-caching-cargo-dependencies-using-a-custom-solution\">Demonstration of Caching Cargo Dependencies Using a Custom Solution\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#caching-cargo-dependencies-with-cargo-chef\">Caching Cargo Dependencies With Cargo Chef\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#installing-rust-binaries-with-cargo-binstall\">Installing Rust Binaries With Cargo Binstall\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#archiving-and-reusing-builds-with-cargo-nextest\">Archiving And Reusing Builds With Cargo Nextest\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#running-container-without-sudo\">Running Container Without Sudo\u003C/a>\u003Cul>\u003Cli>\u003Ca href=\"#use-the-docker-run---user-argument\">Use The \u003Ccode>docker run --user\u003C/code> Argument\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#create-the-user-at-runtime\">Create The User At Runtime\u003C/a>\u003C/li>\u003C/ul>\u003C/li> \u003Cli>\u003Ca href=\"#decomposing-the-torrust-tracker-containerfile\">Decomposing the Torrust Tracker Containerfile\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#other-good-practices\">Other Good Practices\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#other-considerations\">Other Considerations\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#links\">Links\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-1bew33\">BitTorrent, an age-old protocol, is a powerful way to share data over the internet.\nIn our journey to building robust BitTorrent projects, we’ve chosen the Rust\nprogramming language for its memory safety and concurrency features. To streamline\nthe development and distribution of our projects, we’ve also employed Docker and\nPodman.\u003C/p> \u003Cp data-svelte-h=\"svelte-n4c01r\">In this post, we’ll dive deep into the best practices we’ve adopted for\ndockerizing our Rust applications.\u003C/p> \u003Cp data-svelte-h=\"svelte-2fok2a\">Our \u003Ca href=\"https://docs.docker.com/engine/reference/builder/\" rel=\"nofollow\">Containerfiles\u003C/a>, \u003Cem>commonly called a \u003Ccode>&quot;Dockerfile&quot;\u003C/code>\u003C/em>, are stored in the roots of our two main rust repositories, for reference:\u003C/p> \u003Cul data-svelte-h=\"svelte-pc1ly4\">\u003Cli>Torrust-Tracker \u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/Containerfile\" rel=\"nofollow\">Containerfile\u003C/a>.\u003C/li> \u003Cli>Torrust-Index \u003Ca href=\"https://github.com/torrust/torrust-index/blob/develop/Containerfile\" rel=\"nofollow\">Containerfile\u003C/a>.\u003C/li>\u003C/ul> \u003Ch3 id=\"example\" data-svelte-h=\"svelte-ywa4f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#example\">\u003Cspan>#\u003C/span>\u003C/a>Example\u003C/h3> \u003Cp data-svelte-h=\"svelte-bjlfzg\">All of the examples included in this blog post are publicly available in our ”\u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">Containerizing Rust Apps Examples\u003C/a>”\nGitHub Repository.\u003C/p> \u003Cblockquote data-svelte-h=\"svelte-3fqojs\">\u003Cp>\u003Cstrong>\u003Cem>Please Note:\u003C/em>\u003C/strong> The actual \u003Ccode>Containerfile\u003C/code> for the \u003Cstrong>Tracker\u003C/strong> and \u003Cstrong>Index\u003C/strong> services builds images for\nboth \u003Ccode>debug\u003C/code> and \u003Ccode>release\u003C/code> modes. For learning purposes we are using a simplified\nversion here which only builds the \u003Ccode>release\u003C/code> mode:\u003C/p>\u003C/blockquote> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\"># Extracted example of our Containerfile.\u003C/span>\n\n\u003Cspan class=\"token comment\">## Base Builder Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> chef\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /tmp\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-chef cargo-nextest\u003C/span>\n\n\u003Cspan class=\"token comment\">## Tester Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:slim-bookworm \u003Cspan class=\"token keyword\">as\u003C/span> tester\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /tmp\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> apt-get update; apt-get install -y curl; apt-get autoclean\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-nextest\u003C/span>\n\n\u003Cspan class=\"token comment\">## Su Exe Compile\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> gcc\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> ./contrib/dev-tools/su-exec/ /usr/local/src/su-exec/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cc -Wall -Werror -g /usr/local/src/su-exec/su-exec.c -o /usr/local/bin/su-exec; chmod +x /usr/local/bin/su-exec\u003C/span>\n\n\u003Cspan class=\"token comment\">## Chef Prepare (look at project and see wat we need)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> recipe\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef prepare --recipe-path /build/recipe.json\u003C/span>\n\n\u003Cspan class=\"token comment\">## Cook (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> dependencies\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">recipe\u003C/span>\u003C/span> /build/recipe.json /build/recipe.json\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef cook --tests --benches --examples --workspace --all-targets --all-features --recipe-path /build/recipe.json --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/temp.tar.zst --release  ; rm -f /build/temp.tar.zst\u003C/span>\n\n\u003Cspan class=\"token comment\">## Build Archive (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> dependencies \u003Cspan class=\"token keyword\">AS\u003C/span> build\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/full-example.tar.zst --release\u003C/span>\n\n\u003Cspan class=\"token comment\"># Extract and Test (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> tester \u003Cspan class=\"token keyword\">as\u003C/span> test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /test/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">build\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">\u003C/span>\n  /build/full-example.tar.zst \u003Cspan class=\"token operator\">\u003C/span>\n  /test/full-example.tar.zst\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --extract-to /test/src/ --no-run --archive-file /test/full-example.tar.zst\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --target-dir-remap /test/src/target/ --cargo-metadata /test/src/target/nextest/cargo-metadata.json --binaries-metadata /test/src/target/nextest/binaries-metadata.json\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> mkdir -p /app/bin/; cp -l /test/src/target/release/full-example /app/bin/full-example\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> chown -R root:root /app; chmod -R u=rw,go=r,a+X /app; chmod -R a+x /app/bin\u003C/span>\n\n\u003Cspan class=\"token comment\">## Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/distroless/cc-debian12:debug \u003Cspan class=\"token keyword\">as\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> [\u003Cspan class=\"token string\">\"/busybox/cp\"\u003C/span>, \u003Cspan class=\"token string\">\"-sp\"\u003C/span>, \u003Cspan class=\"token string\">\"/busybox/sh\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/cat\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/ls\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/env\"\u003C/span>, \u003Cspan class=\"token string\">\"/bin/\"\u003C/span>]\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">gcc\u003C/span> \u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> /usr/local/bin/su-exec /bin/su-exec\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ARG\u003C/span> USER_ID=1000\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> ./share/container/entry_script_sh /usr/local/bin/entry.sh\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ENTRYPOINT\u003C/span> [\u003Cspan class=\"token string\">\"/usr/local/bin/entry.sh\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\">## Release Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> runtime \u003Cspan class=\"token keyword\">as\u003C/span> release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">test\u003C/span>\u003C/span> /app/ /usr/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/usr/bin/full-example\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-h87xgr\">The real version in production contains some duplicate stages to build the \u003Ccode>debug\u003C/code>\nmode. Those stages are almost identical to the ones in this example and are therefore omitted. Only some flags and names change.\u003C/p> \u003Cp data-svelte-h=\"svelte-1jzeibq\">Don’t be scared of the example, next we will go through all the lines and explain what\nthey do, but before doing that, we will explain some basic concepts and the patterns\napplied one by one.\u003C/p> \u003Ch2 id=\"requirements\" data-svelte-h=\"svelte-d9t7ph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#requirements\">\u003Cspan>#\u003C/span>\u003C/a>Requirements\u003C/h2> \u003Cp data-svelte-h=\"svelte-geafvi\">In order to run some of the examples in this article you will need to install:\u003C/p> \u003Cul data-svelte-h=\"svelte-c5a7l\">\u003Cli>\u003Ca href=\"https://docs.docker.com/get-docker/\" rel=\"nofollow\">Docker version 24.0.6, build ed223bc\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"we-use-docker-oci-containers\" data-svelte-h=\"svelte-cyt294\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#we-use-docker-oci-containers\">\u003Cspan>#\u003C/span>\u003C/a>We Use Docker (OCI) Containers\u003C/h2> \u003Cp data-svelte-h=\"svelte-ayeng7\">The standardized \u003Ca href=\"https://opencontainers.org/\" rel=\"nofollow\">Open Container Initiative (OCI)\u003C/a> allows Torrust the possibility of reliable and cross-platform distribution and deployment of our Software.\u003C/p> \u003Cp data-svelte-h=\"svelte-a0u1en\">This allows for administrators who may be interested in our software to quickly and easily test-out our software and see if it suits their needs. It also allows administrators to more easily deploy our software, as most of the web-hosting systems have great support for OCI Containers.\u003C/p> \u003Cp data-svelte-h=\"svelte-15sjdzn\">In addition, our End-to-End testing infrastructure is made easier by using a \u003Ca href=\"https://docs.docker.com/compose/\" rel=\"nofollow\">docker-compose\u003C/a> configuration, that is taking advantage of our docker containers.\u003C/p> \u003Ch2 id=\"basic-dockerized-rust-application\" data-svelte-h=\"svelte-vhcbi5\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#basic-dockerized-rust-application\">\u003Cspan>#\u003C/span>\u003C/a>Basic Dockerized Rust Application\u003C/h2> \u003Cp data-svelte-h=\"svelte-a641je\">The simplest Dockerfile for a Rust application is as follows:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\"># We start from full base defacto Debian image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1shwlxj\">And you can build the image and run it with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker build -t docker-rust-app-basic .\ndocker run --rm -it docker-rust-app-basic\n\nHello, world!\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1148wxx\">That creates a docker image which is \u003Cstrong>1.39 GB\u003C/strong>!.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">$ docker image ls | grep docker-rust-app-basic\ndocker-rust-app-basic                            latest          7294f20bb52c   2 minutes ago   1.39GB\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-msyssk\">We are going to see how to improve\nthat and other things like common patters, good practices and other considerations.\u003C/p> \u003Ch2 id=\"use-multi-stage-builds-to-minimize-the-image-size\" data-svelte-h=\"svelte-1rb4gy9\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#use-multi-stage-builds-to-minimize-the-image-size\">\u003Cspan>#\u003C/span>\u003C/a>Use Multi-Stage Builds to Minimize the Image Size\u003C/h2> \u003Cp data-svelte-h=\"svelte-1wu17ac\">A common pattern to build smaller docker images is to use multi-stage Dockerfiles.\u003C/p> \u003Cp data-svelte-h=\"svelte-1q5coka\">You can compile your application with all of the Rust tooling and then use the\nfinal binary in a slim operating system. This image does not contain the common\npackages contained in the default tag and only contains the minimal packages\nneeded to run your compiled Rust application.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\"># This is the first stage. This image is used to compile the Rust application.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> builder\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token comment\"># Install the package in the current directory\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo install --path .\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\"># This is the production stage.\u003C/span>\n\u003Cspan class=\"token comment\"># The slim image does not contain the common packages contained in the default tag and only contains the minimal packages needed to run rust.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> debian:bookworm-slim\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">builder\u003C/span>\u003C/span> /usr/local/cargo/bin/app /usr/local/bin/app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1e77e1j\">The example is very easy and you can build and run the image with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker build -t docker-rust-app-multi-stage .\ndocker run --rm -it docker-rust-app-multi-stage\nHello, world!\n$ docker image ls | grep docker-rust-app-multi-stage\ndocker-rust-app-multi-stage                             latest          bc3ae797b55e   11 seconds ago   84.7MB\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-j0pust\">As you can see this new image is only 84.7MB. That’s a huge improvement!\u003C/p> \u003Ch2 id=\"image-variants\" data-svelte-h=\"svelte-1d98m8q\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#image-variants\">\u003Cspan>#\u003C/span>\u003C/a>Image Variants\u003C/h2> \u003Cp data-svelte-h=\"svelte-oq7eo4\">As you can see in our \u003Ccode>Containerfile\u003C/code>, the images we are using are the following:\u003C/p> \u003Ch3 id=\"rustbookworm\" data-svelte-h=\"svelte-wzlgx5\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rustbookworm\">\u003Cspan>#\u003C/span>\u003C/a>rust:bookworm\u003C/h3> \u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-44km0g\">At the time of writing this article the latest release is \u003Ca href=\"https://www.debian.org/releases/bookworm/\" rel=\"nofollow\">Debian 12.2\u003C/a>.\nIt is also (currently) known as stable or by its codename “Bookworm”. You will\nsee that we use that one because it is the latest one.\u003C/p> \u003Ch3 id=\"rustslim-bookworm\" data-svelte-h=\"svelte-1yonnqd\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rustslim-bookworm\">\u003Cspan>#\u003C/span>\u003C/a>rust:slim-bookworm\u003C/h3> \u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:slim-bookworm\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-3abwef\">Images with the \u003Ccode>slim\u003C/code> suffix do not contain the common packages contained in the\ndefault tag and only contain the minimal packages needed to run rust. We are using\nit for the “tester” stage.\u003C/p> \u003Ch3 id=\"gccbookworm\" data-svelte-h=\"svelte-dufdni\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#gccbookworm\">\u003Cspan>#\u003C/span>\u003C/a>gcc:bookworm\u003C/h3> \u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-tmyft9\">The GCC image is used to compile an small C program which is a simple tool that\njust executes a program with different privileges. When we start the container\nwe run it with a USER ID passed by an environment variable and not with \u003Ccode>root\u003C/code>\nprivileges.\u003C/p> \u003Ch3 id=\"cc-debian12debug\" data-svelte-h=\"svelte-184w9i9\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#cc-debian12debug\">\u003Cspan>#\u003C/span>\u003C/a>cc-debian12:debug\u003C/h3> \u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/gcr.io/distroless/cc-debian12:debug\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1fhk2ic\">And finally a “Distroless” container image is used for runtime. \u003Ca href=\"https://github.com/GoogleContainerTools/distroless#why-should-i-use-distroless-images\" rel=\"nofollow\">Why should you use distroless images?\u003C/a>.\u003C/p> \u003Cul data-svelte-h=\"svelte-18873bu\">\u003Cli>They are small.\u003C/li> \u003Cli>They only have what you need to run your app.\u003C/li> \u003Cli>They reduce the risk of vulnerabilities.\u003C/li>\u003C/ul> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1fdq7sg\">We use the \u003Ccode>:debug\u003C/code> variant of the distroless cc, as it includes the busybox binary,\ngiving us a shell that is needed to run the entry-script. We will explain this later.\u003C/p>\u003C/div> \u003Ch2 id=\"introduction-to-docker-layers-cache\" data-svelte-h=\"svelte-uva52c\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction-to-docker-layers-cache\">\u003Cspan>#\u003C/span>\u003C/a>Introduction To Docker Layers Cache\u003C/h2> \u003Cp data-svelte-h=\"svelte-hk85vl\">Caching is a pivotal aspect of optimizing Docker builds, especially with Rust projects. Proper caching ensures faster builds, as unchanged dependencies don’t have to be recompiled. By leveraging Docker’s layer caching mechanism, we can effectively cache Rust dependencies and speed up our Docker builds.\u003C/p> \u003Cp data-svelte-h=\"svelte-1xtjzwc\">Docker uses a layered filesystem to store images. Each layer is a set of changes to the filesystem. When you create a new container, you add a new writable layer on top of the underlying layers. This layer is often called the “container layer”. All changes made to the running container, such as writing new files, modifying existing files, and deleting files, are written to this thin writable container layer.\u003C/p> \u003Ch2 id=\"caching-cargo-dependencies\" data-svelte-h=\"svelte-1ypa8uz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#caching-cargo-dependencies\">\u003Cspan>#\u003C/span>\u003C/a>Caching cargo dependencies\u003C/h2> \u003Cp data-svelte-h=\"svelte-11u1mbr\">A common pattern used in all languages is to separate the dependencies installation from the application build. This is done to take advantage of the Docker layer caching mechanism. The dependencies installation is done in a separate layer, and the application build is done in a separate layer. This way, if the application code changes, the dependencies installation layer is not rebuilt, and only the application build layer is rebuilt.\u003C/p> \u003Cp data-svelte-h=\"svelte-uz9oxy\">This improves build times because dependencies installation is usually a time-consuming process and it is something you normally do not change often. The application build, on the other hand, is something you change often, and it is usually a quick process.\u003C/p> \u003Cp data-svelte-h=\"svelte-8zab98\">Docker build is executed in the order that you define instructions so you put things that change less frequently at the beginning of the Dockerfile and things that change more frequently at the end of the Dockerfile.\u003C/p> \u003Cp data-svelte-h=\"svelte-1sajbeb\">There are two levels of dependencies:\u003C/p> \u003Cul data-svelte-h=\"svelte-75d099\">\u003Cli>System dependencies. For instance \u003Ccode>SQLite\u003C/code>, \u003Ccode>curl\u003C/code> and other libraries your application depends on.\u003C/li> \u003Cli>Rust dependencies. These are the Rust packages that you want to install using cargo. Rust packages are called \u003Ccode>crates\u003C/code> and you can find them on \u003Ca href=\"https://crates.io/\" rel=\"nofollow\">https://crates.io/\u003C/a>\u003C/li>\u003C/ul> \u003Ch3 id=\"demonstration-of-caching-cargo-dependencies-using-a-custom-solution\" data-svelte-h=\"svelte-1xct4pc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#demonstration-of-caching-cargo-dependencies-using-a-custom-solution\">\u003Cspan>#\u003C/span>\u003C/a>Demonstration of Caching Cargo Dependencies Using a Custom Solution\u003C/h3> \u003Cp data-svelte-h=\"svelte-2cwd33\">First we demonstrate how cargo dependencies caching works but showing a custom solution:\u003C/p> \u003Cp data-svelte-h=\"svelte-1l59dpd\">We first create an \u003Cstrong>empty application configuration\u003C/strong> which uses the same dependencies.\nWe build the application, downloading and building all the dependencies and creating a docker cache layer.\u003C/p> \u003Cp data-svelte-h=\"svelte-xzh6g5\">Then we build the application. With these layers yo do not need to re-build the dependencies\nwhen you change the application code.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest \u003Cspan class=\"token keyword\">as\u003C/span> builder\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\n\u003Cspan class=\"token comment\"># Copy over the manifest files\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> Cargo.toml Cargo.lock /app/\u003C/span>\n\n\u003Cspan class=\"token comment\"># Create a dummy main.rs to build dependencies\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> mkdir src &amp;&amp; echo \u003Cspan class=\"token string\">\"fn main() &#123; println!(\"if you see this, the build broke\"); &#125;\"\u003C/span> > src/main.rs\u003C/span>\n\n\u003Cspan class=\"token comment\"># This build step will cache the dependencies as they're not changed\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token comment\"># Now, remove the dummy main.rs and copy your source code\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /app\u003C/span>\n\n\u003Cspan class=\"token comment\"># You'll need to update the last modified of the main.rs file to inform cargo to rebuild it\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> touch -a -m ./src/main.rs\u003C/span>\n\n\u003Cspan class=\"token comment\"># Build the application for release. Since dependencies are cached, this will only build your code\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/custom-dependencies-cache\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1al3v1i\">Instead of this custom solution, we use and recommend \u003Ca href=\"https://github.com/LukeMathWalker/cargo-chef\" rel=\"nofollow\">cargo chef\u003C/a> which is a cargo-subcommand that specializes in speeding up Rust Docker builds using Docker layer caching.\u003C/p> \u003Ch3 id=\"caching-cargo-dependencies-with-cargo-chef\" data-svelte-h=\"svelte-u2le63\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#caching-cargo-dependencies-with-cargo-chef\">\u003Cspan>#\u003C/span>\u003C/a>Caching Cargo Dependencies With Cargo Chef\u003C/h3> \u003Cp data-svelte-h=\"svelte-k3wwdj\">In this example, we show how to use \u003Ca href=\"https://github.com/LukeMathWalker/cargo-chef\" rel=\"nofollow\">cargo chef\u003C/a>, that we prefer to use.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest \u003Cspan class=\"token keyword\">as\u003C/span> chef\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\n\u003Cspan class=\"token comment\"># Install cargo-chef\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo install cargo-chef --locked\u003C/span>\n\n\u003Cspan class=\"token comment\"># Examines your project and builds a recipe that captures the set of information required to build your dependencies\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> planner\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . .\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef prepare --recipe-path recipe.json\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> builder\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">planner\u003C/span>\u003C/span> /app/recipe.json recipe.json\u003C/span>\n\n\u003Cspan class=\"token comment\"># Build dependencies - this is the caching Docker layer!\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef cook --release --recipe-path recipe.json\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . .\u003C/span>\n\n\u003Cspan class=\"token comment\"># Build the application for release. Since dependencies are cached, this will only build your code\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/dependencies-cache-with-cargo-chef\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-kdyrix\">While it does more or less the same as the custom solution. It caches dependencies in a separate layer and has some other \u003Ca href=\"https://github.com/LukeMathWalker/cargo-chef#benefits-of-cargo-chef\" rel=\"nofollow\">benefits\u003C/a>.\u003C/p> \u003Ch2 id=\"installing-rust-binaries-with-cargo-binstall\" data-svelte-h=\"svelte-pxmn10\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#installing-rust-binaries-with-cargo-binstall\">\u003Cspan>#\u003C/span>\u003C/a>Installing Rust Binaries With Cargo Binstall\u003C/h2> \u003Cp data-svelte-h=\"svelte-6yum3m\">\u003Ccode>cargo binstall\u003C/code> is a cargo subcommand that allows installing Rust binaries as an alternative to building from source (via cargo install) or manually downloading packages.\u003C/p> \u003Cp data-svelte-h=\"svelte-gk98nu\">Cargo Binstall repo: \u003Ca href=\"https://github.com/cargo-bins/cargo-binstall\" rel=\"nofollow\">https://github.com/cargo-bins/cargo-binstall\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1n8zo3n\">We are using it to install \u003Ccode>cargo chef\u003C/code> and \u003Ccode>cargo nextest\u003C/code> packages easily.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token comment\"># Install &#96;cargo binstall&#96;\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token comment\"># Install Rust binaries with &#96;cargo binstall&#96;\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-chef cargo-nextest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef --version &amp;&amp; cargo nextest --version\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\n\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"archiving-and-reusing-builds-with-cargo-nextest\" data-svelte-h=\"svelte-1qtt8xq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#archiving-and-reusing-builds-with-cargo-nextest\">\u003Cspan>#\u003C/span>\u003C/a>Archiving And Reusing Builds With Cargo Nextest\u003C/h2> \u003Cp data-svelte-h=\"svelte-cx78zz\">\u003Ca href=\"https://nexte.st/\" rel=\"nofollow\">cargo-nextest\u003C/a> is a Rust test runner.\u003C/p> \u003Cp data-svelte-h=\"svelte-po63xx\">It has a subcommand \u003Ccode>cargo nextest archive\u003C/code> that can archive builds artifacts.\nThis is useful to separate the “build” phase from the “run” phase.\u003C/p> \u003Cp data-svelte-h=\"svelte-16yp2dv\">In the \u003Ca href=\"https://nexte.st/book/reusing-builds.html\" rel=\"nofollow\">official documentation\u003C/a> they\ndescribe some use cases like:\u003C/p> \u003Cul data-svelte-h=\"svelte-15gh482\">\u003Cli>\u003Cstrong>Cross-compilation\u003C/strong>. The build machine has a different architecture, or runs a different operating system, from the target machine.\u003C/li> \u003Cli>\u003Cstrong>Test partitioning\u003C/strong>. Build once on the build machine, then partition test execution across multiple target machines.\u003C/li> \u003Cli>\u003Cstrong>Saving execution time\u003C/strong> on more valuable machines. For example, build tests on a regular machine, then run them on a machine with a GPU attached to it.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-fa7gqx\">We are using it for two reasons:\u003C/p> \u003Cul data-svelte-h=\"svelte-1hjbvmo\">\u003Cli>\u003Cstrong>Test partitioning\u003C/strong>. We build the application in a docker stage and then run\nthe tests in another stage. This way we can separate the build and test phases.\u003C/li> \u003Cli>\u003Cstrong>Passing the binary to the next stage\u003C/strong>. After building the application we archive\nthe build artifacts and then we extract them in the next stage to run the tests.\nFinally we copy the binary to the final “runtime” stage.\u003C/li>\u003C/ul> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## First stage to install the nextest tool\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest \u003Cspan class=\"token keyword\">as\u003C/span> nextest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo install cargo-nextest --locked\u003C/span>\n\n\u003Cspan class=\"token comment\">## Second stage to build the application and package it with nextest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> nextest \u003Cspan class=\"token keyword\">AS\u003C/span> builder\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build\u003C/span>\n\u003Cspan class=\"token comment\"># We archive the build artifacts to reuse them in the next stage\u003C/span>\n\u003Cspan class=\"token comment\"># NOTICE: the application must contains at least one integration test in order\u003C/span>\n\u003Cspan class=\"token comment\"># include the binary in the archive.\u003C/span>\n\u003Cspan class=\"token comment\"># See: https://github.com/nextest-rs/nextest/issues/423\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/archiving-and-reusing-builds.tar.zst\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/build/src/target/debug/archiving-and-reusing-builds\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\">## Third stage to test the application\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> nextest \u003Cspan class=\"token keyword\">AS\u003C/span> tester\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /test/src/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">builder\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">\u003C/span>\n    /build/archiving-and-reusing-builds.tar.zst \u003Cspan class=\"token operator\">\u003C/span>\n    /test/archiving-and-reusing-builds.tar.zst\u003C/span>\n\u003Cspan class=\"token comment\"># We extract the build artifacts from the archive\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --extract-to /test/src/ --no-run --archive-file /test/archiving-and-reusing-builds.tar.zst\u003C/span>\n\u003Cspan class=\"token comment\"># We run the tests. We override the default target-dir to use the application binary,\u003C/span>\n\u003Cspan class=\"token comment\"># otherwise it would be created in a temporary directory and we wouldn't be able to\u003C/span>\n\u003Cspan class=\"token comment\"># copy it in the next stage.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --target-dir-remap /test/src/target/ --cargo-metadata /test/src/target/nextest/cargo-metadata.json --binaries-metadata /test/src/target/nextest/binaries-metadata.json\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> mkdir -p /app/bin/; cp -l /test/src/target/debug/archiving-and-reusing-builds /app/bin/archiving-and-reusing-builds\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/app/bin/archiving-and-reusing-builds\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\">## Fourth stage to run the application in production\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> nextest \u003Cspan class=\"token keyword\">AS\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token comment\"># We take the application binary from the tester stage to ensure the binary we\u003C/span>\n\u003Cspan class=\"token comment\"># use has passed the tests.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">tester\u003C/span>\u003C/span> /app/bin/archiving-and-reusing-builds /app/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/app/archiving-and-reusing-builds\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1nkbu6n\">\u003Cstrong>NOTICE\u003C/strong>: The application must contain at least one integration test in order\ninclude the binary in the archive. See this \u003Ca href=\"https://github.com/nextest-rs/nextest/issues/423\" rel=\"nofollow\">issue\u003C/a>\nfor more info.\u003C/p>\u003C/div> \u003Ch2 id=\"running-container-without-sudo\" data-svelte-h=\"svelte-v5pqya\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-container-without-sudo\">\u003Cspan>#\u003C/span>\u003C/a>Running Container Without Sudo\u003C/h2> \u003Cp data-svelte-h=\"svelte-1pa1gb9\">By default docker is installed and runs containers as \u003Ccode>root\u003C/code>. If you build this image:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1lg13w3\">And you run it with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker build -t docker-rust-app-running-with-root .\ndocker run --rm -it docker-rust-app-running-with-root whoami\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1xp5ccj\">You will see it is executed as \u003Ccode>root\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19l2oa0\">You should not execute containers as \u003Ccode>root\u003C/code> because of:\u003C/p> \u003Col data-svelte-h=\"svelte-56q2gj\">\u003Cli>\u003Cp>\u003Cstrong>The Principle of Least Privilege\u003C/strong>: This is a security concept that encourages the minimal user permission level necessary to perform a task. Running containers as root goes against this principle because if a process inside the container can run with root privileges, it can execute any command inside the container, which could be dangerous if the container gets compromised.\u003C/p>\u003C/li> \u003Cli>\u003Cp>\u003Cstrong>Host System Vulnerability\u003C/strong>: Containers are designed to be isolated from the host system. However, there are ways that a container could potentially interact with the host, particularly if there are misconfigurations or vulnerabilities in the container runtime or the host’s kernel. A container running as root might be able to exploit such vulnerabilities to gain control over the host system.\u003C/p>\u003C/li> \u003Cli>\u003Cp>\u003Cstrong>Immutable Infrastructure\u003C/strong>: Containers are often used as part of an immutable infrastructure, where container images are pre-built and should not change. Running as root makes it easier to make changes to the running container, which can lead to “configuration drift” and unexpected behavior.\u003C/p>\u003C/li> \u003Cli>\u003Cp>\u003Cstrong>Accidental Damage\u003C/strong>: Even if an attacker does not compromise the container, running as root increases the risk of accidental damage by the container’s own applications or administrators. For example, a poorly crafted command could delete critical files or disrupt important processes.\u003C/p>\u003C/li>\u003C/ol> \u003Cp data-svelte-h=\"svelte-16n7gvb\">There are some ways to avoid running the container as \u003Ccode>root\u003C/code>. We will see all of them.\u003C/p> \u003Ch3 id=\"use-the-user-instruction\" data-svelte-h=\"svelte-1kd4y7f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#use-the-user-instruction\">\u003Cspan>#\u003C/span>\u003C/a>Use the \u003Ccode>USER\u003C/code> instruction\u003C/h3> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">USER\u003C/span> www-data\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-ifo8u1\">You can add the \u003Ccode>USER\u003C/code> instruction before the last command. In that example we\nknow that the base image already contains the user \u003Ccode>www-data\u003C/code>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker run --rm -it docker-rust-app-running-with-root cat /etc/passwd | grep www-data\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-163jsvx\">But you can also create a specific user for your application:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> groupadd -r appuser\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> useradd -r -u 1001 -g appuser appuser\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">USER\u003C/span> appuser\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1urcnog\">Using the \u003Ccode>USER\u003C/code> instruction is considered a good practice because by default the container\nwill not run as root. In that example, docker will run the container as the user with the ID \u003Ccode>1001\u003C/code>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-ivivrm\">The Linux Standard Base Core Specification defines three different ranges for\nuser IDs, the value from 0 to 99, 100 to 999, and 1000 and above. The first two\nranges are reserved for system users. All the regular users start from 1000.\nIt’s also important to note that the user ID 0 is reserved for the root user and\nLinux kernel uses the user id and group id to handle the permissions. The host\nmachine and the docker container might have the same user ID but different usernames.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1ne3nlk\">If you run that container, \u003Ccode>appuser\u003C/code> will have the same permissions as the user \u003Ccode>1001\u003C/code>\nin the host system, whatever it is the name of that user in the host machine.\u003C/p> \u003Ch3 id=\"use-the-docker-run---user-argument\" data-svelte-h=\"svelte-7ojjtb\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#use-the-docker-run---user-argument\">\u003Cspan>#\u003C/span>\u003C/a>Use The \u003Ccode>docker run --user\u003C/code> Argument\u003C/h3> \u003Cp data-svelte-h=\"svelte-1gvovnw\">You can also overwrite the user running the container with the argument \u003Ccode>--user\u003C/code>:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker run --user www-data --rm -it docker-rust-app-running-with-root whoami\nwww-data\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1eslp6d\">In this example, even though the image is executed as root by default, it will be\nexecuted as the \u003Ccode>www-data\u003C/code> user.\u003C/p> \u003Cp data-svelte-h=\"svelte-3tgesj\">Notice you can even use a non-existing user in both the host and the docker image.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">$ docker run --user 1001 --rm -it docker-rust-app-running-with-root bash\nI have no name!@895b0f6a3dbb:/app$\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1pa66tj\">All these solutions work but they all have a drawback: you need to know the user\nID at build time (when you build the docker image). You usually want to run the\ncontainer in different environments and sometimes you want to use a different\nuser ID for each environment. For example:\u003C/p> \u003Cul data-svelte-h=\"svelte-16bqamd\">\u003Cli>\u003Cstrong>For development\u003C/strong>: If you are using Ubuntu, your user ID is probably \u003Ccode>1000\u003C/code>. When\nyou run the container locally you want to run it using that ID, so that you don’t\nhave any problems with permissions.\u003C/li> \u003Cli>\u003Cstrong>For CI\u003C/strong>: The servers you are using for continuous integration (for instance, GitHub runners)\nmight use an specif user. You could use some cache folders and maybe you need to\nuse the same user ID as the CI server.\u003C/li> \u003Cli>\u003Cstrong>For production\u003C/strong>: You could create a specific user for your application and use that\nuser ID.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-187e9h7\">With the proposed solutions you would need to rebuild the docker image so that the\nuser ID inside the container is the same as the host user ID.\u003C/p> \u003Ch3 id=\"create-the-user-at-runtime\" data-svelte-h=\"svelte-273n8g\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#create-the-user-at-runtime\">\u003Cspan>#\u003C/span>\u003C/a>Create The User At Runtime\u003C/h3> \u003Cp data-svelte-h=\"svelte-q9n163\">There is al alternative to the previous solutions that makes it possible to \u003Cstrong>run the\ncontainer with different user IDs without rebuilding the image\u003C/strong>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\n\u003Cspan class=\"token comment\">## Compile su-exec\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> gcc\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> ./contrib/dev-tools/su-exec/ /usr/local/src/su-exec/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cc -Wall -Werror -g /usr/local/src/su-exec/su-exec.c -o /usr/local/bin/su-exec; chmod +x /usr/local/bin/su-exec\u003C/span>\n\n\u003Cspan class=\"token comment\">## Application\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> builder\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\">## Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/distroless/cc-debian12:debug \u003Cspan class=\"token keyword\">as\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> [\u003Cspan class=\"token string\">\"/busybox/cp\"\u003C/span>, \u003Cspan class=\"token string\">\"-sp\"\u003C/span>, \u003Cspan class=\"token string\">\"/busybox/sh\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/cat\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/ls\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/env\"\u003C/span>, \u003Cspan class=\"token string\">\"/bin/\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">builder\u003C/span>\u003C/span> /app/target/release/app /usr/local/bin/app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">gcc\u003C/span> \u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> /usr/local/bin/su-exec /bin/su-exec\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> ./share/container/entry_script_sh /usr/local/bin/entry.sh\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ENTRYPOINT\u003C/span> [\u003Cspan class=\"token string\">\"/usr/local/bin/entry.sh\"\u003C/span>]\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/usr/local/bin/app\"\u003C/span>]\u003C/span>\n\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1eodbad\">This is the approach we use in Torrust. You run the docker as \u003Ccode>root\u003C/code> but we always\nuse an entrypoint. That entrypoint creates a new user with an ID provided as an\nenvironment variable.\u003C/p> \u003Cp data-svelte-h=\"svelte-1v8jphd\">The \u003Ccode>entry.sh\u003C/code> script is always called when you run the container because it is\ndefined as an \u003Ccode>ENTRYPOINT\u003C/code>. This “middleware” script creates the user if it does\nnot exist, and then runs the application using the \u003Ca href=\"https://github.com/ncopa/su-exec\" rel=\"nofollow\">su-exec\u003C/a>\nprogram to change the user ID it is executed with.\u003C/p> \u003Cp data-svelte-h=\"svelte-1wsqwjd\">\u003Cstrong>For those who are interested here is our: \u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/share/container/entry_script_sh\" rel=\"nofollow\">entry script\u003C/a>.\u003C/strong>\u003C/p> \u003Cp data-svelte-h=\"svelte-x7o0dz\">As you can read on the su-exec documentation:\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1qseehr\">“su-exec” is a simple tool that will simply execute a program with different privileges.\nThe program will be executed directly and not run as a child, like su and sudo does,\nwhich avoids TTY and signal issues (see below).\u003C/p> \u003Cp data-svelte-h=\"svelte-r9pi87\">Notice that su-exec depends on being run by the root user, non-root users do not\nhave permission to change uid/gid.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1shdd3c\">The advantage of this approach is that you don’t have to worry about the user ID\nwhen you build the docker image. You can run the container as root and then use\nthe entrypoint to create the user and run the application with that user.\u003C/p> \u003Cp data-svelte-h=\"svelte-9qnch7\">The entrypoint also ensures that the application is executed with the correct\npermissions. You cannot run the application as root unless you explicitly set\nthe environment variable \u003Ccode>USER_ID\u003C/code> to \u003Ccode>0\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-4o8v7\">If you want to contribute to Torrust we think that we could simplify the Containerfile\nif the “su-exec” command were available in Rust. Because we could reuse one of the\nRust docker images we are using for other docker stages.\u003C/p> \u003Ch2 id=\"decomposing-the-torrust-tracker-containerfile\" data-svelte-h=\"svelte-1qu4fyq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#decomposing-the-torrust-tracker-containerfile\">\u003Cspan>#\u003C/span>\u003C/a>Decomposing the Torrust Tracker Containerfile\u003C/h2> \u003Cp data-svelte-h=\"svelte-1flhjok\">Finally we can explain line by line what the \u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/Containerfile\" rel=\"nofollow\">Torrust Tracker Containerfile\u003C/a> does.\u003C/p> \u003Cp data-svelte-h=\"svelte-1lylxvu\">Rust apps can be built in \u003Ccode>debug\u003C/code> or \u003Ccode>release\u003C/code> mode. The \u003Ccode>Containerfile\u003C/code> builds both\nmodes and then it runs the tests for both modes. We have removed the \u003Ccode>debug\u003C/code> mode\nto keep the example short. But it is almost the same code. For the \u003Ccode>release\u003C/code> mode\nthe flag \u003Ccode>--release\u003C/code> is added to some commands.\u003C/p> \u003Cp data-svelte-h=\"svelte-14mcm6e\">We can abstract away the stages:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Base Builder Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> chef\u003C/span>\n\u003Cspan class=\"token comment\"># Install tools needed to build the application: cargo-chef cargo-nextest\u003C/span>\n\n\u003Cspan class=\"token comment\">## Tester Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:slim-bookworm \u003Cspan class=\"token keyword\">as\u003C/span> tester\u003C/span>\n\u003Cspan class=\"token comment\"># Install tools needed to test the application: cargo-nextest\u003C/span>\n\n\u003Cspan class=\"token comment\">## Su Exe Compile\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> gcc\u003C/span>\n\u003Cspan class=\"token comment\"># Compile the su-exec program which is used at runtime to change the user running the container.\u003C/span>\n\n\u003Cspan class=\"token comment\">## Chef Prepare (look at project and see wat we need)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> recipe\u003C/span>\n\u003Cspan class=\"token comment\"># Prepare the info needed to build and cache cargo dependencies\u003C/span>\n\n\u003Cspan class=\"token comment\">## Cook (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> dependencies\u003C/span>\n\u003Cspan class=\"token comment\"># Re-hydrate the minimum project skeleton identified by &#96;cargo chef prepare&#96; and build it to cache dependencies\u003C/span>\n\n\u003Cspan class=\"token comment\">## Build Archive (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> dependencies \u003Cspan class=\"token keyword\">AS\u003C/span> build\u003C/span>\n\u003Cspan class=\"token comment\"># build and archive the application\u003C/span>\n\n\u003Cspan class=\"token comment\"># Extract and Test (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> tester \u003Cspan class=\"token keyword\">as\u003C/span> test\u003C/span>\n\u003Cspan class=\"token comment\"># Extract the application from the archived artifacts and run the tests.\u003C/span>\n\u003Cspan class=\"token comment\"># And copy the binary to an specified location so it can be used in the &#96;release&#96;\u003C/span>\n\u003Cspan class=\"token comment\"># stage.\u003C/span>\n\n\u003Cspan class=\"token comment\">## Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/distroless/cc-debian12:debug \u003Cspan class=\"token keyword\">as\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token comment\"># Minimal image to run the app in production.\u003C/span>\n\u003Cspan class=\"token comment\"># Includes the entrypoint to setup and run the application with a different user Id.\u003C/span>\n\n\u003Cspan class=\"token comment\">## Release Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> runtime \u003Cspan class=\"token keyword\">as\u003C/span> release\u003C/span>\n\u003Cspan class=\"token comment\"># Runtime for release mode. It copies the binary from the &#96;test&#96; stage and runs it\u003C/span>\n\u003Cspan class=\"token comment\"># via the entrypoint added in the &#96;runtime&#96; stage.\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-4l2mid\">Let’s see each stage individually.\u003C/p> \u003Cp data-svelte-h=\"svelte-wr5nrh\">First, we have a base builder image where we install basic tools to build the application.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Base Builder Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> chef\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /tmp\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-chef cargo-nextest\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-pglm9y\">There is nothing really strange here. We use the latest Debian “bookworm” at the time\nof writing this article. And we also use \u003Ccode>binstall\u003C/code> to install the binaries, since\nboth of these binaries are written in Rust.\u003C/p> \u003Cp data-svelte-h=\"svelte-hitqor\">The next stage is the base Tester Image. It only installs \u003Ccode>cargo-nextest\u003C/code> to run the tests.\nWe also use the Debian “bookworm” but the \u003Ccode>slim\u003C/code> variant, since we don’t need too much\nto only run the tests.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Base Tester Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:slim-bookworm \u003Cspan class=\"token keyword\">as\u003C/span> tester\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /tmp\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> apt-get update; apt-get install -y curl; apt-get autoclean\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-nextest\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-ce2qns\">The following is another stage used just to compile the small program \u003Ca href=\"https://github.com/ncopa/su-exec\" rel=\"nofollow\">su-exec\u003C/a> that we use to change the user ID when we run the container. The program is written\nin C code, so we only need a C compiler.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Su Exe Compile\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> gcc\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> ./contrib/dev-tools/su-exec/ /usr/local/src/su-exec/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cc -Wall -Werror -g /usr/local/src/su-exec/su-exec.c -o /usr/local/bin/su-exec; chmod +x /usr/local/bin/su-exec\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1qimsxt\">From this point, we start building the application. First, we build the dependencies\nand we cache them into an independent stage.\u003C/p> \u003Cp data-svelte-h=\"svelte-q7ly23\">The first stage is only to “build the recipe” which is the name that \u003Ccode>cargo chef\u003C/code>\ngives to the process of collecting all the information needed to build the application\ndependencies.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Chef Prepare (look at project and see wat we need)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> recipe\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef prepare --recipe-path /build/recipe.json\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-11c4qtl\">Then, cargo dependencies are built using using the recipe created in the previous stage.\n\u003Ccode>cargo nextest\u003C/code> has a subcommand to generate and archive the artifact of the build.\nWe are using it to package and pass the application from one stage to another.\u003C/p> \u003Cp data-svelte-h=\"svelte-i61gzi\">Dependencies are archived but they are not used independently. That line just tests\nthat the dependencies could be archived.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Cook (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> dependencies\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">recipe\u003C/span>\u003C/span> /build/recipe.json /build/recipe.json\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef cook --tests --benches --examples --workspace --all-targets --all-features --recipe-path /build/recipe.json --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/temp.tar.zst --release  ; rm -f /build/temp.tar.zst\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-fhpivi\">In the following stage we build the application. The \u003Ccode>cargo nextest archive\u003C/code> command builds\nand archives the application.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Build Archive (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> dependencies \u003Cspan class=\"token keyword\">AS\u003C/span> build\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/full-example.tar.zst --release\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-blek30\">Now, that we have successfully built the application, we can run the tests. We\nextract the application from the archived artifacts and run the tests.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Extract and Test (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> tester \u003Cspan class=\"token keyword\">as\u003C/span> test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /test/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">build\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">\u003C/span>\n  /build/full-example.tar.zst \u003Cspan class=\"token operator\">\u003C/span>\n  /test/full-example.tar.zst\u003C/span>\n\u003Cspan class=\"token comment\"># It compiles without running the tests to make sure there are no problems with\u003C/span>\n\u003Cspan class=\"token comment\"># the archive.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --extract-to /test/src/ --no-run --archive-file /test/full-example.tar.zst\u003C/span>\n\u003Cspan class=\"token comment\"># We actually run the tests\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --target-dir-remap /test/src/target/ --cargo-metadata /test/src/target/nextest/cargo-metadata.json --binaries-metadata /test/src/target/nextest/binaries-metadata.json\u003C/span>\n\u003Cspan class=\"token comment\"># We copy the application binary to a specified location so we can get it from\u003C/span>\n\u003Cspan class=\"token comment\"># there in the final runtime stage.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> mkdir -p /app/bin/; cp -l /test/src/target/release/full-example /app/bin/full-example\u003C/span>\n\u003Cspan class=\"token comment\"># Since we use su-exec. We need to run the container as root.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> chown -R root:root /app; chmod -R u=rw,go=r,a+X /app; chmod -R a+x /app/bin\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1a43lxq\">Once the application has been built and tested we prepare the runtime. We start\nfrom a minimum “distroless” image variant. We add an entrypoint to setup the application\nand also to make sure we don’t use the \u003Ccode>root\u003C/code> user to run it. The entrypoint just\nruns the application provided as an argument, in our case, our application in \u003Ccode>debug\u003C/code> or\n\u003Ccode>release\u003C/code> mode, depending of which one you want to run.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/\"distroless/cc-debian12:debug \u003Cspan class=\"token keyword\">as\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> [\u003Cspan class=\"token string\">\"/busybox/cp\"\u003C/span>, \u003Cspan class=\"token string\">\"-sp\"\u003C/span>, \u003Cspan class=\"token string\">\"/busybox/sh\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/cat\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/ls\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/env\"\u003C/span>, \u003Cspan class=\"token string\">\"/bin/\"\u003C/span>]\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">gcc\u003C/span> \u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> /usr/local/bin/su-exec /bin/su-exec\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ARG\u003C/span> USER_ID=1000\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> ./share/container/entry_script_sh /usr/local/bin/entry.sh\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ENTRYPOINT\u003C/span> [\u003Cspan class=\"token string\">\"/usr/local/bin/entry.sh\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1ae8cp4\">Finally, we add the \u003Ccode>CMD\u003C/code> instruction so we can execute the application. The\nentrypoint script only runs the application you pass as the first argument. This\nstage is not merge into the previous because in the final version there are two\nfinal runtimes: \u003Ccode>debug\u003C/code> and \u003Ccode>release\u003C/code>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Release Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> runtime \u003Cspan class=\"token keyword\">as\u003C/span> release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">test\u003C/span>\u003C/span> /app/ /usr/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/usr/bin/full-example\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"other-good-practices\" data-svelte-h=\"svelte-12ziiyq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#other-good-practices\">\u003Cspan>#\u003C/span>\u003C/a>Other Good Practices\u003C/h2> \u003Cul data-svelte-h=\"svelte-pbuqhm\">\u003Cli>\u003Cstrong>Minimalism\u003C/strong>: We strive to keep our Dockerfiles lean by only including essential components.\u003C/li> \u003Cli>\u003Cstrong>Explicit versions\u003C/strong>: At least with the minor version number, so you do not get unexpected broken compatibility but you can apply security and bug patches.\u003C/li> \u003Cli>\u003Cstrong>Regular Updates\u003C/strong>: Periodically updating the base image and dependencies to benefit from security patches and updates.\u003C/li> \u003Cli>\u003Cstrong>Health Checks\u003C/strong>: Implementing Docker health checks to monitor the state and health of our containerized application.\u003C/li>\u003C/ul> \u003Ch2 id=\"other-considerations\" data-svelte-h=\"svelte-12m3v1c\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#other-considerations\">\u003Cspan>#\u003C/span>\u003C/a>Other Considerations\u003C/h2> \u003Cul data-svelte-h=\"svelte-1bvek77\">\u003Cli>Since we are using \u003Ccode>su-exec\u003C/code> we need to run the containers as root. We have not\nchecked if this configuration works when you setup docker in \u003Ca href=\"https://docs.docker.com/engine/security/rootless/\" rel=\"nofollow\">Rootless mode\u003C/a>.\u003C/li> \u003Cli>Also, although we mostly mention docker in this article, the \u003Ccode>Containerfile\u003C/code> works\nwith other tools to manage containers like \u003Ca href=\"https://podman.io/\" rel=\"nofollow\">Podman\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cp data-svelte-h=\"svelte-4pkash\">Simple tutorials:\u003C/p> \u003Cul data-svelte-h=\"svelte-5j93uy\">\u003Cli>\u003Ca href=\"https://tms-dev-blog.com/lean-docker-image-for-rust-backend/\" rel=\"nofollow\">Docker image for Rust backend: learn how to\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://collabnix.com/getting-started-with-rust-and-docker/\" rel=\"nofollow\">Getting Started with Rust and Docker\u003C/a> by \u003Ca href=\"https://collabnix.com/author/ajeetraina/\" rel=\"nofollow\">Ajeet Raina\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://tutorialedge.net/rust/rust-docker-tutorial/\" rel=\"nofollow\">Rust Docker Tutorial\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.docker.com/language/rust/build-images/\" rel=\"nofollow\">Build your Rust image\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-bk14i0\">Comprehensive articles like this:\u003C/p> \u003Cul data-svelte-h=\"svelte-19n6tki\">\u003Cli>\u003Ca href=\"https://dev.to/rogertorres/first-steps-with-docker-rust-30oi\" rel=\"nofollow\">First steps with Docker + Rust\u003C/a> by \u003Ca href=\"https://dev.to/rogertorres\" rel=\"nofollow\">Roger Torres\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-rz7o02\">Demos:\u003C/p> \u003Cul data-svelte-h=\"svelte-w3dy1g\">\u003Cli>\u003Ca href=\"https://github.com/hseeberger/hello-rs\" rel=\"nofollow\">Simple dockerized Rust/Axum based HTTP server for demo purposes\u003C/a> by \u003Ca href=\"https://github.com/hseeberger\" rel=\"nofollow\">Heiko Seeberger\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-dl4iv3\">Development using Docker:\u003C/p> \u003Cul data-svelte-h=\"svelte-zmfpgi\">\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=kh1GMRFkzT4&amp;t=2s\" rel=\"nofollow\">Rust Development with Docker\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.docker.com/language/rust/develop/\" rel=\"nofollow\">Develop your Rust application\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-uc1ydm\">Deployments using docker:\u003C/p> \u003Cul data-svelte-h=\"svelte-jf89i3\">\u003Cli>\u003Ca href=\"https://medium.com/@anirudhmurali/how-i-deployed-a-rust-web-app-using-the-rocket-framework-with-docker-424da99b1d8a\" rel=\"nofollow\">How I deployed a Rust web-app using the Rocket framework with Docker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.koyeb.com/tutorials/deploy-a-rust-web-app-with-rocket\" rel=\"nofollow\">Deploy a Rust Web App With Rocket\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-17ghd7g\">Minimum sized container images:\u003C/p> \u003Cul data-svelte-h=\"svelte-6p9xs0\">\u003Cli>\u003Ca href=\"https://github.com/johnthagen/min-sized-rust#containers\" rel=\"nofollow\">min-sized-rust\u003C/a> by \u003Ca href=\"https://github.com/johnthagen\" rel=\"nofollow\">johnthagen\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-ym3too\">Caching dependencies:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r5cmoj\">\u003Cli>\u003Ca href=\"https://blog.logrocket.com/packaging-a-rust-web-service-using-docker/\" rel=\"nofollow\">Packaging a Rust web service using Docker\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://dev.to/mgattozzi/plumbing-the-deps-of-the-crate-caching-rust-docker-builds-2e48\" rel=\"nofollow\">Plumbing the Deps of the Crate: Caching Rust Docker Builds\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://stackoverflow.com/questions/58473606/cache-rust-dependencies-with-docker-build\" rel=\"nofollow\">Cache Rust dependencies with Docker build\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-c87p6b\">Don’t run containers as root:\u003C/p> \u003Cul data-svelte-h=\"svelte-1tvfsrk\">\u003Cli>\u003Ca href=\"https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user\" rel=\"nofollow\">Manage Docker as a non-root user\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.docker.com/engine/security/rootless/\" rel=\"nofollow\">Run the Docker daemon as a non-root user (Rootless mode)\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.docker.com/engine/security/#docker-daemon-attack-surface\" rel=\"nofollow\">Docker daemon attack surface\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.howtogeek.com/devops/why-processes-in-docker-containers-shouldnt-run-as-root/\" rel=\"nofollow\">Why Processes In Docker Containers Shouldn’t Run as Root\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.clickittech.com/devops/docker-security-best-practices/\" rel=\"nofollow\">The Ultimate Docker Security Best Practices for Your Node.js Application\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://stackoverflow.com/questions/68155641/should-i-run-things-inside-a-docker-container-as-non-root-for-safety\" rel=\"nofollow\">Should I run things inside a docker container as non root for safety?\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://betterprogramming.pub/running-a-container-with-a-non-root-user-e35830d1f42a\" rel=\"nofollow\">Docker Tips: Running a Container With a Non Root User\u003C/a> by \u003Ca href=\"https://lucjuggery.medium.com/\" rel=\"nofollow\">Luc Juggery\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/containers/podman/blob/main/docs/tutorials/rootless_tutorial.md\" rel=\"nofollow\">Basic Setup and Use of Podman in a Rootless environment\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://medium.com/@mccode/understanding-how-uid-and-gid-work-in-docker-containers-c37a01d01cf\" rel=\"nofollow\">Understanding how uid and gid work in Docker containers\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1e29q46\">We hope you find this guide useful. Let us know what you think about it!\u003C/p> \u003Cp data-svelte-h=\"svelte-1dx3a01\">We want this article to be a collective effort to document good practices about\nRust and Containers, so we would like to have reviews, comments, new sections, etcetera.\u003C/p> \u003Cp data-svelte-h=\"svelte-gxsd2p\">If you see something wrong or you want to contribute by:\u003C/p> \u003Cul data-svelte-h=\"svelte-x1w50s\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think it could be interesting to have,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1e9qm2v\">If you have any questions or issues please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-172itm0\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p>\u003C/div>\u003C/div>","26 min read",{"title":141,"slug":142,"coverImage":143,"date":144,"updated":6,"excerpt":145,"contributor":24,"contributorSlug":25,"tags":146,"hidden":12,"html":149,"readingTime":150},{"title":184,"slug":185,"coverImage":143,"date":186,"updated":186,"excerpt":187,"contributor":24,"contributorSlug":25,"tags":208,"hidden":12,"html":209,"readingTime":168,"relatedPosts":210},[189,190]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"hello-world-\" data-svelte-h=\"svelte-164pckj\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hello-world-\">\u003Cspan>#\u003C/span>\u003C/a>Hello World! \u003C/h2> \u003Cp data-svelte-h=\"svelte-1kz2xuo\">We haven’t introduced the Torrust Organization in this blog yet, including its vision, mission, and roadmap. This should have been the first post, but after contributing to the BitTorrent ecosystem for over three years, we now have a better understanding of what the BitTorrent protocols offer and how we can enhance the ecosystem.\u003C/p> \u003Cp data-svelte-h=\"svelte-b6ihlm\">Torrust is an Open-Source Organization. It was created by \u003Ca href=\"https://github.com/mickvandijke\" rel=\"nofollow\">@mickvandijke\u003C/a> in 2021. Mick started by forking the UDP tracker from a \u003Ca href=\"https://github.com/naim94a\" rel=\"nofollow\">@naim94a\u003C/a>’s’ repository \u003Ca href=\"https://github.com/naim94a/udpt\" rel=\"nofollow\">https://github.com/naim94a/udpt\u003C/a> and using some packages for the UDP tracker from \u003Ca href=\"https://github.com/greatest-ape\" rel=\"nofollow\">@greatest-ape\u003C/a>’s \u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">Aquatic\u003C/a> repo. \u003Ca href=\"https://github.com/naim94a\" rel=\"nofollow\">@naim94a\u003C/a> had been working on the tracker since December 2012. In August 2022, \u003Ca href=\"https://github.com/Nautilus-Cyberneering\" rel=\"nofollow\">Nautilus Cyberneering\u003C/a> joined the project. \u003Ca href=\"https://github.com/mickvandijke\" rel=\"nofollow\">@mickvandijke\u003C/a> was already in contact with the Nautilus, and Nautilus decided to contribute due to the traction it was getting from the community and the alignment with their interests.\u003C/p> \u003Cp data-svelte-h=\"svelte-1k5fja4\">We would like to thank \u003Ca href=\"https://github.com/naim94a\" rel=\"nofollow\">@naim94a\u003C/a> and \u003Ca href=\"https://github.com/greatest-ape\" rel=\"nofollow\">@greatest-ape\u003C/a> and all other contributors for their invaluable contributions in coding, opening issues, PRs, improving documentation, sharing ideas, etc.\u003C/p> \u003Cp data-svelte-h=\"svelte-gurw2h\">Over the last two years, significant efforts have been made to establish Torrust software as a leading software in the BitTorrent open-source community. We have applied the best languages, tools, and practices to bring a modern, reliable \u003Ca href=\"https://github.com/torrust/torrust-tracker\" rel=\"nofollow\">Tracker\u003C/a> and \u003Ca href=\"https://github.com/torrust/torrust-index\" rel=\"nofollow\">Index\u003C/a>. We are close to releasing the version v3.0.0, which we consider a solid foundation for future web3 projects requiring file-sharing services.\u003C/p> \u003Cp data-svelte-h=\"svelte-azxlt3\">During this time, we have focused not only on building great products but also on contributing to the community in different ways like improving BitTorrent documentation, helping maintainers to maintain their Rust-based BitTorrents packages, participating in protocol discussions, and writing articles about BitTorrent.\u003C/p> \u003Cp data-svelte-h=\"svelte-hm936d\">We have also prioritized onboarding contributors to the organization. We strive to provide a good experience for anyone interested in contributing, whether it’s fixing a small typo, improving documentation, or submitting a large PR with a new feature. We respond quickly and make it easy to contribute, exemplified by the extensive documentation we have written.\u003C/p> \u003Ch2 id=\"why-is-bittorrent-important\" data-svelte-h=\"svelte-4gd3lf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-is-bittorrent-important\">\u003Cspan>#\u003C/span>\u003C/a>Why is BitTorrent important?\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ii666i\">BitTorrent is a peer-to-peer (P2P) file sharing protocol, first released in 2001 by \u003Ca href=\"https://github.com/bramcohen\" rel=\"nofollow\">Bram Cohen\u003C/a>. It revolutionized file distribution across the internet by allowing efficient peer-to-peer sharing without relying on a single centralized server, making it highly resilient and scalable. BitTorrent enables each downloader to become an uploader, creating a network of file sharing that boosts download speeds and balances server loads.\u003C/p> \u003Cp data-svelte-h=\"svelte-ek6d9m\">BitTorrent has been very often related to illegal sharing of copyrighted material, it’s worth noting that BitTorrent itself is not illegal. It is a tool, and like any tool, its legality depends on how it’s used. It has numerous legitimate uses such as distributing open-source software, sharing large datasets, real-time communications, and even reducing server load for large-scale events like product launches or game updates.\u003C/p> \u003Cp data-svelte-h=\"svelte-a783k\">There have been many interesting and useful projects over the years, such as:\u003C/p> \u003Cul data-svelte-h=\"svelte-zhqt35\">\u003Cli>\u003Ca href=\"https://academictorrents.com/\" rel=\"nofollow\">https://academictorrents.com/\u003C/a> for sharing enormous datasets, for researchers, by researchers.\u003C/li> \u003Cli>\u003Ca href=\"https://help.archive.org/help/archive-bittorrents/\" rel=\"nofollow\">The Internet Archive\u003C/a> is also using torrents since 2012.\u003C/li> \u003Cli>\u003Ca href=\"https://www.legittorrents.info/\" rel=\"nofollow\">https://www.legittorrents.info/\u003C/a> was a collection of legal torrents.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1a1enxl\">More recently, the \u003Ca href=\"https://webtorrent.io/\" rel=\"nofollow\">webtorrent\u003C/a> extension has enabled BitTorrent clients to run in a browser, unlocking new capabilities like:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r3wa61\">\u003Cli>\u003Ca href=\"https://peertube.cpy.re/\" rel=\"nofollow\">PeerTube\u003C/a>: Prototype of a decentralized video streaming platform in the web browser.\u003C/li> \u003Cli>\u003Ca href=\"https://cinetimes.org/\" rel=\"nofollow\">CineTimes\u003C/a>: A streaming website of public domain movies.\u003C/li> \u003Cli>\u003Ca href=\"https://www.bitchute.com/\" rel=\"nofollow\">BitChute\u003C/a>: A decentralized video streaming social network.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-87h3tw\">You can find more \u003Ca href=\"https://webtorrent.io/faq\" rel=\"nofollow\">here\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1n6t80c\">Despite the emergence of blockchain alternatives like \u003Ca href=\"https://ipfs.tech/\" rel=\"nofollow\">IPFS\u003C/a> (InterPlanetary File System) or \u003Ca href=\"https://www.btfs.io/\" rel=\"nofollow\">BitTorrent File System 3.0\u003C/a>, we believe off-chain basic BitTorrent protocols without monetary incentives still fit many decentralization use cases. Many web3 applications could be based on what we already have, as shown in this \u003Ca href=\"https://webtorrent.io/faq\" rel=\"nofollow\">list\u003C/a>.\u003C/p> \u003Ch2 id=\"current-bittorrent-issues\" data-svelte-h=\"svelte-1a7f7y3\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#current-bittorrent-issues\">\u003Cspan>#\u003C/span>\u003C/a>Current BitTorrent Issues\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ahm3oe\">After being involved in the BitTorrent ecosystem for a couple of years, we believe there is a lot of room for improvement. For example:\u003C/p> \u003Ch3 id=\"documentation\" data-svelte-h=\"svelte-1l6himn\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#documentation\">\u003Cspan>#\u003C/span>\u003C/a>Documentation\u003C/h3> \u003Cp data-svelte-h=\"svelte-1h1okdb\">The source of true for BitTorrent protocols are \u003Ca href=\"https://www.bittorrent.org/beps/bep_0000.html\" rel=\"nofollow\">BEPs\u003C/a>. While it’s a good starting point, the information provided is often insufficient for implementation. Important details are sometimes missing, and there are commonly applied extensions that are not documented.\u003C/p> \u003Cp data-svelte-h=\"svelte-1rufgbm\">We aim to improve the official documentation in two stages. . First, we will write new \u003Ca href=\"https://github.com/torrust/teps\" rel=\"nofollow\">Torrust Enhancement Proposals\u003C/a>, and some of them could be converted into BEPs if they are generic enough.\u003C/p> \u003Cp data-svelte-h=\"svelte-1vipdn\">Not only the official protocol documentation is sometimes vague but also clients, trackers implementations, etc. We think the documentations should be:\u003C/p> \u003Cul data-svelte-h=\"svelte-1cnh3mu\">\u003Cli>Clear\u003C/li> \u003Cli>Comprehensive\u003C/li> \u003Cli>Accessible\u003C/li> \u003Cli>Up-to-date\u003C/li> \u003Cli>User-focused\u003C/li> \u003Cli>Interactive and engaging\u003C/li> \u003Cli>Easy to update and maintain\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-lobec9\">And that should be for all levels, from low-level protocols to high-level end-user applications.\u003C/p> \u003Cp data-svelte-h=\"svelte-8isw5t\">At Torrust, we document:\u003C/p> \u003Cul data-svelte-h=\"svelte-1nu6f04\">\u003Cli>Classes\u003C/li> \u003Cli>Modules\u003C/li> \u003Cli>Crates\u003C/li> \u003Cli>Application (including setup, how to use, ADRs, licenses, etc)\u003C/li> \u003Cli>Processes ((including how to contribute, how to release new version, how to make decisions, etc)\u003C/li>\u003C/ul> \u003Ch3 id=\"sustainability\" data-svelte-h=\"svelte-1555276\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#sustainability\">\u003Cspan>#\u003C/span>\u003C/a>Sustainability\u003C/h3> \u003Cp data-svelte-h=\"svelte-1uyvq8m\">Many projects are very old, which isn’t necessarily bad because they have proven to be robust and reliable. However, onboarding new contributors is often challenging.\u003C/p> \u003Ch3 id=\"scalability\" data-svelte-h=\"svelte-1pcrlzw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#scalability\">\u003Cspan>#\u003C/span>\u003C/a>Scalability\u003C/h3> \u003Cp data-svelte-h=\"svelte-hebmyo\">We haven’t seen many projects ready to scale horizontally. The focus is often on optimization for a single server. For example, the Tracker uses memory to keep peer lists, making it harder to use multiple servers. While our Tracker still has this limitation, other trackers like \u003Ca href=\"https://erdgeist.org/arts/software/opentracker/\" rel=\"nofollow\">opentracker\u003C/a> can run in a cluster.\u003C/p> \u003Ch3 id=\"lack-of-interest\" data-svelte-h=\"svelte-1kauuol\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#lack-of-interest\">\u003Cspan>#\u003C/span>\u003C/a>Lack of interest\u003C/h3> \u003Cp data-svelte-h=\"svelte-14ma3ct\">Despite the advent of blockchain, it seems that average people are not concerned about the problems of centralization. Blockchain projects might still attract developers and users, but BitTorrent is often seen as “old” technology for a problem that people don’t see or care about.\u003C/p> \u003Ch3 id=\"missing-features\" data-svelte-h=\"svelte-vs3fos\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#missing-features\">\u003Cspan>#\u003C/span>\u003C/a>Missing features\u003C/h3> \u003Cp data-svelte-h=\"svelte-z7jnql\">Several missing features make it harder to use BitTorrent in modern web3 applications:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pagpfy\">\u003Cli>\u003Cstrong>Versioning\u003C/strong>: There is no official way to create versions of the same torrent. Releasing new versions requires creating a completely new torrent, which duplicates its contents.\u003C/li> \u003Cli>\u003Cstrong>Guaranteed Seeding\u003C/strong>: Torrents might include URLs for seeding, but hosting the content when no peer is sharing the torrent can be challenging. Blockchain-based solutions solve this problem with monetary incentives.\u003C/li> \u003Cli>\u003Cstrong>Standards for Content Formats\u003C/strong>: Even if you build a web3 app based on BitTorrent, interoperability is not guaranteed if content doesn’t follow standards. For example, if you want to build a “hiking” app, you should specify the format of the files included in the torrents: title, description, track, images, waypoints, etc.\u003C/li>\u003C/ul> \u003Ch2 id=\"vision\" data-svelte-h=\"svelte-1fzx1sz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#vision\">\u003Cspan>#\u003C/span>\u003C/a>Vision\u003C/h2> \u003Cp data-svelte-h=\"svelte-1yki8nj\">Have you ever considered what would happen if the three big hosting providers (AWS, Azure, Google) disappeared?\u003C/p> \u003Cp data-svelte-h=\"svelte-wxd1rw\">You would probably be affected, just like millions of others. The internet was conceived as a decentralized network (Usenet, DNS, Fidonet, etc.), but it has become increasingly centralized, raising the risk of a global collapse. Decentralized apps are more resilient, though more complex to build and less efficient.\u003C/p> \u003Cp data-svelte-h=\"svelte-zh0sca\">There is content that we should all care about, such as scientific papers, datasets, and user-generated data like Wikipedia.\u003C/p> \u003Cp data-svelte-h=\"svelte-1jhr00p\">Decentralization is the only way to make data truly open and accessible for all. It also allows for interoperability and data migration, so data owners are not locked into a specific provider.\u003C/p> \u003Cp data-svelte-h=\"svelte-pzj23e\">Our vision is to \u003Cstrong>enable future generations to build a resilient information repositories that ensures data access for everyone\u003C/strong>. There is a lot of valuable information locked in data centers that could be lost forever. For example, if you enjoy hiking, you might use an app to follow a track and find the starting point. This cultural heritage, created over generations, could be needed again in the future.\u003C/p> \u003Ch2 id=\"mission\" data-svelte-h=\"svelte-a67asb\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#mission\">\u003Cspan>#\u003C/span>\u003C/a>Mission\u003C/h2> \u003Cp data-svelte-h=\"svelte-193jguq\">Where does Torrust fit into this picture? We aim to improve upon this impressive technology. Torrust is dedicated to developing robust, fault-tolerant tools for the BitTorrent ecosystem, with a focus on providing good testing coverage and thorough documentation for developers and users alike.\u003C/p> \u003Cp data-svelte-h=\"svelte-1nsj51\">Our current portfolio includes a Tracker and an Index. The tracker, written in Rust, is a server that helps coordinate peers in the BitTorrent protocol. The Index is a website that serves as a database of torrent files, comprising a frontend web app (Index GUI) for user interaction and a backend REST API written in Rust for data and business logic (Index).\u003C/p> \u003Cp data-svelte-h=\"svelte-inr52u\">We are planning to:\u003C/p> \u003Cul data-svelte-h=\"svelte-176lr2t\">\u003Cli>Provide these two components as a first step. In the medium term, we would like to extract more packages that could be used by other open-source BitTorrent projects, such as a core tracker, a tracker client library, etc.\u003C/li> \u003Cli>Build the foundations (libraries, apps, etc.) that will enable the creation of better BitTorrent apps more efficiently in the future.\u003C/li>\u003C/ul> \u003Ch2 id=\"roadmap\" data-svelte-h=\"svelte-171157t\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#roadmap\">\u003Cspan>#\u003C/span>\u003C/a>Roadmap\u003C/h2> \u003Cp data-svelte-h=\"svelte-equgtn\">Core:\u003C/p> \u003Cul data-svelte-h=\"svelte-ao54ly\">\u003Cli>Implement more BEPs.\u003C/li> \u003Cli>Support for \u003Ca href=\"https://webtorrent.io/\" rel=\"nofollow\">WebTorrent\u003C/a>.\u003C/li> \u003Cli>Extract packages that could be useful for other OS projects: tracker client, tracker checker.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1vcoczx\">New features:\u003C/p> \u003Cul data-svelte-h=\"svelte-13rykkv\">\u003Cli>Permanent keys for the Tracker.\u003C/li> \u003Cli>Peer and torrents specific statistics.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-sdcvrl\">Persistence:\u003C/p> \u003Cul data-svelte-h=\"svelte-1hiupqh\">\u003Cli>Support other databases like PostgreSQL.\u003C/li> \u003Cli>Migration to NoSQL?.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-q2yqsw\">Performance:\u003C/p> \u003Cul data-svelte-h=\"svelte-eeulbu\">\u003Cli>More optimizations for the tracker.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-p5rrof\">Integrations:\u003C/p> \u003Cul data-svelte-h=\"svelte-1u4mq5k\">\u003Cli>Monitoring (Prometheus).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-zj5j9u\">Improve interoperability:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t8iigk\">\u003Cli>Better support for Windows.\u003C/li> \u003Cli>Docker images for other architectures.\u003C/li>\u003C/ul> \u003Ch2 id=\"why-should-you-consider-collaborating-with-us\" data-svelte-h=\"svelte-x2zvve\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-should-you-consider-collaborating-with-us\">\u003Cspan>#\u003C/span>\u003C/a>Why should you consider collaborating with us?\u003C/h2> \u003Cp data-svelte-h=\"svelte-15ewmez\">Torrust is an excellent way to learn and gain practical experience with Rust and cutting-edge technologies that are quickly gaining popularity in the industry. It is also a fantastic opportunity to be part of a community that values knowledge sharing and collaboration. You can contribute to making data more open and accessible, potentially building an alternative infrastructure that can help avoid data loss or monopolization, which can be crucial for the survival of humanity.\u003C/p> \u003Ch2 id=\"contributing\" data-svelte-h=\"svelte-1gcj59h\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#contributing\">\u003Cspan>#\u003C/span>\u003C/a>Contributing\u003C/h2> \u003Cp data-svelte-h=\"svelte-zbwu22\">If you see something wrong or you want to contribute to this article by:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pxkwtk\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think that could be interesting to have,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-jnq0pp\">If you have any questions or issues please open an issue in the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-psntnz\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li> \u003Cli>Torrust Compose: \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">https://github.com/torrust/torrust-compose\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p>\u003C/div>\u003C/div>",[211,212,213],{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":141,"slug":142,"coverImage":143,"date":144,"updated":6,"excerpt":145,"contributor":24,"contributorSlug":25,"tags":146,"hidden":12,"html":149,"readingTime":150},{"title":215,"slug":216,"coverImage":217,"date":218,"updated":6,"excerpt":219,"contributor":24,"contributorSlug":25,"tags":220,"hidden":12,"html":226,"readingTime":168,"relatedPosts":227},"Profiling the Torrust BitTorrent UDP Tracker","profiling-the-torrust-bittorrent-udp-tracker","/images/posts/profiling-the-torrust-bittorrent-udp-tracker/profiling-the-torrust-bittorrent-udp-tracker.webp","2024-03-25T00:00:00.000Z","Dive into the advanced profiling techniques driving the Torrust BitTorrent Tracker's performance. This post uncovers the tools and methods we leverage to ensure the tracker's efficiency, scalability, and our journey towards optimizing peer-to-peer file sharing.",[41,221,222,223,224,225],"Profiling","UDP Tracker","Flamegraph","Kcachegrind","Valgrind"," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-1m3njcc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of Contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-a8wx0q\">\u003Cli>\u003Ca href=\"#introduction\">Introduction\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#understanding-the-tracker\">Understanding The Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#current-challenges\">Current Challenges\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#internal-repository-benchmarking\">Internal Repository Benchmarking\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#profiling-with-valgrind\">Profiling With Valgrind\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#profiling-with-perf\">Profiling With Perf\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#conclusion\">Conclusion\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#acknowledgments\">Acknowledgments\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#links\">Links\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-p2wyqp\">In our quest to elevate the Torrust BitTorrent Tracker’s performance, we’ve embraced a suite of sophisticated benchmarking and profiling tools. This article builds on our previous discussion, ”\u003Ca href=\"benchmarking-the-torrust-bittorrent-tracker\">Benchmarking the Torrust BitTorrent Tracker\u003C/a>” and delves into the metrics that guide our optimization efforts. Join us as we explore the intricacies of profiling in the dynamic landscape of BitTorrent technology.\u003C/p> \u003Cp data-svelte-h=\"svelte-bw563p\">In the previous article we introduced to the community the benchmarking tools we are using at the moment to know whether the Tracker performs at the same level as other applications on the market.\u003C/p> \u003Cp data-svelte-h=\"svelte-ur42q\">With those benchmarking tools we ensure that the Tracker has a good performance and we don’t have regressions. If you are curious about how we do benchmarking you can read the ”\u003Ca href=\"benchmarking-the-torrust-bittorrent-tracker\">Benchmarking the Torrust BitTorrent Tracker\u003C/a>” article.\u003C/p> \u003Cp data-svelte-h=\"svelte-xrh8z6\">In this article we will explain how we are collecting metrics to know which parts of the code we should improve.\u003C/p> \u003Ch2 id=\"understanding-the-tracker\" data-svelte-h=\"svelte-rkyc3w\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#understanding-the-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Understanding The Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-12tv1np\">Before you continue reading this article you should know a little bit about the tracker internal structure. You can see an overview on the ”\u003Ca href=\"benchmarking-the-torrust-bittorrent-tracker\">Benchmarking the Torrust BitTorrent Tracker\u003C/a>” article.\u003C/p> \u003Cimg srcset=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png\" src=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png\" alt=\"Torrust Architecture\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Ch2 id=\"current-challenges\" data-svelte-h=\"svelte-152gobe\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#current-challenges\">\u003Cspan>#\u003C/span>\u003C/a>Current Challenges\u003C/h2> \u003Cp data-svelte-h=\"svelte-10abmqn\">Balancing feature-rich functionality with performance is our central challenge. The \u003Cstrong>Torrents Repository\u003C/strong>, a critical component, has been our focus, serving as the primary bottleneck for scaling request handling capabilities.\u003C/p> \u003Cp data-svelte-h=\"svelte-1iraxfy\">Regardless which protocol clients use to connect to the tracker, eventually all requests reach the internal “Tracker” domain service. This tracker contains a repository with the list of all torrents. Each entry on the list contains two pieces of information:\u003C/p> \u003Cul data-svelte-h=\"svelte-12ux8dn\">\u003Cli>\u003Cstrong>The statistics about that torrent\u003C/strong>: number of seeders, leechers and peers that have completed downloading.\u003C/li> \u003Cli>\u003Cstrong>The peer list\u003C/strong>: a list of all the clients announcing the same torrent (swarm).\u003C/li>\u003C/ul> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"info_hash\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"090c6d4fb3a03191c4ef1fda6236ef0efb2d5c10\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"seeders\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"completed\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"leechers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"peers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"peer_id\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"id\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"0x2d71423030303030303030303030303030303031\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"client\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token null keyword\">null\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"peer_addr\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"0.0.0.0:17548\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"updated\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1709916034742\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"updated_milliseconds_ago\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1709916034742\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"uploaded\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"downloaded\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"left\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"event\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Completed\"\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\t\u003Cspan class=\"token punctuation\">]\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-g5f19h\">The reason why we have been focusing on that part is because we think that’s the main bottleneck if we want to increase the number of requests the tracker can handle per second.\u003C/p> \u003Cp data-svelte-h=\"svelte-gomc2i\">The \u003Ccode>announce\u003C/code> request is the most important request a tracker needs to handle. Peers get the list of other peers from the tracker by making announce requests. The purpose of that request is:\u003C/p> \u003Cul data-svelte-h=\"svelte-zqyhcf\">\u003Cli>To include the peer making the request in the list of peers which are seeding or downloading the torrent.\u003C/li> \u003Cli>Return the list of other peers so that the client can start asking for torrent pieces to the other peers.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1xjkt7m\">Every request is a write/read request. The system is intensive in writes. All requests eventually try to acquire a write lock to include themselves in the peer list. That’s why we think that’s the main bottleneck in our implementation, at the moment. For that reason we have been trying different implementations of the torrents repository:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">rust\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-rust\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-rust\">\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockStd\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntrySingle\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockStdMutexStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockStd\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexStd\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockStdMutexTokio\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockStd\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexTokio\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockTokio\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockTokio\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntrySingle\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockTokioMutexStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockTokio\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexStd\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockTokioMutexTokio\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockTokio\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexTokio\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsSkipMapMutexStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">CrossbeamSkipList\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexStd\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> \u003Cspan class=\"token comment\">// Default\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsSkipMapMutexParkingLot\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">CrossbeamSkipList\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexParkingLot\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsSkipMapRwLockParkingLot\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">CrossbeamSkipList\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryRwLockParkingLot\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsDashMapMutexStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">XacrimonDashMap\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexStd\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1pecre8\">The default implementation used in production is \u003Ccode>TorrentsSkipMapMutexStd\u003C/code>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1wyma0n\">\u003Cstrong>NOTICE\u003C/strong>: All implementations are based on types that support ordering like \u003Ccode>BTreeMap\u003C/code> or \u003Ccode>SkipMap\u003C/code>. The reason we use those types is because the tracker API has an endpoint where you can get the ordered list of all torrents in the tracker repository.\u003C/p>\u003C/div> \u003Ch2 id=\"internal-repository-benchmarking\" data-svelte-h=\"svelte-109aklx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#internal-repository-benchmarking\">\u003Cspan>#\u003C/span>\u003C/a>Internal Repository Benchmarking\u003C/h2> \u003Cp data-svelte-h=\"svelte-i7tg8m\">As we explained in a previous article (”\u003Ca href=\"benchmarking-the-torrust-bittorrent-tracker\">Benchmarking the Torrust BitTorrent Tracker\u003C/a>”) you can run the benchmark for those different repository implementations with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cargo bench -p torrust-tracker-torrent-repository\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-vsfz9m\">The output at the time of writing this post is similar to:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">     Running benches/repository_benchmark.rs (target/release/deps/repository_benchmark-a9b0013c8d09c3c3)\nadd_one_torrent/RwLockStd\n                        time:   [63.057 ns 63.242 ns 63.506 ns]\nFound 12 outliers among 100 measurements (12.00%)\n  2 (2.00%) low severe\n  2 (2.00%) low mild\n  2 (2.00%) high mild\n  6 (6.00%) high severe\nadd_one_torrent/RwLockStdMutexStd\n                        time:   [62.505 ns 63.077 ns 63.817 ns]\nFound 11 outliers among 100 measurements (11.00%)\n  4 (4.00%) high mild\n  7 (7.00%) high severe\nBenchmarking add_one_torrent/RwLockStdMutexTokio: Collecting 100 samples in estimated 1.0004 s (10M iterationsadd_one_torrent/RwLockStdMutexTokio\n                        time:   [98.440 ns 98.551 ns 98.660 ns]\nFound 4 outliers among 100 measurements (4.00%)\n  3 (3.00%) low mild\n  1 (1.00%) high severe\nadd_one_torrent/RwLockTokio\n                        time:   [107.84 ns 108.18 ns 108.54 ns]\nFound 3 outliers among 100 measurements (3.00%)\n  2 (2.00%) low mild\n  1 (1.00%) high mild\nBenchmarking add_one_torrent/RwLockTokioMutexStd: Collecting 100 samples in estimated 1.0001 s (8.7M iterationadd_one_torrent/RwLockTokioMutexStd\n                        time:   [116.34 ns 116.48 ns 116.63 ns]\nFound 2 outliers among 100 measurements (2.00%)\n  1 (1.00%) high mild\n  1 (1.00%) high severe\nBenchmarking add_one_torrent/RwLockTokioMutexTokio: Collecting 100 samples in estimated 1.0005 s (6.9M iteratiadd_one_torrent/RwLockTokioMutexTokio\n                        time:   [143.39 ns 143.51 ns 143.63 ns]\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"profiling-with-valgrind\" data-svelte-h=\"svelte-dn87f4\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#profiling-with-valgrind\">\u003Cspan>#\u003C/span>\u003C/a>Profiling With Valgrind\u003C/h2> \u003Cp data-svelte-h=\"svelte-u2mco7\">“Valgrind is an instrumentation framework for building dynamic analysis tools”. In fact it’s a suite of tools. The tool we are going to use is \u003Ccode>callgrind\u003C/code> which collects data that can be later visualized with \u003Ccode>kcachegrind\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-15g0w3i\">Valgrind, coupled with Kcachegrind, offers a powerful profiling solution for in-depth analysis of BitTorrent tracker performance. By simulating cache behavior and collecting call graphs, developers gain valuable insights into code execution dynamics and potential optimizations.\u003C/p> \u003Cp data-svelte-h=\"svelte-pwuqah\">In order to profile the UDP tracker you need to:\u003C/p> \u003Col data-svelte-h=\"svelte-1juzoy5\">\u003Cli>Build and run the tracker for profiling.\u003C/li> \u003Cli>Make requests to the tracker while it’s running.\u003C/li>\u003C/ol> \u003Cp data-svelte-h=\"svelte-awnev1\">Build and run the binary for profiling with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">RUSTFLAGS=&#39;-g&#39; cargo build --release --bin profiling \\\n   &amp;&amp; export TORRUST_TRACKER_CONFIG_TOML_PATH=&quot;./share/default/config/tracker.udp.benchmarking.toml&quot; \\\n   &amp;&amp; valgrind \\\n     --tool=callgrind \\\n     --callgrind-out-file=callgrind.out \\\n     --collect-jumps=yes \\\n     --simulate-cache=yes \\\n     ./target/release/profiling 60\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1h4ju63\">\u003Cstrong>NOTICE:\u003C/strong> You should make requests to the services you want to profile. For example, using the \u003Ca href=\"./benchmarking-the-torrust-bittorrent-tracker\">Aquatic UDP load test\u003C/a>.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1hu7esm\">After running the tracker with \u003Ccode>valgrind\u003C/code> it generates a file called \u003Ccode>callgrind.out\u003C/code>\nthat you can open with \u003Ccode>kcachegrind\u003C/code>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">kcachegrind callgrind.out\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cimg srcset=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/kcachegrind-screenshot.png, /images/posts/profiling-the-torrust-bittorrent-udp-tracker/kcachegrind-screenshot.png, /images/posts/profiling-the-torrust-bittorrent-udp-tracker/kcachegrind-screenshot.png\" src=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/kcachegrind-screenshot.png\" alt=\"Visualizing profiling data with kcachegrind\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-mo72iu\">You have information like:\u003C/p> \u003Cul data-svelte-h=\"svelte-1bfh9pj\">\u003Cli>How many times a function is called (\u003Ccode>Called\u003C/code> column).\u003C/li> \u003Cli>The total amount of time spent running a function (\u003Ccode>Incl.\u003C/code> column).\u003C/li> \u003Cli>The total amount of time spent running a function excluding child functions (\u003Ccode>Self\u003C/code> column).\u003C/li> \u003Cli>Etcetera.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1btcmym\">But one of the most interesting things it’s the interactive “Call Graph” where you can navigate through functions seeing how much time they spend.\u003C/p> \u003Cp data-svelte-h=\"svelte-g7mp2l\">The main problem with this tool is the asynchronous code. Functions executed in tokio spawned tasks are not shown directly. Since the Torrust Tracker makes an intense use of async code that makes it harder to reach conclusions from the tool.\u003C/p> \u003Cp data-svelte-h=\"svelte-ozqz56\">There are alternatives that we have not tried yet:\u003C/p> \u003Col data-svelte-h=\"svelte-3noc7e\">\u003Cli>Use other tools like \u003Ca href=\"https://github.com/tokio-rs/console\" rel=\"nofollow\">tokio-console\u003C/a>.\u003C/li> \u003Cli>Insert your custom profiling functions in the code.\u003C/li> \u003Cli>Isolate the sync parts and profile them independently. For example, you could profile only the Torrent Repository or the Tracker domain Service.\u003C/li>\u003C/ol> \u003Ch2 id=\"profiling-with-perf\" data-svelte-h=\"svelte-1ia110c\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#profiling-with-perf\">\u003Cspan>#\u003C/span>\u003C/a>Profiling With Perf\u003C/h2> \u003Cp data-svelte-h=\"svelte-1kerjib\">Another alternative for profiling are flamegraphs. There is a crate called \u003Ca href=\"https://github.com/flamegraph-rs/flamegraph\" rel=\"nofollow\">cargo flamegraph\u003C/a> that allows you to easily generate flamegraphs that you can visualize in a modern browser.\u003C/p> \u003Cp data-svelte-h=\"svelte-szcvma\">Flamegraphs offer a visual representation of code execution, providing invaluable insights into performance bottlenecks within the tracker codebase. By utilizing flamegraph profiling, developers can pinpoint hotspots and inefficiencies, guiding optimization efforts for enhanced performance.\u003C/p> \u003Cp data-svelte-h=\"svelte-13l7fn0\">After installing the \u003Ccode>cargo flamegraph\u003C/code> package you can generate the flamegraph with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">TORRUST_TRACKER_CONFIG_TOML_PATH=&quot;./share/default/config/tracker.udp.benchmarking.toml&quot; cargo flamegraph --bin=profiling -- 60\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-9ydouq\">Running the \u003Ccode>cargo flamegraph\u003C/code> running the whole service produces a flamegraph like \u003Ca href=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/flamegraph.svg\">this\u003C/a>:\u003C/p> \u003Cp data-svelte-h=\"svelte-1p0e1xw\">\u003Cimg src=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/flamegraph.svg\" alt=\"Visualizing profiling data with flamegraphs\">\u003C/p> \u003Cp data-svelte-h=\"svelte-18wll46\">\u003Ca href=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/flamegraph.svg\">Click here to see the interactive flamegraph\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1vu9p2n\">As you can see, there are a lot functions for the tokio package but if you see at the top of the flame you will see the functions in the \u003Ccode>torrust_tracker\u003C/code> namespace.\u003C/p> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-hfwgse\">Although using these tools with async code can be very challenging at least you can use them to confirm if you are making an effort on improving the performance on the right place. And you can also detect parts very slow parts.\u003C/p> \u003Cp data-svelte-h=\"svelte-1bu58i0\">And as you can see more than 90% of the time is spent on the \u003Ccode>Tracker::announce\u003C/code> method in these two functions:\u003C/p> \u003Cul data-svelte-h=\"svelte-1f8lnhz\">\u003Cli>\u003Ccode>Tracker::update_torrent_with_peer_and_get_stats\u003C/code>.\u003C/li> \u003Cli>\u003Ccode>Tracker::get_torrent_peers_for_peer\u003C/code>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1gdfb2n\">Which are the functions that need a lock to write and read in the \u003Ccode>Torrent Repository\u003C/code>. Notice that it is the code we are focused on improving right now.\u003C/p> \u003Cp data-svelte-h=\"svelte-gxsd2p\">If you see something wrong or you want to contribute by:\u003C/p> \u003Cul data-svelte-h=\"svelte-1jpxkfh\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think that could be interesting to add,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-jnq0pp\">If you have any questions or issues please open an issue in the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-psntnz\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li> \u003Cli>Torrust Compose: \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">https://github.com/torrust/torrust-compose\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-1beqmgs\">Many thanks to \u003Ca href=\"https://github.com/bravit\" rel=\"nofollow\">Vitaly Bragilevsky\u003C/a> and others for sharing the talks about profiling.\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cp data-svelte-h=\"svelte-s0ys1s\">Torrust Tracker Documentation for:\u003C/p> \u003Cul data-svelte-h=\"svelte-15ln9ws\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/docs/benchmarking.md\" rel=\"nofollow\">Benchmarking\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/docs/profiling.md\" rel=\"nofollow\">Profiling\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1hod1vn\">Profiling tools:\u003C/p> \u003Cul data-svelte-h=\"svelte-hjky6h\">\u003Cli>\u003Ca href=\"https://valgrind.org/\" rel=\"nofollow\">valgrind\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://kcachegrind.github.io/\" rel=\"nofollow\">kcachegrind\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/flamegraph-rs/flamegraph\" rel=\"nofollow\">flamegraph\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-7bt0ya\">Talks about profiling:\u003C/p> \u003Cul data-svelte-h=\"svelte-ybsdk\">\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=X6Xz4CRd6kw&amp;t=191s\" rel=\"nofollow\">Profiling Rust Programs with valgrind, heaptrack, and hyperfine\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=8FAdY_0DpkM\" rel=\"nofollow\">RustConf 2023 - Profiling async applications in Rust by Vitaly Bragilevsky\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=JRMOIE_wAFk&amp;t=8s\" rel=\"nofollow\">Profiling Code in Rust - by Vitaly Bragilevsky - Rust Linz, December 2022\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=h-0HpCblt3A\" rel=\"nofollow\">Xdebug 3 Profiling: 2. KCachegrind tour\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-160mg43\">Concurrent hash table data structures:\u003C/p> \u003Cul data-svelte-h=\"svelte-8ott72\">\u003Cli>\u003Ca href=\"https://docs.rs/dashmap/latest/dashmap/\" rel=\"nofollow\">DashMap\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.rs/flurry/latest/flurry/\" rel=\"nofollow\">flurry\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1w1gd8o\">Tools for profiling/debugging async code:\u003C/p> \u003Cul data-svelte-h=\"svelte-1g3ycg\">\u003Cli>\u003Ca href=\"https://github.com/tokio-rs/console\" rel=\"nofollow\">tokio-console\u003C/a>.\u003C/li>\u003C/ul>\u003C/div>\u003C/div>",[228,229,232],{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":230,"hidden":12,"html":231,"readingTime":44},[41,42]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-m3c9hm\">In the ever-evolving landscape of BitTorrent technology, performance and scalability are paramount. Torrust stands at the forefront, offering a suite of open-source software products designed to enhance peer-to-peer file sharing. At the heart of this suite is the \u003Ca href=\"https://github.com/torrust/torrust-tracker\" rel=\"nofollow\">Torrust BitTorrent Tracker\u003C/a>, a Rust-based engine crafted for efficiency and speed. This post will introduce you to the benchmarking tools we are using at the moment for the tracker. It will also shed light on its performance and how it stacks up against its contemporaries.\u003C/p> \u003Cp data-svelte-h=\"svelte-16u4lb6\">Before going into details we should explain what are the tradeoffs we did on the design of the Torrust Tracker. Our goal is to design a robust, reliable and fast tracker but at the same time a feature-reach and sustainable one. Very often those two groups of objectives are exclusive. We know that being the fastest tracker implies some drawbacks. In general, our rule is:\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1xu4f3t\">“Embracing a slight slowdown for substantial benefits underlines our commitment to delivering a tracker that’s not just fast but also rich in features and usability.”\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-eg2ndv\">We decided to use Rust due to its speed and memory-safe features but we also wanted to build a tracker with the following features:\u003C/p> \u003Cul data-svelte-h=\"svelte-1tc011q\">\u003Cli>A \u003Cstrong>comprehensive API\u003C/strong> that allow users to perform any action or extract any data from the tracker.\u003C/li> \u003Cli>A \u003Cstrong>good support for observability\u003C/strong>. For example, a logging system that allow users to detect errors or extract statistics. The logging has several levels. Enabling more verbose logging affects performance. But if you are only interested in performance you can disable logging. Observability it’s also related to testing. Code without support for observability it’s usually hard to test too.\u003C/li> \u003Cli>A \u003Cstrong>sustainable code\u003C/strong>. Very often “fast code” means “direct code” without abstraction layers and separation of concerns, but that leads to code that is hard to maintain and eventually to a death project. It’s hard to attract maintainers for open-source projects that are hard to understand. And even if it’s not hard to understand it’s usually hard to change because there are no independent parts that can be changed independently.\u003C/li>\u003C/ul> \u003Ch2 id=\"understating-the-tracker\" data-svelte-h=\"svelte-f7ma2w\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#understating-the-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Understating The Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-1191qar\">BitTorrent trackers play a crucial role in the file-sharing ecosystem, acting as intermediaries that facilitate the transfer of files among users. By tracking peer locations and helping them connect, these trackers ensure the swift and reliable distribution of data.\u003C/p> \u003Cp data-svelte-h=\"svelte-1kpnyqh\">Before benchmarking the tracker is important to know the internal architecture of the tracker. A deep dive into the Torrust Tracker’s architecture reveals a four-layer design, crucial for benchmarking accuracy.\u003C/p> \u003Cp data-svelte-h=\"svelte-1om9x5k\">The first layer is the delivery layer. Clients can connect to the tracker in different ways: using the HTTP tracker, the UDP tracker, the tracker API or console commands. Internally all requests are routed through application services and reaching the main tracker domain service that handles the \u003Ccode>announce\u003C/code> and \u003Ccode>scrape\u003C/code> requests. At the lowest level the tracker service stores all the information in different data structures. One of them is the torrent repository that holds the list of torrents. Each torrent entry on the list contains statistics like how many peers have downloaded the torrent and the list of peers for that torrent (swarm).\u003C/p> \u003Cimg srcset=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png\" src=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png\" alt=\"Torrust Architecture\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Ch2 id=\"benchmarking-methodology\" data-svelte-h=\"svelte-19pdx5j\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#benchmarking-methodology\">\u003Cspan>#\u003C/span>\u003C/a>Benchmarking Methodology\u003C/h2> \u003Cp data-svelte-h=\"svelte-7t1gkt\">Our benchmarking approach encompasses three pivotal areas:\u003C/p> \u003Cul data-svelte-h=\"svelte-14l9hbs\">\u003Cli>\u003Cstrong>Internal repository benchmarking\u003C/strong>: Evaluating the repository within the tracker responsible for managing peer lists across torrents.\u003C/li> \u003Cli>\u003Cstrong>End-to-End benchmarking\u003C/strong>: Utilizing an external UDP tracker load test tool from the aquatic repository to simulate some real-world scenarios.\u003C/li> \u003Cli>\u003Cstrong>Comparative Benchmarking with other trackers\u003C/strong>: Employing the “Bencher” from the Aquatic GitHub repository to compare the Torrust Tracker against notable implementations like \u003Ca href=\"https://erdgeist.org/arts/software/opentracker/\" rel=\"nofollow\">opentracker\u003C/a>, \u003Ca href=\"https://github.com/chihaya/chihaya\" rel=\"nofollow\">Chihaya\u003C/a>, and \u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">aquatic\u003C/a> itself.\u003C/li>\u003C/ul> \u003Ch2 id=\"internal-repository-benchmarking\" data-svelte-h=\"svelte-109aklx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#internal-repository-benchmarking\">\u003Cspan>#\u003C/span>\u003C/a>Internal Repository Benchmarking\u003C/h2> \u003Cp data-svelte-h=\"svelte-gryjgp\">Basically a tracker is just a shared data structure between all the BitTorrent peers. Peers announce themselves and the tracker builds up a list of torrents. For each torrent, the tracker keeps a list of peers interested in that torrent. The in-memory data structure is an array of structures that look like this one (example in JSON):\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"info_hash\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"090c6d4fb3a03191c4ef1fda6236ef0efb2d5c10\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"seeders\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"completed\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"leechers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"peers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"peer_id\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"id\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"0x2d71423030303030303030303030303030303031\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"client\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token null keyword\">null\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"peer_addr\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"0.0.0.0:17548\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"updated\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1709916034742\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"updated_milliseconds_ago\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1709916034742\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"uploaded\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"downloaded\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"left\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"event\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Completed\"\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\t\u003Cspan class=\"token punctuation\">]\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1nuj2p7\">There are many ways to keep this information in memory. The access to this data is actually a bottleneck. Eventually all requests hit this structure. The problem is all \u003Ccode>announce\u003C/code> requests need to update this structure. Due to Rust owning rules, only the owner can write into this struct. We have been trying different implementations to minimize contention. There is a trait for the torrent “Repository”. You can benchmark the different repository implementations by running the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cargo run --release -p torrust-torrent-repository-benchmarks -- --threads 4 --sleep 0 --compare true\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-176unt0\">The output at the time of writing this post is:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">tokio::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Entry&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (60ns, 59ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (10.909457ms, 0ns)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (13.88879ms, 0ns)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (7.772484ms, 7.782535ms)\n\nstd::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Entry&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (43ns, 39ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (4.020937ms, 4.020937ms)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (5.896177ms, 5.768448ms)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (3.883823ms, 3.883823ms)\n\nstd::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Arc&lt;std::sync::Mutex&lt;Entry&gt;&gt;&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (51ns, 49ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (3.252314ms, 3.149109ms)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (8.411094ms, 8.411094ms)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (4.106086ms, 4.106086ms)\n\ntokio::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Arc&lt;std::sync::Mutex&lt;Entry&gt;&gt;&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (91ns, 90ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (3.542378ms, 3.435695ms)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (15.651172ms, 15.651172ms)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (4.368189ms, 4.257572ms)\n\ntokio::sync::RwLock&lt;std::collections::BTreeMap&lt;InfoHash, Arc&lt;tokio::sync::Mutex&lt;Entry&gt;&gt;&gt;&gt;\nadd_one_torrent: Avg/AdjAvg: (111ns, 109ns)\nupdate_one_torrent_in_parallel: Avg/AdjAvg: (6.590677ms, 6.808535ms)\nadd_multiple_torrents_in_parallel: Avg/AdjAvg: (16.572217ms, 16.30488ms)\nupdate_multiple_torrents_in_parallel: Avg/AdjAvg: (4.073221ms, 4.000122ms)\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-l982n6\">We are benchmarking four scenarios that we think are the most relevant:\u003C/p> \u003Cul data-svelte-h=\"svelte-1y5y1bo\">\u003Cli>\u003Cstrong>Adding one torrent\u003C/strong>: How long it takes to add a new torrent to the tracker when there is only one peer. We run it several times sequentially to calculate the average.\u003C/li> \u003Cli>\u003Cstrong>Update one torrent in parallel\u003C/strong>: This is the same as the previous one but running updates in parallel, meaning we spawn some threads to make the same request. This case tries to simulate the case where multiple peers try to announce the same torrent, so they are competing to write on the same repository entry, which contains the peer list.\u003C/li> \u003Cli>\u003Cstrong>Add multiple torrents in parallel\u003C/strong>: In this case, the same peer is adding different torrents at the same time. This case tries to simulate many peers announcing different torrents, so they are not conflicting to access the same peer list.\u003C/li> \u003Cli>\u003Cstrong>Update multiple torrents in parallel\u003C/strong>: Finally, this case is the same as the previous one, but we prefill the repository with all the torrents. This tries to simulate an scenario where multiple peers are announcing multiple torrents but the torrent entries already exists. The main different in this case is that the application might not need to allocate more memory to increase the data structure. So the problem is reduced to contention or locking (how many writes we can do in parallel on the same peer list).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1d8sz3c\">At the moment we are trying with other data structures that allow concurrent updates like \u003Ca href=\"https://docs.rs/dashmap/latest/dashmap/\" rel=\"nofollow\">DashMap\u003C/a>. See \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues/565\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues/565\u003C/a>.\u003C/p> \u003Ch2 id=\"e2e-udp-benchmarking\" data-svelte-h=\"svelte-f8fokv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#e2e-udp-benchmarking\">\u003Cspan>#\u003C/span>\u003C/a>E2E UDP Benchmarking\u003C/h2> \u003Cp data-svelte-h=\"svelte-1s5piv7\">We have been using one of the aquatic packages to test the UDP tracker performance as a whole service.\u003C/p> \u003Cp data-svelte-h=\"svelte-1pgm7n2\">\u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">Aquatic\u003C/a> is a high-performance open BitTorrent tracker including a lot a packages. One of the tools provided by Aquatic is a UDP load test command.\u003C/p> \u003Cp data-svelte-h=\"svelte-eez38i\">In order to test the Torrust Tracker with the “UDP load test” tool you need to run both the tracker and this tester.\u003C/p> \u003Ch3 id=\"running-the-torrust-tracker\" data-svelte-h=\"svelte-1tmvw9e\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-the-torrust-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Running the Torrust Tracker\u003C/h3> \u003Cp data-svelte-h=\"svelte-583jw8\">You can follow the \u003Ca href=\"https://docs.rs/torrust-tracker\" rel=\"nofollow\">Torrust Tracker documentation\u003C/a> to install the tracker but there is an especial configuration for benchmarking. First at all, you should build the tracker for release (\u003Ccode>--release\u003C/code>) and you should also disable all services. Finally you should set the logging level to \u003Ccode>error\u003C/code>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-dwdsm1\">Logging levels are: \u003Ccode>Off\u003C/code>, \u003Ccode>Error\u003C/code>, \u003Ccode>Warn\u003C/code>, \u003Ccode>Info\u003C/code>, \u003Ccode>Debug\u003C/code> and \u003Ccode>Trace\u003C/code>. The more you increase the log level and the verbosity the worse the performance results are.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-18gtvwc\">We provide a especial configuration for benchmarking \u003Ccode>./share/default/config/tracker.udp.benchmarking.toml\u003C/code> with the best configuration to test the performance of the UDP tracker. After cloning the tracker repo you can build and run it with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cargo build --release\nTORRUST_TRACKER_PATH_CONFIG=&quot;./share/default/config/tracker.udp.benchmarking.toml&quot; ./target/release/torrust-tracker\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"running-the-aquatic-udp-load-test\" data-svelte-h=\"svelte-1xrliam\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-the-aquatic-udp-load-test\">\u003Cspan>#\u003C/span>\u003C/a>Running The Aquatic UDP Load Test\u003C/h3> \u003Cp data-svelte-h=\"svelte-eoqm0k\">For updated instructions about how to setup the tool please follow the \u003Ca href=\"https://github.com/greatest-ape/aquatic/tree/master/crates/\" rel=\"nofollow\">official documentation\u003C/a>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cd /tmp\ngit clone git@github.com:greatest-ape/aquatic.git\ncd aquatic\ncargo build --release -p aquatic_udp_load_test\n./target/release/aquatic_udp_load_test -p &gt; &quot;load-test-config.toml&quot;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1s28mzo\">The last line \u003Ccode>./target/release/aquatic_udp_load_test -p &gt; &quot;load-test-config.toml&quot;\u003C/code> generates a config file. At least you will need to change the UDP port from \u003Ccode>3000\u003C/code> to \u003Ccode>6969\u003C/code> which is the default one in the Torrust Tracker. You can also edit other options like how many requests of each type you want to make.\u003C/p> \u003Cp data-svelte-h=\"svelte-zm5uqe\">Edit the \u003Ccode>load-test-config.toml\u003C/code>:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-toml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-toml\">\u003Cspan class=\"token comment\"># ...\u003C/span>\n\u003Cspan class=\"token key property\">server_address\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"127.0.0.1:6969\"\u003C/span>\n\u003Cspan class=\"token comment\"># ...\u003C/span>\n\u003Cspan class=\"token comment\"># Probability that a generated request is a connect request as part\u003C/span>\n\u003Cspan class=\"token comment\"># of sum of the various weight arguments.\u003C/span>\n\u003Cspan class=\"token key property\">weight_connect\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\n\u003Cspan class=\"token comment\"># Probability that a generated request is a announce request, as part\u003C/span>\n\u003Cspan class=\"token comment\"># of sum of the various weight arguments.\u003C/span>\n\u003Cspan class=\"token key property\">weight_announce\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\n\u003Cspan class=\"token comment\"># Probability that a generated request is a scrape request, as part\u003C/span>\n\u003Cspan class=\"token comment\"># of sum of the various weight arguments.\u003C/span>\n\u003Cspan class=\"token key property\">weight_scrape\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\n\u003Cspan class=\"token comment\"># ...\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-v0q6o6\">Finally you can run the test with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">toml\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-toml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-toml\">\u003Cspan class=\"token punctuation\">.\u003C/span>/target/release/aquatic_udp_load_test -c \u003Cspan class=\"token string\">\"load-test-config.toml\"\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"test-results\" data-svelte-h=\"svelte-h1mmer\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#test-results\">\u003Cspan>#\u003C/span>\u003C/a>Test Results\u003C/h3> \u003Cp data-svelte-h=\"svelte-ctfkij\">Just as an example we show the test results with a non dedicated machine.\u003C/p> \u003Cp data-svelte-h=\"svelte-uwio4l\">\u003Cstrong>Machine used for the test\u003C/strong>:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t4jvex\">\u003Cli>RAM: 64GiB\u003C/li> \u003Cli>Processor: AMD Ryzen 9 7950X x 32\u003C/li> \u003Cli>Graphics: AMD Radeon Graphics / Intel Arc A770 Graphics (DG2)\u003C/li> \u003Cli>OS: Ubuntu 23.04\u003C/li> \u003Cli>OS Type: 64-bit\u003C/li> \u003Cli>Kernel Version: Linux 6.2.0-20-generic\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-wegm7a\">\u003Cstrong>Test result\u003C/strong>:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">Requests out: 388702.94/second\nResponses in: 349832.25/second\n  - Connect responses:  173325.85\n  - Announce responses: 173061.13\n  - Scrape responses:   3445.27\n  - Error responses:    0.00\nPeers per announce response: 0.00\nAnnounce responses per info hash:\n  - p10: 1\n  - p25: 1\n  - p50: 1\n  - p75: 1\n  - p90: 2\n  - p95: 3\n  - p99: 106\n  - p99.9: 283\n  - p100: 357\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"comparative-udp-benchmarking-with-other-trackers\" data-svelte-h=\"svelte-4irimp\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#comparative-udp-benchmarking-with-other-trackers\">\u003Cspan>#\u003C/span>\u003C/a>Comparative UDP Benchmarking With Other Trackers\u003C/h2> \u003Cp data-svelte-h=\"svelte-1eavs55\">Aquatic also provides a tool to compare how several trackers perform on the same machine. At the moment they support these tracker:\u003C/p> \u003Cul data-svelte-h=\"svelte-13yj5oq\">\u003Cli>\u003Ca href=\"https://erdgeist.org/arts/software/opentracker/\" rel=\"nofollow\">opentracker\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/chihaya/chihaya\" rel=\"nofollow\">Chihaya\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">aquatic\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-ir9hy0\">We’ve opened a \u003Ca href=\"https://github.com/greatest-ape/aquatic/pull/191\" rel=\"nofollow\">PR\u003C/a> to add support to the Torrust Tracker too.\u003C/p> \u003Cp data-svelte-h=\"svelte-160ca0h\">In order to run the Bencher you need to install all the trackers first.\u003C/p> \u003Ch3 id=\"setup-the-chihaya-tracker\" data-svelte-h=\"svelte-182q49k\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-the-chihaya-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Setup The Chihaya Tracker\u003C/h3> \u003Cp data-svelte-h=\"svelte-ol1vec\">Follow the \u003Ca href=\"https://github.com/chihaya/chihaya\" rel=\"nofollow\">official documentation\u003C/a>. You will need to install Go:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">sudo apt install golang-go\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"setup-the-opentracker-tracker\" data-svelte-h=\"svelte-15xxb3d\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-the-opentracker-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Setup The Opentracker Tracker\u003C/h3> \u003Cp data-svelte-h=\"svelte-17kavr\">You can \u003Ccode>make\u003C/code> it from sources following the \u003Ca href=\"https://erdgeist.org/arts/software/opentracker/#toc-entry-3\" rel=\"nofollow\">official documentation\u003C/a> or install it on Ubuntu with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cd /tmp\ncvs -d :pserver:cvs@cvs.fefe.de:/cvs -z9 co libowfat\ncd libowfat\nmake\ncd ..\ngit clone git://erdgeist.org/opentracker\ncd opentracker\nmake\ncp opentracker ~/bin\nopentracker -h\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1l9k0r8\">NOTICE: Installing the opentracker from Ubuntu repositories did not work for us. Maybe arguments to run the application have changes in recent versions.\u003C/p>\u003C/div> \u003Ch3 id=\"setup-the-aquatic-tracker\" data-svelte-h=\"svelte-xt6m5d\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-the-aquatic-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Setup The Aquatic Tracker\u003C/h3> \u003Cp data-svelte-h=\"svelte-1tyolfd\">You can follow the \u003Ca href=\"https://github.com/greatest-ape/aquatic/tree/master/crates/udp\" rel=\"nofollow\">official documentation\u003C/a>. At the moment this is the process:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">sudo apt update &amp;&amp; sudo apt upgrade -y\nsudo apt-get install libhwloc-dev\ncd /tmp\ngit clone git@github.com:greatest-ape/aquatic.git\ncd aquatic\ncargo build --profile=release-debug --all-features -p aquatic_udp\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1nn93ne\">NOTICE: \u003Ccode>libhwloc-dev\u003C/code> is needed for \u003Ccode>io-uring\u003C/code> feature.\u003C/p>\u003C/div> \u003Ch3 id=\"running-the-bencher\" data-svelte-h=\"svelte-hnytli\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-the-bencher\">\u003Cspan>#\u003C/span>\u003C/a>Running The Bencher\u003C/h3> \u003Cp data-svelte-h=\"svelte-269m44\">You don’t need to run the trackers manually the Bencher does it. First you need to build the Bencher:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cd /tmp\ngit clone git@github.com:greatest-ape/aquatic.git\ncd aquatic\ncargo build --profile=release-debug -p aquatic_bencher\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1x6qv3\">And then you can run it with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">./target/release-debug/aquatic_bencher udp\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1oe9wpg\">If you also want to include the Torrust Tracker make sure you use the fork in the \u003Ca href=\"https://github.com/greatest-ape/aquatic/pull/191\" rel=\"nofollow\">PR\u003C/a>.\u003C/p>\u003C/div> \u003Ch3 id=\"bencher-results\" data-svelte-h=\"svelte-1hc99h6\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#bencher-results\">\u003Cspan>#\u003C/span>\u003C/a>Bencher Results\u003C/h3> \u003Cp data-svelte-h=\"svelte-1lfvggd\">Again, this is only an example with the test result using a non dedicated machine.\u003C/p> \u003Cp data-svelte-h=\"svelte-16heg8s\">Machine used for the test:\u003C/p> \u003Cul data-svelte-h=\"svelte-1t4jvex\">\u003Cli>RAM: 64GiB\u003C/li> \u003Cli>Processor: AMD Ryzen 9 7950X x 32\u003C/li> \u003Cli>Graphics: AMD Radeon Graphics / Intel Arc A770 Graphics (DG2)\u003C/li> \u003Cli>OS: Ubuntu 23.04\u003C/li> \u003Cli>OS Type: 64-bit\u003C/li> \u003Cli>Kernel Version: Linux 6.2.0-20-generic\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-uh73g0\">Bencher result:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\"># Benchmark report\n\nTotal number of load test runs: 72\nEstimated duration: 0 hours, 44 minutes\n\n## Tracker cores: 1 (cpus: 0,16)\n### aquatic_udp run (socket workers: 1) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 351,834\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 192.5 MiB\n### aquatic_udp run (socket workers: 1) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 372,991\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 191.9 MiB\n### aquatic_udp (io_uring) run (socket workers: 1) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 389,576\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 214 MiB\n### aquatic_udp (io_uring) run (socket workers: 1) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 409,824\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 214.7 MiB\n### opentracker run (workers: 0) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 297,698\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 71.7 MiB\n### opentracker run (workers: 0) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 307,874\n- Average tracker CPU utilization: 95.5%\n- Peak tracker RSS: 72 MiB\n### opentracker run (workers: 1) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 343,570\n- Average tracker CPU utilization: 95.4%\n- Peak tracker RSS: 72 MiB\n### opentracker run (workers: 1) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 378,880\n- Average tracker CPU utilization: 95.3%\n- Peak tracker RSS: 72.2 MiB\n### chihaya run () (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 115,159\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 863.4 MiB\n### chihaya run () (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 113,002\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 867.4 MiB\n### torrust-tracker run () (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 222,330\n- Average tracker CPU utilization: 189%\n- Peak tracker RSS: 193.3 MiB\n### torrust-tracker run () (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 216,407\n- Average tracker CPU utilization: 189%\n- Peak tracker RSS: 191.8 MiB\n## Tracker cores: 2 (cpus: 0-1,16-17)\n### aquatic_udp run (socket workers: 2) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 699,783\n- Average tracker CPU utilization: 191%\n- Peak tracker RSS: 195.6 MiB\n### aquatic_udp run (socket workers: 2) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 804,774\n- Average tracker CPU utilization: 191%\n- Peak tracker RSS: 193.9 MiB\n### aquatic_udp (io_uring) run (socket workers: 2) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 749,745\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 237.4 MiB\n### aquatic_udp (io_uring) run (socket workers: 2) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 797,605\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 239 MiB\n### opentracker run (workers: 2) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 692,167\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 71.5 MiB\n### opentracker run (workers: 2) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 780,108\n- Average tracker CPU utilization: 190%\n- Peak tracker RSS: 72 MiB\n### chihaya run () (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 185,137\n- Average tracker CPU utilization: 371%\n- Peak tracker RSS: 8.2 GiB\n### chihaya run () (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 186,243\n- Average tracker CPU utilization: 380%\n- Peak tracker RSS: 7.1 GiB\n### torrust-tracker run () (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 415,864\n- Average tracker CPU utilization: 374%\n- Peak tracker RSS: 188.4 MiB\n### torrust-tracker run () (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 407,551\n- Average tracker CPU utilization: 375%\n- Peak tracker RSS: 188.9 MiB\n## Tracker cores: 4 (cpus: 0-3,16-19)\n### aquatic_udp run (socket workers: 4) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 1,270,832\n- Average tracker CPU utilization: 369%\n- Peak tracker RSS: 194.9 MiB\n### aquatic_udp run (socket workers: 4) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 1,482,250\n- Average tracker CPU utilization: 382%\n- Peak tracker RSS: 194.9 MiB\n### aquatic_udp (io_uring) run (socket workers: 4) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 1,217,457\n- Average tracker CPU utilization: 354%\n- Peak tracker RSS: 237.9 MiB\n### aquatic_udp (io_uring) run (socket workers: 4) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 1,618,228\n- Average tracker CPU utilization: 381%\n- Peak tracker RSS: 284.3 MiB\n### opentracker run (workers: 4) (load test workers: 8, cpus: 8-15,24-31)\n- Average responses per second: 1,348,825\n- Average tracker CPU utilization: 381%\n- Peak tracker RSS: 71.5 MiB\n### opentracker run (workers: 4) (load test workers: 12, cpus: 4-15,20-31)\n- Average responses per second: 1,546,907\n- Average tracker CPU utilization: 381%\n- Peak tracker RSS: 71 MiB\n### chihaya run () (load test workers: 8, cpus: 8-15,24-31)\n...\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-c72574\">\u003Cstrong>IMPORTANT\u003C/strong>: The test was run is a non dedicated machine running other tasks. It’s just an example. You can get the latest results with dedicated machine on the \u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">Aquatic\u003C/a> repo.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1sz0tx0\">The extracted and ordered results for 1 core are:\u003C/p> \u003Cp data-svelte-h=\"svelte-145cgs5\">Average responses per second with 8 load test workers and cpus: 8-15,24-31\u003C/p> \u003Col data-svelte-h=\"svelte-aj8gko\">\u003Cli>\u003Cstrong>389,576\u003C/strong> aquatic (io_uring)\u003C/li> \u003Cli>\u003Cstrong>351,834\u003C/strong> aquatic\u003C/li> \u003Cli>\u003Cstrong>343,570\u003C/strong> opentracker (workers 1)\u003C/li> \u003Cli>\u003Cstrong>297,698\u003C/strong> opentracker (workers 0)\u003C/li> \u003Cli>\u003Cstrong>222,330\u003C/strong> torrust-tracker\u003C/li> \u003Cli>\u003Cstrong>115,159\u003C/strong> chihaya\u003C/li>\u003C/ol> \u003Cp data-svelte-h=\"svelte-vf59nm\">Average responses per second with 12 load test workers and cpus: 4-15,20-31\u003C/p> \u003Col data-svelte-h=\"svelte-104eset\">\u003Cli>\u003Cstrong>409,824\u003C/strong> aquatic (io_uring)\u003C/li> \u003Cli>\u003Cstrong>378,880\u003C/strong> opentracker (workers 1)\u003C/li> \u003Cli>\u003Cstrong>372,991\u003C/strong> aquatic\u003C/li> \u003Cli>\u003Cstrong>307,874\u003C/strong> opentracker (workers 0)\u003C/li> \u003Cli>\u003Cstrong>216,407\u003C/strong> torrust-tracker\u003C/li> \u003Cli>\u003Cstrong>113,002\u003C/strong> chihaya\u003C/li>\u003C/ol> \u003Cp data-svelte-h=\"svelte-1bra9f5\">The \u003Ca href=\"https://github.com/greatest-ape/aquatic/blob/master/documents/aquatic-udp-load-test-2024-02-10.md\" rel=\"nofollow\">latest official results\u003C/a> (2024-02-10):\u003C/p> \u003Cimg srcset=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/aquatic-bencher-average-responses-per-second.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/aquatic-bencher-average-responses-per-second.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/aquatic-bencher-average-responses-per-second.png\" src=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/aquatic-bencher-average-responses-per-second.png\" alt=\"Torrust Architecture\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-jo5kpe\">The Aquatic “Bencher” uses the Aquatic “UDP load test”.\u003C/p>\u003C/div> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-18l64hv\">As you have seen we are collecting metrics to improve the tracker and avoid performance regressions, by using these benchmarking tools provided by Aquatic. Although performance is important there are other factor like horizontal scalability that are even more critical because sooner or later no matter how powerful is your machine it will be not enough the handle all the requests. But that is our of the scope of this article.\u003C/p> \u003Cp data-svelte-h=\"svelte-no19bn\">On the other hand, we have analyzed performance only from the point of view of number of request handled per second. Memory consumption should be also considered. We have started instrumenting the application to track memory consumption. See \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues/567\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues/567\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-gxsd2p\">If you see something wrong or you want to contribute by:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pxkwtk\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think that could be interesting to have,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-jnq0pp\">If you have any questions or issues please open an issue in the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-psntnz\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li> \u003Cli>Torrust Compose: \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">https://github.com/torrust/torrust-compose\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cp data-svelte-h=\"svelte-q8fjkb\">Other trackers:\u003C/p> \u003Cul data-svelte-h=\"svelte-1jgk2dy\">\u003Cli>\u003Ca href=\"https://github.com/chihaya/chihaya\" rel=\"nofollow\">Chihaya\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://erdgeist.org/arts/software/opentracker/\" rel=\"nofollow\">opentracker\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/greatest-ape/aquatic\" rel=\"nofollow\">aquatic\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-f37z12\">Crates for concurrent writes:\u003C/p> \u003Cul data-svelte-h=\"svelte-1yvyf58\">\u003Cli>\u003Ca href=\"https://docs.rs/dashmap/latest/dashmap/\" rel=\"nofollow\">DashMap\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-uqycu9\">Other links:\u003C/p> \u003Cul data-svelte-h=\"svelte-1ig97l4\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/docs/benchmarking.md\" rel=\"nofollow\">Torrust Tracker Benchmarking Docs\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/greatest-ape/aquatic/tree/master/crates/udp_load_test\" rel=\"nofollow\">Aquatic UDP load test tool\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/greatest-ape/aquatic/tree/master/crates/bencher\" rel=\"nofollow\">Aquatic Bencher\u003C/a>.\u003C/li>\u003C/ul>\u003C/div>\u003C/div>",{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":215,"slug":216,"coverImage":217,"date":218,"updated":6,"excerpt":219,"contributor":24,"contributorSlug":25,"tags":234,"hidden":12,"html":235,"readingTime":168,"relatedPosts":236},[41,221,222,223,224,225]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-p2wyqp\">In our quest to elevate the Torrust BitTorrent Tracker’s performance, we’ve embraced a suite of sophisticated benchmarking and profiling tools. This article builds on our previous discussion, ”\u003Ca href=\"benchmarking-the-torrust-bittorrent-tracker\">Benchmarking the Torrust BitTorrent Tracker\u003C/a>” and delves into the metrics that guide our optimization efforts. Join us as we explore the intricacies of profiling in the dynamic landscape of BitTorrent technology.\u003C/p> \u003Cp data-svelte-h=\"svelte-bw563p\">In the previous article we introduced to the community the benchmarking tools we are using at the moment to know whether the Tracker performs at the same level as other applications on the market.\u003C/p> \u003Cp data-svelte-h=\"svelte-ur42q\">With those benchmarking tools we ensure that the Tracker has a good performance and we don’t have regressions. If you are curious about how we do benchmarking you can read the ”\u003Ca href=\"benchmarking-the-torrust-bittorrent-tracker\">Benchmarking the Torrust BitTorrent Tracker\u003C/a>” article.\u003C/p> \u003Cp data-svelte-h=\"svelte-xrh8z6\">In this article we will explain how we are collecting metrics to know which parts of the code we should improve.\u003C/p> \u003Ch2 id=\"understanding-the-tracker\" data-svelte-h=\"svelte-rkyc3w\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#understanding-the-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Understanding The Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-12tv1np\">Before you continue reading this article you should know a little bit about the tracker internal structure. You can see an overview on the ”\u003Ca href=\"benchmarking-the-torrust-bittorrent-tracker\">Benchmarking the Torrust BitTorrent Tracker\u003C/a>” article.\u003C/p> \u003Cimg srcset=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png, /images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png\" src=\"/images/posts/benchmarking-the-torrust-bittorrent-tracker/torrust-tracker-simplified-architecture.png\" alt=\"Torrust Architecture\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Ch2 id=\"current-challenges\" data-svelte-h=\"svelte-152gobe\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#current-challenges\">\u003Cspan>#\u003C/span>\u003C/a>Current Challenges\u003C/h2> \u003Cp data-svelte-h=\"svelte-10abmqn\">Balancing feature-rich functionality with performance is our central challenge. The \u003Cstrong>Torrents Repository\u003C/strong>, a critical component, has been our focus, serving as the primary bottleneck for scaling request handling capabilities.\u003C/p> \u003Cp data-svelte-h=\"svelte-1iraxfy\">Regardless which protocol clients use to connect to the tracker, eventually all requests reach the internal “Tracker” domain service. This tracker contains a repository with the list of all torrents. Each entry on the list contains two pieces of information:\u003C/p> \u003Cul data-svelte-h=\"svelte-12ux8dn\">\u003Cli>\u003Cstrong>The statistics about that torrent\u003C/strong>: number of seeders, leechers and peers that have completed downloading.\u003C/li> \u003Cli>\u003Cstrong>The peer list\u003C/strong>: a list of all the clients announcing the same torrent (swarm).\u003C/li>\u003C/ul> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"info_hash\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"090c6d4fb3a03191c4ef1fda6236ef0efb2d5c10\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"seeders\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"completed\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"leechers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"peers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"peer_id\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"id\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"0x2d71423030303030303030303030303030303031\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\t\u003Cspan class=\"token property\">\"client\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token null keyword\">null\u003C/span>\n\t\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"peer_addr\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"0.0.0.0:17548\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"updated\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1709916034742\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"updated_milliseconds_ago\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">1709916034742\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"uploaded\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"downloaded\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"left\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\t\t\u003Cspan class=\"token property\">\"event\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Completed\"\u003C/span>\n\t\t\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\t\u003Cspan class=\"token punctuation\">]\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-g5f19h\">The reason why we have been focusing on that part is because we think that’s the main bottleneck if we want to increase the number of requests the tracker can handle per second.\u003C/p> \u003Cp data-svelte-h=\"svelte-gomc2i\">The \u003Ccode>announce\u003C/code> request is the most important request a tracker needs to handle. Peers get the list of other peers from the tracker by making announce requests. The purpose of that request is:\u003C/p> \u003Cul data-svelte-h=\"svelte-zqyhcf\">\u003Cli>To include the peer making the request in the list of peers which are seeding or downloading the torrent.\u003C/li> \u003Cli>Return the list of other peers so that the client can start asking for torrent pieces to the other peers.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1xjkt7m\">Every request is a write/read request. The system is intensive in writes. All requests eventually try to acquire a write lock to include themselves in the peer list. That’s why we think that’s the main bottleneck in our implementation, at the moment. For that reason we have been trying different implementations of the torrents repository:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">rust\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-rust\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-rust\">\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockStd\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntrySingle\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockStdMutexStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockStd\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexStd\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockStdMutexTokio\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockStd\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexTokio\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockTokio\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockTokio\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntrySingle\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockTokioMutexStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockTokio\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexStd\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsRwLockTokioMutexTokio\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">RwLockTokio\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexTokio\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsSkipMapMutexStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">CrossbeamSkipList\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexStd\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> \u003Cspan class=\"token comment\">// Default\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsSkipMapMutexParkingLot\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">CrossbeamSkipList\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexParkingLot\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsSkipMapRwLockParkingLot\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">CrossbeamSkipList\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryRwLockParkingLot\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">pub\u003C/span> \u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token type-definition class-name\">TorrentsDashMapMutexStd\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token class-name\">XacrimonDashMap\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token class-name\">EntryMutexStd\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1pecre8\">The default implementation used in production is \u003Ccode>TorrentsSkipMapMutexStd\u003C/code>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1wyma0n\">\u003Cstrong>NOTICE\u003C/strong>: All implementations are based on types that support ordering like \u003Ccode>BTreeMap\u003C/code> or \u003Ccode>SkipMap\u003C/code>. The reason we use those types is because the tracker API has an endpoint where you can get the ordered list of all torrents in the tracker repository.\u003C/p>\u003C/div> \u003Ch2 id=\"internal-repository-benchmarking\" data-svelte-h=\"svelte-109aklx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#internal-repository-benchmarking\">\u003Cspan>#\u003C/span>\u003C/a>Internal Repository Benchmarking\u003C/h2> \u003Cp data-svelte-h=\"svelte-i7tg8m\">As we explained in a previous article (”\u003Ca href=\"benchmarking-the-torrust-bittorrent-tracker\">Benchmarking the Torrust BitTorrent Tracker\u003C/a>”) you can run the benchmark for those different repository implementations with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">cargo bench -p torrust-tracker-torrent-repository\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-vsfz9m\">The output at the time of writing this post is similar to:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">     Running benches/repository_benchmark.rs (target/release/deps/repository_benchmark-a9b0013c8d09c3c3)\nadd_one_torrent/RwLockStd\n                        time:   [63.057 ns 63.242 ns 63.506 ns]\nFound 12 outliers among 100 measurements (12.00%)\n  2 (2.00%) low severe\n  2 (2.00%) low mild\n  2 (2.00%) high mild\n  6 (6.00%) high severe\nadd_one_torrent/RwLockStdMutexStd\n                        time:   [62.505 ns 63.077 ns 63.817 ns]\nFound 11 outliers among 100 measurements (11.00%)\n  4 (4.00%) high mild\n  7 (7.00%) high severe\nBenchmarking add_one_torrent/RwLockStdMutexTokio: Collecting 100 samples in estimated 1.0004 s (10M iterationsadd_one_torrent/RwLockStdMutexTokio\n                        time:   [98.440 ns 98.551 ns 98.660 ns]\nFound 4 outliers among 100 measurements (4.00%)\n  3 (3.00%) low mild\n  1 (1.00%) high severe\nadd_one_torrent/RwLockTokio\n                        time:   [107.84 ns 108.18 ns 108.54 ns]\nFound 3 outliers among 100 measurements (3.00%)\n  2 (2.00%) low mild\n  1 (1.00%) high mild\nBenchmarking add_one_torrent/RwLockTokioMutexStd: Collecting 100 samples in estimated 1.0001 s (8.7M iterationadd_one_torrent/RwLockTokioMutexStd\n                        time:   [116.34 ns 116.48 ns 116.63 ns]\nFound 2 outliers among 100 measurements (2.00%)\n  1 (1.00%) high mild\n  1 (1.00%) high severe\nBenchmarking add_one_torrent/RwLockTokioMutexTokio: Collecting 100 samples in estimated 1.0005 s (6.9M iteratiadd_one_torrent/RwLockTokioMutexTokio\n                        time:   [143.39 ns 143.51 ns 143.63 ns]\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"profiling-with-valgrind\" data-svelte-h=\"svelte-dn87f4\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#profiling-with-valgrind\">\u003Cspan>#\u003C/span>\u003C/a>Profiling With Valgrind\u003C/h2> \u003Cp data-svelte-h=\"svelte-u2mco7\">“Valgrind is an instrumentation framework for building dynamic analysis tools”. In fact it’s a suite of tools. The tool we are going to use is \u003Ccode>callgrind\u003C/code> which collects data that can be later visualized with \u003Ccode>kcachegrind\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-15g0w3i\">Valgrind, coupled with Kcachegrind, offers a powerful profiling solution for in-depth analysis of BitTorrent tracker performance. By simulating cache behavior and collecting call graphs, developers gain valuable insights into code execution dynamics and potential optimizations.\u003C/p> \u003Cp data-svelte-h=\"svelte-pwuqah\">In order to profile the UDP tracker you need to:\u003C/p> \u003Col data-svelte-h=\"svelte-1juzoy5\">\u003Cli>Build and run the tracker for profiling.\u003C/li> \u003Cli>Make requests to the tracker while it’s running.\u003C/li>\u003C/ol> \u003Cp data-svelte-h=\"svelte-awnev1\">Build and run the binary for profiling with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">RUSTFLAGS=&#39;-g&#39; cargo build --release --bin profiling \\\n   &amp;&amp; export TORRUST_TRACKER_CONFIG_TOML_PATH=&quot;./share/default/config/tracker.udp.benchmarking.toml&quot; \\\n   &amp;&amp; valgrind \\\n     --tool=callgrind \\\n     --callgrind-out-file=callgrind.out \\\n     --collect-jumps=yes \\\n     --simulate-cache=yes \\\n     ./target/release/profiling 60\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1h4ju63\">\u003Cstrong>NOTICE:\u003C/strong> You should make requests to the services you want to profile. For example, using the \u003Ca href=\"./benchmarking-the-torrust-bittorrent-tracker\">Aquatic UDP load test\u003C/a>.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1hu7esm\">After running the tracker with \u003Ccode>valgrind\u003C/code> it generates a file called \u003Ccode>callgrind.out\u003C/code>\nthat you can open with \u003Ccode>kcachegrind\u003C/code>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">kcachegrind callgrind.out\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cimg srcset=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/kcachegrind-screenshot.png, /images/posts/profiling-the-torrust-bittorrent-udp-tracker/kcachegrind-screenshot.png, /images/posts/profiling-the-torrust-bittorrent-udp-tracker/kcachegrind-screenshot.png\" src=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/kcachegrind-screenshot.png\" alt=\"Visualizing profiling data with kcachegrind\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-mo72iu\">You have information like:\u003C/p> \u003Cul data-svelte-h=\"svelte-1bfh9pj\">\u003Cli>How many times a function is called (\u003Ccode>Called\u003C/code> column).\u003C/li> \u003Cli>The total amount of time spent running a function (\u003Ccode>Incl.\u003C/code> column).\u003C/li> \u003Cli>The total amount of time spent running a function excluding child functions (\u003Ccode>Self\u003C/code> column).\u003C/li> \u003Cli>Etcetera.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1btcmym\">But one of the most interesting things it’s the interactive “Call Graph” where you can navigate through functions seeing how much time they spend.\u003C/p> \u003Cp data-svelte-h=\"svelte-g7mp2l\">The main problem with this tool is the asynchronous code. Functions executed in tokio spawned tasks are not shown directly. Since the Torrust Tracker makes an intense use of async code that makes it harder to reach conclusions from the tool.\u003C/p> \u003Cp data-svelte-h=\"svelte-ozqz56\">There are alternatives that we have not tried yet:\u003C/p> \u003Col data-svelte-h=\"svelte-3noc7e\">\u003Cli>Use other tools like \u003Ca href=\"https://github.com/tokio-rs/console\" rel=\"nofollow\">tokio-console\u003C/a>.\u003C/li> \u003Cli>Insert your custom profiling functions in the code.\u003C/li> \u003Cli>Isolate the sync parts and profile them independently. For example, you could profile only the Torrent Repository or the Tracker domain Service.\u003C/li>\u003C/ol> \u003Ch2 id=\"profiling-with-perf\" data-svelte-h=\"svelte-1ia110c\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#profiling-with-perf\">\u003Cspan>#\u003C/span>\u003C/a>Profiling With Perf\u003C/h2> \u003Cp data-svelte-h=\"svelte-1kerjib\">Another alternative for profiling are flamegraphs. There is a crate called \u003Ca href=\"https://github.com/flamegraph-rs/flamegraph\" rel=\"nofollow\">cargo flamegraph\u003C/a> that allows you to easily generate flamegraphs that you can visualize in a modern browser.\u003C/p> \u003Cp data-svelte-h=\"svelte-szcvma\">Flamegraphs offer a visual representation of code execution, providing invaluable insights into performance bottlenecks within the tracker codebase. By utilizing flamegraph profiling, developers can pinpoint hotspots and inefficiencies, guiding optimization efforts for enhanced performance.\u003C/p> \u003Cp data-svelte-h=\"svelte-13l7fn0\">After installing the \u003Ccode>cargo flamegraph\u003C/code> package you can generate the flamegraph with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">TORRUST_TRACKER_CONFIG_TOML_PATH=&quot;./share/default/config/tracker.udp.benchmarking.toml&quot; cargo flamegraph --bin=profiling -- 60\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-9ydouq\">Running the \u003Ccode>cargo flamegraph\u003C/code> running the whole service produces a flamegraph like \u003Ca href=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/flamegraph.svg\">this\u003C/a>:\u003C/p> \u003Cp data-svelte-h=\"svelte-1p0e1xw\">\u003Cimg src=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/flamegraph.svg\" alt=\"Visualizing profiling data with flamegraphs\">\u003C/p> \u003Cp data-svelte-h=\"svelte-18wll46\">\u003Ca href=\"/images/posts/profiling-the-torrust-bittorrent-udp-tracker/flamegraph.svg\">Click here to see the interactive flamegraph\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1vu9p2n\">As you can see, there are a lot functions for the tokio package but if you see at the top of the flame you will see the functions in the \u003Ccode>torrust_tracker\u003C/code> namespace.\u003C/p> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-hfwgse\">Although using these tools with async code can be very challenging at least you can use them to confirm if you are making an effort on improving the performance on the right place. And you can also detect parts very slow parts.\u003C/p> \u003Cp data-svelte-h=\"svelte-1bu58i0\">And as you can see more than 90% of the time is spent on the \u003Ccode>Tracker::announce\u003C/code> method in these two functions:\u003C/p> \u003Cul data-svelte-h=\"svelte-1f8lnhz\">\u003Cli>\u003Ccode>Tracker::update_torrent_with_peer_and_get_stats\u003C/code>.\u003C/li> \u003Cli>\u003Ccode>Tracker::get_torrent_peers_for_peer\u003C/code>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1gdfb2n\">Which are the functions that need a lock to write and read in the \u003Ccode>Torrent Repository\u003C/code>. Notice that it is the code we are focused on improving right now.\u003C/p> \u003Cp data-svelte-h=\"svelte-gxsd2p\">If you see something wrong or you want to contribute by:\u003C/p> \u003Cul data-svelte-h=\"svelte-1jpxkfh\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think that could be interesting to add,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-jnq0pp\">If you have any questions or issues please open an issue in the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-psntnz\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li> \u003Cli>Torrust Compose: \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">https://github.com/torrust/torrust-compose\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-1beqmgs\">Many thanks to \u003Ca href=\"https://github.com/bravit\" rel=\"nofollow\">Vitaly Bragilevsky\u003C/a> and others for sharing the talks about profiling.\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cp data-svelte-h=\"svelte-s0ys1s\">Torrust Tracker Documentation for:\u003C/p> \u003Cul data-svelte-h=\"svelte-15ln9ws\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/docs/benchmarking.md\" rel=\"nofollow\">Benchmarking\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/docs/profiling.md\" rel=\"nofollow\">Profiling\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1hod1vn\">Profiling tools:\u003C/p> \u003Cul data-svelte-h=\"svelte-hjky6h\">\u003Cli>\u003Ca href=\"https://valgrind.org/\" rel=\"nofollow\">valgrind\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://kcachegrind.github.io/\" rel=\"nofollow\">kcachegrind\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/flamegraph-rs/flamegraph\" rel=\"nofollow\">flamegraph\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-7bt0ya\">Talks about profiling:\u003C/p> \u003Cul data-svelte-h=\"svelte-ybsdk\">\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=X6Xz4CRd6kw&amp;t=191s\" rel=\"nofollow\">Profiling Rust Programs with valgrind, heaptrack, and hyperfine\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=8FAdY_0DpkM\" rel=\"nofollow\">RustConf 2023 - Profiling async applications in Rust by Vitaly Bragilevsky\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=JRMOIE_wAFk&amp;t=8s\" rel=\"nofollow\">Profiling Code in Rust - by Vitaly Bragilevsky - Rust Linz, December 2022\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=h-0HpCblt3A\" rel=\"nofollow\">Xdebug 3 Profiling: 2. KCachegrind tour\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-160mg43\">Concurrent hash table data structures:\u003C/p> \u003Cul data-svelte-h=\"svelte-8ott72\">\u003Cli>\u003Ca href=\"https://docs.rs/dashmap/latest/dashmap/\" rel=\"nofollow\">DashMap\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.rs/flurry/latest/flurry/\" rel=\"nofollow\">flurry\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1w1gd8o\">Tools for profiling/debugging async code:\u003C/p> \u003Cul data-svelte-h=\"svelte-1g3ycg\">\u003Cli>\u003Ca href=\"https://github.com/tokio-rs/console\" rel=\"nofollow\">tokio-console\u003C/a>.\u003C/li>\u003C/ul>\u003C/div>\u003C/div>",[237,238,239],{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":230,"hidden":12,"html":231,"readingTime":44},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44,"relatedPosts":241},[242,243,244],{"title":215,"slug":216,"coverImage":217,"date":218,"updated":6,"excerpt":219,"contributor":24,"contributorSlug":25,"tags":220,"hidden":12,"html":226,"readingTime":168},{"title":215,"slug":216,"coverImage":217,"date":218,"updated":6,"excerpt":219,"contributor":24,"contributorSlug":25,"tags":234,"hidden":12,"html":235,"readingTime":168},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":230,"hidden":12,"html":231,"readingTime":44,"relatedPosts":246},[247,248,249],{"title":215,"slug":216,"coverImage":217,"date":218,"updated":6,"excerpt":219,"contributor":24,"contributorSlug":25,"tags":220,"hidden":12,"html":226,"readingTime":168},{"title":215,"slug":216,"coverImage":217,"date":218,"updated":6,"excerpt":219,"contributor":24,"contributorSlug":25,"tags":234,"hidden":12,"html":235,"readingTime":168},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":141,"slug":142,"coverImage":143,"date":144,"updated":6,"excerpt":145,"contributor":24,"contributorSlug":25,"tags":146,"hidden":12,"html":149,"readingTime":150,"relatedPosts":251},[252,253,254],{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":129,"slug":130,"coverImage":131,"date":132,"updated":6,"excerpt":133,"contributor":24,"contributorSlug":25,"tags":134,"hidden":12,"html":138,"readingTime":33},{"title":141,"slug":142,"coverImage":143,"date":144,"updated":6,"excerpt":145,"contributor":24,"contributorSlug":25,"tags":256,"hidden":12,"html":257,"readingTime":150,"relatedPosts":258},[72,147,148]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-1awa8lh\">Welcome to our guide on deploying a BitTorrent Index and Tracker. We’ll walk you through each step, explaining the process in a user-friendly manner, so you can understand the magic behind hosting a powerful, Rust-based application on the cloud.\u003C/p> \u003Cp data-svelte-h=\"svelte-jwgro1\">This guide provides detailed, technical steps for deploying your Rust-based BitTorrent Index and Tracker on a Digital Ocean droplet. You’ll find precise commands and configurations to ensure a smooth, efficient setup.\u003C/p> \u003Cp data-svelte-h=\"svelte-kguc39\">You can find the docker compose configuration used in this guide on the following GitHub repo:\u003C/p> \u003Cp data-svelte-h=\"svelte-1o7fl1r\">\u003Ca href=\"https://github.com/torrust/torrust-compose/tree/main/droplet\" rel=\"nofollow\">https://github.com/torrust/torrust-compose/tree/main/droplet\u003C/a>\u003C/p> \u003Cp data-svelte-h=\"svelte-tpmjyq\">Although we are using a droplet, this tutorial is intended to be so generic that\nyou should be able to setup the services in any virtual machine with docker and docker compose.\u003C/p> \u003Cp data-svelte-h=\"svelte-1tn4ufv\">This tutorial is based on the Digital Ocean tutorial:\u003C/p> \u003Cp data-svelte-h=\"svelte-zy2fnp\">\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-secure-a-containerized-node-js-application-with-nginx-let-s-encrypt-and-docker-compose\" rel=\"nofollow\">How To Secure a Containerized Node.js Application with Nginx, Let’s Encrypt, and Docker Compose\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-ijmibu\">We have only changed the docker compose configuration and some steps to configure the \u003Cstrong>Torrust Index and Tracker\u003C/strong> instead of\nthe sample node application.\u003C/p> \u003Cp data-svelte-h=\"svelte-nro7oh\">After finishing this tutorial you will have these public services available (with your own domain):\u003C/p> \u003Cul data-svelte-h=\"svelte-fk1fu0\">\u003Cli>Torrust Index: \u003Ca href=\"https://index.torrust-demo.com\" rel=\"nofollow\">https://index.torrust-demo.com\u003C/a>\u003C/li> \u003Cli>Torrust HTTP Tracker: \u003Ca href=\"https://tracker.torrust-demo.com/announce\" rel=\"nofollow\">https://tracker.torrust-demo.com/announce\u003C/a>\u003C/li> \u003Cli>Torrust UDP Tracker: \u003Ca href=\"udp://tracker.torrust-demo.com:6969/announce\">udp://tracker.torrust-demo.com:6969/announce\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"requirements\" data-svelte-h=\"svelte-d9t7ph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#requirements\">\u003Cspan>#\u003C/span>\u003C/a>Requirements\u003C/h2> \u003Cp data-svelte-h=\"svelte-14h9udh\">You will need:\u003C/p> \u003Cul data-svelte-h=\"svelte-kzy662\">\u003Cli>A Digital Ocean account.\u003C/li> \u003Cli>A Digital Ocean virtual machine (droplet) with Ubuntu 22.04.2 LTS.\u003C/li> \u003Cli>Docker, Docker Compose, SQLite3 and Git installed on the server.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-481lss\">We will explain how to install the required dependencies in the Ubuntu server.\u003C/p> \u003Ch3 id=\"server\" data-svelte-h=\"svelte-1lk2f4q\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#server\">\u003Cspan>#\u003C/span>\u003C/a>Server\u003C/h3> \u003Cp data-svelte-h=\"svelte-1zoymk\">A Digital Ocean Droplet with a configuration similar to this:\u003C/p> \u003Cul data-svelte-h=\"svelte-2vrxe3\">\u003Cli>\u003Cstrong>Datacenter\u003C/strong>: Frankfurt (FRA1).\u003C/li> \u003Cli>\u003Cstrong>Image\u003C/strong>: Ubuntu 22.04 (LTS) x64.\u003C/li> \u003Cli>\u003Cstrong>Droplet Type\u003C/strong>: Shared CPU (Basic).\u003C/li> \u003Cli>\u003Cstrong>CPU options\u003C/strong>: Regular (Disk Type: SSD).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1plfg5n\">Resources:\u003C/p> \u003Cul data-svelte-h=\"svelte-ogyfwb\">\u003Cli>1 GB/1CPU.\u003C/li> \u003Cli>25 GB SS Disk.\u003C/li> \u003Cli>1000 GB transfer.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-fn4rp3\">Features:\u003C/p> \u003Cul data-svelte-h=\"svelte-hg1gm8\">\u003Cli>Backups enabled.\u003C/li> \u003Cli>With improved metrics monitoring and alerting.\u003C/li>\u003C/ul> \u003Ch3 id=\"software\" data-svelte-h=\"svelte-1rxdbuo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#software\">\u003Cspan>#\u003C/span>\u003C/a>Software\u003C/h3> \u003Cul data-svelte-h=\"svelte-16fgxx0\">\u003Cli>Ubuntu 22.04.2 LTS (already installed in the droplet)\u003C/li> \u003Cli>Docker version 24.0.7, build afdd53b.\u003C/li> \u003Cli>Docker Compose version v2.3.3.\u003C/li> \u003Cli>SQLite3 version 3.37.2 2022-01-06 13:25:41 872ba256cbf61d9290b571c0e6d82a20c224ca3ad82971edc46b29818d5dalt1.\u003C/li> \u003Cli>Git version 2.34.1 (only for the installation).\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-17kxcyd\">The Docker images used by this tutorial are:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">$ docker images --digests\nREPOSITORY          TAG               DIGEST                                                                    IMAGE ID       CREATED       SIZE\ntorrust/tracker     develop           sha256:5589eaf57af277feda6eca6f841859fd2aa05af7deafca546ad0a17fe36d8e51   c42f0cce3304   4 days ago    160MB\nnginx               mainline-alpine   sha256:3923f8de8d2214b9490e68fd6ae63ea604deddd166df2755b788bef04848b9bc   01e5c69afaf6   2 weeks ago   42.6MB\ntorrust/index       develop           sha256:69b12dfcb9c47267bd314f4869dfce7585d3f2b172200ef0d7d7bb776e209fe6   a3db4d4e5d6a   2 weeks ago   64.9MB\ntorrust/index-gui   develop           sha256:b30deb84cdee8fa34e4d3783ce2f467542e6fdc13a14dd6bbed879e2e2b82bcb   4f6e446cb009   2 weeks ago   175MB\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> We will update them to use a concrete tag v3.0 after releasing it.\u003C/div> \u003Ch3 id=\"domain\" data-svelte-h=\"svelte-xf7of1\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#domain\">\u003Cspan>#\u003C/span>\u003C/a>Domain\u003C/h3> \u003Cp data-svelte-h=\"svelte-sbcnpw\">You will need a domain. We are using “torrust-demo.com” in this tutorial.\u003C/p> \u003Ch2 id=\"initial-server-setup\" data-svelte-h=\"svelte-1lt2y63\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#initial-server-setup\">\u003Cspan>#\u003C/span>\u003C/a>Initial Server Setup\u003C/h2> \u003Cp data-svelte-h=\"svelte-1hq0qaj\">Starting off, we’ll set up a virtual server using Ubuntu 22.04. Think of it as preparing a new computer for your application, ensuring it’s ready to run smoothly.\u003C/p> \u003Cp data-svelte-h=\"svelte-wt4zra\">This section covers the initial configuration of your Ubuntu 22.04 server, focusing on essential security and performance optimizations.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> Disclaimer: For the initial server setup we only highlight the main points. We provide the links to Digital Ocean tutorials\n  where you will find detailed information.\u003C/div> \u003Cp data-svelte-h=\"svelte-102dmr8\">Please refer to \u003Ca href=\"https://docs.digitalocean.com/\" rel=\"nofollow\">Digital Ocean Documentation\u003C/a> for more information about how to create projects and droplets. Projects are the way DO (Digital Ocean) organizes resources (virtual machines, databases, domains, etc.). We have a project called “torrust-demo.com”.\u003C/p> \u003Cp data-svelte-h=\"svelte-kbwxhx\">Once you have created your project and droplet you can follow the \u003Ca href=\"https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-22-04\" rel=\"nofollow\">Digital Ocean guide to setup a new Ubuntu server\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-masdly\">For this tutorial we have used our demo environment.\u003C/p> \u003Cp data-svelte-h=\"svelte-73slgm\">In this first step you will:\u003C/p> \u003Cul data-svelte-h=\"svelte-2mg5wg\">\u003Cli>Create a virtual machine (droplet).\u003C/li> \u003Cli>Access the virtual machine using the \u003Ccode>root\u003C/code> account.\u003C/li> \u003Cli>Create a new user \u003Ccode>torrust\u003C/code>.\u003C/li> \u003Cli>Access the server using the new account \u003Ccode>torrust\u003C/code>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1gnydxc\">After creating the droplet you should be able to connect by using SSH with the \u003Ccode>root\u003C/code> account providing the password you set\nduring the droplet creation:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">ssh\u003C/span> root@139.59.150.216\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-bsztye\">After logging in you can create the new user account:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">adduser torrust\n\u003Cspan class=\"token function\">usermod\u003C/span> \u003Cspan class=\"token parameter variable\">-aG\u003C/span> \u003Cspan class=\"token function\">sudo\u003C/span> torrust\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-e6ugj6\">The user is added to the sudo group you can can execute command as root when needed.\u003C/p> \u003Ch3 id=\"setup-ssh-keys\" data-svelte-h=\"svelte-1rxyfkq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-ssh-keys\">\u003Cspan>#\u003C/span>\u003C/a>Setup SSH Keys\u003C/h3> \u003Cp data-svelte-h=\"svelte-g4kj1e\">Security is key! Setting up SSH keys is like creating a special passcode for safe and secure access to your server.\u003C/p> \u003Cp data-svelte-h=\"svelte-ue2jkk\">Follow the \u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-22-04\" rel=\"nofollow\">Digital Ocean tutorial\u003C/a> to establish secure SSH key authentication, enhancing the security of your server connections.\u003C/p> \u003Cp data-svelte-h=\"svelte-r2i9gz\">You have to generate a new key and copy it to the server:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">ssh-copy-id \u003Cspan class=\"token parameter variable\">-i\u003C/span> ~/.ssh/torrust_rsa.pub torrust@139.59.150.216\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1agehpc\">If all went fine you should be able to login to the server with your SSH key.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">ssh\u003C/span> torrust@139.59.150.216\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"install-docker\" data-svelte-h=\"svelte-dcwzx2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#install-docker\">\u003Cspan>#\u003C/span>\u003C/a>Install Docker\u003C/h3> \u003Cp data-svelte-h=\"svelte-1iktbq8\">Docker is a tool that lets you run applications in a consistent environment. It’s like having a universal app runner that works the same everywhere.\u003C/p> \u003Cp data-svelte-h=\"svelte-w05d69\">You can also follow the DO guide: \u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-22-04\" rel=\"nofollow\">How To Install and Use Docker on Ubuntu 22.04\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1tjig7w\">In short, you only need to execute some commands:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> update\n\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> apt-transport-https ca-certificates \u003Cspan class=\"token function\">curl\u003C/span> software-properties-common\n\u003Cspan class=\"token function\">curl\u003C/span> \u003Cspan class=\"token parameter variable\">-fsSL\u003C/span> https://download.docker.com/linux/ubuntu/gpg \u003Cspan class=\"token operator\">|\u003C/span> \u003Cspan class=\"token function\">sudo\u003C/span> gpg \u003Cspan class=\"token parameter variable\">--dearmor\u003C/span> \u003Cspan class=\"token parameter variable\">-o\u003C/span> /usr/share/keyrings/docker-archive-keyring.gpg\n\u003Cspan class=\"token builtin class-name\">echo\u003C/span> \u003Cspan class=\"token string\">\"deb [arch=\u003Cspan class=\"token variable\">\u003Cspan class=\"token variable\">$(\u003C/span>dpkg --print-architecture\u003Cspan class=\"token variable\">)\u003C/span>\u003C/span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \u003Cspan class=\"token variable\">\u003Cspan class=\"token variable\">$(\u003C/span>lsb_release \u003Cspan class=\"token parameter variable\">-cs\u003C/span>\u003Cspan class=\"token variable\">)\u003C/span>\u003C/span> stable\"\u003C/span> \u003Cspan class=\"token operator\">|\u003C/span> \u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">tee\u003C/span> /etc/apt/sources.list.d/docker.list \u003Cspan class=\"token operator\">>\u003C/span> /dev/null\n\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> update\n\u003Cspan class=\"token function\">apt-cache\u003C/span> policy docker-ce\n\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> docker-ce\n\u003Cspan class=\"token function\">sudo\u003C/span> systemctl status \u003Cspan class=\"token function\">docker\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-nhz2wx\">If you want to execute docker without sudo you will need to execute some more commands:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">usermod\u003C/span> \u003Cspan class=\"token parameter variable\">-aG\u003C/span> \u003Cspan class=\"token function\">docker\u003C/span> \u003Cspan class=\"token variable\">$&#123;\u003Cspan class=\"token environment constant\">USER\u003C/span>&#125;\u003C/span>\n\u003Cspan class=\"token function\">su\u003C/span> - \u003Cspan class=\"token variable\">$&#123;\u003Cspan class=\"token environment constant\">USER\u003C/span>&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-rcbycd\">Make sure docker is running with \u003Ccode>docker run hello-world\u003C/code>.\u003C/p> \u003Ch3 id=\"install-docker-compose\" data-svelte-h=\"svelte-cbitrm\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#install-docker-compose\">\u003Cspan>#\u003C/span>\u003C/a>Install Docker Compose\u003C/h3> \u003Cp data-svelte-h=\"svelte-1pn413f\">Docker Compose helps in running complex apps easily. It’s like a recipe that tells Docker how to prepare and serve your app.\u003C/p> \u003Cp data-svelte-h=\"svelte-q7j166\">You can follow the Digital Ocean Tutorial: \u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-22-04\" rel=\"nofollow\">How To Install and Use Docker Compose on Ubuntu 22.04\u003C/a>\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">mkdir\u003C/span> \u003Cspan class=\"token parameter variable\">-p\u003C/span> ~/.docker/cli-plugins/\n\u003Cspan class=\"token function\">curl\u003C/span> \u003Cspan class=\"token parameter variable\">-SL\u003C/span> https://github.com/docker/compose/releases/download/v2.3.3/docker-compose-linux-x86_64 \u003Cspan class=\"token parameter variable\">-o\u003C/span> ~/.docker/cli-plugins/docker-compose\n\u003Cspan class=\"token function\">chmod\u003C/span> +x ~/.docker/cli-plugins/docker-compose\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-hvrddu\">And also make sure it’s installed correctly with \u003Ccode>docker compose version\u003C/code>.\u003C/p> \u003Ch3 id=\"install-sqlite\" data-svelte-h=\"svelte-euwmmq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#install-sqlite\">\u003Cspan>#\u003C/span>\u003C/a>Install SQLite\u003C/h3> \u003Cp data-svelte-h=\"svelte-kfcmms\">SQLite is a simple database system. You won’t needed if you use MySQL for both the Index and Tracker. In this tutorial\nwe will use it.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> update\n\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> sqlite3\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1dgnv5y\">You can check if it’s installed correctly with \u003Ccode>sqlite3 --version\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-55ocrl\">You can execute queries to get the Tracker or Index data connecting with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">$ sqlite3 ./storage/index/lib/database/sqlite3.db\nSQLite version \u003Cspan class=\"token number\">3.37\u003C/span>.2 \u003Cspan class=\"token number\">2022\u003C/span>-01-06 \u003Cspan class=\"token number\">13\u003C/span>:25:41\nEnter \u003Cspan class=\"token string\">\".help\"\u003C/span> \u003Cspan class=\"token keyword\">for\u003C/span> usage hints.\nsqlite\u003Cspan class=\"token operator\">>\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1xpdkxs\">Some useful commands are:\u003C/p> \u003Cul data-svelte-h=\"svelte-16kbk4m\">\u003Cli>\u003Ccode>.help\u003C/code>: show help.\u003C/li> \u003Cli>\u003Ccode>.tables\u003C/code>: list tables.\u003C/li> \u003Cli>\u003Ccode>.quit\u003C/code>: exit.\u003C/li>\u003C/ul> \u003Ch2 id=\"setup-the-dns\" data-svelte-h=\"svelte-yrf5v8\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-the-dns\">\u003Cspan>#\u003C/span>\u003C/a>Setup The DNS\u003C/h2> \u003Cp data-svelte-h=\"svelte-11szrw9\">Before running the application we have to setup the DNS. You can load the application using your domain instead of the droplet IP.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> The droplet has an IP that can be used to setup the DNS, but we recommend using an reserved IP. You can link the reserved IP to the droplet.\u003C/div> \u003Cp data-svelte-h=\"svelte-1fzhnoh\">First at all, you need to change your name servers and use the ones from Digital Ocean. You have to find out how to do that\nin your domain provider.\u003C/p> \u003Cp data-svelte-h=\"svelte-1gx85hd\">Then you need to create two \u003Ccode>A\u003C/code> records to point the domains to the droplet IP (or the reserved IP if you are using one).\u003C/p> \u003Cp data-svelte-h=\"svelte-1oivqlp\">Here is how the DNS configuration looks like for our demo:\u003C/p> \u003Cimg srcset=\"/images/posts/deploying-torrust-to-production/dns-configuration.png, /images/posts/deploying-torrust-to-production/dns-configuration.png, /images/posts/deploying-torrust-to-production/dns-configuration.png\" src=\"/images/posts/deploying-torrust-to-production/dns-configuration.png\" alt=\"Create\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Ch3 id=\"bep-34\" data-svelte-h=\"svelte-12m5xlv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#bep-34\">\u003Cspan>#\u003C/span>\u003C/a>BEP 34\u003C/h3> \u003Cp data-svelte-h=\"svelte-kibdaw\">As you can see in our DNS configuration we have a \u003Ccode>TXT\u003C/code> record for the tracker with this value:\u003C/p> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">BITTORRENT UDP:6969 TCP:443\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-12rh0x4\">That record implements the \u003Ca href=\"https://www.bittorrent.org/beps/bep_0034.html\" rel=\"nofollow\">BEP 34 DNS Tracker Preferences\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-9lq4rk\">That allows administrators to declare the port and the service priorities for a tracker domain. In our case, we have two different trackers running on ports \u003Ccode>6969\u003C/code> and \u003Ccode>443\u003C/code> and we prioritize the UDP tracker.\u003C/p> \u003Cp data-svelte-h=\"svelte-1u4ac1h\">Some services related to tracker (for instance \u003Ca href=\"https://newtrackon.com\" rel=\"nofollow\">https://newtrackon.com\u003C/a>) use this DNS record to verify tracker URLs.\u003C/p> \u003Ch2 id=\"install-the-application\" data-svelte-h=\"svelte-146i9al\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#install-the-application\">\u003Cspan>#\u003C/span>\u003C/a>Install The Application\u003C/h2> \u003Cp data-svelte-h=\"svelte-8lo22w\">First, we will install the application on port \u003Ccode>80\u003C/code> because we need a live app to generate the HTTPs certificates with\nLet’s Encrypt. Once we generate the certificates we can change the configuration to serve the application on port \u003Ccode>443\u003C/code>.\u003C/p> \u003Ch3 id=\"without-certificates\" data-svelte-h=\"svelte-j2n8q1\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#without-certificates\">\u003Cspan>#\u003C/span>\u003C/a>Without certificates\u003C/h3> \u003Cp data-svelte-h=\"svelte-eiuzgi\">We’ll start by launching your app in a basic, non-secure mode. Initial deployment steps will be covered, focusing on functionality before implementing SSL/TLS certificates. We need to run the application in order to generate certificates with Let’s Encrypt.\u003C/p> \u003Cp data-svelte-h=\"svelte-1k7c2w7\">First, we need to get the docker compose configuration. You can download it directly from the \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">Torrust Compose GitHub repo\u003C/a> or you can use Git:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token builtin class-name\">cd\u003C/span> \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token function\">mkdir\u003C/span> \u003Cspan class=\"token parameter variable\">-p\u003C/span> github/torrust \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token builtin class-name\">cd\u003C/span> torrust/  \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token function\">git\u003C/span> clone --single-branch \u003Cspan class=\"token parameter variable\">--branch\u003C/span> main https://github.com/torrust/torrust-compose.git  \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token builtin class-name\">cd\u003C/span> torrust-compose/  \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token function\">git\u003C/span> status  \u003Cspan class=\"token punctuation\">\u003C/span>\u003Cspan class=\"token punctuation\">\u003C/span>\n  \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token builtin class-name\">cd\u003C/span> droplet/\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-f6dfud\">If you use Git you will need to install it in the server. Follow the \u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-git-on-ubuntu-22-04\" rel=\"nofollow\">“How To Install Git on Ubuntu 22.04”\u003C/a> guide.\u003C/p> \u003Cp data-svelte-h=\"svelte-8zuklx\">After cloning the repository you have to run the install script:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">$ ./bin/install.sh\nCreating compose .env \u003Cspan class=\"token string\">'./.env'\u003C/span>\nCreating proxy config file: \u003Cspan class=\"token string\">'./storage/proxy/etc/nginx-conf/nginx.conf'\u003C/span>\nCreating index database: \u003Cspan class=\"token string\">'./storage/index/lib/database/sqlite3.db'\u003C/span>\nCreating index configuration: \u003Cspan class=\"token string\">'./storage/index/etc/index.toml'\u003C/span>\nCreating tracker database: \u003Cspan class=\"token string\">'./storage/tracker/lib/database/sqlite3.db'\u003C/span>\nCreating tracker configuration: \u003Cspan class=\"token string\">'./storage/tracker/etc/tracker.toml'\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-kgb9wo\">The script will create some needed directories and empty SQLite databases:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">$ tree storage/\nstorage/\n├── certbot\n│   ├── etc\n│   └── lib\n├── dhparam\n├── index\n│   ├── etc\n│   │   └── index.toml\n│   └── lib\n│       └── database\n│           └── sqlite3.db\n├── proxy\n│   ├── etc\n│   │   └── nginx-conf\n│   │       └── nginx.conf\n│   └── webroot\n└── tracker\n    ├── etc\n    │   └── tracker.toml\n    └── lib\n        └── database\n            └── sqlite3.db\n\n\u003Cspan class=\"token number\">17\u003C/span> directories, \u003Cspan class=\"token number\">5\u003C/span> files\n\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1qjv41z\">Now you can continue with some customizations. You can adjust the default configuration for all services\nor leave the default values. But at least you must change the domain and the secrets.\u003C/p> \u003Cp data-svelte-h=\"svelte-gb06cg\">First open the \u003Ccode>.env\u003C/code> file and find these environment variables:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r13dla\">\u003Cli>\u003Ccode>TORRUST_INDEX_GUI_API_BASE_URL\u003C/code>\u003C/li> \u003Cli>\u003Ccode>TORRUST_INDEX_CONFIG_OVERRIDE_TRACKER__TOKEN\u003C/code>\u003C/li> \u003Cli>\u003Ccode>TORRUST_INDEX_CONFIG_OVERRIDE_AUTH__SECRET_KEY\u003C/code>\u003C/li> \u003Cli>\u003Ccode>TORRUST_TRACKER_CONFIG_OVERRIDE_HTTP_API__ACCESS_TOKENS__ADMIN\u003C/code>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-wdd93k\">Replace the value for \u003Ccode>TORRUST_INDEX_GUI_API_BASE_URL\u003C/code> with your domain:\u003C/p> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">TORRUST_INDEX_GUI_API_BASE_URL='http://index.your-domain.com/api/v1'\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-vqh9gt\">You can generate the Tracker API token and the Auth Secret Key with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\"> gpg \u003Cspan class=\"token parameter variable\">--armor\u003C/span> --gen-random \u003Cspan class=\"token number\">1\u003C/span> \u003Cspan class=\"token number\">40\u003C/span>\n\u003Cspan class=\"token assign-left variable\">jcrmbzlGyeP7z53TUQtXmtltMb5TubsIE9e0DPLnS4Ih29JddQw5JA\u003C/span>\u003Cspan class=\"token operator\">==\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> NOTICE: We are not sending emails from the application because user&#39;s email validation is disabled on registration for the demo. If you want to enable email validation you will need to provide the SMTP configuration including the password in the `storage/index/etc/index.toml` config file.\u003C/div> \u003Cp data-svelte-h=\"svelte-1l5cthl\">Now, you should be able to run the application with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose up \u003Cspan class=\"token parameter variable\">--build\u003C/span> \u003Cspan class=\"token parameter variable\">--detach\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-48w7bs\">If you have reached this point, congratulations! you already have these live services:\u003C/p> \u003Cul data-svelte-h=\"svelte-paup52\">\u003Cli>Torrust Index: \u003Ca href=\"http://index.your-domain.com\" rel=\"nofollow\">http://index.your-domain.com\u003C/a>\u003C/li> \u003Cli>Torrust HTTP Tracker: \u003Ca href=\"http://tracker.your-domain.com/announce\" rel=\"nofollow\">http://tracker.your-domain.com/announce\u003C/a>\u003C/li> \u003Cli>Torrust UDP Tracker: \u003Ca href=\"udp://tracker.your-domain.com:6969/announce\">udp://tracker.your-domain.com:6969/announce\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1np0zyr\">In the next sections we will describe how to use Let’s Encrypt to generate certificates to use HTTPs for the Index website and HTTP Tracker.\u003C/p> \u003Ch3 id=\"generate-certificates-with-lets-encrypt\" data-svelte-h=\"svelte-luskqm\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#generate-certificates-with-lets-encrypt\">\u003Cspan>#\u003C/span>\u003C/a>Generate Certificates With Let’s Encrypt\u003C/h3> \u003Cp data-svelte-h=\"svelte-9zvs5l\">Let’s Encrypt provides free certificates. You’ll learn how to obtain and configure Let’s Encrypt SSL certificates for secure HTTPS connections.\u003C/p> \u003Cp data-svelte-h=\"svelte-402pa9\">First, you need to log in the “certbot” container. \u003Ca href=\"https://certbot.eff.org/\" rel=\"nofollow\">Certbot\u003C/a> is a free, open source software tool for automatically (using Let’s Encrypt certificates) enable HTTPS.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose run \u003Cspan class=\"token parameter variable\">--entrypoint\u003C/span> /bin/sh certbot\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> Notice that the previous command recreates the docker containers so you site will be down for some seconds.\u003C/div> \u003Cp data-svelte-h=\"svelte-3km01r\">Once you are logged in the certbot container you need to execute these certbot commands to generate the staging certificates:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">certbot certonly \u003Cspan class=\"token parameter variable\">--webroot\u003C/span> --webroot-path\u003Cspan class=\"token operator\">=\u003C/span>/var/www/html \u003Cspan class=\"token parameter variable\">--email\u003C/span> email@example.com --agree-tos --no-eff-email \u003Cspan class=\"token parameter variable\">--staging\u003C/span> \u003Cspan class=\"token parameter variable\">-d\u003C/span> index.torrust-demo.com\ncertbot certonly \u003Cspan class=\"token parameter variable\">--webroot\u003C/span> --webroot-path\u003Cspan class=\"token operator\">=\u003C/span>/var/www/html \u003Cspan class=\"token parameter variable\">--email\u003C/span> email@example.com --agree-tos --no-eff-email \u003Cspan class=\"token parameter variable\">--staging\u003C/span> \u003Cspan class=\"token parameter variable\">-d\u003C/span> tracker.torrust-demo.com\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-wk4kyj\">Replace \u003Ccode>email@example.com\u003C/code> with your email.\u003C/p> \u003Cp data-svelte-h=\"svelte-bhkkmm\">For the production certificates you can execute the same command but removing the flag \u003Ccode>--staging\u003C/code>:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">certbot certonly \u003Cspan class=\"token parameter variable\">--webroot\u003C/span> --webroot-path\u003Cspan class=\"token operator\">=\u003C/span>/var/www/html \u003Cspan class=\"token parameter variable\">--email\u003C/span> email@example.com --agree-tos --no-eff-email --force-renewal \u003Cspan class=\"token parameter variable\">-d\u003C/span> index.torrust-demo.com\ncertbot certonly \u003Cspan class=\"token parameter variable\">--webroot\u003C/span> --webroot-path\u003Cspan class=\"token operator\">=\u003C/span>/var/www/html \u003Cspan class=\"token parameter variable\">--email\u003C/span> email@example.com --agree-tos --no-eff-email --force-renewal \u003Cspan class=\"token parameter variable\">-d\u003C/span> tracker.torrust-demo.com\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-e0iof\">In the directory \u003Ccode>storage/certbot/etc/live\u003C/code> you should have at least one directory per domain.\u003C/p> \u003Ch3 id=\"change-nginx-configuration-to-use-certificates\" data-svelte-h=\"svelte-9zpi6d\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#change-nginx-configuration-to-use-certificates\">\u003Cspan>#\u003C/span>\u003C/a>Change Nginx Configuration To Use Certificates\u003C/h3> \u003Cp data-svelte-h=\"svelte-r7njd6\">Once we have the certificates, we’ll tell our server (Nginx) to use them, ensuring a secure website. Detailed steps to modify your Nginx configuration for SSL implementation will be provided.\u003C/p> \u003Ch4 id=\"generate-the-diffie-hellman-key\" data-svelte-h=\"svelte-1a5u8pf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#generate-the-diffie-hellman-key\">\u003Cspan>#\u003C/span>\u003C/a>Generate The Diffie-Hellman Key\u003C/h4> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> openssl dhparam \u003Cspan class=\"token parameter variable\">-out\u003C/span> /home/torrust/github/torrust/torrust-compose/droplet/storage/dhparam/dhparam-2048.pem \u003Cspan class=\"token number\">2048\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch4 id=\"update-nginx-configuration\" data-svelte-h=\"svelte-1osroiw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#update-nginx-configuration\">\u003Cspan>#\u003C/span>\u003C/a>Update Nginx Configuration\u003C/h4> \u003Cp data-svelte-h=\"svelte-19ikup3\">Edit the file \u003Ccode>./storage/proxy/etc/nginx-conf/nginx.conf\u003C/code> and uncomment all the commented lines for HTTPs servers:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">nginx\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-nginx\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-nginx\">\u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server\u003C/span>\u003C/span>\n\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> \u003Cspan class=\"token number\">443\u003C/span> ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> [::]:443 ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_name\u003C/span> index.torrust-demo.com\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_tokens\u003C/span> \u003Cspan class=\"token boolean\">off\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_certificate\u003C/span> /etc/letsencrypt/live/index.torrust-demo.com-0001/fullchain.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_certificate_key\u003C/span> /etc/letsencrypt/live/index.torrust-demo.com-0001/privkey.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_buffer_size\u003C/span> \u003Cspan class=\"token number\">8k\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_dhparam\u003C/span> /etc/ssl/certs/dhparam-2048.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_protocols\u003C/span> TLSv1.2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_prefer_server_ciphers\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_ciphers\u003C/span> ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_ecdh_curve\u003C/span> secp384r1\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_session_tickets\u003C/span> \u003Cspan class=\"token boolean\">off\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_stapling\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_stapling_verify\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">resolver\u003C/span> 8.8.8.8\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> ^~/api/\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">rewrite\u003C/span> ^/api/(.*)$ /\u003Cspan class=\"token variable\">$1\u003C/span> break\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">try_files\u003C/span> \u003Cspan class=\"token variable\">$uri\u003C/span> @index\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> /\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">try_files\u003C/span> \u003Cspan class=\"token variable\">$uri\u003C/span> @index-gui\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> @index\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_pass\u003C/span> http://index:3001\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Frame-Options \u003Cspan class=\"token string\">\"SAMEORIGIN\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-XSS-Protection \u003Cspan class=\"token string\">\"1; mode=block\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Content-Type-Options \u003Cspan class=\"token string\">\"nosniff\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Referrer-Policy \u003Cspan class=\"token string\">\"no-referrer-when-downgrade\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Content-Security-Policy \u003Cspan class=\"token string\">\"default-src * data: 'unsafe-eval' 'unsafe-inline'\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token comment\">#add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\u003C/span>\n    \u003Cspan class=\"token comment\"># enable strict transport security only if you understand the implications\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> @index-gui\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_pass\u003C/span> http://index-gui:3000\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Frame-Options \u003Cspan class=\"token string\">\"SAMEORIGIN\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-XSS-Protection \u003Cspan class=\"token string\">\"1; mode=block\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Content-Type-Options \u003Cspan class=\"token string\">\"nosniff\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Referrer-Policy \u003Cspan class=\"token string\">\"no-referrer-when-downgrade\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Content-Security-Policy \u003Cspan class=\"token string\">\"default-src * data: 'unsafe-eval' 'unsafe-inline'\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token comment\">#add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\u003C/span>\n    \u003Cspan class=\"token comment\"># enable strict transport security only if you understand the implications\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">root\u003C/span> /var/www/html\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">index\u003C/span> index.html index.htm index.nginx-debian.html\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server\u003C/span>\u003C/span>\n\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> \u003Cspan class=\"token number\">443\u003C/span> ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> [::]:443 ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_name\u003C/span> tracker.torrust-demo.com\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_tokens\u003C/span> \u003Cspan class=\"token boolean\">off\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_certificate\u003C/span> /etc/letsencrypt/live/tracker.torrust-demo.com/fullchain.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_certificate_key\u003C/span> /etc/letsencrypt/live/tracker.torrust-demo.com/privkey.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_buffer_size\u003C/span> \u003Cspan class=\"token number\">8k\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_dhparam\u003C/span> /etc/ssl/certs/dhparam-2048.pem\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_protocols\u003C/span> TLSv1.2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_prefer_server_ciphers\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_ciphers\u003C/span> ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_ecdh_curve\u003C/span> secp384r1\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_session_tickets\u003C/span> \u003Cspan class=\"token boolean\">off\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_stapling\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">ssl_stapling_verify\u003C/span> \u003Cspan class=\"token boolean\">on\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">resolver\u003C/span> 8.8.8.8\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> /api/\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">try_files\u003C/span> \u003Cspan class=\"token variable\">$uri\u003C/span> @tracker-api\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> /\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">try_files\u003C/span> \u003Cspan class=\"token variable\">$uri\u003C/span> @tracker-http\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> @tracker-api\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_pass\u003C/span> http://tracker:1212\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Frame-Options \u003Cspan class=\"token string\">\"SAMEORIGIN\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-XSS-Protection \u003Cspan class=\"token string\">\"1; mode=block\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Content-Type-Options \u003Cspan class=\"token string\">\"nosniff\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Referrer-Policy \u003Cspan class=\"token string\">\"no-referrer-when-downgrade\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Content-Security-Policy \u003Cspan class=\"token string\">\"default-src * data: 'unsafe-eval' 'unsafe-inline'\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token comment\">#add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\u003C/span>\n    \u003Cspan class=\"token comment\"># enable strict transport security only if you understand the implications\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">location\u003C/span> @tracker-http\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_pass\u003C/span> http://tracker:7070\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Frame-Options \u003Cspan class=\"token string\">\"SAMEORIGIN\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-XSS-Protection \u003Cspan class=\"token string\">\"1; mode=block\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> X-Content-Type-Options \u003Cspan class=\"token string\">\"nosniff\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Referrer-Policy \u003Cspan class=\"token string\">\"no-referrer-when-downgrade\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">add_header\u003C/span> Content-Security-Policy \u003Cspan class=\"token string\">\"default-src * data: 'unsafe-eval' 'unsafe-inline'\"\u003C/span> always\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token comment\">#add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\u003C/span>\n    \u003Cspan class=\"token comment\"># enable strict transport security only if you understand the implications\u003C/span>\n\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">proxy_set_header\u003C/span> X-Forwarded-For \u003Cspan class=\"token variable\">$proxy_add_x_forwarded_for\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">root\u003C/span> /var/www/html\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">index\u003C/span> index.html index.htm index.nginx-debian.html\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-b4z69l\">Make sure you also change the domains:\u003C/p> \u003Cul data-svelte-h=\"svelte-1gfj7cg\">\u003Cli>index.torrust-demo.com\u003C/li> \u003Cli>tracker.torrust-demo.com\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-vpc8yu\">You also have to change the API base URL in the \u003Ccode>.env\u003C/code> file:\u003C/p> \u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">TORRUST_INDEX_GUI_API_BASE_URL=https://index.torrust-demo.com/api/v1\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-aivotr\">Replace it from \u003Ccode>http://index.torrust-demo.com/api/v1\u003C/code> to \u003Ccode>https://index.torrust-demo.com/api/v1\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1crqqiv\">After changing the Nginx configuration you need to restart the Nginx server:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose \u003Cspan class=\"token parameter variable\">--ansi\u003C/span> never restart proxy\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"setup-cronjob-to-renew-certificates\" data-svelte-h=\"svelte-1kcbweb\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#setup-cronjob-to-renew-certificates\">\u003Cspan>#\u003C/span>\u003C/a>Setup Cronjob To Renew Certificates\u003C/h3> \u003Cp data-svelte-h=\"svelte-ds65v7\">Certificates expire, so we’ll set up an automatic renewal system, like a subscription that renews itself. We will set up an automate SSL certificate renewal using cronjobs to maintain continuous security.\u003C/p> \u003Cp data-svelte-h=\"svelte-el7wb5\">We will use crontab to execute a command every day:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">crontab\u003C/span> \u003Cspan class=\"token parameter variable\">-e\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-254yos\">Add the following crontab line:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">text\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-text\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-text\">0 12 * * * /home/torrust/github/torrust/torrust-compose/droplet/bin/ssl_renew.sh >> /var/log/cron.log 2>&amp;1\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-pebjgs\">You can check the cronjob output with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">tail\u003C/span> \u003Cspan class=\"token parameter variable\">-f\u003C/span> /var/log/cron.log\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1t6fbuj\">After generating the certificates and renewing them you should have a certbot directory structure similar to this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">$ \u003Cspan class=\"token function\">sudo\u003C/span> tree storage/certbot/\n\u003Cspan class=\"token punctuation\">[\u003C/span>sudo\u003Cspan class=\"token punctuation\">]\u003C/span> password \u003Cspan class=\"token keyword\">for\u003C/span> torrust:\nstorage/certbot/\n├── etc\n│   ├── accounts\n│   │   ├── acme-staging-v02.api.letsencrypt.org\n│   │   │   └── directory\n│   │   │       └── b39c03e978*****df8366ab6539\n│   │   │           ├── meta.json\n│   │   │           ├── private_key.json\n│   │   │           └── regr.json\n│   │   └── acme-v02.api.letsencrypt.org\n│   │       └── directory\n│   │           └── 441a435b0f8*****cc6dd22f34468\n│   │               ├── meta.json\n│   │               ├── private_key.json\n│   │               └── regr.json\n│   ├── archive\n│   │   ├── index.torrust-demo.com\n│   │   │   ├── cert1.pem\n│   │   │   ├── chain1.pem\n│   │   │   ├── fullchain1.pem\n│   │   │   └── privkey1.pem\n│   │   ├── index.torrust-demo.com-0001\n│   │   │   ├── cert1.pem\n│   │   │   ├── cert2.pem\n│   │   │   ├── chain1.pem\n│   │   │   ├── chain2.pem\n│   │   │   ├── fullchain1.pem\n│   │   │   ├── fullchain2.pem\n│   │   │   ├── privkey1.pem\n│   │   │   └── privkey2.pem\n│   │   └── tracker.torrust-demo.com\n│   │       ├── cert1.pem\n│   │       ├── cert2.pem\n│   │       ├── cert3.pem\n│   │       ├── chain1.pem\n│   │       ├── chain2.pem\n│   │       ├── chain3.pem\n│   │       ├── fullchain1.pem\n│   │       ├── fullchain2.pem\n│   │       ├── fullchain3.pem\n│   │       ├── privkey1.pem\n│   │       ├── privkey2.pem\n│   │       └── privkey3.pem\n│   ├── live\n│   │   ├── README\n│   │   ├── index.torrust-demo.com\n│   │   │   ├── README\n│   │   │   ├── cert.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com/cert1.pem\n│   │   │   ├── chain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com/chain1.pem\n│   │   │   ├── fullchain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com/fullchain1.pem\n│   │   │   └── privkey.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com/privkey1.pem\n│   │   ├── index.torrust-demo.com-0001\n│   │   │   ├── README\n│   │   │   ├── cert.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com-0001/cert2.pem\n│   │   │   ├── chain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com-0001/chain2.pem\n│   │   │   ├── fullchain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com-0001/fullchain2.pem\n│   │   │   └── privkey.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/index.torrust-demo.com-0001/privkey2.pem\n│   │   └── tracker.torrust-demo.com\n│   │       ├── README\n│   │       ├── cert.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/tracker.torrust-demo.com/cert3.pem\n│   │       ├── chain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/tracker.torrust-demo.com/chain3.pem\n│   │       ├── fullchain.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/tracker.torrust-demo.com/fullchain3.pem\n│   │       └── privkey.pem -\u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token punctuation\">..\u003C/span>/\u003Cspan class=\"token punctuation\">..\u003C/span>/archive/tracker.torrust-demo.com/privkey3.pem\n│   ├── renewal\n│   │   ├── index.torrust-demo.com-0001.conf\n│   │   ├── index.torrust-demo.com.conf\n│   │   └── tracker.torrust-demo.com.conf\n│   └── renewal-hooks\n│       ├── deploy\n│       ├── post\n│       └── pre\n└── lib\n\n\u003Cspan class=\"token number\">22\u003C/span> directories, \u003Cspan class=\"token number\">49\u003C/span> files\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"exposed-services\" data-svelte-h=\"svelte-48ebsd\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#exposed-services\">\u003Cspan>#\u003C/span>\u003C/a>Exposed services\u003C/h2> \u003Cp data-svelte-h=\"svelte-1pc2bld\">After finishing the instalaltion the main available services are:\u003C/p> \u003Cul data-svelte-h=\"svelte-1biu1k0\">\u003Cli>The Index: \u003Ca href=\"http://index.torrust-demo.com/\" rel=\"nofollow\">http://index.torrust-demo.com/\u003C/a>\u003C/li> \u003Cli>The HTTP Tracker: \u003Ca href=\"https://tracker.torrust-demo.com/announce\" rel=\"nofollow\">https://tracker.torrust-demo.com/announce\u003C/a>\u003C/li> \u003Cli>The UDP Tracker: \u003Ca href=\"udp://tracker.torrust-demo.com:6969/announce\">udp://tracker.torrust-demo.com:6969/announce\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-5q9hh8\">But there are some other exposed ports. In addition to the SSH port (22), when you run the container you’ll expose all the following ports on the server:\u003C/p> \u003Cul data-svelte-h=\"svelte-1qll13y\">\u003Cli>80 (proxy)\u003C/li> \u003Cli>443 (proxy)\u003C/li> \u003Cli>3001 (index-gui)\u003C/li> \u003Cli>3000 (index)\u003C/li> \u003Cli>6969 (tracker)\u003C/li> \u003Cli>7070 (tracker)\u003C/li> \u003Cli>1212 (tracker)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1scudva\">You should have access to all exposed services by default.\u003C/p> \u003Cp data-svelte-h=\"svelte-6ax34j\">You should be able to access the services directly (with no proxy) connecting to the containers:\u003C/p> \u003Cul data-svelte-h=\"svelte-16yb0ke\">\u003Cli>Index GUI (webapp): \u003Ca href=\"http://index.torrust-demo.com:3000\" rel=\"nofollow\">http://index.torrust-demo.com:3000\u003C/a>\u003C/li> \u003Cli>Index (API): \u003Ca href=\"http://tracker.torrust-demo.com:3001\" rel=\"nofollow\">http://tracker.torrust-demo.com:3001\u003C/a>\u003C/li> \u003Cli>Tracker (HTTP): \u003Ca href=\"http://tracker.torrust-demo.com:7070/announce\" rel=\"nofollow\">http://tracker.torrust-demo.com:7070/announce\u003C/a>\u003C/li> \u003Cli>Tracker (UDP): udp://tracker.torrust-demo.com:6969\u003C/li> \u003Cli>Tracker (API): \u003Ca href=\"http://tracker.torrust-demo.com:1212\" rel=\"nofollow\">http://tracker.torrust-demo.com:1212\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-ajgwh5\">But you should also be able to connect to all services except the UDP Tracker via the Nginx proxy both with HTTP\nor HTTPs:\u003C/p> \u003Cp data-svelte-h=\"svelte-1p0yt7j\">HTTP access to services via proxy:\u003C/p> \u003Cul data-svelte-h=\"svelte-qcct0u\">\u003Cli>\u003Cp>Index GUI (webapp): \u003Ca href=\"http://index.torrust-demo.com\" rel=\"nofollow\">http://index.torrust-demo.com\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Index (API): \u003Ca href=\"http://index.torrust-demo.com/api\" rel=\"nofollow\">http://index.torrust-demo.com/api\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Tracker (HTTP): \u003Ca href=\"http://tracker.torrust-demo.com/announce\" rel=\"nofollow\">http://tracker.torrust-demo.com/announce\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Tracker (API): \u003Ca href=\"http://tracker.torrust-demo.com/api\" rel=\"nofollow\">http://tracker.torrust-demo.com/api\u003C/a>\u003C/p>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-14y9mds\">HTTPs access to services via proxy:\u003C/p> \u003Cul data-svelte-h=\"svelte-168ip3o\">\u003Cli>\u003Cp>Index GUI (webapp): \u003Ca href=\"https://index.torrust-demo.com\" rel=\"nofollow\">https://index.torrust-demo.com\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Index (API): \u003Ca href=\"https://index.torrust-demo.com/api\" rel=\"nofollow\">https://index.torrust-demo.com/api\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Tracker (HTTP): \u003Ca href=\"https://tracker.torrust-demo.com/announce\" rel=\"nofollow\">https://tracker.torrust-demo.com/announce\u003C/a>\u003C/p>\u003C/li> \u003Cli>\u003Cp>Tracker (API): \u003Ca href=\"https://tracker.torrust-demo.com/api\" rel=\"nofollow\">https://tracker.torrust-demo.com/api\u003C/a>\u003C/p>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-2tutof\">You can disable both, direct access to the container (without using the Nginx proxy) and also access without certificates (HTTP). In that case you only need to expose port: \u003Ccode>443\u003C/code> and \u003Ccode>6969\u003C/code>. In order to do that you will\nneed to enable a firewall on the server or the Digital Ocean firewall.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> Notice: The UDP tracker is not available via the proxy. If you want all requests to go through the\n  proxy you need to change the Nginx configuration to set up a UDP proxy. There is a discussion\n  on the Tracker repository on GitHub about how to setup the proxy for the UDP tracker.\u003C/div> \u003Ch3 id=\"firewall\" data-svelte-h=\"svelte-i8d4dt\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#firewall\">\u003Cspan>#\u003C/span>\u003C/a>Firewall\u003C/h3> \u003Cp data-svelte-h=\"svelte-ogbeo\">By default there is no firewall on the server. If you want to enable the firewall you have two options:\u003C/p> \u003Cul data-svelte-h=\"svelte-yg13nw\">\u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-22-04\" rel=\"nofollow\">Setup your own firewall on the server\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.digitalocean.com/products/networking/firewalls/getting-started/quickstart/\" rel=\"nofollow\">Enable the Digital Ocean firewall\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-kmoeiz\">You can enable the UFW firewall on the server by following the Digital Ocean guide:\u003C/p> \u003Cp data-svelte-h=\"svelte-wepyce\">\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-22-04\" rel=\"nofollow\">How To Set Up a Firewall with UFW on Ubuntu 22.04\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1loho9w\">For example, you can allow only the ports \u003Ccode>22\u003C/code>, \u003Ccode>43\u003C/code> and \u003Ccode>6969\u003C/code> with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> ufw default deny incoming\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw default allow outgoing\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw allow \u003Cspan class=\"token function\">ssh\u003C/span>\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw allow \u003Cspan class=\"token number\">443\u003C/span>\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw allow \u003Cspan class=\"token number\">6969\u003C/span>/udp\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw \u003Cspan class=\"token builtin class-name\">enable\u003C/span>\n\u003Cspan class=\"token function\">sudo\u003C/span> ufw status verbose\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> However, there is a problem with setting up your own firewall. By default, Docker manipulates iptables to set up network isolation. However, this can interfere with UFW. To fix this, you need to tell Docker not to modify iptables.\u003C/div> \u003Ch3 id=\"health-checks\" data-svelte-h=\"svelte-1pfvxou\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#health-checks\">\u003Cspan>#\u003C/span>\u003C/a>Health checks\u003C/h3> \u003Cp data-svelte-h=\"svelte-1yq9drv\">Some services expose public health check endpoints.\u003C/p> \u003Cp data-svelte-h=\"svelte-6kq4xr\">Via proxy (HTTP):\u003C/p> \u003Cul data-svelte-h=\"svelte-1ajx2es\">\u003Cli>Index API: \u003Ca href=\"http://index.torrust-demo.com/api/health_check\" rel=\"nofollow\">http://index.torrust-demo.com/api/health_check\u003C/a>\u003C/li> \u003Cli>Tracker API: \u003Ca href=\"http://tracker.torrust-demo.com/api/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com/api/health_check\u003C/a>\u003C/li> \u003Cli>Tracker HTTP: \u003Ca href=\"http://tracker.torrust-demo.com/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com/health_check\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-xo4ab2\">Via proxy (HTTPs):\u003C/p> \u003Cul data-svelte-h=\"svelte-1ljr93f\">\u003Cli>Index: \u003Ca href=\"https://index.torrust-demo.com/api/health_check\" rel=\"nofollow\">https://index.torrust-demo.com/api/health_check\u003C/a>\u003C/li> \u003Cli>Tracker API: \u003Ca href=\"https://tracker.torrust-demo.com/api/health_check\" rel=\"nofollow\">https://tracker.torrust-demo.com/api/health_check\u003C/a>\u003C/li> \u003Cli>Tracker HTTPs: \u003Ca href=\"https://tracker.torrust-demo.com/health_check\" rel=\"nofollow\">https://tracker.torrust-demo.com/health_check\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1fvfa7z\">Direct access:\u003C/p> \u003Cul data-svelte-h=\"svelte-e687zk\">\u003Cli>Index API: \u003Ca href=\"http://tracker.torrust-demo.com:3001/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com:3001/health_check\u003C/a>\u003C/li> \u003Cli>Tracker API: \u003Ca href=\"http://tracker.torrust-demo.com:1212/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com:1212/health_check\u003C/a>\u003C/li> \u003Cli>Tracker HTTP: \u003Ca href=\"http://tracker.torrust-demo.com:7070/health_check\" rel=\"nofollow\">http://tracker.torrust-demo.com:7070/health_check\u003C/a>\u003C/li>\u003C/ul> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> These endpoints are very useful to test if your installation is OK.\u003C/div> \u003Ch2 id=\"troubleshooting\" data-svelte-h=\"svelte-2s3f5p\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#troubleshooting\">\u003Cspan>#\u003C/span>\u003C/a>Troubleshooting\u003C/h2> \u003Cp data-svelte-h=\"svelte-ax5yuc\">You might have problems setting up the application. There are some useful things you should know\nin order to be able to address potential problems.\u003C/p> \u003Cp data-svelte-h=\"svelte-o6x4qt\">First, it might be useful to enable the debug logging for some services. Both the Index and the Tracker\nhave a configuration option \u003Ccode>log_level = &quot;info&quot;\u003C/code>. You can change the logging level to \u003Ccode>debug\u003C/code> or even \u003Ccode>trace\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-51udfm\">Configuration files are located in:\u003C/p> \u003Cul data-svelte-h=\"svelte-1wxrdno\">\u003Cli>\u003Ccode>./storage/index/etc/index.toml\u003C/code>.\u003C/li> \u003Cli>\u003Ccode>./storage/tracker/etc/tracker.toml\u003C/code>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-30yl3m\">If you change the config files you will need to restart the services:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose restart\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1q5ghpo\">You can also check the logs of any service with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">docker\u003C/span> compose logs proxy\n\u003Cspan class=\"token function\">docker\u003C/span> compose logs certbot\n\u003Cspan class=\"token function\">docker\u003C/span> compose logs index\n\u003Cspan class=\"token function\">docker\u003C/span> compose logs index-gui\n\u003Cspan class=\"token function\">docker\u003C/span> compose logs tracker\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1jdvk2u\">If you change the config files you will need to restart the services.\u003C/p> \u003Cp data-svelte-h=\"svelte-qbolzt\">You can also enable the debug for the Nginx proxy. Edit the file \u003Ccode>./storage/proxy/etc/nginx-conf/nginx.conf\u003C/code> and add \u003Ccode>error_log\u003C/code> to the server configuration:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">nginx\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-nginx\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-nginx\">\u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server\u003C/span>\u003C/span>\n\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> \u003Cspan class=\"token number\">443\u003C/span> ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">listen\u003C/span> [::]:443 ssl http2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">server_name\u003C/span> index.torrust-demo.com\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n    \u003Cspan class=\"token directive\">\u003Cspan class=\"token keyword\">error_log\u003C/span> /var/log/nginx/error.log debug\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n    ...\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-pqdj5w\">If your server does not have too much disk space you could run out of disk space.\u003C/p> \u003Cp data-svelte-h=\"svelte-40sbj9\">Docker stores the logs in a separate directory, if you want to truncate the logs you can find them first with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token builtin class-name\">:\u003C/span> \u003Cspan class=\"token operator\">>\u003C/span> \u003Cspan class=\"token variable\">\u003Cspan class=\"token variable\">$(\u003C/span>\u003Cspan class=\"token function\">docker\u003C/span> inspect \u003Cspan class=\"token parameter variable\">--format\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">'&#123;&#123;.LogPath&#125;&#125;'\u003C/span> tracker\u003Cspan class=\"token variable\">)\u003C/span>\u003C/span>\n-bash: /var/lib/docker/containers/397484cca9572d98524e4f81095bb27f90c349306c39bc517afe5bcb3a6d7f5e/397484cca9572d98524e4f81095bb27f90c349306c39bc517afe5bcb3a6d7f5e-json.log: Permission denied\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1xly7ax\">And then truncate the file with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">bash\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> truncate \u003Cspan class=\"token parameter variable\">-s\u003C/span> \u003Cspan class=\"token number\">0\u003C/span> /var/lib/docker/containers/397484cca9572d98524e4f81095bb27f90c349306c39bc517afe5bcb3a6d7f5e/397484cca9572d98524e4f81095bb27f90c349306c39bc517afe5bcb3a6d7f5e-json.log\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1c5ztdz\">The docker compose configuration sets a limit on the number of log files and their size.\u003C/p> \u003Cp data-svelte-h=\"svelte-x4ieeu\">Finally, if you need some URL to test the HTTP tracker you can use these ones:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pyl43x\">\u003Cli>Announce request: \u003Ca href=\"https://tracker.torrust-demo.com/announce?info_hash=%44%3C%76%02%B4%FD%E8%3D%11%54%D6%D9%DA%48%80%84%18%B1%81%B6&amp;peer_addr=2.137.87.41&amp;downloaded=0&amp;uploaded=0&amp;peer_id=-qB00000000000000001&amp;port=17548&amp;left=0&amp;event=completed&amp;compact=0\" rel=\"nofollow\">https://tracker.torrust-demo.com/announce?info_hash=%44%3C%76%02%B4%FD%E8%3D%11%54%D6%D9%DA%48%80%84%18%B1%81%B6&amp;peer_addr=2.137.87.41&amp;downloaded=0&amp;uploaded=0&amp;peer_id=-qB00000000000000001&amp;port=17548&amp;left=0&amp;event=completed&amp;compact=0\u003C/a>\u003C/li> \u003Cli>Scrape request: \u003Ca href=\"https://tracker.torrust-demo.com/scrape?info_hash=%44%3C%76%02%B4%FD%E8%3D%11%54%D6%D9%DA%48%80%84%18%B1%81%B6\" rel=\"nofollow\">https://tracker.torrust-demo.com/scrape?info_hash=%44%3C%76%02%B4%FD%E8%3D%11%54%D6%D9%DA%48%80%84%18%B1%81%B6\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-lmmkiu\">The infohash used is \u003Ccode>443C7602B4FDE83D1154D6D9DA48808418B181B6\u003C/code>.\u003C/p> \u003Ch2 id=\"maintenance\" data-svelte-h=\"svelte-mogi0a\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#maintenance\">\u003Cspan>#\u003C/span>\u003C/a>Maintenance\u003C/h2> \u003Ch3 id=\"backups\" data-svelte-h=\"svelte-d0a5l2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#backups\">\u003Cspan>#\u003C/span>\u003C/a>Backups\u003C/h3> \u003Cp data-svelte-h=\"svelte-1te7x1f\">All the data used by the application is in the \u003Ccode>storage\u003C/code> folder.\u003C/p> \u003Cp data-svelte-h=\"svelte-t1o99j\">We are using SQLite so the only thing we need to do is to backup the database files.\u003C/p> \u003Cul data-svelte-h=\"svelte-zxwgiw\">\u003Cli>Index database: \u003Ccode>index/lib/database/sqlite3.db\u003C/code>\u003C/li> \u003Cli>Tracker database: \u003Ccode>tracker/lib/database/sqlite3.db\u003C/code>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-olrpu9\">We enabled backups for the droplet when we created it. Droplet backups are generated\nonce per week. You should setup a better backup policy or use a MySQL service that provides backup.\nAn easy way to increase the number of backups would be to mount a volume and periodically backup the files\nyou want to backup, for example the database files or the configuration files.\u003C/p> \u003Cp data-svelte-h=\"svelte-1nkmtva\">Alternatively, you can use \u003Ca href=\"https://docs.digitalocean.com/developer-center/droplets-and-volumes-backups-with-snapshooter/\" rel=\"nofollow\">SnapShooter to backup droplets and volumes\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-7p1mu4\">How to setup a proper backup policy is out of the scope of this tutorial.\u003C/p> \u003Ch3 id=\"monitoring\" data-svelte-h=\"svelte-17fd9jj\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#monitoring\">\u003Cspan>#\u003C/span>\u003C/a>Monitoring\u003C/h3> \u003Cp data-svelte-h=\"svelte-153j7wi\">It’s important to know the state of your services. Digital Ocean allow you to set:\u003C/p> \u003Cul data-svelte-h=\"svelte-olqmpi\">\u003Cli>Resource alerts\u003C/li> \u003Cli>Uptime checks\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1q6dx3g\">We have set up both.\u003C/p> \u003Cp data-svelte-h=\"svelte-mj1xlf\">With the “resource alerts” you can be notified when the droplet is having trouble with the resources (memory, CPU, disk or bandwidth).\u003C/p> \u003Cimg srcset=\"/images/posts/deploying-torrust-to-production/digital-ocean-monitoring-resource-alerts.png, /images/posts/deploying-torrust-to-production/digital-ocean-monitoring-resource-alerts.png, /images/posts/deploying-torrust-to-production/digital-ocean-monitoring-resource-alerts.png\" src=\"/images/posts/deploying-torrust-to-production/digital-ocean-monitoring-resource-alerts.png\" alt=\"Create\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-1v0fopu\">And “uptime checks” can be used to monitor the state of the services.\u003C/p> \u003Cimg srcset=\"/images/posts/deploying-torrust-to-production/digital-ocean-monitoring-uptime.png, /images/posts/deploying-torrust-to-production/digital-ocean-monitoring-uptime.png, /images/posts/deploying-torrust-to-production/digital-ocean-monitoring-uptime.png\" src=\"/images/posts/deploying-torrust-to-production/digital-ocean-monitoring-uptime.png\" alt=\"Create\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-8z1d4n\">We used the health check endpoints for some services like APIs and the HTTP tracker.\u003C/p> \u003Ch2 id=\"cost\" data-svelte-h=\"svelte-86dcoy\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#cost\">\u003Cspan>#\u003C/span>\u003C/a>Cost\u003C/h2> \u003Cul data-svelte-h=\"svelte-1kybchl\">\u003Cli>Basic droplet (1GB/1CPU, 25GB SSD Disk, 1000GB transfer): \u003Cstrong>$6\u003C/strong> per month.\u003C/li> \u003Cli>Weekly droplet backup: \u003Cstrong>$1.20\u003C/strong> per month.\u003C/li> \u003Cli>Reserved IP: \u003Cstrong>$5.00\u003C/strong> per month.\u003C/li> \u003Cli>Domain: depends on your provider.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1vxchds\">Total cost: \u003Cstrong>$12.2\u003C/strong> per month.\u003C/p> \u003Cp data-svelte-h=\"svelte-1ir26c8\">See \u003Ca href=\"https://www.digitalocean.com/pricing\" rel=\"nofollow\">Digital Ocean pricing\u003C/a> for more information.\u003C/p> \u003Ch2 id=\"other-considerations\" data-svelte-h=\"svelte-12m3v1c\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#other-considerations\">\u003Cspan>#\u003C/span>\u003C/a>Other Considerations\u003C/h2> \u003Ch3 id=\"adding-the-tracker-to-public-lists\" data-svelte-h=\"svelte-1rf8ibq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#adding-the-tracker-to-public-lists\">\u003Cspan>#\u003C/span>\u003C/a>Adding The Tracker To Public Lists\u003C/h3> \u003Cp data-svelte-h=\"svelte-8tcue5\">If you are interested in, you can add your tracker to some tracker lists, for example: \u003Ca href=\"https://newtrackon.com\" rel=\"nofollow\">https://newtrackon.com\u003C/a>.\u003C/p> \u003Ch3 id=\"sending-emails\" data-svelte-h=\"svelte-15ilxqw\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#sending-emails\">\u003Cspan>#\u003C/span>\u003C/a>Sending Emails\u003C/h3> \u003Cp data-svelte-h=\"svelte-31tyot\">We have not enabled email verification. If you enable it you will need to configure the SMTP server in the Index configuration:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">toml\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-toml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-toml\">\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token table class-name\">mail\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\n\u003Cspan class=\"token key property\">email_verification_enabled\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token boolean\">false\u003C/span>\n\u003Cspan class=\"token key property\">from\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"example@email.com\"\u003C/span>\n\u003Cspan class=\"token key property\">reply_to\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"noreply@email.com\"\u003C/span>\n\u003Cspan class=\"token key property\">username\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"\"\u003C/span>\n\u003Cspan class=\"token key property\">password\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"\"\u003C/span>\n\u003Cspan class=\"token key property\">server\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token string\">\"mailcatcher\"\u003C/span>\n\u003Cspan class=\"token key property\">port\u003C/span> \u003Cspan class=\"token punctuation\">=\u003C/span> \u003Cspan class=\"token number\">1025\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch3 id=\"docker-image-tags\" data-svelte-h=\"svelte-d1hppf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#docker-image-tags\">\u003Cspan>#\u003C/span>\u003C/a>Docker Image Tags\u003C/h3> \u003Cp data-svelte-h=\"svelte-mkbqhg\">We have used the \u003Ccode>develop\u003C/code> tag for the Docker images. We will update this guide to use version \u003Ccode>v3.0\u003C/code> once it’s released.\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cul data-svelte-h=\"svelte-15qc73f\">\u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-secure-a-containerized-node-js-application-with-nginx-let-s-encrypt-and-docker-compose\" rel=\"nofollow\">How To Secure a Containerized Node.js Application with Nginx, Let’s Encrypt, and Docker Compose\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-22-04\" rel=\"nofollow\">Initial Server Setup with Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-22-04\" rel=\"nofollow\">How to Set Up SSH Keys on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-22-04\" rel=\"nofollow\">How To Install and Use Docker on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-22-04\" rel=\"nofollow\">How To Install and Use Docker Compose on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-22-04\" rel=\"nofollow\">How To Set Up a Firewall with UFW on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-install-git-on-ubuntu-22-04\" rel=\"nofollow\">How To Install Git on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-22-04\" rel=\"nofollow\">How To Set Up a Firewall with UFW on Ubuntu 22.04\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.bittorrent.org/beps/bep_0034.html\" rel=\"nofollow\">BEP 34 DNS Tracker Preferences\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://letsencrypt.org/\" rel=\"nofollow\">https://letsencrypt.org/\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://certbot.eff.org/\" rel=\"nofollow\">https://certbot.eff.org/\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/issues/11\" rel=\"nofollow\">UDP Tracker with Nginx proxy\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://docs.digitalocean.com/products/images/backups/details/features/\" rel=\"nofollow\">Digital Ocean - Backups Features\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.digitalocean.com/developer-center/droplets-and-volumes-backups-with-snapshooter/\" rel=\"nofollow\">Droplets and Volumes Backups with SnapShooter\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.digitalocean.com/pricing\" rel=\"nofollow\">Digital Ocean pricing\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-gy8emo\">With containerization, having a production ready Index and Tracker with Torrust is very easy. Containerization allows you to install the application in many different hosting providers with no effort.\u003C/p> \u003Cp data-svelte-h=\"svelte-30klad\">It also allows you to keep your production environment up to date, because it’s also possible to easily update the docker images.\u003C/p> \u003Cp data-svelte-h=\"svelte-km643h\">And finally, you can also scale up your production environment as long as the demand increases. For example, just increasing the droplet size.\u003C/p> \u003Cp data-svelte-h=\"svelte-1e29q46\">We hope you find this guide useful. Let us know what you think about it!\u003C/p> \u003Cul data-svelte-h=\"svelte-hqjduw\">\u003Cli>Do you think the process is to complex?\u003C/li> \u003Cli>Do you think the process could be improved or simplified?\u003C/li> \u003Cli>Is there something missing you want to know about?\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-gxsd2p\">If you see something wrong or you want to contribute by:\u003C/p> \u003Cul data-svelte-h=\"svelte-1pxkwtk\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think that could be interesting to have,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-jnq0pp\">If you have any questions or issues please open an issue in the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-316cp7\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Compose: \u003Ca href=\"https://github.com/torrust/torrust-compose\" rel=\"nofollow\">https://github.com/torrust/torrust-compose\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p>\u003C/div>\u003C/div>",[259,260,261],{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":129,"slug":130,"coverImage":131,"date":132,"updated":6,"excerpt":133,"contributor":24,"contributorSlug":25,"tags":134,"hidden":12,"html":138,"readingTime":33},{"title":114,"slug":115,"coverImage":116,"date":117,"updated":6,"excerpt":118,"contributor":24,"contributorSlug":25,"tags":119,"hidden":12,"html":120,"readingTime":99,"relatedPosts":263},[264,265,266],{"title":47,"slug":48,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":52,"hidden":12,"html":58,"readingTime":16},{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":102,"slug":103,"coverImage":104,"date":105,"updated":6,"excerpt":106,"contributor":24,"contributorSlug":25,"tags":107,"hidden":12,"html":108,"readingTime":109},{"title":114,"slug":115,"coverImage":116,"date":117,"updated":6,"excerpt":118,"contributor":24,"contributorSlug":25,"tags":268,"hidden":12,"html":269,"readingTime":99,"relatedPosts":270},[96,54]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"hello-torrent-enthusiasts\" data-svelte-h=\"svelte-rwov94\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hello-torrent-enthusiasts\">\u003Cspan>#\u003C/span>\u003C/a>\u003Cstrong>Hello, Torrent Enthusiasts!\u003C/strong>\u003C/h2> \u003Cp data-svelte-h=\"svelte-6xxpl4\">We’re thrilled to announce the beta demo of Bittorrent Torrust Index v3.0.0 is now live! This is a significant milestone for us, and we’re eager to share what we’ve been working on with our vibrant community.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-aowssa\">Live demo: \u003Ca href=\"http://index.torrust-demo.com\" rel=\"nofollow\">http://index.torrust-demo.com\u003C/a>\u003C/p>\u003C/div> \u003Ch2 id=\"experience-the-beta-demo-today\" data-svelte-h=\"svelte-19bz0w0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#experience-the-beta-demo-today\">\u003Cspan>#\u003C/span>\u003C/a>Experience the Beta Demo Today\u003C/h2> \u003Cp data-svelte-h=\"svelte-1a4oy3w\">Our beta demo is your sneak peek into the future of torrent indexing. We invite you to dive in, explore its features, and experience the enhancements firsthand. Remember, this is a beta version, so you’re getting an early glimpse before the final release!\u003C/p> \u003Cp data-svelte-h=\"svelte-nxw1jv\">You can test it at: \u003Cstrong>\u003Ca href=\"http://index.torrust-demo.com\" rel=\"nofollow\">http://index.torrust-demo.com\u003C/a>\u003C/strong>\u003C/p> \u003Ch2 id=\"your-feedback-makes-us-better\" data-svelte-h=\"svelte-1mkcvv2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#your-feedback-makes-us-better\">\u003Cspan>#\u003C/span>\u003C/a>Your Feedback Makes Us Better\u003C/h2> \u003Cp data-svelte-h=\"svelte-1c0y8q4\">We believe in the power of community-driven development. That’s why we’re calling on you, our users, to actively participate in testing the beta.\u003C/p> \u003Cp data-svelte-h=\"svelte-ktuu5f\">Encountered a bug? Noticed something off? We want to hear about it. Please contribute by opening issues on our GitHub repository. Your insights are invaluable in refining and perfecting the platform.\u003C/p> \u003Ch2 id=\"join-the-conversation\" data-svelte-h=\"svelte-1tji4rp\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#join-the-conversation\">\u003Cspan>#\u003C/span>\u003C/a>Join the Conversation\u003C/h2> \u003Cp data-svelte-h=\"svelte-plipxz\">Got ideas? Suggestions for improvement? Join the \u003Ca href=\"https://github.com/torrust/torrust-index-gui/discussions\" rel=\"nofollow\">discussion\u003C/a> on our GitHub repo’s discussion section. Your thoughts and proposals are a key part of our collaborative development process. Let’s brainstorm together to make Torrust even better.\u003C/p> \u003Ch2 id=\"important-notice-demo-availability\" data-svelte-h=\"svelte-1b7v9jv\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#important-notice-demo-availability\">\u003Cspan>#\u003C/span>\u003C/a>Important Notice: Demo Availability\u003C/h2> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-168ochg\">Please be aware that the demo is subject to downtime or resets. As a beta version, it’s part of our testing process. Any data you add may be lost during these periods. We appreciate your understanding and patience as we fine-tune the platform.\u003C/p>\u003C/div> \u003Ch2 id=\"a-heartfelt-thank-you-to-our-contributors\" data-svelte-h=\"svelte-mak5d\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#a-heartfelt-thank-you-to-our-contributors\">\u003Cspan>#\u003C/span>\u003C/a>A Heartfelt Thank You to Our Contributors\u003C/h2> \u003Cp data-svelte-h=\"svelte-1fk4nd3\">This release wouldn’t have been possible without the dedication and hard work of our contributors. A big shout-out to everyone who has contributed their time, skills, and passion to this release. Your contributions are the backbone of this project, and we’re immensely grateful for your support.\u003C/p> \u003Ch2 id=\"join-us-in-this-exciting-journey\" data-svelte-h=\"svelte-1rcv7xf\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#join-us-in-this-exciting-journey\">\u003Cspan>#\u003C/span>\u003C/a>Join Us in This Exciting Journey\u003C/h2> \u003Cp data-svelte-h=\"svelte-1skoy0k\">We’re just getting started, and there’s much more to come. Stay tuned for more updates, and thank you for being a part of this journey. We very welcome any contributions to the projects.\u003C/p>\u003C/div>\u003C/div>",[271,272,273],{"title":47,"slug":48,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":52,"hidden":12,"html":58,"readingTime":16},{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":102,"slug":103,"coverImage":104,"date":105,"updated":6,"excerpt":106,"contributor":24,"contributorSlug":25,"tags":107,"hidden":12,"html":108,"readingTime":109},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205,"relatedPosts":275},[276,284,285],{"title":277,"slug":278,"coverImage":279,"date":280,"updated":6,"excerpt":281,"tags":282,"hidden":12,"html":283,"readingTime":109},"How To Contribute To This Site","how-to-contribute-to-this-site","/images/posts/sample-post.jpg","2023-04-22T21:55:15.361Z","How to manage existing blog posts and create new ones on this site.",[160]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Ch2 id=\"table-of-contents\" data-svelte-h=\"svelte-1m3njcc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#table-of-contents\">\u003Cspan>#\u003C/span>\u003C/a>Table of Contents\u003C/h2> \u003Cul data-svelte-h=\"svelte-1v4ptj3\">\u003Cli>\u003Ca href=\"#processing\">Processing\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#creating-a-new-post\">Creating a new post\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#managing-blog-posts\">Managing blog posts\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"#rss\">RSS\u003C/a>\u003C/li>\u003C/ul>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Cp data-svelte-h=\"svelte-1xwgc8f\">All blog posts are located inside the \u003Ccode>src/routes/(blog-article)\u003C/code> folder. Each folder inside it represents a blog post, and each folder has a \u003Ccode>+page.md\u003C/code> file, which is the file that contains the post’s content.\u003C/p> \u003Cp data-svelte-h=\"svelte-w9sf9o\">This way, the URL for each blog post is generated with the folder’s name. For example, the folder \u003Ccode>src/routes/(blog-article)/how-blog-posts-work\u003C/code> will generate the URL \u003Ccode>https://mysite.com/how-blog-posts-work\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-c4i0f2\">All posts are Markdown files, which means you can use the \u003Ca href=\"https://www.markdownguide.org/basic-syntax\" rel=\"nofollow\">Markdown syntax\u003C/a> in them, and it will work out of the box. However, since this projects uses \u003Ca href=\"https://mdsvex.pngwn.io/\" rel=\"nofollow\">MDsveX\u003C/a> to parse Markdown, you can also use Svelte components inside them! This means that the components used in other pages can also be used in blog posts.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> This is a Svelte component inside a Markdown file!\u003C/div> \u003Ch2 id=\"processing\" data-svelte-h=\"svelte-1z0x6vg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#processing\">\u003Cspan>#\u003C/span>\u003C/a>Processing\u003C/h2> \u003Cp data-svelte-h=\"svelte-1kf8rlo\">Besides the blog post page itself, the blog posts can be displayed in other places, such as the \u003Ccode>/blog\u003C/code> page, which lists all blog posts, and the \u003Ccode>&lt;RecentPosts&gt;\u003C/code> component, used in the home page.\u003C/p> \u003Cp data-svelte-h=\"svelte-1eocxho\">To be able to do that, posts are processed in the \u003Ccode>src/lib/data/blog-posts/index.ts\u003C/code> file. That file imports the blog post files and processes them, so we’re able to use some of the post’s metadata to list them. For example, we get the post’s title, cover image, and calculate the reading time based on its content, so that information is displayed in the blog post cards in the \u003Ccode>/blog\u003C/code> page.\u003C/p> \u003Cp data-svelte-h=\"svelte-2zodqd\">There is also some basic logic to get related posts based on a post’s tags. The logic should be straightforward enough to modify it to your needs.\u003C/p> \u003Ch2 id=\"creating-a-new-post\" data-svelte-h=\"svelte-m25oyt\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#creating-a-new-post\">\u003Cspan>#\u003C/span>\u003C/a>Creating a new post\u003C/h2> \u003Cp data-svelte-h=\"svelte-v0p6s8\">To create a new post, create a new folder inside the \u003Ccode>src/routes/(blog-article)\u003C/code> folder, and inside it, create a \u003Ccode>+page.md\u003C/code> file. The folder name will be used as the post’s URL slug, so make sure it’s a valid URL slug.\u003C/p> \u003Cp data-svelte-h=\"svelte-1gmm44u\">Inside the \u003Ccode>+page.md\u003C/code> file, you must start with the front matter, which is a YAML-like syntax that is used to define metadata for the post. The front matter must be the first thing in the file, and must be separated from the rest of the content by three dashes (\u003Ccode>---\u003C/code>). An example of a front matter is:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">markdown\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-md\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-md\">\u003Cspan class=\"token front-matter-block\">\u003Cspan class=\"token punctuation\">---\u003C/span>\n\u003Cspan class=\"token front-matter yaml language-yaml\">slug: my-new-blog-post\ntitle: My New Blog Post\ndate: 2023-04-22T20:45:25.350Z\nexcerpt: A short description of the post\ncoverImage: /images/posts/cover-image.jpg\ntags:\n  - Example\u003C/span>\n\u003Cspan class=\"token punctuation\">---\u003C/span>\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"managing-blog-posts\" data-svelte-h=\"svelte-1dbrz46\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#managing-blog-posts\">\u003Cspan>#\u003C/span>\u003C/a>Managing blog posts\u003C/h2> \u003Cp data-svelte-h=\"svelte-1sthwsb\">I highly recommend the \u003Ca href=\"https://frontmatter.codes/\" rel=\"nofollow\">Front Matter VS Code extension\u003C/a> to manage blog posts. It gives you a nice CMS-like UI to manage the front matter of all blog posts, as well as a preview of their content. It is, of course, optional, and you can manage everything directly in the Markdown files if you prefer.\u003C/p> \u003Cimg srcset=\"/images/posts/frontmatter-preview-dashboard.png, /images/posts/frontmatter-preview-dashboard.png, /images/posts/frontmatter-preview-dashboard.png\" src=\"/images/posts/frontmatter-preview-dashboard.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the dashboard with all posts\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"> \u003Cimg srcset=\"/images/posts/frontmatter-preview-edit.png, /images/posts/frontmatter-preview-edit.png, /images/posts/frontmatter-preview-edit.png\" src=\"/images/posts/frontmatter-preview-edit.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the post editing UI\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"> \u003Ch2 id=\"rss\" data-svelte-h=\"svelte-i1135l\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rss\">\u003Cspan>#\u003C/span>\u003C/a>RSS\u003C/h2> \u003Cp data-svelte-h=\"svelte-m96fk4\">This template automatically generates a RSS feed of your blog posts. It is generated in the \u003Ccode>src/routes/rss.xml/+server.ts\u003C/code> file, and it is available at the \u003Ccode>/rss.xml\u003C/code> URL.\u003C/p>\u003C/div>\u003C/div>",{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":277,"slug":278,"coverImage":279,"date":280,"updated":6,"excerpt":281,"tags":286,"hidden":12,"html":287,"readingTime":109},[160]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Cp data-svelte-h=\"svelte-1xwgc8f\">All blog posts are located inside the \u003Ccode>src/routes/(blog-article)\u003C/code> folder. Each folder inside it represents a blog post, and each folder has a \u003Ccode>+page.md\u003C/code> file, which is the file that contains the post’s content.\u003C/p> \u003Cp data-svelte-h=\"svelte-w9sf9o\">This way, the URL for each blog post is generated with the folder’s name. For example, the folder \u003Ccode>src/routes/(blog-article)/how-blog-posts-work\u003C/code> will generate the URL \u003Ccode>https://mysite.com/how-blog-posts-work\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-c4i0f2\">All posts are Markdown files, which means you can use the \u003Ca href=\"https://www.markdownguide.org/basic-syntax\" rel=\"nofollow\">Markdown syntax\u003C/a> in them, and it will work out of the box. However, since this projects uses \u003Ca href=\"https://mdsvex.pngwn.io/\" rel=\"nofollow\">MDsveX\u003C/a> to parse Markdown, you can also use Svelte components inside them! This means that the components used in other pages can also be used in blog posts.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> This is a Svelte component inside a Markdown file!\u003C/div> \u003Ch2 id=\"processing\" data-svelte-h=\"svelte-1z0x6vg\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#processing\">\u003Cspan>#\u003C/span>\u003C/a>Processing\u003C/h2> \u003Cp data-svelte-h=\"svelte-1kf8rlo\">Besides the blog post page itself, the blog posts can be displayed in other places, such as the \u003Ccode>/blog\u003C/code> page, which lists all blog posts, and the \u003Ccode>&lt;RecentPosts&gt;\u003C/code> component, used in the home page.\u003C/p> \u003Cp data-svelte-h=\"svelte-1eocxho\">To be able to do that, posts are processed in the \u003Ccode>src/lib/data/blog-posts/index.ts\u003C/code> file. That file imports the blog post files and processes them, so we’re able to use some of the post’s metadata to list them. For example, we get the post’s title, cover image, and calculate the reading time based on its content, so that information is displayed in the blog post cards in the \u003Ccode>/blog\u003C/code> page.\u003C/p> \u003Cp data-svelte-h=\"svelte-2zodqd\">There is also some basic logic to get related posts based on a post’s tags. The logic should be straightforward enough to modify it to your needs.\u003C/p> \u003Ch2 id=\"creating-a-new-post\" data-svelte-h=\"svelte-m25oyt\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#creating-a-new-post\">\u003Cspan>#\u003C/span>\u003C/a>Creating a new post\u003C/h2> \u003Cp data-svelte-h=\"svelte-v0p6s8\">To create a new post, create a new folder inside the \u003Ccode>src/routes/(blog-article)\u003C/code> folder, and inside it, create a \u003Ccode>+page.md\u003C/code> file. The folder name will be used as the post’s URL slug, so make sure it’s a valid URL slug.\u003C/p> \u003Cp data-svelte-h=\"svelte-1gmm44u\">Inside the \u003Ccode>+page.md\u003C/code> file, you must start with the front matter, which is a YAML-like syntax that is used to define metadata for the post. The front matter must be the first thing in the file, and must be separated from the rest of the content by three dashes (\u003Ccode>---\u003C/code>). An example of a front matter is:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">markdown\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-md\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-md\">\u003Cspan class=\"token front-matter-block\">\u003Cspan class=\"token punctuation\">---\u003C/span>\n\u003Cspan class=\"token front-matter yaml language-yaml\">slug: my-new-blog-post\ntitle: My New Blog Post\ndate: 2023-04-22T20:45:25.350Z\nexcerpt: A short description of the post\ncoverImage: /images/posts/cover-image.jpg\ntags:\n  - Example\u003C/span>\n\u003Cspan class=\"token punctuation\">---\u003C/span>\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"managing-blog-posts\" data-svelte-h=\"svelte-1dbrz46\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#managing-blog-posts\">\u003Cspan>#\u003C/span>\u003C/a>Managing blog posts\u003C/h2> \u003Cp data-svelte-h=\"svelte-1sthwsb\">I highly recommend the \u003Ca href=\"https://frontmatter.codes/\" rel=\"nofollow\">Front Matter VS Code extension\u003C/a> to manage blog posts. It gives you a nice CMS-like UI to manage the front matter of all blog posts, as well as a preview of their content. It is, of course, optional, and you can manage everything directly in the Markdown files if you prefer.\u003C/p> \u003Cimg srcset=\"/images/posts/frontmatter-preview-dashboard.png, /images/posts/frontmatter-preview-dashboard.png, /images/posts/frontmatter-preview-dashboard.png\" src=\"/images/posts/frontmatter-preview-dashboard.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the dashboard with all posts\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"> \u003Cimg srcset=\"/images/posts/frontmatter-preview-edit.png, /images/posts/frontmatter-preview-edit.png, /images/posts/frontmatter-preview-edit.png\" src=\"/images/posts/frontmatter-preview-edit.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the post editing UI\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"> \u003Ch2 id=\"rss\" data-svelte-h=\"svelte-i1135l\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rss\">\u003Cspan>#\u003C/span>\u003C/a>RSS\u003C/h2> \u003Cp data-svelte-h=\"svelte-m96fk4\">This template automatically generates a RSS feed of your blog posts. It is generated in the \u003Ccode>src/routes/rss.xml/+server.ts\u003C/code> file, and it is available at the \u003Ccode>/rss.xml\u003C/code> URL.\u003C/p>\u003C/div>\u003C/div>",{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":289,"hidden":12,"html":290,"readingTime":205,"relatedPosts":291},[160,201,202,203]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-1bew33\">BitTorrent, an age-old protocol, is a powerful way to share data over the internet.\nIn our journey to building robust BitTorrent projects, we’ve chosen the Rust\nprogramming language for its memory safety and concurrency features. To streamline\nthe development and distribution of our projects, we’ve also employed Docker and\nPodman.\u003C/p> \u003Cp data-svelte-h=\"svelte-n4c01r\">In this post, we’ll dive deep into the best practices we’ve adopted for\ndockerizing our Rust applications.\u003C/p> \u003Cp data-svelte-h=\"svelte-2fok2a\">Our \u003Ca href=\"https://docs.docker.com/engine/reference/builder/\" rel=\"nofollow\">Containerfiles\u003C/a>, \u003Cem>commonly called a \u003Ccode>&quot;Dockerfile&quot;\u003C/code>\u003C/em>, are stored in the roots of our two main rust repositories, for reference:\u003C/p> \u003Cul data-svelte-h=\"svelte-pc1ly4\">\u003Cli>Torrust-Tracker \u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/Containerfile\" rel=\"nofollow\">Containerfile\u003C/a>.\u003C/li> \u003Cli>Torrust-Index \u003Ca href=\"https://github.com/torrust/torrust-index/blob/develop/Containerfile\" rel=\"nofollow\">Containerfile\u003C/a>.\u003C/li>\u003C/ul> \u003Ch3 id=\"example\" data-svelte-h=\"svelte-ywa4f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#example\">\u003Cspan>#\u003C/span>\u003C/a>Example\u003C/h3> \u003Cp data-svelte-h=\"svelte-bjlfzg\">All of the examples included in this blog post are publicly available in our ”\u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">Containerizing Rust Apps Examples\u003C/a>”\nGitHub Repository.\u003C/p> \u003Cblockquote data-svelte-h=\"svelte-3fqojs\">\u003Cp>\u003Cstrong>\u003Cem>Please Note:\u003C/em>\u003C/strong> The actual \u003Ccode>Containerfile\u003C/code> for the \u003Cstrong>Tracker\u003C/strong> and \u003Cstrong>Index\u003C/strong> services builds images for\nboth \u003Ccode>debug\u003C/code> and \u003Ccode>release\u003C/code> modes. For learning purposes we are using a simplified\nversion here which only builds the \u003Ccode>release\u003C/code> mode:\u003C/p>\u003C/blockquote> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\"># Extracted example of our Containerfile.\u003C/span>\n\n\u003Cspan class=\"token comment\">## Base Builder Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> chef\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /tmp\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-chef cargo-nextest\u003C/span>\n\n\u003Cspan class=\"token comment\">## Tester Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:slim-bookworm \u003Cspan class=\"token keyword\">as\u003C/span> tester\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /tmp\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> apt-get update; apt-get install -y curl; apt-get autoclean\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-nextest\u003C/span>\n\n\u003Cspan class=\"token comment\">## Su Exe Compile\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> gcc\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> ./contrib/dev-tools/su-exec/ /usr/local/src/su-exec/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cc -Wall -Werror -g /usr/local/src/su-exec/su-exec.c -o /usr/local/bin/su-exec; chmod +x /usr/local/bin/su-exec\u003C/span>\n\n\u003Cspan class=\"token comment\">## Chef Prepare (look at project and see wat we need)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> recipe\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef prepare --recipe-path /build/recipe.json\u003C/span>\n\n\u003Cspan class=\"token comment\">## Cook (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> dependencies\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">recipe\u003C/span>\u003C/span> /build/recipe.json /build/recipe.json\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef cook --tests --benches --examples --workspace --all-targets --all-features --recipe-path /build/recipe.json --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/temp.tar.zst --release  ; rm -f /build/temp.tar.zst\u003C/span>\n\n\u003Cspan class=\"token comment\">## Build Archive (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> dependencies \u003Cspan class=\"token keyword\">AS\u003C/span> build\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/full-example.tar.zst --release\u003C/span>\n\n\u003Cspan class=\"token comment\"># Extract and Test (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> tester \u003Cspan class=\"token keyword\">as\u003C/span> test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /test/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">build\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">\u003C/span>\n  /build/full-example.tar.zst \u003Cspan class=\"token operator\">\u003C/span>\n  /test/full-example.tar.zst\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --extract-to /test/src/ --no-run --archive-file /test/full-example.tar.zst\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --target-dir-remap /test/src/target/ --cargo-metadata /test/src/target/nextest/cargo-metadata.json --binaries-metadata /test/src/target/nextest/binaries-metadata.json\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> mkdir -p /app/bin/; cp -l /test/src/target/release/full-example /app/bin/full-example\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> chown -R root:root /app; chmod -R u=rw,go=r,a+X /app; chmod -R a+x /app/bin\u003C/span>\n\n\u003Cspan class=\"token comment\">## Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/distroless/cc-debian12:debug \u003Cspan class=\"token keyword\">as\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> [\u003Cspan class=\"token string\">\"/busybox/cp\"\u003C/span>, \u003Cspan class=\"token string\">\"-sp\"\u003C/span>, \u003Cspan class=\"token string\">\"/busybox/sh\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/cat\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/ls\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/env\"\u003C/span>, \u003Cspan class=\"token string\">\"/bin/\"\u003C/span>]\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">gcc\u003C/span> \u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> /usr/local/bin/su-exec /bin/su-exec\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ARG\u003C/span> USER_ID=1000\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> ./share/container/entry_script_sh /usr/local/bin/entry.sh\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ENTRYPOINT\u003C/span> [\u003Cspan class=\"token string\">\"/usr/local/bin/entry.sh\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\">## Release Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> runtime \u003Cspan class=\"token keyword\">as\u003C/span> release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">test\u003C/span>\u003C/span> /app/ /usr/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/usr/bin/full-example\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-h87xgr\">The real version in production contains some duplicate stages to build the \u003Ccode>debug\u003C/code>\nmode. Those stages are almost identical to the ones in this example and are therefore omitted. Only some flags and names change.\u003C/p> \u003Cp data-svelte-h=\"svelte-1jzeibq\">Don’t be scared of the example, next we will go through all the lines and explain what\nthey do, but before doing that, we will explain some basic concepts and the patterns\napplied one by one.\u003C/p> \u003Ch2 id=\"requirements\" data-svelte-h=\"svelte-d9t7ph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#requirements\">\u003Cspan>#\u003C/span>\u003C/a>Requirements\u003C/h2> \u003Cp data-svelte-h=\"svelte-geafvi\">In order to run some of the examples in this article you will need to install:\u003C/p> \u003Cul data-svelte-h=\"svelte-c5a7l\">\u003Cli>\u003Ca href=\"https://docs.docker.com/get-docker/\" rel=\"nofollow\">Docker version 24.0.6, build ed223bc\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"we-use-docker-oci-containers\" data-svelte-h=\"svelte-cyt294\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#we-use-docker-oci-containers\">\u003Cspan>#\u003C/span>\u003C/a>We Use Docker (OCI) Containers\u003C/h2> \u003Cp data-svelte-h=\"svelte-ayeng7\">The standardized \u003Ca href=\"https://opencontainers.org/\" rel=\"nofollow\">Open Container Initiative (OCI)\u003C/a> allows Torrust the possibility of reliable and cross-platform distribution and deployment of our Software.\u003C/p> \u003Cp data-svelte-h=\"svelte-a0u1en\">This allows for administrators who may be interested in our software to quickly and easily test-out our software and see if it suits their needs. It also allows administrators to more easily deploy our software, as most of the web-hosting systems have great support for OCI Containers.\u003C/p> \u003Cp data-svelte-h=\"svelte-15sjdzn\">In addition, our End-to-End testing infrastructure is made easier by using a \u003Ca href=\"https://docs.docker.com/compose/\" rel=\"nofollow\">docker-compose\u003C/a> configuration, that is taking advantage of our docker containers.\u003C/p> \u003Ch2 id=\"basic-dockerized-rust-application\" data-svelte-h=\"svelte-vhcbi5\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#basic-dockerized-rust-application\">\u003Cspan>#\u003C/span>\u003C/a>Basic Dockerized Rust Application\u003C/h2> \u003Cp data-svelte-h=\"svelte-a641je\">The simplest Dockerfile for a Rust application is as follows:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\"># We start from full base defacto Debian image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1shwlxj\">And you can build the image and run it with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker build -t docker-rust-app-basic .\ndocker run --rm -it docker-rust-app-basic\n\nHello, world!\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1148wxx\">That creates a docker image which is \u003Cstrong>1.39 GB\u003C/strong>!.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">$ docker image ls | grep docker-rust-app-basic\ndocker-rust-app-basic                            latest          7294f20bb52c   2 minutes ago   1.39GB\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-msyssk\">We are going to see how to improve\nthat and other things like common patters, good practices and other considerations.\u003C/p> \u003Ch2 id=\"use-multi-stage-builds-to-minimize-the-image-size\" data-svelte-h=\"svelte-1rb4gy9\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#use-multi-stage-builds-to-minimize-the-image-size\">\u003Cspan>#\u003C/span>\u003C/a>Use Multi-Stage Builds to Minimize the Image Size\u003C/h2> \u003Cp data-svelte-h=\"svelte-1wu17ac\">A common pattern to build smaller docker images is to use multi-stage Dockerfiles.\u003C/p> \u003Cp data-svelte-h=\"svelte-1q5coka\">You can compile your application with all of the Rust tooling and then use the\nfinal binary in a slim operating system. This image does not contain the common\npackages contained in the default tag and only contains the minimal packages\nneeded to run your compiled Rust application.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\"># This is the first stage. This image is used to compile the Rust application.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> builder\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token comment\"># Install the package in the current directory\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo install --path .\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\"># This is the production stage.\u003C/span>\n\u003Cspan class=\"token comment\"># The slim image does not contain the common packages contained in the default tag and only contains the minimal packages needed to run rust.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> debian:bookworm-slim\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">builder\u003C/span>\u003C/span> /usr/local/cargo/bin/app /usr/local/bin/app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1e77e1j\">The example is very easy and you can build and run the image with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker build -t docker-rust-app-multi-stage .\ndocker run --rm -it docker-rust-app-multi-stage\nHello, world!\n$ docker image ls | grep docker-rust-app-multi-stage\ndocker-rust-app-multi-stage                             latest          bc3ae797b55e   11 seconds ago   84.7MB\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-j0pust\">As you can see this new image is only 84.7MB. That’s a huge improvement!\u003C/p> \u003Ch2 id=\"image-variants\" data-svelte-h=\"svelte-1d98m8q\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#image-variants\">\u003Cspan>#\u003C/span>\u003C/a>Image Variants\u003C/h2> \u003Cp data-svelte-h=\"svelte-oq7eo4\">As you can see in our \u003Ccode>Containerfile\u003C/code>, the images we are using are the following:\u003C/p> \u003Ch3 id=\"rustbookworm\" data-svelte-h=\"svelte-wzlgx5\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rustbookworm\">\u003Cspan>#\u003C/span>\u003C/a>rust:bookworm\u003C/h3> \u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-44km0g\">At the time of writing this article the latest release is \u003Ca href=\"https://www.debian.org/releases/bookworm/\" rel=\"nofollow\">Debian 12.2\u003C/a>.\nIt is also (currently) known as stable or by its codename “Bookworm”. You will\nsee that we use that one because it is the latest one.\u003C/p> \u003Ch3 id=\"rustslim-bookworm\" data-svelte-h=\"svelte-1yonnqd\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rustslim-bookworm\">\u003Cspan>#\u003C/span>\u003C/a>rust:slim-bookworm\u003C/h3> \u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:slim-bookworm\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-3abwef\">Images with the \u003Ccode>slim\u003C/code> suffix do not contain the common packages contained in the\ndefault tag and only contain the minimal packages needed to run rust. We are using\nit for the “tester” stage.\u003C/p> \u003Ch3 id=\"gccbookworm\" data-svelte-h=\"svelte-dufdni\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#gccbookworm\">\u003Cspan>#\u003C/span>\u003C/a>gcc:bookworm\u003C/h3> \u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-tmyft9\">The GCC image is used to compile an small C program which is a simple tool that\njust executes a program with different privileges. When we start the container\nwe run it with a USER ID passed by an environment variable and not with \u003Ccode>root\u003C/code>\nprivileges.\u003C/p> \u003Ch3 id=\"cc-debian12debug\" data-svelte-h=\"svelte-184w9i9\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#cc-debian12debug\">\u003Cspan>#\u003C/span>\u003C/a>cc-debian12:debug\u003C/h3> \u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/gcr.io/distroless/cc-debian12:debug\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1fhk2ic\">And finally a “Distroless” container image is used for runtime. \u003Ca href=\"https://github.com/GoogleContainerTools/distroless#why-should-i-use-distroless-images\" rel=\"nofollow\">Why should you use distroless images?\u003C/a>.\u003C/p> \u003Cul data-svelte-h=\"svelte-18873bu\">\u003Cli>They are small.\u003C/li> \u003Cli>They only have what you need to run your app.\u003C/li> \u003Cli>They reduce the risk of vulnerabilities.\u003C/li>\u003C/ul> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1fdq7sg\">We use the \u003Ccode>:debug\u003C/code> variant of the distroless cc, as it includes the busybox binary,\ngiving us a shell that is needed to run the entry-script. We will explain this later.\u003C/p>\u003C/div> \u003Ch2 id=\"introduction-to-docker-layers-cache\" data-svelte-h=\"svelte-uva52c\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction-to-docker-layers-cache\">\u003Cspan>#\u003C/span>\u003C/a>Introduction To Docker Layers Cache\u003C/h2> \u003Cp data-svelte-h=\"svelte-hk85vl\">Caching is a pivotal aspect of optimizing Docker builds, especially with Rust projects. Proper caching ensures faster builds, as unchanged dependencies don’t have to be recompiled. By leveraging Docker’s layer caching mechanism, we can effectively cache Rust dependencies and speed up our Docker builds.\u003C/p> \u003Cp data-svelte-h=\"svelte-1xtjzwc\">Docker uses a layered filesystem to store images. Each layer is a set of changes to the filesystem. When you create a new container, you add a new writable layer on top of the underlying layers. This layer is often called the “container layer”. All changes made to the running container, such as writing new files, modifying existing files, and deleting files, are written to this thin writable container layer.\u003C/p> \u003Ch2 id=\"caching-cargo-dependencies\" data-svelte-h=\"svelte-1ypa8uz\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#caching-cargo-dependencies\">\u003Cspan>#\u003C/span>\u003C/a>Caching cargo dependencies\u003C/h2> \u003Cp data-svelte-h=\"svelte-11u1mbr\">A common pattern used in all languages is to separate the dependencies installation from the application build. This is done to take advantage of the Docker layer caching mechanism. The dependencies installation is done in a separate layer, and the application build is done in a separate layer. This way, if the application code changes, the dependencies installation layer is not rebuilt, and only the application build layer is rebuilt.\u003C/p> \u003Cp data-svelte-h=\"svelte-uz9oxy\">This improves build times because dependencies installation is usually a time-consuming process and it is something you normally do not change often. The application build, on the other hand, is something you change often, and it is usually a quick process.\u003C/p> \u003Cp data-svelte-h=\"svelte-8zab98\">Docker build is executed in the order that you define instructions so you put things that change less frequently at the beginning of the Dockerfile and things that change more frequently at the end of the Dockerfile.\u003C/p> \u003Cp data-svelte-h=\"svelte-1sajbeb\">There are two levels of dependencies:\u003C/p> \u003Cul data-svelte-h=\"svelte-75d099\">\u003Cli>System dependencies. For instance \u003Ccode>SQLite\u003C/code>, \u003Ccode>curl\u003C/code> and other libraries your application depends on.\u003C/li> \u003Cli>Rust dependencies. These are the Rust packages that you want to install using cargo. Rust packages are called \u003Ccode>crates\u003C/code> and you can find them on \u003Ca href=\"https://crates.io/\" rel=\"nofollow\">https://crates.io/\u003C/a>\u003C/li>\u003C/ul> \u003Ch3 id=\"demonstration-of-caching-cargo-dependencies-using-a-custom-solution\" data-svelte-h=\"svelte-1xct4pc\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#demonstration-of-caching-cargo-dependencies-using-a-custom-solution\">\u003Cspan>#\u003C/span>\u003C/a>Demonstration of Caching Cargo Dependencies Using a Custom Solution\u003C/h3> \u003Cp data-svelte-h=\"svelte-2cwd33\">First we demonstrate how cargo dependencies caching works but showing a custom solution:\u003C/p> \u003Cp data-svelte-h=\"svelte-1l59dpd\">We first create an \u003Cstrong>empty application configuration\u003C/strong> which uses the same dependencies.\nWe build the application, downloading and building all the dependencies and creating a docker cache layer.\u003C/p> \u003Cp data-svelte-h=\"svelte-xzh6g5\">Then we build the application. With these layers yo do not need to re-build the dependencies\nwhen you change the application code.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest \u003Cspan class=\"token keyword\">as\u003C/span> builder\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\n\u003Cspan class=\"token comment\"># Copy over the manifest files\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> Cargo.toml Cargo.lock /app/\u003C/span>\n\n\u003Cspan class=\"token comment\"># Create a dummy main.rs to build dependencies\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> mkdir src &amp;&amp; echo \u003Cspan class=\"token string\">\"fn main() &#123; println!(\"if you see this, the build broke\"); &#125;\"\u003C/span> > src/main.rs\u003C/span>\n\n\u003Cspan class=\"token comment\"># This build step will cache the dependencies as they're not changed\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token comment\"># Now, remove the dummy main.rs and copy your source code\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /app\u003C/span>\n\n\u003Cspan class=\"token comment\"># You'll need to update the last modified of the main.rs file to inform cargo to rebuild it\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> touch -a -m ./src/main.rs\u003C/span>\n\n\u003Cspan class=\"token comment\"># Build the application for release. Since dependencies are cached, this will only build your code\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/custom-dependencies-cache\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1al3v1i\">Instead of this custom solution, we use and recommend \u003Ca href=\"https://github.com/LukeMathWalker/cargo-chef\" rel=\"nofollow\">cargo chef\u003C/a> which is a cargo-subcommand that specializes in speeding up Rust Docker builds using Docker layer caching.\u003C/p> \u003Ch3 id=\"caching-cargo-dependencies-with-cargo-chef\" data-svelte-h=\"svelte-u2le63\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#caching-cargo-dependencies-with-cargo-chef\">\u003Cspan>#\u003C/span>\u003C/a>Caching Cargo Dependencies With Cargo Chef\u003C/h3> \u003Cp data-svelte-h=\"svelte-k3wwdj\">In this example, we show how to use \u003Ca href=\"https://github.com/LukeMathWalker/cargo-chef\" rel=\"nofollow\">cargo chef\u003C/a>, that we prefer to use.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest \u003Cspan class=\"token keyword\">as\u003C/span> chef\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\n\u003Cspan class=\"token comment\"># Install cargo-chef\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo install cargo-chef --locked\u003C/span>\n\n\u003Cspan class=\"token comment\"># Examines your project and builds a recipe that captures the set of information required to build your dependencies\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> planner\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . .\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef prepare --recipe-path recipe.json\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> builder\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">planner\u003C/span>\u003C/span> /app/recipe.json recipe.json\u003C/span>\n\n\u003Cspan class=\"token comment\"># Build dependencies - this is the caching Docker layer!\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef cook --release --recipe-path recipe.json\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . .\u003C/span>\n\n\u003Cspan class=\"token comment\"># Build the application for release. Since dependencies are cached, this will only build your code\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/dependencies-cache-with-cargo-chef\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-kdyrix\">While it does more or less the same as the custom solution. It caches dependencies in a separate layer and has some other \u003Ca href=\"https://github.com/LukeMathWalker/cargo-chef#benefits-of-cargo-chef\" rel=\"nofollow\">benefits\u003C/a>.\u003C/p> \u003Ch2 id=\"installing-rust-binaries-with-cargo-binstall\" data-svelte-h=\"svelte-pxmn10\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#installing-rust-binaries-with-cargo-binstall\">\u003Cspan>#\u003C/span>\u003C/a>Installing Rust Binaries With Cargo Binstall\u003C/h2> \u003Cp data-svelte-h=\"svelte-6yum3m\">\u003Ccode>cargo binstall\u003C/code> is a cargo subcommand that allows installing Rust binaries as an alternative to building from source (via cargo install) or manually downloading packages.\u003C/p> \u003Cp data-svelte-h=\"svelte-gk98nu\">Cargo Binstall repo: \u003Ca href=\"https://github.com/cargo-bins/cargo-binstall\" rel=\"nofollow\">https://github.com/cargo-bins/cargo-binstall\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1n8zo3n\">We are using it to install \u003Ccode>cargo chef\u003C/code> and \u003Ccode>cargo nextest\u003C/code> packages easily.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token comment\"># Install &#96;cargo binstall&#96;\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token comment\"># Install Rust binaries with &#96;cargo binstall&#96;\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-chef cargo-nextest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef --version &amp;&amp; cargo nextest --version\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\n\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"archiving-and-reusing-builds-with-cargo-nextest\" data-svelte-h=\"svelte-1qtt8xq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#archiving-and-reusing-builds-with-cargo-nextest\">\u003Cspan>#\u003C/span>\u003C/a>Archiving And Reusing Builds With Cargo Nextest\u003C/h2> \u003Cp data-svelte-h=\"svelte-cx78zz\">\u003Ca href=\"https://nexte.st/\" rel=\"nofollow\">cargo-nextest\u003C/a> is a Rust test runner.\u003C/p> \u003Cp data-svelte-h=\"svelte-po63xx\">It has a subcommand \u003Ccode>cargo nextest archive\u003C/code> that can archive builds artifacts.\nThis is useful to separate the “build” phase from the “run” phase.\u003C/p> \u003Cp data-svelte-h=\"svelte-16yp2dv\">In the \u003Ca href=\"https://nexte.st/book/reusing-builds.html\" rel=\"nofollow\">official documentation\u003C/a> they\ndescribe some use cases like:\u003C/p> \u003Cul data-svelte-h=\"svelte-15gh482\">\u003Cli>\u003Cstrong>Cross-compilation\u003C/strong>. The build machine has a different architecture, or runs a different operating system, from the target machine.\u003C/li> \u003Cli>\u003Cstrong>Test partitioning\u003C/strong>. Build once on the build machine, then partition test execution across multiple target machines.\u003C/li> \u003Cli>\u003Cstrong>Saving execution time\u003C/strong> on more valuable machines. For example, build tests on a regular machine, then run them on a machine with a GPU attached to it.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-fa7gqx\">We are using it for two reasons:\u003C/p> \u003Cul data-svelte-h=\"svelte-1hjbvmo\">\u003Cli>\u003Cstrong>Test partitioning\u003C/strong>. We build the application in a docker stage and then run\nthe tests in another stage. This way we can separate the build and test phases.\u003C/li> \u003Cli>\u003Cstrong>Passing the binary to the next stage\u003C/strong>. After building the application we archive\nthe build artifacts and then we extract them in the next stage to run the tests.\nFinally we copy the binary to the final “runtime” stage.\u003C/li>\u003C/ul> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## First stage to install the nextest tool\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest \u003Cspan class=\"token keyword\">as\u003C/span> nextest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo install cargo-nextest --locked\u003C/span>\n\n\u003Cspan class=\"token comment\">## Second stage to build the application and package it with nextest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> nextest \u003Cspan class=\"token keyword\">AS\u003C/span> builder\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build\u003C/span>\n\u003Cspan class=\"token comment\"># We archive the build artifacts to reuse them in the next stage\u003C/span>\n\u003Cspan class=\"token comment\"># NOTICE: the application must contains at least one integration test in order\u003C/span>\n\u003Cspan class=\"token comment\"># include the binary in the archive.\u003C/span>\n\u003Cspan class=\"token comment\"># See: https://github.com/nextest-rs/nextest/issues/423\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/archiving-and-reusing-builds.tar.zst\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/build/src/target/debug/archiving-and-reusing-builds\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\">## Third stage to test the application\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> nextest \u003Cspan class=\"token keyword\">AS\u003C/span> tester\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /test/src/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">builder\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">\u003C/span>\n    /build/archiving-and-reusing-builds.tar.zst \u003Cspan class=\"token operator\">\u003C/span>\n    /test/archiving-and-reusing-builds.tar.zst\u003C/span>\n\u003Cspan class=\"token comment\"># We extract the build artifacts from the archive\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --extract-to /test/src/ --no-run --archive-file /test/archiving-and-reusing-builds.tar.zst\u003C/span>\n\u003Cspan class=\"token comment\"># We run the tests. We override the default target-dir to use the application binary,\u003C/span>\n\u003Cspan class=\"token comment\"># otherwise it would be created in a temporary directory and we wouldn't be able to\u003C/span>\n\u003Cspan class=\"token comment\"># copy it in the next stage.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --target-dir-remap /test/src/target/ --cargo-metadata /test/src/target/nextest/cargo-metadata.json --binaries-metadata /test/src/target/nextest/binaries-metadata.json\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> mkdir -p /app/bin/; cp -l /test/src/target/debug/archiving-and-reusing-builds /app/bin/archiving-and-reusing-builds\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/app/bin/archiving-and-reusing-builds\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\">## Fourth stage to run the application in production\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> nextest \u003Cspan class=\"token keyword\">AS\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token comment\"># We take the application binary from the tester stage to ensure the binary we\u003C/span>\n\u003Cspan class=\"token comment\"># use has passed the tests.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">tester\u003C/span>\u003C/span> /app/bin/archiving-and-reusing-builds /app/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/app/archiving-and-reusing-builds\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1nkbu6n\">\u003Cstrong>NOTICE\u003C/strong>: The application must contain at least one integration test in order\ninclude the binary in the archive. See this \u003Ca href=\"https://github.com/nextest-rs/nextest/issues/423\" rel=\"nofollow\">issue\u003C/a>\nfor more info.\u003C/p>\u003C/div> \u003Ch2 id=\"running-container-without-sudo\" data-svelte-h=\"svelte-v5pqya\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-container-without-sudo\">\u003Cspan>#\u003C/span>\u003C/a>Running Container Without Sudo\u003C/h2> \u003Cp data-svelte-h=\"svelte-1pa1gb9\">By default docker is installed and runs containers as \u003Ccode>root\u003C/code>. If you build this image:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1lg13w3\">And you run it with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker build -t docker-rust-app-running-with-root .\ndocker run --rm -it docker-rust-app-running-with-root whoami\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1xp5ccj\">You will see it is executed as \u003Ccode>root\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19l2oa0\">You should not execute containers as \u003Ccode>root\u003C/code> because of:\u003C/p> \u003Col data-svelte-h=\"svelte-56q2gj\">\u003Cli>\u003Cp>\u003Cstrong>The Principle of Least Privilege\u003C/strong>: This is a security concept that encourages the minimal user permission level necessary to perform a task. Running containers as root goes against this principle because if a process inside the container can run with root privileges, it can execute any command inside the container, which could be dangerous if the container gets compromised.\u003C/p>\u003C/li> \u003Cli>\u003Cp>\u003Cstrong>Host System Vulnerability\u003C/strong>: Containers are designed to be isolated from the host system. However, there are ways that a container could potentially interact with the host, particularly if there are misconfigurations or vulnerabilities in the container runtime or the host’s kernel. A container running as root might be able to exploit such vulnerabilities to gain control over the host system.\u003C/p>\u003C/li> \u003Cli>\u003Cp>\u003Cstrong>Immutable Infrastructure\u003C/strong>: Containers are often used as part of an immutable infrastructure, where container images are pre-built and should not change. Running as root makes it easier to make changes to the running container, which can lead to “configuration drift” and unexpected behavior.\u003C/p>\u003C/li> \u003Cli>\u003Cp>\u003Cstrong>Accidental Damage\u003C/strong>: Even if an attacker does not compromise the container, running as root increases the risk of accidental damage by the container’s own applications or administrators. For example, a poorly crafted command could delete critical files or disrupt important processes.\u003C/p>\u003C/li>\u003C/ol> \u003Cp data-svelte-h=\"svelte-16n7gvb\">There are some ways to avoid running the container as \u003Ccode>root\u003C/code>. We will see all of them.\u003C/p> \u003Ch3 id=\"use-the-user-instruction\" data-svelte-h=\"svelte-1kd4y7f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#use-the-user-instruction\">\u003Cspan>#\u003C/span>\u003C/a>Use the \u003Ccode>USER\u003C/code> instruction\u003C/h3> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">USER\u003C/span> www-data\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-ifo8u1\">You can add the \u003Ccode>USER\u003C/code> instruction before the last command. In that example we\nknow that the base image already contains the user \u003Ccode>www-data\u003C/code>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker run --rm -it docker-rust-app-running-with-root cat /etc/passwd | grep www-data\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-163jsvx\">But you can also create a specific user for your application:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:latest\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> groupadd -r appuser\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> useradd -r -u 1001 -g appuser appuser\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">USER\u003C/span> appuser\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1urcnog\">Using the \u003Ccode>USER\u003C/code> instruction is considered a good practice because by default the container\nwill not run as root. In that example, docker will run the container as the user with the ID \u003Ccode>1001\u003C/code>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-ivivrm\">The Linux Standard Base Core Specification defines three different ranges for\nuser IDs, the value from 0 to 99, 100 to 999, and 1000 and above. The first two\nranges are reserved for system users. All the regular users start from 1000.\nIt’s also important to note that the user ID 0 is reserved for the root user and\nLinux kernel uses the user id and group id to handle the permissions. The host\nmachine and the docker container might have the same user ID but different usernames.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1ne3nlk\">If you run that container, \u003Ccode>appuser\u003C/code> will have the same permissions as the user \u003Ccode>1001\u003C/code>\nin the host system, whatever it is the name of that user in the host machine.\u003C/p> \u003Ch3 id=\"use-the-docker-run---user-argument\" data-svelte-h=\"svelte-7ojjtb\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#use-the-docker-run---user-argument\">\u003Cspan>#\u003C/span>\u003C/a>Use The \u003Ccode>docker run --user\u003C/code> Argument\u003C/h3> \u003Cp data-svelte-h=\"svelte-1gvovnw\">You can also overwrite the user running the container with the argument \u003Ccode>--user\u003C/code>:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">docker run --user www-data --rm -it docker-rust-app-running-with-root whoami\nwww-data\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1eslp6d\">In this example, even though the image is executed as root by default, it will be\nexecuted as the \u003Ccode>www-data\u003C/code> user.\u003C/p> \u003Cp data-svelte-h=\"svelte-3tgesj\">Notice you can even use a non-existing user in both the host and the docker image.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">console\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-console\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-console\">$ docker run --user 1001 --rm -it docker-rust-app-running-with-root bash\nI have no name!@895b0f6a3dbb:/app$\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1pa66tj\">All these solutions work but they all have a drawback: you need to know the user\nID at build time (when you build the docker image). You usually want to run the\ncontainer in different environments and sometimes you want to use a different\nuser ID for each environment. For example:\u003C/p> \u003Cul data-svelte-h=\"svelte-16bqamd\">\u003Cli>\u003Cstrong>For development\u003C/strong>: If you are using Ubuntu, your user ID is probably \u003Ccode>1000\u003C/code>. When\nyou run the container locally you want to run it using that ID, so that you don’t\nhave any problems with permissions.\u003C/li> \u003Cli>\u003Cstrong>For CI\u003C/strong>: The servers you are using for continuous integration (for instance, GitHub runners)\nmight use an specif user. You could use some cache folders and maybe you need to\nuse the same user ID as the CI server.\u003C/li> \u003Cli>\u003Cstrong>For production\u003C/strong>: You could create a specific user for your application and use that\nuser ID.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-187e9h7\">With the proposed solutions you would need to rebuild the docker image so that the\nuser ID inside the container is the same as the host user ID.\u003C/p> \u003Ch3 id=\"create-the-user-at-runtime\" data-svelte-h=\"svelte-273n8g\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#create-the-user-at-runtime\">\u003Cspan>#\u003C/span>\u003C/a>Create The User At Runtime\u003C/h3> \u003Cp data-svelte-h=\"svelte-q9n163\">There is al alternative to the previous solutions that makes it possible to \u003Cstrong>run the\ncontainer with different user IDs without rebuilding the image\u003C/strong>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\n\u003Cspan class=\"token comment\">## Compile su-exec\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> gcc\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> ./contrib/dev-tools/su-exec/ /usr/local/src/su-exec/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cc -Wall -Werror -g /usr/local/src/su-exec/su-exec.c -o /usr/local/bin/su-exec; chmod +x /usr/local/bin/su-exec\u003C/span>\n\n\u003Cspan class=\"token comment\">## Application\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> builder\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo init\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo build --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"./target/release/app\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token comment\">## Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/distroless/cc-debian12:debug \u003Cspan class=\"token keyword\">as\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> [\u003Cspan class=\"token string\">\"/busybox/cp\"\u003C/span>, \u003Cspan class=\"token string\">\"-sp\"\u003C/span>, \u003Cspan class=\"token string\">\"/busybox/sh\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/cat\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/ls\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/env\"\u003C/span>, \u003Cspan class=\"token string\">\"/bin/\"\u003C/span>]\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">builder\u003C/span>\u003C/span> /app/target/release/app /usr/local/bin/app\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">gcc\u003C/span> \u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> /usr/local/bin/su-exec /bin/su-exec\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> ./share/container/entry_script_sh /usr/local/bin/entry.sh\u003C/span>\n\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ENTRYPOINT\u003C/span> [\u003Cspan class=\"token string\">\"/usr/local/bin/entry.sh\"\u003C/span>]\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/usr/local/bin/app\"\u003C/span>]\u003C/span>\n\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1eodbad\">This is the approach we use in Torrust. You run the docker as \u003Ccode>root\u003C/code> but we always\nuse an entrypoint. That entrypoint creates a new user with an ID provided as an\nenvironment variable.\u003C/p> \u003Cp data-svelte-h=\"svelte-1v8jphd\">The \u003Ccode>entry.sh\u003C/code> script is always called when you run the container because it is\ndefined as an \u003Ccode>ENTRYPOINT\u003C/code>. This “middleware” script creates the user if it does\nnot exist, and then runs the application using the \u003Ca href=\"https://github.com/ncopa/su-exec\" rel=\"nofollow\">su-exec\u003C/a>\nprogram to change the user ID it is executed with.\u003C/p> \u003Cp data-svelte-h=\"svelte-1wsqwjd\">\u003Cstrong>For those who are interested here is our: \u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/share/container/entry_script_sh\" rel=\"nofollow\">entry script\u003C/a>.\u003C/strong>\u003C/p> \u003Cp data-svelte-h=\"svelte-x7o0dz\">As you can read on the su-exec documentation:\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-1qseehr\">“su-exec” is a simple tool that will simply execute a program with different privileges.\nThe program will be executed directly and not run as a child, like su and sudo does,\nwhich avoids TTY and signal issues (see below).\u003C/p> \u003Cp data-svelte-h=\"svelte-r9pi87\">Notice that su-exec depends on being run by the root user, non-root users do not\nhave permission to change uid/gid.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1shdd3c\">The advantage of this approach is that you don’t have to worry about the user ID\nwhen you build the docker image. You can run the container as root and then use\nthe entrypoint to create the user and run the application with that user.\u003C/p> \u003Cp data-svelte-h=\"svelte-9qnch7\">The entrypoint also ensures that the application is executed with the correct\npermissions. You cannot run the application as root unless you explicitly set\nthe environment variable \u003Ccode>USER_ID\u003C/code> to \u003Ccode>0\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-4o8v7\">If you want to contribute to Torrust we think that we could simplify the Containerfile\nif the “su-exec” command were available in Rust. Because we could reuse one of the\nRust docker images we are using for other docker stages.\u003C/p> \u003Ch2 id=\"decomposing-the-torrust-tracker-containerfile\" data-svelte-h=\"svelte-1qu4fyq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#decomposing-the-torrust-tracker-containerfile\">\u003Cspan>#\u003C/span>\u003C/a>Decomposing the Torrust Tracker Containerfile\u003C/h2> \u003Cp data-svelte-h=\"svelte-1flhjok\">Finally we can explain line by line what the \u003Ca href=\"https://github.com/torrust/torrust-tracker/blob/develop/Containerfile\" rel=\"nofollow\">Torrust Tracker Containerfile\u003C/a> does.\u003C/p> \u003Cp data-svelte-h=\"svelte-1lylxvu\">Rust apps can be built in \u003Ccode>debug\u003C/code> or \u003Ccode>release\u003C/code> mode. The \u003Ccode>Containerfile\u003C/code> builds both\nmodes and then it runs the tests for both modes. We have removed the \u003Ccode>debug\u003C/code> mode\nto keep the example short. But it is almost the same code. For the \u003Ccode>release\u003C/code> mode\nthe flag \u003Ccode>--release\u003C/code> is added to some commands.\u003C/p> \u003Cp data-svelte-h=\"svelte-14mcm6e\">We can abstract away the stages:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Base Builder Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> chef\u003C/span>\n\u003Cspan class=\"token comment\"># Install tools needed to build the application: cargo-chef cargo-nextest\u003C/span>\n\n\u003Cspan class=\"token comment\">## Tester Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:slim-bookworm \u003Cspan class=\"token keyword\">as\u003C/span> tester\u003C/span>\n\u003Cspan class=\"token comment\"># Install tools needed to test the application: cargo-nextest\u003C/span>\n\n\u003Cspan class=\"token comment\">## Su Exe Compile\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> gcc\u003C/span>\n\u003Cspan class=\"token comment\"># Compile the su-exec program which is used at runtime to change the user running the container.\u003C/span>\n\n\u003Cspan class=\"token comment\">## Chef Prepare (look at project and see wat we need)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> recipe\u003C/span>\n\u003Cspan class=\"token comment\"># Prepare the info needed to build and cache cargo dependencies\u003C/span>\n\n\u003Cspan class=\"token comment\">## Cook (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> dependencies\u003C/span>\n\u003Cspan class=\"token comment\"># Re-hydrate the minimum project skeleton identified by &#96;cargo chef prepare&#96; and build it to cache dependencies\u003C/span>\n\n\u003Cspan class=\"token comment\">## Build Archive (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> dependencies \u003Cspan class=\"token keyword\">AS\u003C/span> build\u003C/span>\n\u003Cspan class=\"token comment\"># build and archive the application\u003C/span>\n\n\u003Cspan class=\"token comment\"># Extract and Test (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> tester \u003Cspan class=\"token keyword\">as\u003C/span> test\u003C/span>\n\u003Cspan class=\"token comment\"># Extract the application from the archived artifacts and run the tests.\u003C/span>\n\u003Cspan class=\"token comment\"># And copy the binary to an specified location so it can be used in the &#96;release&#96;\u003C/span>\n\u003Cspan class=\"token comment\"># stage.\u003C/span>\n\n\u003Cspan class=\"token comment\">## Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/distroless/cc-debian12:debug \u003Cspan class=\"token keyword\">as\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token comment\"># Minimal image to run the app in production.\u003C/span>\n\u003Cspan class=\"token comment\"># Includes the entrypoint to setup and run the application with a different user Id.\u003C/span>\n\n\u003Cspan class=\"token comment\">## Release Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> runtime \u003Cspan class=\"token keyword\">as\u003C/span> release\u003C/span>\n\u003Cspan class=\"token comment\"># Runtime for release mode. It copies the binary from the &#96;test&#96; stage and runs it\u003C/span>\n\u003Cspan class=\"token comment\"># via the entrypoint added in the &#96;runtime&#96; stage.\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-4l2mid\">Let’s see each stage individually.\u003C/p> \u003Cp data-svelte-h=\"svelte-wr5nrh\">First, we have a base builder image where we install basic tools to build the application.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Base Builder Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> chef\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /tmp\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-chef cargo-nextest\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-pglm9y\">There is nothing really strange here. We use the latest Debian “bookworm” at the time\nof writing this article. And we also use \u003Ccode>binstall\u003C/code> to install the binaries, since\nboth of these binaries are written in Rust.\u003C/p> \u003Cp data-svelte-h=\"svelte-hitqor\">The next stage is the base Tester Image. It only installs \u003Ccode>cargo-nextest\u003C/code> to run the tests.\nWe also use the Debian “bookworm” but the \u003Ccode>slim\u003C/code> variant, since we don’t need too much\nto only run the tests.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Base Tester Image\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> rust:slim-bookworm \u003Cspan class=\"token keyword\">as\u003C/span> tester\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /tmp\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> apt-get update; apt-get install -y curl; apt-get autoclean\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> curl -L --proto \u003Cspan class=\"token string\">'=https'\u003C/span> --tlsv1.2 -sSf https://raw.githubusercontent.com/cargo-bins/cargo-binstall/main/install-from-binstall-release.sh | bash\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo binstall --no-confirm cargo-nextest\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-ce2qns\">The following is another stage used just to compile the small program \u003Ca href=\"https://github.com/ncopa/su-exec\" rel=\"nofollow\">su-exec\u003C/a> that we use to change the user ID when we run the container. The program is written\nin C code, so we only need a C compiler.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Su Exe Compile\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> docker.io/library/gcc:bookworm \u003Cspan class=\"token keyword\">as\u003C/span> gcc\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> ./contrib/dev-tools/su-exec/ /usr/local/src/su-exec/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cc -Wall -Werror -g /usr/local/src/su-exec/su-exec.c -o /usr/local/bin/su-exec; chmod +x /usr/local/bin/su-exec\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1qimsxt\">From this point, we start building the application. First, we build the dependencies\nand we cache them into an independent stage.\u003C/p> \u003Cp data-svelte-h=\"svelte-q7ly23\">The first stage is only to “build the recipe” which is the name that \u003Ccode>cargo chef\u003C/code>\ngives to the process of collecting all the information needed to build the application\ndependencies.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Chef Prepare (look at project and see wat we need)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> recipe\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef prepare --recipe-path /build/recipe.json\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-11c4qtl\">Then, cargo dependencies are built using using the recipe created in the previous stage.\n\u003Ccode>cargo nextest\u003C/code> has a subcommand to generate and archive the artifact of the build.\nWe are using it to package and pass the application from one stage to another.\u003C/p> \u003Cp data-svelte-h=\"svelte-i61gzi\">Dependencies are archived but they are not used independently. That line just tests\nthat the dependencies could be archived.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Cook (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> chef \u003Cspan class=\"token keyword\">AS\u003C/span> dependencies\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">recipe\u003C/span>\u003C/span> /build/recipe.json /build/recipe.json\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo chef cook --tests --benches --examples --workspace --all-targets --all-features --recipe-path /build/recipe.json --release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/temp.tar.zst --release  ; rm -f /build/temp.tar.zst\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-fhpivi\">In the following stage we build the application. The \u003Ccode>cargo nextest archive\u003C/code> command builds\nand archives the application.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Build Archive (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> dependencies \u003Cspan class=\"token keyword\">AS\u003C/span> build\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /build/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest archive --tests --benches --examples --workspace --all-targets --all-features --archive-file /build/full-example.tar.zst --release\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-blek30\">Now, that we have successfully built the application, we can run the tests. We\nextract the application from the archived artifacts and run the tests.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Extract and Test (release)\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> tester \u003Cspan class=\"token keyword\">as\u003C/span> test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">WORKDIR\u003C/span> /test\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> . /test/src\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">build\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">\u003C/span>\n  /build/full-example.tar.zst \u003Cspan class=\"token operator\">\u003C/span>\n  /test/full-example.tar.zst\u003C/span>\n\u003Cspan class=\"token comment\"># It compiles without running the tests to make sure there are no problems with\u003C/span>\n\u003Cspan class=\"token comment\"># the archive.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --extract-to /test/src/ --no-run --archive-file /test/full-example.tar.zst\u003C/span>\n\u003Cspan class=\"token comment\"># We actually run the tests\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> cargo nextest run --workspace-remap /test/src/ --target-dir-remap /test/src/target/ --cargo-metadata /test/src/target/nextest/cargo-metadata.json --binaries-metadata /test/src/target/nextest/binaries-metadata.json\u003C/span>\n\u003Cspan class=\"token comment\"># We copy the application binary to a specified location so we can get it from\u003C/span>\n\u003Cspan class=\"token comment\"># there in the final runtime stage.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> mkdir -p /app/bin/; cp -l /test/src/target/release/full-example /app/bin/full-example\u003C/span>\n\u003Cspan class=\"token comment\"># Since we use su-exec. We need to run the container as root.\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> chown -R root:root /app; chmod -R u=rw,go=r,a+X /app; chmod -R a+x /app/bin\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1a43lxq\">Once the application has been built and tested we prepare the runtime. We start\nfrom a minimum “distroless” image variant. We add an entrypoint to setup the application\nand also to make sure we don’t use the \u003Ccode>root\u003C/code> user to run it. The entrypoint just\nruns the application provided as an argument, in our case, our application in \u003Ccode>debug\u003C/code> or\n\u003Ccode>release\u003C/code> mode, depending of which one you want to run.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> gcr.io/\"distroless/cc-debian12:debug \u003Cspan class=\"token keyword\">as\u003C/span> runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">RUN\u003C/span> [\u003Cspan class=\"token string\">\"/busybox/cp\"\u003C/span>, \u003Cspan class=\"token string\">\"-sp\"\u003C/span>, \u003Cspan class=\"token string\">\"/busybox/sh\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/cat\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/ls\"\u003C/span>,\u003Cspan class=\"token string\">\"/busybox/env\"\u003C/span>, \u003Cspan class=\"token string\">\"/bin/\"\u003C/span>]\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">gcc\u003C/span> \u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> /usr/local/bin/su-exec /bin/su-exec\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ARG\u003C/span> USER_ID=1000\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--chmod\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">0555\u003C/span>\u003C/span> ./share/container/entry_script_sh /usr/local/bin/entry.sh\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">ENTRYPOINT\u003C/span> [\u003Cspan class=\"token string\">\"/usr/local/bin/entry.sh\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1ae8cp4\">Finally, we add the \u003Ccode>CMD\u003C/code> instruction so we can execute the application. The\nentrypoint script only runs the application you pass as the first argument. This\nstage is not merge into the previous because in the final version there are two\nfinal runtimes: \u003Ccode>debug\u003C/code> and \u003Ccode>release\u003C/code>.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">dockerfile\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-dockerfile\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-dockerfile\">\u003Cspan class=\"token comment\">## Release Runtime\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">FROM\u003C/span> runtime \u003Cspan class=\"token keyword\">as\u003C/span> release\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">COPY\u003C/span> \u003Cspan class=\"token options\">\u003Cspan class=\"token property\">--from\u003C/span>\u003Cspan class=\"token punctuation\">=\u003C/span>\u003Cspan class=\"token string\">test\u003C/span>\u003C/span> /app/ /usr/\u003C/span>\n\u003Cspan class=\"token instruction\">\u003Cspan class=\"token keyword\">CMD\u003C/span> [\u003Cspan class=\"token string\">\"/usr/bin/full-example\"\u003C/span>]\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"other-good-practices\" data-svelte-h=\"svelte-12ziiyq\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#other-good-practices\">\u003Cspan>#\u003C/span>\u003C/a>Other Good Practices\u003C/h2> \u003Cul data-svelte-h=\"svelte-pbuqhm\">\u003Cli>\u003Cstrong>Minimalism\u003C/strong>: We strive to keep our Dockerfiles lean by only including essential components.\u003C/li> \u003Cli>\u003Cstrong>Explicit versions\u003C/strong>: At least with the minor version number, so you do not get unexpected broken compatibility but you can apply security and bug patches.\u003C/li> \u003Cli>\u003Cstrong>Regular Updates\u003C/strong>: Periodically updating the base image and dependencies to benefit from security patches and updates.\u003C/li> \u003Cli>\u003Cstrong>Health Checks\u003C/strong>: Implementing Docker health checks to monitor the state and health of our containerized application.\u003C/li>\u003C/ul> \u003Ch2 id=\"other-considerations\" data-svelte-h=\"svelte-12m3v1c\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#other-considerations\">\u003Cspan>#\u003C/span>\u003C/a>Other Considerations\u003C/h2> \u003Cul data-svelte-h=\"svelte-1bvek77\">\u003Cli>Since we are using \u003Ccode>su-exec\u003C/code> we need to run the containers as root. We have not\nchecked if this configuration works when you setup docker in \u003Ca href=\"https://docs.docker.com/engine/security/rootless/\" rel=\"nofollow\">Rootless mode\u003C/a>.\u003C/li> \u003Cli>Also, although we mostly mention docker in this article, the \u003Ccode>Containerfile\u003C/code> works\nwith other tools to manage containers like \u003Ca href=\"https://podman.io/\" rel=\"nofollow\">Podman\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cp data-svelte-h=\"svelte-4pkash\">Simple tutorials:\u003C/p> \u003Cul data-svelte-h=\"svelte-5j93uy\">\u003Cli>\u003Ca href=\"https://tms-dev-blog.com/lean-docker-image-for-rust-backend/\" rel=\"nofollow\">Docker image for Rust backend: learn how to\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://collabnix.com/getting-started-with-rust-and-docker/\" rel=\"nofollow\">Getting Started with Rust and Docker\u003C/a> by \u003Ca href=\"https://collabnix.com/author/ajeetraina/\" rel=\"nofollow\">Ajeet Raina\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://tutorialedge.net/rust/rust-docker-tutorial/\" rel=\"nofollow\">Rust Docker Tutorial\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.docker.com/language/rust/build-images/\" rel=\"nofollow\">Build your Rust image\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-bk14i0\">Comprehensive articles like this:\u003C/p> \u003Cul data-svelte-h=\"svelte-19n6tki\">\u003Cli>\u003Ca href=\"https://dev.to/rogertorres/first-steps-with-docker-rust-30oi\" rel=\"nofollow\">First steps with Docker + Rust\u003C/a> by \u003Ca href=\"https://dev.to/rogertorres\" rel=\"nofollow\">Roger Torres\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-rz7o02\">Demos:\u003C/p> \u003Cul data-svelte-h=\"svelte-w3dy1g\">\u003Cli>\u003Ca href=\"https://github.com/hseeberger/hello-rs\" rel=\"nofollow\">Simple dockerized Rust/Axum based HTTP server for demo purposes\u003C/a> by \u003Ca href=\"https://github.com/hseeberger\" rel=\"nofollow\">Heiko Seeberger\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-dl4iv3\">Development using Docker:\u003C/p> \u003Cul data-svelte-h=\"svelte-zmfpgi\">\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=kh1GMRFkzT4&amp;t=2s\" rel=\"nofollow\">Rust Development with Docker\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.docker.com/language/rust/develop/\" rel=\"nofollow\">Develop your Rust application\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-uc1ydm\">Deployments using docker:\u003C/p> \u003Cul data-svelte-h=\"svelte-jf89i3\">\u003Cli>\u003Ca href=\"https://medium.com/@anirudhmurali/how-i-deployed-a-rust-web-app-using-the-rocket-framework-with-docker-424da99b1d8a\" rel=\"nofollow\">How I deployed a Rust web-app using the Rocket framework with Docker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://www.koyeb.com/tutorials/deploy-a-rust-web-app-with-rocket\" rel=\"nofollow\">Deploy a Rust Web App With Rocket\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-17ghd7g\">Minimum sized container images:\u003C/p> \u003Cul data-svelte-h=\"svelte-6p9xs0\">\u003Cli>\u003Ca href=\"https://github.com/johnthagen/min-sized-rust#containers\" rel=\"nofollow\">min-sized-rust\u003C/a> by \u003Ca href=\"https://github.com/johnthagen\" rel=\"nofollow\">johnthagen\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-ym3too\">Caching dependencies:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r5cmoj\">\u003Cli>\u003Ca href=\"https://blog.logrocket.com/packaging-a-rust-web-service-using-docker/\" rel=\"nofollow\">Packaging a Rust web service using Docker\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://dev.to/mgattozzi/plumbing-the-deps-of-the-crate-caching-rust-docker-builds-2e48\" rel=\"nofollow\">Plumbing the Deps of the Crate: Caching Rust Docker Builds\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://stackoverflow.com/questions/58473606/cache-rust-dependencies-with-docker-build\" rel=\"nofollow\">Cache Rust dependencies with Docker build\u003C/a>.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-c87p6b\">Don’t run containers as root:\u003C/p> \u003Cul data-svelte-h=\"svelte-1tvfsrk\">\u003Cli>\u003Ca href=\"https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user\" rel=\"nofollow\">Manage Docker as a non-root user\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.docker.com/engine/security/rootless/\" rel=\"nofollow\">Run the Docker daemon as a non-root user (Rootless mode)\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://docs.docker.com/engine/security/#docker-daemon-attack-surface\" rel=\"nofollow\">Docker daemon attack surface\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.howtogeek.com/devops/why-processes-in-docker-containers-shouldnt-run-as-root/\" rel=\"nofollow\">Why Processes In Docker Containers Shouldn’t Run as Root\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://www.clickittech.com/devops/docker-security-best-practices/\" rel=\"nofollow\">The Ultimate Docker Security Best Practices for Your Node.js Application\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://stackoverflow.com/questions/68155641/should-i-run-things-inside-a-docker-container-as-non-root-for-safety\" rel=\"nofollow\">Should I run things inside a docker container as non root for safety?\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://betterprogramming.pub/running-a-container-with-a-non-root-user-e35830d1f42a\" rel=\"nofollow\">Docker Tips: Running a Container With a Non Root User\u003C/a> by \u003Ca href=\"https://lucjuggery.medium.com/\" rel=\"nofollow\">Luc Juggery\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/containers/podman/blob/main/docs/tutorials/rootless_tutorial.md\" rel=\"nofollow\">Basic Setup and Use of Podman in a Rootless environment\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://medium.com/@mccode/understanding-how-uid-and-gid-work-in-docker-containers-c37a01d01cf\" rel=\"nofollow\">Understanding how uid and gid work in Docker containers\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1e29q46\">We hope you find this guide useful. Let us know what you think about it!\u003C/p> \u003Cp data-svelte-h=\"svelte-1dx3a01\">We want this article to be a collective effort to document good practices about\nRust and Containers, so we would like to have reviews, comments, new sections, etcetera.\u003C/p> \u003Cp data-svelte-h=\"svelte-gxsd2p\">If you see something wrong or you want to contribute by:\u003C/p> \u003Cul data-svelte-h=\"svelte-x1w50s\">\u003Cli>Adding new sections.\u003C/li> \u003Cli>Fixing typos.\u003C/li> \u003Cli>Making it clearer.\u003C/li> \u003Cli>Adding links.\u003C/li> \u003Cli>Or whatever you think it could be interesting to have,\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1cyks1i\">please open an \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">issue\u003C/a> or a \u003Ca href=\"https://github.com/torrust/torrust-website/pulls\" rel=\"nofollow\">PR\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1e9qm2v\">If you have any questions or issues please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-172itm0\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Website: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li> \u003Cli>Containerizing Rust Applications Examples: \u003Ca href=\"https://github.com/torrust/containerizing-rust-apps-examples\" rel=\"nofollow\">https://github.com/torrust/containerizing-rust-apps-examples\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-nld7t3\">We very welcome any contributions to the projects or \u003Ca href=\"https://github.com/torrust/torrust-website/issues\" rel=\"nofollow\">this article\u003C/a>.\u003C/p>\u003C/div>\u003C/div>",[292,293,294],{"title":277,"slug":278,"coverImage":279,"date":280,"updated":6,"excerpt":281,"tags":282,"hidden":12,"html":283,"readingTime":109},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":277,"slug":278,"coverImage":279,"date":280,"updated":6,"excerpt":281,"tags":286,"hidden":12,"html":287,"readingTime":109},{"title":2,"slug":3,"coverImage":4,"date":5,"updated":6,"excerpt":7,"tags":296,"hidden":12,"draft":12,"keywords":297,"description":14,"html":298,"readingTime":16,"relatedPosts":299},[9,10,11],[11,10,9],"\u003Cp data-svelte-h=\"svelte-10idxpu\">Photo by Alex Andrews: \u003Ca href=\"https://www.pexels.com/photo/shallow-focus-photography-of-black-and-silver-compasses-on-top-of-map-1203808/\" rel=\"nofollow\">https://www.pexels.com/photo/shallow-focus-photography-of-black-and-silver-compasses-on-top-of-map-1203808/\u003C/a>.\u003C/p>  \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-biflki\">Usually, when we think about Torrents, we think about a program used to download files from a group of people through the internet. But some of those users don’t know what a tracker is.\u003C/p> \u003Cp data-svelte-h=\"svelte-1q1ns8y\">In this article, I will explain a BitTorrent tracker and the two types of trackers (public and private).\u003C/p> \u003Ch2 id=\"what-is-a-bittorrent-tracker\" data-svelte-h=\"svelte-d3fptx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#what-is-a-bittorrent-tracker\">\u003Cspan>#\u003C/span>\u003C/a>What is a BitTorrent Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-10pp3pb\">A BitTorrent tracker is a server (actually an app running on a server) that helps peers who use the BitTorrent protocol share their files.\u003C/p> \u003Cp data-svelte-h=\"svelte-v9c68f\">It is responsible for keeping track of what peer machines (BitTorrent clients and their IPs) have what files and whether they are available or not, so when you add a .torrent file to your torrent client, the tracker lets you know where to start getting parts of that file.\u003C/p> \u003Cp data-svelte-h=\"svelte-1xy4hrv\">It also helps with the communication between peers and data transmission, making the entire process more efficient.\u003C/p> \u003Cp data-svelte-h=\"svelte-sx3ffg\">When downloading files, the client will go back to the tracker every once in a while to send statistics and improve the download speed, as it gets newly updated info about other peers sharing the files.\u003C/p> \u003Ch2 id=\"public-trackers\" data-svelte-h=\"svelte-dmcq3r\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#public-trackers\">\u003Cspan>#\u003C/span>\u003C/a>Public trackers\u003C/h2> \u003Cp data-svelte-h=\"svelte-7157k3\">Public trackers are open to everybody. They don’t require registration, even though some will allow it and provide benefits to those users. They usually contain torrent files about different themes (music, films, games, etc.).\u003C/p> \u003Cp data-svelte-h=\"svelte-o6o11j\">They are the most straightforward way to get torrents, which may be a good starting point for beginners.\u003C/p> \u003Cp data-svelte-h=\"svelte-hoa9e2\">There are also some cons when using public trackers.\u003C/p> \u003Cp data-svelte-h=\"svelte-1bhcqgj\">Malware can be found in torrent files and websites, which many people use. It is the perfect target for people with malicious intentions. You should always check for .exe, .bat or other executable files, and remember to read the comments of the torrent file you want to download.\u003C/p> \u003Cp data-svelte-h=\"svelte-bowkeq\">You can also wait a few days if the torrent is new and let other people test the file and see if they comment about the torrent containing any malware.\u003C/p> \u003Cp data-svelte-h=\"svelte-1risze5\">Another downside regarding security is that if you don’t use methods to avoid tracking, like a VPN, anyone can get access to your IP.\u003C/p> \u003Cp data-svelte-h=\"svelte-15lj26z\">Also, public trackers may attract more attention from authorities. Hence, using public trackers to download illegal stuff has a greater chance of getting you into trouble.\u003C/p> \u003Ch2 id=\"private-trackers\" data-svelte-h=\"svelte-17rz5zd\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#private-trackers\">\u003Cspan>#\u003C/span>\u003C/a>Private trackers\u003C/h2> \u003Cp data-svelte-h=\"svelte-1rscnzn\">Private trackers require registration. Some of them are also hidden, and their access depends on private invitations or a process defined by the tracker. It may include an interview or other means.\u003C/p> \u003Cp data-svelte-h=\"svelte-5w0ux5\">Private trackers usually contain better-quality torrents and hard-to-find ones.\u003C/p> \u003Cp data-svelte-h=\"svelte-djasth\">They might ask you to have a good ratio, so when using them, you need to make sure you share files and download them, which can be cumbersome at times.\u003C/p> \u003Cp data-svelte-h=\"svelte-3lw2c5\">It is still recommended that you use a VPN to increase privacy and security; people can still access your IP if not hidden, and authorities can still lurk around private torrents.\u003C/p> \u003Cp data-svelte-h=\"svelte-pdqcpw\">Also, always be aware of malware on private trackers.\u003C/p> \u003Cp data-svelte-h=\"svelte-13lt0t9\">I also recommend using common sense regarding sharing private information in the interview process, which some private trackers require.\u003C/p> \u003Ch2 id=\"bittorrent-index-vs-bittorrent-tracker\" data-svelte-h=\"svelte-e9n6iu\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#bittorrent-index-vs-bittorrent-tracker\">\u003Cspan>#\u003C/span>\u003C/a>BitTorrent Index vs BitTorrent Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-cg0hge\">It is essential to differentiate between a BitTorrent tracker and an index, as some people use the terms index and tracker indistinctively when, actually, there are two different things.\u003C/p> \u003Cp data-svelte-h=\"svelte-ir9b25\">A BitTorrent index is a website that serves as a directory of classified torrent files where users can search for and download them.\u003C/p> \u003Cp data-svelte-h=\"svelte-1r15vzx\">When you download a torrent file from a BitTorrent index site, it usually contains a list of URLs for trackers where your client can request torrent pieces.\u003C/p> \u003Cp data-svelte-h=\"svelte-gh6p3z\">Often, the index site has an associated tracker that is included in the list of tracker URLs in the torrent file.\u003C/p> \u003Cp data-svelte-h=\"svelte-19dfrv\">A tracker, as previously described above, takes care of efficient data transmission between the peers in the swarm when sharing files using the BitTorrent protocol.\u003C/p> \u003Cp data-svelte-h=\"svelte-b40mrm\">\u003Cstrong>I hope you have found this article useful!\u003C/strong>\u003C/p> \u003Cp data-svelte-h=\"svelte-mcy6nd\">If you have any questions or issues regarding this post, please \u003Ca href=\"https://github.com/torrust/torrust-website/issues/new\" rel=\"nofollow\">open an issue\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19k8tej\">For any other questions or issues related to Torrust repositories, please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r8qk6t\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Backend: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Frontend: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>",[300,301,302],{"title":19,"slug":20,"coverImage":21,"date":22,"updated":22,"excerpt":23,"contributor":24,"contributorSlug":25,"tags":26,"hidden":12,"html":28,"readingTime":29},{"title":19,"slug":20,"coverImage":21,"date":22,"updated":22,"excerpt":23,"contributor":24,"contributorSlug":25,"tags":31,"hidden":12,"html":32,"readingTime":33},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":76,"slug":77,"coverImage":78,"date":79,"updated":79,"excerpt":80,"contributor":24,"contributorSlug":25,"tags":81,"hidden":12,"html":83,"readingTime":16,"relatedPosts":304},[305,306,307],{"title":47,"slug":48,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":52,"hidden":12,"html":58,"readingTime":16},{"title":47,"slug":61,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":62,"hidden":12,"html":63,"readingTime":16},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":76,"slug":77,"coverImage":78,"date":79,"updated":79,"excerpt":80,"contributor":24,"contributorSlug":25,"tags":309,"hidden":12,"html":310,"readingTime":16,"relatedPosts":311},[82,57],"\u003Cp data-svelte-h=\"svelte-1iefhg6\">Photo by David Dibert: \u003Ca href=\"https://www.pexels.com/photo/a-flock-of-geese-flying-7177008/\" rel=\"nofollow\">https://www.pexels.com/photo/a-flock-of-geese-flying-7177008/\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-ubtbd9\">Hello, Torrust community!\u003C/p> \u003Cp data-svelte-h=\"svelte-1iez7gt\">We’re always looking for ways to enhance your experience with Torrust, and today, we’re excited to unveil our latest addition: \u003Ca href=\"https://github.com/torrust/torrents-importer-sample\" rel=\"nofollow\">A sample migration tool written in Rust\u003C/a>, specifically designed for those looking to seamlessly import torrents from other sources into our \u003Ca href=\"https://github.com/torrust/torrust-index-backend\" rel=\"nofollow\">Torrust Index\u003C/a>!\u003C/p>  \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"why-this-tool\" data-svelte-h=\"svelte-1hhz7u8\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-this-tool\">\u003Cspan>#\u003C/span>\u003C/a>Why this tool?\u003C/h2> \u003Cp data-svelte-h=\"svelte-m00pe5\">Many in our community have asked us for an efficient method to migrate torrents from their current Index/Trackers to Torrust. Recognizing this need, we took it upon ourselves to develop a solution that would make this process as hassle-free as possible.\u003C/p> \u003Cp data-svelte-h=\"svelte-1bwpwz\">On the other hand, we have been doing an intensive testing of the Torrust Index Backend. We wanted to test the backend with a large set of real torrents. We found the site \u003Ca href=\"https://academictorrents.com/\" rel=\"nofollow\">https://academictorrents.com/\u003C/a> which has thousands of torrents and they kindly make them public available.\u003C/p> \u003Cp data-svelte-h=\"svelte-ewj05f\">We decided to create a tool that would allow us to import torrents from this site into our Torrust Index. This tool is a sample project that we are sharing with the community. We hope that it will be useful for those who want to migrate their torrents to Torrust.\u003C/p> \u003Cp data-svelte-h=\"svelte-891gdg\">The example repo is \u003Ca href=\"https://github.com/torrust/torrents-importer-sample\" rel=\"nofollow\">https://github.com/torrust/torrents-importer-sample\u003C/a>\u003C/p> \u003Ch2 id=\"capabilities\" data-svelte-h=\"svelte-y3ky5f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#capabilities\">\u003Cspan>#\u003C/span>\u003C/a>Capabilities\u003C/h2> \u003Cp data-svelte-h=\"svelte-11106r8\">The migration tool sample offers a straightforward way to:\u003C/p> \u003Cul data-svelte-h=\"svelte-zfhc8b\">\u003Cli>Fetch Torrents from XML Lists: The tool takes torrents from a list in an XML file, ensuring you don’t have to manually pick and transfer torrents one by one.\u003C/li> \u003Cli>Download Torrents from Other Sites: No more downloading and re-uploading! Our tool will directly fetch the torrents for you.\u003C/li> \u003Cli>Upload to Torrust: With the help of the Torrust Index REST API, the torrents are then uploaded into our software, ready for classification and use.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1dt3i5t\">While our initial test run has been on an index containing academic torrents, the tool is versatile enough to handle a variety of sources. The underlying principles remain the same.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> \u003Cp data-svelte-h=\"svelte-k0wwwx\">\u003Cstrong>Disclaimer\u003C/strong>: This sample project is not intended to be a production-ready tool. It is a sample project that we are sharing with the community. We hope that it will be useful for those who want to migrate their torrents to Torrust. For larger datasets it would be convenient to handle errors asynchronously. In the current version the application exists immediately when something goes wrong and you have to handle the problem yourself and restart it.\u003C/p>\u003C/div> \u003Cp data-svelte-h=\"svelte-1oc41sa\">You will problably need to rewrite the whole “source” part of the application to adapt it to your needs. The “destination” part should be reusable as it is.\u003C/p> \u003Cp data-svelte-h=\"svelte-1uuu4wv\">When you run the importer, the output will be something like this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">$ cargo run\n    Finished dev [unoptimized + debuginfo] target(s) in 0.02s\n     Running &#96;target/debug/torrents-importer-sample&#96;\nAPI login with username admin ...\nLogged as admin with account admin\nReading file ./data/database.xml ...\nProcessing channel ...\n  Title: Mandelbrot Set Collection\n  description: Torrents with Mandelbrot Set Images\n  Link: https://github.com/torrust/torrents-importer-sample\nProcessing only 1 torrent ...\nProcessing torrent #1 ...\n  Title: MandelBrot Set 01\n  Category: Fractal\n  Infohash: 0c90fbf036e28370c1ec773401bc7620146b1d48\n  Guid: https://raw.githubusercontent.com/torrust/torrents-importer-sample/main/tests/fixtures/torrents/mandelbrot_set_01.torrent\n  Link: https://raw.githubusercontent.com/torrust/torrents-importer-sample/main/tests/fixtures/torrents/mandelbrot_set_01.torrent\n  Description:  ...\n  Size: 17130410419\nChecking if the torrent 0c90fbf036e28370c1ec773401bc7620146b1d48 exist in the Torrust Index ...\nDownloading the torrent file from the source server ...\nDownloading torrent from https://raw.githubusercontent.com/torrust/torrents-importer-sample/main/tests/fixtures/torrents/0c90fbf036e28370c1ec773401bc7620146b1d48.torrent into ./data/torrents/0c90fbf036e28370c1ec773401bc7620146b1d48.torrent\nTorrent successfully downloaded.\nUploading the torrent 0c90fbf036e28370c1ec773401bc7620146b1d48 to the Torrust Index ...\nresponse: 200\nTorrent uploaded UploadedTorrent &#123;\n    torrent_id: 2529,\n    info_hash: &quot;0c90fbf036e28370c1ec773401bc7620146b1d48&quot;,\n&#125;\nProcessed torrents: 1\nUploaded torrents:  1\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-jshx3u\">Being a sample project, we believe that there’s always room for improvement. We invite the Torrust community to use the tool, provide feedback, and even contribute to its enhancement. Together, we can refine it and adapt it to cater to more diverse needs.\u003C/p> \u003Cp data-svelte-h=\"svelte-nmkdav\">We’re committed to evolving and making Torrust a go-to solution for all torrent aficionados. Our new migration tool is just one step in this journey. Whether you’re a casual user or an enterprise looking to migrate a large number of torrents, our tool aims to make the transition smoother for you.\u003C/p> \u003Cp data-svelte-h=\"svelte-pw1bp9\">A big shout-out to everyone involved in this project! We encourage everyone to give it a try and share your experiences. Together, let’s make the world of torrents even more connected and accessible.\u003C/p> \u003Cp data-svelte-h=\"svelte-3l3aev\">Happy torrenting!\u003C/p> \u003Ch2 id=\"links\" data-svelte-h=\"svelte-32dd6s\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#links\">\u003Cspan>#\u003C/span>\u003C/a>Links\u003C/h2> \u003Cul data-svelte-h=\"svelte-1hy0y5t\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-backend\" rel=\"nofollow\">The Torrust Index Backend\u003C/a>.\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrents-importer-sample\" rel=\"nofollow\">The Torrust Torrents Importer Sample\u003C/a>.\u003C/li>\u003C/ul> \u003Ch2 id=\"acknowledgments\" data-svelte-h=\"svelte-1e4fcph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#acknowledgments\">\u003Cspan>#\u003C/span>\u003C/a>Acknowledgments\u003C/h2> \u003Cp data-svelte-h=\"svelte-1mqt1hd\">We would like to acknowledge the team from \u003Ca href=\"https://academictorrents.com/\" rel=\"nofollow\">https://academictorrents.com/\u003C/a> for their great work and for making their torrents public available.\u003C/p> \u003Cp data-svelte-h=\"svelte-mcy6nd\">If you have any questions or issues regarding this post, please \u003Ca href=\"https://github.com/torrust/torrust-website/issues/new\" rel=\"nofollow\">open an issue\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-19k8tej\">For any other questions or issues related to Torrust repositories, please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-1r8qk6t\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Backend: \u003Ca href=\"https://github.com/torrust/torrust-index-backend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-backend/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index Frontend: \u003Ca href=\"https://github.com/torrust/torrust-index-frontend/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-frontend/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>",[312,313,314],{"title":47,"slug":48,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":52,"hidden":12,"html":58,"readingTime":16},{"title":47,"slug":61,"coverImage":49,"date":50,"updated":50,"excerpt":51,"contributor":24,"contributorSlug":25,"tags":62,"hidden":12,"html":63,"readingTime":16},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":19,"slug":20,"coverImage":21,"date":22,"updated":22,"excerpt":23,"contributor":24,"contributorSlug":25,"tags":26,"hidden":12,"html":28,"readingTime":29,"relatedPosts":316},[317,318,319],{"title":2,"slug":3,"coverImage":4,"date":5,"updated":6,"excerpt":7,"tags":8,"hidden":12,"draft":12,"keywords":13,"description":14,"html":15,"readingTime":16},{"title":2,"slug":3,"coverImage":4,"date":5,"updated":6,"excerpt":7,"tags":296,"hidden":12,"draft":12,"keywords":297,"description":14,"html":298,"readingTime":16},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":19,"slug":20,"coverImage":21,"date":22,"updated":22,"excerpt":23,"contributor":24,"contributorSlug":25,"tags":31,"hidden":12,"html":32,"readingTime":33,"relatedPosts":321},[322,323,324],{"title":2,"slug":3,"coverImage":4,"date":5,"updated":6,"excerpt":7,"tags":8,"hidden":12,"draft":12,"keywords":13,"description":14,"html":15,"readingTime":16},{"title":2,"slug":3,"coverImage":4,"date":5,"updated":6,"excerpt":7,"tags":296,"hidden":12,"draft":12,"keywords":297,"description":14,"html":298,"readingTime":16},{"title":35,"slug":36,"coverImage":37,"date":38,"updated":6,"excerpt":39,"contributor":24,"contributorSlug":25,"tags":40,"hidden":12,"html":43,"readingTime":44},{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16,"relatedPosts":326},[327,328,331],{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":329,"hidden":12,"html":330,"readingTime":164},[160,72,73,161,162]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Ch2 id=\"introduction\" data-svelte-h=\"svelte-1ahwhrx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#introduction\">\u003Cspan>#\u003C/span>\u003C/a>Introduction\u003C/h2> \u003Cp data-svelte-h=\"svelte-1xhj6nt\">Before explaining how to setup the development environment, it’s important to understand how the Torrust Index works. The Torrust Index is composed of multiple services, each one with its own codebase and repository. The services are:\u003C/p> \u003Cul data-svelte-h=\"svelte-1iedagn\">\u003Cli>A \u003Ca href=\"https://github.com/torrust/torrust-tracker\" rel=\"nofollow\">BitTorrent Tracker\u003C/a>, which is responsible for tracking the torrents and providing the peers to the clients.\u003C/li> \u003Cli>The \u003Ca href=\"https://github.com/torrust/torrust-index\" rel=\"nofollow\">Index\u003C/a>, which is a REST API that provides the data to the frontend.\u003C/li> \u003Cli>And the \u003Ca href=\"https://github.com/torrust/torrust-index-gui\" rel=\"nofollow\">Index GUI\u003C/a>, which is a webapp that displays the data to the user.\u003C/li>\u003C/ul> \u003Cimg srcset=\"/images/posts/torrust-architecture.png, /images/posts/torrust-architecture.png, /images/posts/torrust-architecture.png\" src=\"/images/posts/torrust-architecture.png\" alt=\"Torrust Architecture\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-2z7kcb\">You do not need to setup all services to contribute to the Torrust Index, but in this article we will explain how to setup the full development environment, which includes all services. Sometimes you might want to contribute with a full feature that involves multiple services, so it’s useful to have the full development environment setup.\u003C/p> \u003Cp data-svelte-h=\"svelte-1aybo28\">Setting up the development environment requires to setup the three main services.\u003C/p> \u003Cp data-svelte-h=\"svelte-776mhr\">First, we need to create the folder (in this example, a temp folder) where we will store the repositories of our services.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token builtin class-name\">cd\u003C/span> /tmp/\n\u003Cspan class=\"token function\">mkdir\u003C/span> \u003Cspan class=\"token parameter variable\">-p\u003C/span> torrust\n\u003Cspan class=\"token builtin class-name\">cd\u003C/span> torrust\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> This guide uses bash commands and it has been tested on Ubuntu Ubuntu 23.04. You should not encounter any problem if you are using a different Linux distribution, but there are some reported issues with Windows compilation for the Tracker. The installation scripts are very simple, so you can easily adapt them to your system or run the commands manually.\u003C/div> \u003Ch2 id=\"common-dependencies\" data-svelte-h=\"svelte-11zbw7j\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#common-dependencies\">\u003Cspan>#\u003C/span>\u003C/a>Common Dependencies\u003C/h2> \u003Cp data-svelte-h=\"svelte-1xycqr4\">If you are using SQLite3 as database driver for the Tracker or the Backend, you will need to install the following dependency:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt-get\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> libsqlite3-dev\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"set-up-the-torrust-tracker\" data-svelte-h=\"svelte-hbvu\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#set-up-the-torrust-tracker\">\u003Cspan>#\u003C/span>\u003C/a>Set Up the Torrust Tracker\u003C/h2> \u003Cp data-svelte-h=\"svelte-emwzfb\">This tutorial is tested with this Rust version:\u003C/p> \u003Cul data-svelte-h=\"svelte-1xkqa0c\">\u003Cli>rustc 1.80.0-nightly (9cdfe285c 2024-05-22)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-vla8v0\">Since we are using the openssl crate with the \u003Ca href=\"https://docs.rs/openssl/latest/openssl/#vendored\" rel=\"nofollow\">vendored\u003C/a> feature, enabled, you will need to install the following dependencies:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">sudo\u003C/span> \u003Cspan class=\"token function\">apt-get\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> pkg-config libssl-dev \u003Cspan class=\"token function\">make\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1m5k4cs\">Now, we will build the tracker and create the storage folders where persistent data like databases will be stored:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">git clone https://github.com/torrust/torrust-tracker.git \\\n  &amp;&amp; cd torrust-tracker \\\n  &amp;&amp; cargo build \\\n  &amp;&amp; mkdir -p ./storage/tracker/lib/database \\\n  &amp;&amp; mkdir -p ./storage/tracker/lib/tls \\\n  &amp;&amp; mkdir -p ./storage/tracker/etc\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-10bhhza\">You can run the Tracker with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">cargo\u003C/span> run\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> NOTICE: You do not need to change the default values for development.\u003C/div> \u003Cp data-svelte-h=\"svelte-pmsag2\">After running the Tracker with \u003Ccode>cargo run\u003C/code> you should see the following output:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">Finished &#96;dev&#96; profile [optimized + debuginfo] target(s) in 0.09s\n     Running &#96;target/debug/torrust-tracker&#96;\nLoading configuration from default configuration file: &#96;./share/default/config/tracker.development.sqlite3.toml&#96; ...\n2024-05-27T11:39:21.332802857+01:00 [torrust_tracker::bootstrap::logging][INFO] logging initialized.\n2024-05-27T11:39:21.333426924+01:00 [UDP TRACKER][INFO] Starting on: udp://0.0.0.0:6969\n2024-05-27T11:39:21.333462384+01:00 [torrust_tracker::bootstrap::jobs][INFO] TLS not enabled\n2024-05-27T11:39:21.333491694+01:00 [HTTP TRACKER][INFO] Starting on: http://0.0.0.0:7070\n2024-05-27T11:39:21.333599174+01:00 [HTTP TRACKER][INFO] Started on: http://0.0.0.0:7070\n2024-05-27T11:39:21.333615604+01:00 [torrust_tracker::bootstrap::jobs][INFO] TLS not enabled\n2024-05-27T11:39:21.333814923+01:00 [API][INFO] Starting on http://127.0.0.1:1212\n2024-05-27T11:39:21.333839143+01:00 [API][INFO] Started on http://127.0.0.1:1212\n2024-05-27T11:39:21.333883712+01:00 [HEALTH CHECK API][INFO] Starting on: http://127.0.0.1:1313\n2024-05-27T11:39:21.333948472+01:00 [HEALTH CHECK API][INFO] Started on: http://127.0.0.1:1313\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> IMPORTANT: Every time you change the configuration you need to restart the service.\u003C/div> \u003Cp data-svelte-h=\"svelte-1bukm64\">By default, if you don’t specify any \u003Ccode>Config.toml\u003C/code> file, the application will use this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">Loading default configuration file: &#96;./share/default/config/tracker.development.sqlite3.toml&#96; ...\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-biz5qm\">You can’t change that file because it’s a template included in the repo. If you want to set your custom configuration, you can either:\u003C/p> \u003Col data-svelte-h=\"svelte-kbkmy\">\u003Cli>Use a different path for the config file.\u003C/li> \u003Cli>Inject the configuration with an environment variable.\u003C/li>\u003C/ol> \u003Ch2 id=\"custom-config-file\" data-svelte-h=\"svelte-1fqdo4k\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#custom-config-file\">\u003Cspan>#\u003C/span>\u003C/a>Custom config file\u003C/h2> \u003Cp data-svelte-h=\"svelte-vn595v\">First, copy the template file to the storage folder:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">cp\u003C/span> share/default/config/tracker.development.sqlite3.toml storage/tracker/etc/tracker.toml\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1wv0trn\">Then, you can change any value and finally run the tracker with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token assign-left variable\">TORRUST_TRACKER_CONFIG_TOML_PATH\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"./storage/tracker/etc/tracker.toml\"\u003C/span> \u003Cspan class=\"token function\">cargo\u003C/span> run\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1vsfe6t\">That would give you this output:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">TORRUST_TRACKER_CONFIG_TOML_PATH=&quot;./storage/tracker/etc/tracker.toml&quot; cargo run\n    Finished &#96;dev&#96; profile [optimized + debuginfo] target(s) in 0.09s\n     Running &#96;target/debug/torrust-tracker&#96;\nLoading configuration from file: &#96;./storage/tracker/etc/tracker.toml&#96; ...\n2024-05-27T12:52:00.364641064+01:00 [torrust_tracker::bootstrap::logging][INFO] logging initialized.\n2024-05-27T12:52:00.365277963+01:00 [UDP TRACKER][INFO] Starting on: udp://0.0.0.0:6969\n2024-05-27T12:52:00.365309093+01:00 [torrust_tracker::bootstrap::jobs][INFO] TLS not enabled\n2024-05-27T12:52:00.365355473+01:00 [HTTP TRACKER][INFO] Starting on: http://0.0.0.0:7070\n2024-05-27T12:52:00.365496743+01:00 [HTTP TRACKER][INFO] Started on: http://0.0.0.0:7070\n2024-05-27T12:52:00.365504943+01:00 [torrust_tracker::bootstrap::jobs][INFO] TLS not enabled\n2024-05-27T12:52:00.365596502+01:00 [API][INFO] Starting on http://127.0.0.1:1212\n2024-05-27T12:52:00.365599702+01:00 [API][INFO] Started on http://127.0.0.1:1212\n2024-05-27T12:52:00.365616862+01:00 [HEALTH CHECK API][INFO] Starting on: http://127.0.0.1:1313\n2024-05-27T12:52:00.365711472+01:00 [HEALTH CHECK API][INFO] Started on: http://127.0.0.1:1313\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Ch2 id=\"inject-the-configuration-with-an-environment-variable\" data-svelte-h=\"svelte-r84afx\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#inject-the-configuration-with-an-environment-variable\">\u003Cspan>#\u003C/span>\u003C/a>Inject the configuration with an environment variable\u003C/h2> \u003Cp data-svelte-h=\"svelte-f9h3g2\">You can also inject the configuration with:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token assign-left variable\">TORRUST_TRACKER_CONFIG_TOML\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token variable\">\u003Cspan class=\"token variable\">&#96;\u003C/span>\u003Cspan class=\"token function\">cat\u003C/span> share/default/config/tracker.development.sqlite3.toml\u003Cspan class=\"token variable\">&#96;\u003C/span>\u003C/span> \u003Cspan class=\"token function\">cargo\u003C/span> run\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> NOTICE: We load the whole file into the env var. This is not useful for development, but it&#39;s a different way to inject the configuration. It&#39;s used when running the tracker with docker.\u003C/div> \u003Cp data-svelte-h=\"svelte-jferun\">The response should be like this:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">json\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-json\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-json\">\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\t\u003Cspan class=\"token property\">\"torrents\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"seeders\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"completed\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"leechers\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp4_connections_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp4_announces_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp4_scrapes_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp6_connections_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp6_announces_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"tcp6_scrapes_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp4_connections_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp4_announces_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp4_scrapes_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp6_connections_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp6_announces_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\t\u003Cspan class=\"token property\">\"udp6_scrapes_handled\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1pa1388\">For more details about the Torrust Tracker, check the \u003Ca href=\"https://docs.rs/torrust-tracker/\" rel=\"nofollow\">Tracker documentation\u003C/a>.\u003C/p> \u003Ch2 id=\"set-up-the-torrust-index\" data-svelte-h=\"svelte-ezkl0q\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#set-up-the-torrust-index\">\u003Cspan>#\u003C/span>\u003C/a>Set Up the Torrust Index\u003C/h2> \u003Cp data-svelte-h=\"svelte-wv36gp\">This tutorial has been tested with this Rust version:\u003C/p> \u003Cul data-svelte-h=\"svelte-1xkqa0c\">\u003Cli>rustc 1.80.0-nightly (9cdfe285c 2024-05-22)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-koifhr\">To run the tests you will also need to install a command line tool to handle torrent files called \u003Ca href=\"https://github.com/casey/intermodal\" rel=\"nofollow\">imdl\u003C/a>. You can install it with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">cargo\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> imdl\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1cwintg\">You will also need to install a tool for database migrations if you are going to make changes to the database schema. We are using \u003Ca href=\"https://github.com/launchbadge/sqlx\" rel=\"nofollow\">SQLx\u003C/a>. You can install it with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token function\">cargo\u003C/span> \u003Cspan class=\"token function\">install\u003C/span> sqlx-cli\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-qyfhk7\">We will now clone the \u003Ccode>torrust-index\u003C/code> repository:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">  git clone https://github.com/torrust/torrust-index.git \\\n  &amp;&amp; cd torrust-index \\\n  &amp;&amp; cargo build \\\n  &amp;&amp; mkdir -p ./storage/index/lib/database \\\n  &amp;&amp; mkdir -p ./storage/index/lib/tls\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-jh7nwo\">You can run the Torrust Index with the following commands:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token assign-left variable\">TORRUST_INDEX_API_CORS_PERMISSIVE\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>true \u003Cspan class=\"token function\">cargo\u003C/span> run\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-coqvj0\">As you can see we are using the environment variable \u003Ccode>TORRUST_IDX_BACK_CORS_PERMISSIVE\u003C/code> to enable a permissive CORS policy. The default port for the Backend is \u003Ccode>3001\u003C/code> and for the web server serving the frontend application is \u003Ccode>3000\u003C/code>. Since they are different ports, we need to tell the backend to allow requests from a different port so that the frontend can make request to the API. To know more about CORS, check the \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\" rel=\"nofollow\">Mozilla CORS documentation\u003C/a>.\u003C/p> \u003Cp data-svelte-h=\"svelte-vvxm0\">After running the Index with \u003Ccode>TORRUST_INDEX_API_CORS_PERMISSIVE=true cargo run\u003C/code> you should see the following output:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">Loading configuration from default configuration file: &#96;./share/default/config/index.development.sqlite3.toml&#96; ...\n2024-05-27T12:56:25.300980998+01:00 [torrust_index::bootstrap::logging][INFO] logging initialized.\n2024-05-27T12:56:25.425949219+01:00 [torrust_index::web::api::server][INFO] TLS not enabled\n2024-05-27T12:56:25.425976429+01:00 [torrust_index::console::cronjobs::tracker_statistics_importer][INFO] Tracker statistics importer launcher started\n2024-05-27T12:56:25.426077258+01:00 [torrust_index::console::cronjobs::tracker_statistics_importer][INFO] Tracker statistics importer cronjob starting ...\n2024-05-27T12:56:25.426233288+01:00 [torrust_index::web::api::server][INFO] Starting API server with net config: 0.0.0.0:3001 ...\n2024-05-27T12:56:25.426290848+01:00 [torrust_index::console::cronjobs::tracker_statistics_importer][INFO] Tracker statistics importer API server listening on http://127.0.0.1:3002\n2024-05-27T12:56:25.426250898+01:00 [torrust_index::console::cronjobs::tracker_statistics_importer][INFO] Running tracker statistics importer every 2000 milliseconds ...\n2024-05-27T12:56:25.427603675+01:00 [torrust_index::web::api::server][INFO] API server listening on http://0.0.0.0:3001\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1gkdnwv\">You should be able to load the API entrypoint on \u003Ca href=\"http://0.0.0.0:3001/\" rel=\"nofollow\">http://0.0.0.0:3001/\u003C/a>\u003C/p> \u003Cimg srcset=\"/images/posts/torrust-backend-api-entrypoint-response-screenshot.png, /images/posts/torrust-backend-api-entrypoint-response-screenshot.png, /images/posts/torrust-backend-api-entrypoint-response-screenshot.png\" src=\"/images/posts/torrust-backend-api-entrypoint-response-screenshot.png\" alt=\"Screenshot of Torrust Backend API entrypoint response\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-1p9zi40\">For more details about the Torrust Index Backend, check the \u003Ca href=\"https://docs.rs/torrust-index/\" rel=\"nofollow\">Index Backend documentation\u003C/a>.\u003C/p> \u003Ch2 id=\"set-up-the-torrust-index-gui\" data-svelte-h=\"svelte-g4vxgr\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#set-up-the-torrust-index-gui\">\u003Cspan>#\u003C/span>\u003C/a>Set Up the Torrust Index GUI\u003C/h2> \u003Cp data-svelte-h=\"svelte-lnsdwq\">At the time of writing, the Index GUI requires:\u003C/p> \u003Cul data-svelte-h=\"svelte-1xzovqr\">\u003Cli>Node: \u003Ccode>^v20.12.2\u003C/code>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-brkedy\">The frontend is a \u003Ca href=\"https://nuxt.com/\" rel=\"nofollow\">Nuxt\u003C/a> application.\u003C/p> \u003Cp data-svelte-h=\"svelte-1ddgx9w\">The last repository we need to clone is the \u003Ccode>torrust-index-gui\u003C/code> repository . Remember to install Node.js and we need to be in the torrust folder to clone the repository.\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-terminal\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-terminal\">git clone https://github.com/torrust/torrust-index-gui.git \\\n  &amp;&amp; cd torrust-index-gui \\\n  &amp;&amp; npm install \\\n  &amp;&amp; cp .env.local .env \\\n  &amp;&amp; npm run dev\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-ln4r1w\">You should see the following output:\u003C/p> \u003Cimg srcset=\"/images/posts/how-to-setup-the-development-environment/npm-run-dev-output.png, /images/posts/how-to-setup-the-development-environment/npm-run-dev-output.png, /images/posts/how-to-setup-the-development-environment/npm-run-dev-output.png\" src=\"/images/posts/how-to-setup-the-development-environment/npm-run-dev-output.png\" alt=\"Screenshot of Torrust Index GUI running from the terminal\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-hzic0x\">Go to \u003Ca href=\"http://localhost:3000/torrents\" rel=\"nofollow\">http://localhost:3000/torrents\u003C/a> and you should see the torrent list page page:\u003C/p> \u003Cimg srcset=\"/images/posts/how-to-setup-the-development-environment/index-gui-after-fresh-install.png, /images/posts/how-to-setup-the-development-environment/index-gui-after-fresh-install.png, /images/posts/how-to-setup-the-development-environment/index-gui-after-fresh-install.png\" src=\"/images/posts/how-to-setup-the-development-environment/index-gui-after-fresh-install.png\" alt=\"Screenshot of torrent list page on the browser\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj\"> \u003Cp data-svelte-h=\"svelte-jvt5ml\">For more details about the Torrust Index GUI, check the \u003Ca href=\"https://github.com/torrust/torrust-index-gui\" rel=\"nofollow\">Index GUI documentation\u003C/a>.\u003C/p> \u003Ch2 id=\"application-setup\" data-svelte-h=\"svelte-1wcjsvs\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#application-setup\">\u003Cspan>#\u003C/span>\u003C/a>Application Setup\u003C/h2> \u003Cp data-svelte-h=\"svelte-540nc4\">There are some public pages like the torrent list or torrent details pages. But there are some pages that require authentication like the admin pages or the pages for uploading or editing torrents.\u003C/p> \u003Cp data-svelte-h=\"svelte-hho5az\">To access those pages you need to create an account. You can do it from the signup page:\u003C/p> \u003Cp data-svelte-h=\"svelte-cpmctb\">\u003Ca href=\"http://localhost:3000/signup\" rel=\"nofollow\">http://localhost:3000/signup\u003C/a>\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> The first user created will be the \u003Ccode data-svelte-h=\"svelte-ik7s6n\">admin\u003C/code> user.\u003C/div> \u003Ch2 id=\"development-tools\" data-svelte-h=\"svelte-1dtp2xb\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#development-tools\">\u003Cspan>#\u003C/span>\u003C/a>Development tools\u003C/h2> \u003Cp data-svelte-h=\"svelte-vse8x8\">We found some tools very useful to develop the Torrust Tracker and Index. We hope you find them useful too.\u003C/p> \u003Cul data-svelte-h=\"svelte-xyysxk\">\u003Cli>DB Browser for SQLite: \u003Ca href=\"https://sqlitebrowser.org/\" rel=\"nofollow\">https://sqlitebrowser.org/\u003C/a>\u003C/li> \u003Cli>BitTorrent client: qBittorrent \u003Ca href=\"https://www.qbittorrent.org/\" rel=\"nofollow\">https://www.qbittorrent.org/\u003C/a>\u003C/li> \u003Cli>Torrent file editor: imdl \u003Ca href=\"https://github.com/casey/intermodal\" rel=\"nofollow\">https://github.com/casey/intermodal\u003C/a>\u003C/li> \u003Cli>DaisyUI component library: \u003Ca href=\"https://daisyui.com/components/\" rel=\"nofollow\">https://daisyui.com/components/\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1czzs8f\">As you can see, the Torrust Tracker and Index are very easy to set up. We hope you find this guide useful. You might have problems:\u003C/p> \u003Cul data-svelte-h=\"svelte-1o01036\">\u003Cli>Setting up some of the projects on Windows. \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues/325\" rel=\"nofollow\">We are working on it\u003C/a>.\u003C/li> \u003Cli>Or with some missing system dependencies.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1e9qm2v\">If you have any questions or issues please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-4xje26\">\u003Cli>Torrust Tracker: \u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-tracker/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index: \u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index/issues\u003C/a>\u003C/li> \u003Cli>Torrust Index GUI: \u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">https://github.com/torrust/torrust-index-gui/issues\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>",{"title":141,"slug":142,"coverImage":143,"date":144,"updated":6,"excerpt":145,"contributor":24,"contributorSlug":25,"tags":146,"hidden":12,"html":149,"readingTime":150},{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":333,"hidden":12,"html":334,"readingTime":109,"relatedPosts":335},[54,72,73]," \u003Cdiv class=\"flex svelte-19d8qsr\"> \u003Cdiv class=\" svelte-13ebny9\" style=\"position: relative;\">\u003Cdiv class=\"svelte-13ebny9\">\u003Cdiv style=\"display: contents; --toc-active-color:rgba(255, 49, 0, 0.96); --toc-li-hover-color:rgba(255, 49, 0, 0.96); --toc-active-bg:transparent;\"> \u003Caside class=\"toc svelte-1bzt6aj   mobile\"  aria-hidden=\"false\">\u003Cbutton aria-label=\"Open table of contents\" class=\"svelte-1bzt6aj\">  \u003Csvg width=\"1em\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\u003Cpath d=\"M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z\">\u003C/path>\u003C/svg> \u003C/button> \u003C/aside>\u003C/div>\u003C/div>\u003C/div> \u003Cdiv class=\"svelte-4jsat1\">\u003Cp data-svelte-h=\"svelte-bew7i4\">If you want to try the Torrust Index \u003Cstrong>demo\u003C/strong> on your computer, you can easily run it with Git and Docker. This guide will explain how to setup the demo on your own computer in \u003Cstrong>a few seconds\u003C/strong>.\u003C/p> \u003Ch2 id=\"requirements\" data-svelte-h=\"svelte-d9t7ph\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#requirements\">\u003Cspan>#\u003C/span>\u003C/a>Requirements\u003C/h2> \u003Cp data-svelte-h=\"svelte-rad3cl\">You are going to need the following tools:\u003C/p> \u003Cul data-svelte-h=\"svelte-1iphsw0\">\u003Cli>Git\u003C/li> \u003Cli>Docker\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-zalwqu\">At the time of writing, we are using Git version \u003Ccode>2.39.2\u003C/code> and Docker version \u003Ccode>26.1.3\u003C/code>, but it should work with any recent version.\u003C/p> \u003Cp data-svelte-h=\"svelte-1u2axvt\">By default, the demo uses SQLite3 as database driver, but you can also use MySQL. If you want to use SQLite3, you do not need to install anything else. If you want to take a look at the internal database structure or data, you can install \u003Ca href=\"https://sqlitebrowser.org/\" rel=\"nofollow\">DB Browser for SQLite\u003C/a>.\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> Although we use some small bash scripts, you can run the demo on different operating systems by executing the docker-compose command manually. We have tested it on Linux.\u003C/div> \u003Ch2 id=\"running-the-demo\" data-svelte-h=\"svelte-103hfc0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#running-the-demo\">\u003Cspan>#\u003C/span>\u003C/a>Running the demo\u003C/h2> \u003Cp data-svelte-h=\"svelte-1ung1ed\">We are going to use a temporary directory to run the demo. You can install the demo with the following commands:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">mkdir -p /tmp/torrust \\\n  &amp;&amp; cd /tmp/torrust \\\n  &amp;&amp; git clone git@github.com:torrust/torrust-compose.git \\\n  &amp;&amp; cd torrust-compose/demo \\\n  &amp;&amp; ./bin/install.sh\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-1yy75v2\">To start the application:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">./bin/start.sh\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-v2dpew\">To stop the application:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">terminal\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">./bin/stop.sh\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cp data-svelte-h=\"svelte-a20ena\">After starting the demo you can check that all container are running with the following command:\u003C/p> \u003Cdiv class=\"code-block svelte-11qxx87\"> \u003Cdiv class=\"lang svelte-11qxx87\">output\u003C/div> \u003Cbutton class=\"copy-button copy-button-gray svelte-11qxx87\">\u003C/button> \u003Cdiv class=\"code-content\">\u003Cpre class=\"language-s\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-s\">$ docker ps\nCONTAINER ID   IMAGE                       COMMAND                  CREATED         STATUS                            PORTS                                                                                                      NAMES\ne380a435eede   torrust/index-gui:develop   &quot;/usr/local/bin/entrypoint.sh&quot;   4 seconds ago   Up 3 seconds (health: starting)   0.0.0.0:3000-&gt;3000/tcp, :::3000-&gt;3000/tcp, 0.0.0.0:24678-&gt;24678/tcp, :::24678-&gt;24678/tcp                   torrust-index-gui-1\ndb8f7c679b66   torrust/index:develop       &quot;/usr/local/bin/entrypoint.sh&quot;   5 seconds ago   Up 3 seconds (health: starting)   0.0.0.0:3001-&gt;3001/tcp, :::3001-&gt;3001/tcp                                                                  torrust-index-1\n820720c37d80   torrust/tracker:develop     &quot;/usr/local/bin/entrypoint.sh&quot;   5 seconds ago   Up 4 seconds (health: starting)   1313/tcp, 0.0.0.0:1212-&gt;1212/tcp, :::1212-&gt;1212/tcp, 7070/tcp, 0.0.0.0:6969-&gt;6969/udp, :::6969-&gt;6969/udp   torrust-tracker-1\na9668e78f3cc   mysql:8.0                   &quot;docker-entrypoint.s…&quot;   5 seconds ago   Up 4 seconds (health: starting)   0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp                                                       torrust-mysql-1\nc10ad938b283   dockage/mailcatcher:0.8.2   &quot;entrypoint mailcatcher&quot;   5 seconds ago   Up 4 seconds                      0.0.0.0:1025-&gt;1025/tcp, :::1025-&gt;1025/tcp, 0.0.0.0:1080-&gt;1080/tcp, :::1080-&gt;1080/tcp                       torrust-mailcatcher-1\n\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/div>\u003C/div> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> IMPORTANT! We use the latest commit from the develop branches of the Torrust repositories. If you want to use the latest stable version, you can change the tag for the docker images in the `docker-compose.yml` file.\u003C/div> \u003Cp data-svelte-h=\"svelte-qp6dwn\">Once the demo is running, you go to \u003Ca href=\"http://localhost:3000/\" rel=\"nofollow\">http://localhost:3000/\u003C/a> to start using it.\u003C/p> \u003Ch2 id=\"application-setup\" data-svelte-h=\"svelte-1wcjsvs\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#application-setup\">\u003Cspan>#\u003C/span>\u003C/a>Application Setup\u003C/h2> \u003Cp data-svelte-h=\"svelte-161iicw\">The application has some public pages like the torrent list or torrent details pages. But other pages require authentication. To access those pages you need to create an account. You can do it from the signup page:\u003C/p> \u003Cp data-svelte-h=\"svelte-cpmctb\">\u003Ca href=\"http://localhost:3000/signup\" rel=\"nofollow\">http://localhost:3000/signup\u003C/a>\u003C/p> \u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div> The first user registered will be the \u003Ccode data-svelte-h=\"svelte-ik7s6n\">admin\u003C/code> user. The application only has one admin user.\u003C/div> \u003Cp data-svelte-h=\"svelte-1hm9zmc\">The application is very easy to use but you can find comprehensive documentation in the following links:\u003C/p> \u003Cul data-svelte-h=\"svelte-46v7wy\">\u003Cli>\u003Ca href=\"https://torrust.github.io/torrust-index-gui-user-guide/\" rel=\"nofollow\">Torrust Index GUI User’s Guide\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-gui/blob/develop/docs/index.md\" rel=\"nofollow\">Torrust Index GUI\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://docs.rs/torrust-index%3E\" rel=\"nofollow\">Torrust Index\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://docs.rs/torrust-tracker\" rel=\"nofollow\">Torrust Tracker\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"advanced-setup\" data-svelte-h=\"svelte-1efp6lo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#advanced-setup\">\u003Cspan>#\u003C/span>\u003C/a>Advanced Setup\u003C/h2> \u003Cp data-svelte-h=\"svelte-1y02r6p\">You can modify the configuration of the demo to use different ports, database drivers, etcetera. But we are going to use the default configuration in this guide.\u003C/p> \u003Cp data-svelte-h=\"svelte-lvns2y\">If you want to change the configuration for the Tracker or the Index Backend, you can do it by modifying the \u003Ccode>config-tracker.local.toml\u003C/code> or \u003Ccode>config-index.local.toml\u003C/code> files and stopping (\u003Ccode>./bin/stop.sh\u003C/code>) and starting (\u003Ccode>./bin/start.sh\u003C/code>) the docker containers again.\u003C/p> \u003Cp data-svelte-h=\"svelte-kj0r6a\">Refer to the documentation of the corresponding application to know more about the configuration options:\u003C/p> \u003Cul data-svelte-h=\"svelte-1m2k50q\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker\" rel=\"nofollow\">Torrust Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index\" rel=\"nofollow\">Torrust Index\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-gui\" rel=\"nofollow\">Torrust Index GUI\u003C/a>\u003C/li>\u003C/ul> \u003Ch2 id=\"conclusion\" data-svelte-h=\"svelte-br5ox0\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#conclusion\">\u003Cspan>#\u003C/span>\u003C/a>Conclusion\u003C/h2> \u003Cp data-svelte-h=\"svelte-1gntbj7\">That’s it. Enjoy the demo! We will publish a new blog post soon explaining how to use the demo for basics tasks like uploading a torrent, adding categories or tags, etcetera.\u003C/p> \u003Cp data-svelte-h=\"svelte-1e9qm2v\">If you have any questions or issues please open an issue on the corresponding repository:\u003C/p> \u003Cul data-svelte-h=\"svelte-fxskft\">\u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-tracker/issues\" rel=\"nofollow\">Torrust Tracker\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index/issues\" rel=\"nofollow\">Torrust Index\u003C/a>\u003C/li> \u003Cli>\u003Ca href=\"https://github.com/torrust/torrust-index-gui/issues\" rel=\"nofollow\">Torrust Index GUI\u003C/a>\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-v20sdj\">We very welcome any contributions to the project!\u003C/p>\u003C/div>\u003C/div>",[336,337,338],{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":329,"hidden":12,"html":330,"readingTime":164},{"title":141,"slug":142,"coverImage":143,"date":144,"updated":6,"excerpt":145,"contributor":24,"contributorSlug":25,"tags":146,"hidden":12,"html":149,"readingTime":150},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164,"relatedPosts":340},[341,342,343],{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":333,"hidden":12,"html":334,"readingTime":109},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":329,"hidden":12,"html":330,"readingTime":164,"relatedPosts":345},[346,347,348],{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":71,"hidden":12,"html":74,"readingTime":16},{"title":65,"slug":66,"coverImage":67,"date":68,"updated":69,"excerpt":70,"contributor":24,"contributorSlug":25,"tags":333,"hidden":12,"html":334,"readingTime":109},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":277,"slug":278,"coverImage":279,"date":280,"updated":6,"excerpt":281,"tags":282,"hidden":12,"html":283,"readingTime":109,"relatedPosts":350},[351,352,353],{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":289,"hidden":12,"html":290,"readingTime":205},{"title":277,"slug":278,"coverImage":279,"date":280,"updated":6,"excerpt":281,"tags":286,"hidden":12,"html":287,"readingTime":109,"relatedPosts":355},[356,357,358],{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":200,"hidden":12,"html":204,"readingTime":205},{"title":153,"slug":154,"coverImage":155,"date":156,"updated":157,"excerpt":158,"contributor":24,"contributorSlug":25,"tags":159,"hidden":12,"html":163,"readingTime":164},{"title":195,"slug":196,"coverImage":197,"date":198,"updated":6,"excerpt":199,"contributor":24,"contributorSlug":25,"tags":289,"hidden":12,"html":290,"readingTime":205}],"uses":{"url":1}},null]}

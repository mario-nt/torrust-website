var x;function J(t){return typeof t<"u"?t:!0}function Z(t){const e=Array(t);for(let i=0;i<t;i++)e[i]=m();return e}function m(){return Object.create(null)}function dt(t,e){return e.length-t.length}function k(t){return typeof t=="string"}function F(t){return typeof t=="object"}function K(t){return typeof t=="function"}function tt(t,e){var i=mt;if(t&&(e&&(t=_(t,e)),this.H&&(t=_(t,this.H)),this.J&&1<t.length&&(t=_(t,this.J)),i||i==="")){if(e=t.split(i),this.filter){t=this.filter,i=e.length;const n=[];for(let s=0,r=0;s<i;s++){const o=e[s];o&&!t[o]&&(n[r++]=o)}t=n}else t=e;return t}return t}const mt=/[\p{Z}\p{S}\p{P}\p{C}]+/u,xt=/[\u0300-\u036f]/g;function Q(t,e){const i=Object.keys(t),n=i.length,s=[];let r="",o=0;for(let h=0,l,c;h<n;h++)l=i[h],(c=t[l])?(s[o++]=w(e?"(?!\\b)"+l+"(\\b|_)":l),s[o++]=c):r+=(r?"|":"")+l;return r&&(s[o++]=w(e?"(?!\\b)("+r+")(\\b|_)":"("+r+")"),s[o]=""),s}function _(t,e){for(let i=0,n=e.length;i<n&&(t=t.replace(e[i],e[i+1]),t);i+=2);return t}function w(t){return new RegExp(t,"g")}function et(t){let e="",i="";for(let n=0,s=t.length,r;n<s;n++)(r=t[n])!==i&&(e+=i=r);return e}var yt={encode:it,F:!1,G:""};function it(t){return tt.call(this,(""+t).toLowerCase(),!1)}const nt={},j={};function st(t){D(t,"add"),D(t,"append"),D(t,"search"),D(t,"update"),D(t,"remove")}function D(t,e){t[e+"Async"]=function(){const i=this,n=arguments;var s=n[n.length-1];let r;return K(s)&&(r=s,delete n[n.length-1]),s=new Promise(function(o){setTimeout(function(){i.async=!0;const h=i[e].apply(i,n);i.async=!1,o(h)})}),r?(s.then(r),this):s}}function rt(t,e,i,n){const s=t.length;let r=[],o,h,l=0;n&&(n=[]);for(let c=s-1;0<=c;c--){const u=t[c],y=u.length,p=m();let d=!o;for(let f=0;f<y;f++){const g=u[f],A=g.length;if(A)for(let C=0,v,a;C<A;C++)if(a=g[C],o){if(o[a]){if(!c){if(i)i--;else if(r[l++]=a,l===e)return r}(c||n)&&(p[a]=1),d=!0}if(n&&(v=(h[a]||0)+1,h[a]=v,v<s)){const B=n[v-2]||(n[v-2]=[]);B[B.length]=a}}else p[a]=1}if(n)o||(h=p);else if(!d)return[];o=p}if(n)for(let c=n.length-1,u,y;0<=c;c--){u=n[c],y=u.length;for(let p=0,d;p<y;p++)if(d=u[p],!o[d]){if(i)i--;else if(r[l++]=d,l===e)return r;o[d]=1}}return r}function wt(t,e){const i=m(),n=m(),s=[];for(let r=0;r<t.length;r++)i[t[r]]=1;for(let r=0,o;r<e.length;r++){o=e[r];for(let h=0,l;h<o.length;h++)l=o[h],i[l]&&!n[l]&&(n[l]=1,s[s.length]=l)}return s}function $(t){this.l=t!==!0&&t,this.cache=m(),this.h=[]}function ht(t,e,i){F(t)&&(t=t.query);let n=this.cache.get(t);return n||(n=this.search(t,e,i),this.cache.set(t,n)),n}$.prototype.set=function(t,e){if(!this.cache[t]){var i=this.h.length;for(i===this.l?delete this.cache[this.h[i-1]]:i++,--i;0<i;i--)this.h[i]=this.h[i-1];this.h[0]=t}this.cache[t]=e};$.prototype.get=function(t){const e=this.cache[t];if(this.l&&e&&(t=this.h.indexOf(t))){const i=this.h[t-1];this.h[t-1]=this.h[t],this.h[t]=i}return e};const kt={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function ot(t,e,i,n,s,r,o,h){setTimeout(function(){const l=t(i?i+"."+n:n,JSON.stringify(o));l&&l.then?l.then(function(){e.export(t,e,i,s,r+1,h)}):e.export(t,e,i,s,r+1,h)})}function O(t,e){if(!(this instanceof O))return new O(t);var i;if(t){k(t)?t=kt[t]:(i=t.preset)&&(t=Object.assign({},i[i],t)),i=t.charset;var n=t.lang;k(i)&&(i.indexOf(":")===-1&&(i+=":default"),i=j[i]),k(n)&&(n=nt[n])}else t={};let s,r,o=t.context||{};if(this.encode=t.encode||i&&i.encode||it,this.register=e||m(),this.D=s=t.resolution||9,this.G=e=i&&i.G||t.tokenize||"strict",this.depth=e==="strict"&&o.depth,this.l=J(o.bidirectional),this.s=r=J(t.optimize),this.m=J(t.fastupdate),this.B=t.minlength||1,this.C=t.boost,this.map=r?Z(s):m(),this.A=s=o.resolution||1,this.h=r?Z(s):m(),this.F=i&&i.F||t.rtl,this.H=(e=t.matcher||n&&n.H)&&Q(e,!1),this.J=(e=t.stemmer||n&&n.J)&&Q(e,!0),i=e=t.filter||n&&n.filter){i=e,n=m();for(let h=0,l=i.length;h<l;h++)n[i[h]]=1;i=n}this.filter=i,this.cache=(e=t.cache)&&new $(e)}x=O.prototype;x.append=function(t,e){return this.add(t,e,!0)};x.add=function(t,e,i,n){if(e&&(t||t===0)){if(!n&&!i&&this.register[t])return this.update(t,e);if(e=this.encode(e),n=e.length){const c=m(),u=m(),y=this.depth,p=this.D;for(let d=0;d<n;d++){let f=e[this.F?n-1-d:d];var s=f.length;if(f&&s>=this.B&&(y||!u[f])){var r=P(p,n,d),o="";switch(this.G){case"full":if(2<s){for(r=0;r<s;r++)for(var h=s;h>r;h--)if(h-r>=this.B){var l=P(p,n,d,s,r);o=f.substring(r,h),I(this,u,o,l,t,i)}break}case"reverse":if(1<s){for(h=s-1;0<h;h--)o=f[h]+o,o.length>=this.B&&I(this,u,o,P(p,n,d,s,h),t,i);o=""}case"forward":if(1<s){for(h=0;h<s;h++)o+=f[h],o.length>=this.B&&I(this,u,o,r,t,i);break}default:if(this.C&&(r=Math.min(r/this.C(e,f,d)|0,p-1)),I(this,u,f,r,t,i),y&&1<n&&d<n-1){for(s=m(),o=this.A,r=f,h=Math.min(y+1,n-d),s[r]=1,l=1;l<h;l++)if((f=e[this.F?n-1-d-l:d+l])&&f.length>=this.B&&!s[f]){s[f]=1;const g=this.l&&f>r;I(this,c,g?r:f,P(o+(n/2>o?0:1),n,d,h-1,l-1),t,i,g?f:r)}}}}}this.m||(this.register[t]=1)}}return this};function P(t,e,i,n,s){return i&&1<t?e+(n||0)<=t?i+(s||0):(t-1)/(e+(n||0))*(i+(s||0))+1|0:0}function I(t,e,i,n,s,r,o){let h=o?t.h:t.map;(!e[i]||o&&!e[i][o])&&(t.s&&(h=h[n]),o?(e=e[i]||(e[i]=m()),e[o]=1,h=h[o]||(h[o]=m())):e[i]=1,h=h[i]||(h[i]=[]),t.s||(h=h[n]||(h[n]=[])),r&&h.includes(s)||(h[h.length]=s,t.m&&(t=t.register[s]||(t.register[s]=[]),t[t.length]=h)))}x.search=function(t,e,i){i||(!e&&F(t)?(i=t,t=i.query):F(e)&&(i=e));let n=[],s,r,o=0;if(i){t=i.query||t,e=i.limit,o=i.offset||0;var h=i.context;r=i.suggest}if(t&&(t=this.encode(""+t),s=t.length,1<s)){i=m();var l=[];for(let u=0,y=0,p;u<s;u++)if((p=t[u])&&p.length>=this.B&&!i[p])if(this.s||r||this.map[p])l[y++]=p,i[p]=1;else return n;t=l,s=t.length}if(!s)return n;e||(e=100),h=this.depth&&1<s&&h!==!1,i=0;let c;h?(c=t[0],i=1):1<s&&t.sort(dt);for(let u,y;i<s;i++){if(y=t[i],h?(u=V(this,n,r,e,o,s===2,y,c),r&&u===!1&&n.length||(c=y)):u=V(this,n,r,e,o,s===1,y),u)return u;if(r&&i===s-1){if(l=n.length,!l){if(h){h=0,i=-1;continue}return n}if(l===1)return lt(n[0],e,o)}}return rt(n,e,o,r)};function V(t,e,i,n,s,r,o,h){let l=[],c=h?t.h:t.map;if(t.s||(c=X(c,o,h,t.l)),c){let u=0;const y=Math.min(c.length,h?t.A:t.D);for(let p=0,d=0,f,g;p<y&&!((f=c[p])&&(t.s&&(f=X(f,o,h,t.l)),s&&f&&r&&(g=f.length,g<=s?(s-=g,f=null):(f=f.slice(s),s=0)),f&&(l[u++]=f,r&&(d+=f.length,d>=n))));p++);if(u){if(r)return lt(l,n,0);e[e.length]=l;return}}return!i&&l}function lt(t,e,i){return t=t.length===1?t[0]:[].concat.apply([],t),i||t.length>e?t.slice(i,i+e):t}function X(t,e,i,n){return i?(n=n&&e>i,t=(t=t[n?e:i])&&t[n?i:e]):t=t[e],t}x.contain=function(t){return!!this.register[t]};x.update=function(t,e){return this.remove(t).add(t,e)};x.remove=function(t,e){const i=this.register[t];if(i){if(this.m)for(let n=0,s;n<i.length;n++)s=i[n],s.splice(s.indexOf(t),1);else H(this.map,t,this.D,this.s),this.depth&&H(this.h,t,this.A,this.s);if(e||delete this.register[t],this.cache){e=this.cache;for(let n=0,s,r;n<e.h.length;n++)r=e.h[n],s=e.cache[r],s.includes(t)&&(e.h.splice(n--,1),delete e.cache[r])}}return this};function H(t,e,i,n,s){let r=0;if(t.constructor===Array)if(s)e=t.indexOf(e),e!==-1?1<t.length&&(t.splice(e,1),r++):r++;else{s=Math.min(t.length,i);for(let o=0,h;o<s;o++)(h=t[o])&&(r=H(h,e,i,n,s),n||r||delete t[o])}else for(let o in t)(r=H(t[o],e,i,n,s))||delete t[o];return r}x.searchCache=ht;x.export=function(t,e,i,n,s,r){let o=!0;typeof r>"u"&&(o=new Promise(c=>{r=c}));let h,l;switch(s||(s=0)){case 0:if(h="reg",this.m){l=m();for(let c in this.register)l[c]=1}else l=this.register;break;case 1:h="cfg",l={doc:0,opt:this.s?1:0};break;case 2:h="map",l=this.map;break;case 3:h="ctx",l=this.h;break;default:typeof i>"u"&&r&&r();return}return ot(t,e||this,i,h,n,s,l,r),o};x.import=function(t,e){if(e)switch(k(e)&&(e=JSON.parse(e)),t){case"cfg":this.s=!!e.opt;break;case"reg":this.m=!1,this.register=e;break;case"map":this.map=e;break;case"ctx":this.h=e}};st(O.prototype);function at(t){t=t.data;var e=self._index;const i=t.args;var n=t.task;switch(n){case"init":n=t.options||{},t=t.factory,e=n.encode,n.cache=!1,e&&e.indexOf("function")===0&&(n.encode=Function("return "+e)()),t?(Function("return "+t)()(self),self._index=new self.FlexSearch.Index(n),delete self.FlexSearch):self._index=new O(n);break;default:t=t.id,e=e[n].apply(e,i),postMessage(n==="search"?{id:t,msg:e}:{id:t})}}let Y=0;function q(t){if(!(this instanceof q))return new q(t);var e;t?K(e=t.encode)&&(t.encode=e.toString()):t={},(e=(self||window)._factory)&&(e=e.toString());const i=typeof window>"u"&&self.exports,n=this;this.o=vt(e,i,t.worker),this.h=m(),this.o&&(i?this.o.on("message",function(s){n.h[s.id](s.msg),delete n.h[s.id]}):this.o.onmessage=function(s){s=s.data,n.h[s.id](s.msg),delete n.h[s.id]},this.o.postMessage({task:"init",factory:e,options:t}))}z("add");z("append");z("search");z("update");z("remove");function z(t){q.prototype[t]=q.prototype[t+"Async"]=function(){const e=this,i=[].slice.call(arguments);var n=i[i.length-1];let s;return K(n)&&(s=n,i.splice(i.length-1,1)),n=new Promise(function(r){setTimeout(function(){e.h[++Y]=r,e.o.postMessage({task:t,id:Y,args:i})})}),s?(n.then(s),this):n}}function vt(t,e,i){let n;try{n=e?new(require("worker_threads")).Worker(__dirname+"/node/node.js"):t?new Worker(URL.createObjectURL(new Blob(["onmessage="+at.toString()],{type:"text/javascript"}))):new Worker(k(i)?i:"worker/worker.js",{type:"module"})}catch{}return n}function M(t){if(!(this instanceof M))return new M(t);var e=t.document||t.doc||t,i;this.K=[],this.h=[],this.A=[],this.register=m(),this.key=(i=e.key||e.id)&&S(i,this.A)||"id",this.m=J(t.fastupdate),this.C=(i=e.store)&&i!==!0&&[],this.store=i&&m(),this.I=(i=e.tag)&&S(i,this.A),this.l=i&&m(),this.cache=(i=t.cache)&&new $(i),t.cache=!1,this.o=t.worker,this.async=!1,i=m();let n=e.index||e.field||e;k(n)&&(n=[n]);for(let s=0,r,o;s<n.length;s++)r=n[s],k(r)||(o=r,r=r.field),o=F(o)?Object.assign({},t,o):t,this.o&&(i[r]=new q(o),i[r].o||(this.o=!1)),this.o||(i[r]=new O(o,this.register)),this.K[s]=S(r,this.A),this.h[s]=r;if(this.C)for(t=e.store,k(t)&&(t=[t]),e=0;e<t.length;e++)this.C[e]=S(t[e],this.A);this.index=i}function S(t,e){const i=t.split(":");let n=0;for(let s=0;s<i.length;s++)t=i[s],0<=t.indexOf("[]")&&(t=t.substring(0,t.length-2))&&(e[n]=!0),t&&(i[n++]=t);return n<i.length&&(i.length=n),1<n?i:i[0]}function L(t,e){if(k(e))t=t[e];else for(let i=0;t&&i<e.length;i++)t=t[e[i]];return t}function R(t,e,i,n,s){if(t=t[s],n===i.length-1)e[s]=t;else if(t)if(t.constructor===Array)for(e=e[s]=Array(t.length),s=0;s<t.length;s++)R(t,e,i,n,s);else e=e[s]||(e[s]=m()),s=i[++n],R(t,e,i,n,s)}function W(t,e,i,n,s,r,o,h){if(t=t[o])if(n===e.length-1){if(t.constructor===Array){if(i[n]){for(e=0;e<t.length;e++)s.add(r,t[e],!0,!0);return}t=t.join(" ")}s.add(r,t,h,!0)}else if(t.constructor===Array)for(o=0;o<t.length;o++)W(t,e,i,n,s,r,o,h);else o=e[++n],W(t,e,i,n,s,r,o,h)}x=M.prototype;x.add=function(t,e,i){if(F(t)&&(e=t,t=L(e,this.key)),e&&(t||t===0)){if(!i&&this.register[t])return this.update(t,e);for(let n=0,s,r;n<this.h.length;n++)r=this.h[n],s=this.K[n],k(s)&&(s=[s]),W(e,s,this.A,0,this.index[r],t,s[0],i);if(this.I){let n=L(e,this.I),s=m();k(n)&&(n=[n]);for(let r=0,o,h;r<n.length;r++)if(o=n[r],!s[o]&&(s[o]=1,h=this.l[o]||(this.l[o]=[]),!i||!h.includes(t))&&(h[h.length]=t,this.m)){const l=this.register[t]||(this.register[t]=[]);l[l.length]=h}}if(this.store&&(!i||!this.store[t])){let n;if(this.C){n=m();for(let s=0,r;s<this.C.length;s++)r=this.C[s],k(r)?n[r]=e[r]:R(e,n,r,0,r[0])}this.store[t]=n||e}}return this};x.append=function(t,e){return this.add(t,e,!0)};x.update=function(t,e){return this.remove(t).add(t,e)};x.remove=function(t){if(F(t)&&(t=L(t,this.key)),this.register[t]){for(var e=0;e<this.h.length&&(this.index[this.h[e]].remove(t,!this.o),!this.m);e++);if(this.I&&!this.m)for(let i in this.l){e=this.l[i];const n=e.indexOf(t);n!==-1&&(1<e.length?e.splice(n,1):delete this.l[i])}this.store&&delete this.store[t],delete this.register[t]}return this};x.search=function(t,e,i,n){i||(!e&&F(t)?(i=t,t=""):F(e)&&(i=e,e=0));let s=[],r=[],o,h,l,c,u,y,p=0;if(i)if(i.constructor===Array)l=i,i=null;else{if(t=i.query||t,l=(o=i.pluck)||i.index||i.field,c=i.tag,h=this.store&&i.enrich,u=i.bool==="and",e=i.limit||e||100,y=i.offset||0,c&&(k(c)&&(c=[c]),!t)){for(let f=0,g;f<c.length;f++)(g=At.call(this,c[f],e,y,h))&&(s[s.length]=g,p++);return p?s:[]}k(l)&&(l=[l])}l||(l=this.h),u=u&&(1<l.length||c&&1<c.length);const d=!n&&(this.o||this.async)&&[];for(let f=0,g,A,C;f<l.length;f++){let v;if(A=l[f],k(A)||(v=A,A=v.field,t=v.query||t,e=v.limit||e,h=v.enrich||h),d)d[f]=this.index[A].searchAsync(t,e,v||i);else{if(n?g=n[f]:g=this.index[A].search(t,e,v||i),C=g&&g.length,c&&C){const a=[];let B=0;u&&(a[0]=[g]);for(let E=0,U,G;E<c.length;E++)U=c[E],(C=(G=this.l[U])&&G.length)&&(B++,a[a.length]=u?[G]:G);B&&(g=u?rt(a,e||100,y||0):wt(g,a),C=g.length)}if(C)r[p]=A,s[p++]=g;else if(u)return[]}}if(d){const f=this;return new Promise(function(g){Promise.all(d).then(function(A){g(f.search(t,e,i,A))})})}if(!p)return[];if(o&&(!h||!this.store))return s[0];for(let f=0,g;f<r.length;f++){if(g=s[f],g.length&&h&&(g=ft.call(this,g)),o)return g;s[f]={field:r[f],result:g}}return s};function At(t,e,i,n){let s=this.l[t],r=s&&s.length-i;if(r&&0<r)return(r>e||i)&&(s=s.slice(i,i+e)),n&&(s=ft.call(this,s)),{tag:t,result:s}}function ft(t){const e=Array(t.length);for(let i=0,n;i<t.length;i++)n=t[i],e[i]={id:n,doc:this.store[n]};return e}x.contain=function(t){return!!this.register[t]};x.get=function(t){return this.store[t]};x.set=function(t,e){return this.store[t]=e,this};x.searchCache=ht;x.export=function(t,e,i,n,s,r){let o;if(typeof r>"u"&&(o=new Promise(h=>{r=h})),s||(s=0),n||(n=0),n<this.h.length){const h=this.h[n],l=this.index[h];e=this,setTimeout(function(){l.export(t,e,s?h:"",n,s++,r)||(n++,s=1,e.export(t,e,h,n,s,r))})}else{let h,l;switch(s){case 1:h="tag",l=this.l,i=null;break;case 2:h="store",l=this.store,i=null;break;default:r();return}ot(t,this,i,h,n,s,l,r)}return o};x.import=function(t,e){if(e)switch(k(e)&&(e=JSON.parse(e)),t){case"tag":this.l=e;break;case"reg":this.m=!1,this.register=e;for(let n=0,s;n<this.h.length;n++)s=this.index[this.h[n]],s.register=e,s.m=!1;break;case"store":this.store=e;break;default:t=t.split(".");const i=t[0];t=t[1],i&&t&&this.index[i].import(t,e)}};st(M.prototype);var Ct={encode:ct,F:!1,G:""};const Ft=[w("[àáâãäå]"),"a",w("[èéêë]"),"e",w("[ìíîï]"),"i",w("[òóôõöő]"),"o",w("[ùúûüű]"),"u",w("[ýŷÿ]"),"y",w("ñ"),"n",w("[çc]"),"k",w("ß"),"s",w(" & ")," and "];function ct(t){var e=t=""+t;return e.normalize&&(e=e.normalize("NFD").replace(xt,"")),tt.call(this,e.toLowerCase(),!t.normalize&&Ft)}var Ot={encode:ut,F:!1,G:"strict"};const jt=/[^a-z0-9]+/,b={b:"p",v:"f",w:"f",z:"s",x:"s",ß:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function ut(t){t=ct.call(this,t).join(" ");const e=[];if(t){const i=t.split(jt),n=i.length;for(let s=0,r,o=0;s<n;s++)if((t=i[s])&&(!this.filter||!this.filter[t])){r=t[0];let h=b[r]||r,l=h;for(let c=1;c<t.length;c++){r=t[c];const u=b[r]||r;u&&u!==l&&(h+=u,l=u)}e[o++]=h}}return e}var qt={encode:gt,F:!1,G:""};const Bt=[w("ae"),"a",w("oe"),"o",w("sh"),"s",w("th"),"t",w("ph"),"f",w("pf"),"f",w("(?![aeo])h(?![aeo])"),"",w("(?!^[aeo])h(?!^[aeo])"),""];function gt(t,e){return t&&(t=ut.call(this,t).join(" "),2<t.length&&(t=_(t,Bt)),e||(1<t.length&&(t=et(t)),t&&(t=t.split(" ")))),t||[]}var Dt={encode:Mt,F:!1,G:""};const It=w("(?!\\b)[aeo]");function Mt(t){return t&&(t=gt.call(this,t,!0),1<t.length&&(t=t.replace(It,"")),1<t.length&&(t=et(t)),t&&(t=t.split(" "))),t||[]}j["latin:default"]=yt;j["latin:simple"]=Ct;j["latin:balance"]=Ot;j["latin:advanced"]=qt;j["latin:extra"]=Dt;const zt={Index:O,Document:M,Worker:q,registerCharset:function(t,e){j[t]=e},registerLanguage:function(t,e){nt[t]=e}};let N,pt;function Pt(t){N=new zt.Index({tokenize:"forward"});const e=t.map(i=>({slug:i.slug,title:i.title,excerpt:i.excerpt||"",tags:i.tags}));e.forEach((i,n)=>{const s=`${i.title} ${i.excerpt} ${i.tags}`;N.add(n,s)}),pt=e}function St(t){const e=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return N.search(e).map(n=>pt[n]).map(({slug:n,title:s,excerpt:r,tags:o})=>({slug:n,title:T(s,e),content:Gt(r,e),tags:o.map(h=>T(h,e))}))}function T(t,e){const i=new RegExp(e,"gi");return t.replaceAll(i,n=>`<mark>${n}</mark>`)}function Gt(t,e,i=1){const n=new RegExp(e,"gi"),s=[];let r=0,o;for(;(o=n.exec(t))!==null&&r<i;)s.push(o.index),r++;return s.map(h=>{const l=Math.max(0,h-20),c=Math.min(t.length,h+80),u=t.substring(l,c).trim();return`...${T(u,e)}...`})}export{Pt as c,St as s};
